<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InstCombineCompares.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InstCombineCompares_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InstCombineCompares.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineCompares_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineCompares.cpp --------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the visitICmp and visitFCmp functions.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombine_8h.html">InstCombine.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/Support/ConstantRange.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/Support/GetElementPtrTypeIterator.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a0772d720f01c3de131e8f60fba99b706">   27</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="InstCombineCompares_8cpp.html#a0772d720f01c3de131e8f60fba99b706">getOne</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(cast&lt;IntegerType&gt;(C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 1);</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// AddOne - Add one to a ConstantInt</span></div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">   32</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(C, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// SubOne - Subtract one from a ConstantInt</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">   36</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">SubOne</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(C, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1));</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">   40</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *V, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Idx) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">return</span> cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#a1cd4ab23f4d32e56a4f8af6505e0adf4">ConstantExpr::getExtractElement</a>(V, Idx));</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ac731f43b6d70551357cc1960dcd22173">   44</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#ac731f43b6d70551357cc1960dcd22173">HasAddOverflow</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Result,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                           <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *In1, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *In2,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                           <span class="keywordtype">bool</span> IsSigned) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (!IsSigned)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">if</span> (In2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">isNegative</a>())</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// AddWithOverflow - Compute Result = In1+In2, returning true if the result</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/// overflowed for this type.</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">   57</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;Result, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *In1,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *In2, <span class="keywordtype">bool</span> IsSigned = <span class="keyword">false</span>) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  Result = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(In1, In2);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(In1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = VTy-&gt;getNumElements(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Idx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(In1-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#ac731f43b6d70551357cc1960dcd22173">HasAddOverflow</a>(<a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(Result, Idx),</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                         <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(In1, Idx),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                         <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(In2, Idx),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                         IsSigned))</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstCombineCompares_8cpp.html#ac731f43b6d70551357cc1960dcd22173">HasAddOverflow</a>(cast&lt;ConstantInt&gt;(Result),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                        cast&lt;ConstantInt&gt;(In1), cast&lt;ConstantInt&gt;(In2),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                        IsSigned);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a63610224f160a6f88abce922a7e99ba8">   78</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a63610224f160a6f88abce922a7e99ba8">HasSubOverflow</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Result,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                           <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *In1, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *In2,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                           <span class="keywordtype">bool</span> IsSigned) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (!IsSigned)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">ugt</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">if</span> (In2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">isNegative</a>())</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">return</span> Result-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(In1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/// SubWithOverflow - Compute Result = In1-In2, returning true if the result</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/// overflowed for this type.</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a70e9984c4d8f47168e6e840fc816ce91">   92</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a70e9984c4d8f47168e6e840fc816ce91">SubWithOverflow</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;Result, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *In1,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *In2, <span class="keywordtype">bool</span> IsSigned = <span class="keyword">false</span>) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  Result = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(In1, In2);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(In1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = VTy-&gt;getNumElements(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Idx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(In1-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#a63610224f160a6f88abce922a7e99ba8">HasSubOverflow</a>(<a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(Result, Idx),</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                         <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(In1, Idx),</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                         <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a>(In2, Idx),</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                         IsSigned))</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstCombineCompares_8cpp.html#a63610224f160a6f88abce922a7e99ba8">HasSubOverflow</a>(cast&lt;ConstantInt&gt;(Result),</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                        cast&lt;ConstantInt&gt;(In1), cast&lt;ConstantInt&gt;(In2),</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                        IsSigned);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/// isSignBitCheck - Given an exploded icmp instruction, return true if the</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/// comparison only checks the sign bit.  If it only checks the sign bit, set</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/// TrueIfSigned if the result of the comparison is true when the input value is</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/// signed.</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aab9d1b39f9f6b722e3b89b9650d6051d">  117</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#aab9d1b39f9f6b722e3b89b9650d6051d">isSignBitCheck</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                           <span class="keywordtype">bool</span> &amp;TrueIfSigned) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">switch</span> (pred) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:   <span class="comment">// True if LHS s&lt; 0</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    TrueIfSigned = <span class="keyword">true</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:   <span class="comment">// True if LHS s&lt;= RHS and RHS == -1</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    TrueIfSigned = <span class="keyword">true</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> RHS-&gt;<a class="code" href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:   <span class="comment">// True if LHS s&gt; -1</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    TrueIfSigned = <span class="keyword">false</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> RHS-&gt;<a class="code" href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// True if LHS u&gt; RHS and RHS == high-bit-mask - 1</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    TrueIfSigned = <span class="keyword">true</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af767099f07429816d862fc3b23f8789b">isMaxValue</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// True if LHS u&gt;= RHS and RHS == high-bit-mask (2^7, 2^15, 2^31, etc)</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    TrueIfSigned = <span class="keyword">true</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a9e981fb2ff9cfa5bb54229dbb5dc78b7">isSignBit</a>();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/// Returns true if the exploded icmp can be expressed as a signed comparison</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/// to zero and updates the predicate accordingly.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/// The signedness of the comparison is preserved.</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#abc22daabfc0c272f3bca65808533bdcd">  145</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#abc22daabfc0c272f3bca65808533bdcd">isSignTest</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> &amp;pred, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">ICmpInst::isSigned</a>(pred))</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> (RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>())</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ICmpInst.html#ab8d326a634f66801a402f872f6ea4949">ICmpInst::isRelational</a>(pred);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#aa96ca2cf0bb1e924523900fb911b0a45">isOne</a>()) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS-&gt;<a class="code" href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>()) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// isHighOnes - Return true if the constant is of the form 1+0+.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">// This is the same as lowones(~X).</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a3768a0dde13dc5f3ebeb41cb700d4976">  169</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#a3768a0dde13dc5f3ebeb41cb700d4976">isHighOnes</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">return</span> (~CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() + 1).isPowerOf2();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/// ComputeSignedMinMaxValuesFromKnownBits - Given a signed integer type and a</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/// set of known zero and one bits, compute the maximum and minimum values that</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">/// could have the specified known zero and known one bits, returning them in</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// min/max.</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a2c8af3f0435c2f2777b08be28da284fb">  177</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstCombineCompares_8cpp.html#a2c8af3f0435c2f2777b08be28da284fb">ComputeSignedMinMaxValuesFromKnownBits</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; KnownZero,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; KnownOne,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                   <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; Min, <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; Max) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  assert(KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == KnownOne.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == Min.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == Max.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         <span class="stringliteral">&quot;KnownZero, KnownOne and Min, Max must have equal bitwidth.&quot;</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> UnknownBits = ~(KnownZero|KnownOne);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// The minimum value is when all unknown bits are zeros, EXCEPT for the sign</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// bit if it is unknown.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  Min = KnownOne;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  Max = KnownOne|UnknownBits;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span> (UnknownBits.isNegative()) { <span class="comment">// Sign bit is unknown</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    Min.<a class="code" href="classllvm_1_1APInt.html#a901362ad921722671d31108bcfaf6b03">setBit</a>(Min.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>()-1);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    Max.<a class="code" href="classllvm_1_1APInt.html#a54c3b6a0fd1aaeab8c6a2493fb9c549a">clearBit</a>(Max.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>()-1);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// ComputeUnsignedMinMaxValuesFromKnownBits - Given an unsigned integer type and</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// a set of known zero and one bits, compute the maximum and minimum values that</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// could have the specified known zero and known one bits, returning them in</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">// min/max.</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ada48609926c51e52629a815158919f39">  201</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstCombineCompares_8cpp.html#ada48609926c51e52629a815158919f39">ComputeUnsignedMinMaxValuesFromKnownBits</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;KnownZero,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;KnownOne,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                                     <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Min, <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Max) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  assert(KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == KnownOne.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == Min.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         KnownZero.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() == Max.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         <span class="stringliteral">&quot;Ty, KnownZero, KnownOne and Min, Max must have equal bitwidth.&quot;</span>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> UnknownBits = ~(KnownZero|KnownOne);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// The minimum value is when the unknown bits are all zeros.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  Min = KnownOne;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// The maximum value is when the unknown bits are all ones.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  Max = KnownOne|UnknownBits;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/// FoldCmpLoadFromIndexedGlobal - Called we see this pattern:</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">///   cmp pred (load (gep GV, ...)), cmpcst</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// where GV is a global variable with a constant initializer.  Try to simplify</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// this into some simple computation that does not need the load.  For example</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// we can optimize &quot;icmp eq (load (gep &quot;foo&quot;, 0, i)), 0&quot; into &quot;icmp eq i, 3&quot;.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// If AndCst is non-null, then the loaded value is masked with that constant</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/// before doing the comparison.  This handles cases like &quot;A[i]&amp;4 == 0&quot;.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a50cca327dba8525d9befc652d0cc0ba4">InstCombiner::</a></div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a50cca327dba8525d9befc652d0cc0ba4">  227</a></span>&#160;<a class="code" href="classllvm_1_1InstCombiner.html#a50cca327dba8525d9befc652d0cc0ba4">FoldCmpLoadFromIndexedGlobal</a>(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP, <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                             <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> &amp;ICI, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndCst) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// We need TD information to know the pointer size unless this is inbounds.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (!GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() &amp;&amp; TD == 0)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1Init.html">Init</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantArray&gt;(Init) &amp;&amp; !isa&lt;ConstantDataArray&gt;(Init))</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  uint64_t ArrayElementCount = Init-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aeaf73fee81cb53d8bb6136a3d0ad39f6">getArrayNumElements</a>();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">if</span> (ArrayElementCount &gt; 1024) <span class="keywordflow">return</span> 0;  <span class="comment">// Don&#39;t blow up on huge arrays.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// There are many forms of this optimization we can handle, for now, just do</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// the simple index into a single-dimensional array.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// Require: GEP GV, 0, i {{, constant indices}}</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (GEP-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &lt; 3 ||</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      !isa&lt;ConstantInt&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) ||</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      !cast&lt;ConstantInt&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;<a class="code" href="Lint_8cpp.html#a6cd8c36c54045fd5897b54d4c30e0044">isZero</a>() ||</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      isa&lt;Constant&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2)))</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// Check that indices after the variable are constants and in-range for the</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// type they index.  Collect the indices.  This is typically for arrays of</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// structs.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> LaterIndices;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = Init-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#acae189c1d913af7e7f37a8b202070997">getArrayElementType</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 3, e = GEP-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Idx = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (Idx == 0) <span class="keywordflow">return</span> 0;  <span class="comment">// Variable index.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    uint64_t IdxVal = Idx-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)IdxVal != IdxVal) <span class="keywordflow">return</span> 0; <span class="comment">// Too large array index.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(EltTy))</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      EltTy = STy-&gt;getElementType(IdxVal);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(EltTy)) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (IdxVal &gt;= ATy-&gt;getNumElements()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      EltTy = ATy-&gt;getElementType();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">return</span> 0; <span class="comment">// Unknown type.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    LaterIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IdxVal);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keyword">enum</span> { Overdefined = -3, Undefined = -2 };</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// Variables for our state machines.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// FirstTrueElement/SecondTrueElement - Used to emit a comparison of the form</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// &quot;i == 47 | i == 87&quot;, where 47 is the first index the condition is true for,</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// and 87 is the second (and last) index.  FirstTrueElement is -2 when</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// undefined, otherwise set to the first true element.  SecondTrueElement is</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// -2 when undefined, -3 when overdefined and &gt;= 0 when that index is true.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordtype">int</span> FirstTrueElement = Undefined, SecondTrueElement = Undefined;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// FirstFalseElement/SecondFalseElement - Used to emit a comparison of the</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// form &quot;i != 47 &amp; i != 87&quot;.  Same state transitions as for true elements.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">int</span> FirstFalseElement = Undefined, SecondFalseElement = Undefined;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">  /// TrueRangeEnd/FalseRangeEnd - In conjunction with First*Element, these</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">  /// define a state machine that triggers for ranges of values that the index</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">  /// is true or false for.  This triggers on things like &quot;abbbbc&quot;[i] == &#39;b&#39;.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">  /// This is -2 when undefined, -3 when overdefined, and otherwise the last</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">  /// index in the range (inclusive).  We use -2 for undefined here because we</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">  /// use relative comparisons and don&#39;t want 0-1 to match -1.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span>  <span class="keywordtype">int</span> TrueRangeEnd = Undefined, FalseRangeEnd = Undefined;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// MagicBitvector - This is a magic bitvector where we set a bit if the</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// comparison is true for element &#39;i&#39;.  If there are 64 elements or less in</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// the array, this will fully represent all the comparison results.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  uint64_t MagicBitvector = 0;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// Scan the array and see if one of our patterns matches.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CompareRHS = cast&lt;Constant&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ArrayElementCount; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = Init-&gt;<a class="code" href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (Elt == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// If this is indexing an array of structures, get the structure element.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (!LaterIndices.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      Elt = <a class="code" href="classllvm_1_1ConstantExpr.html#ae906b7591a3335568e5ebe6e589ea6d1">ConstantExpr::getExtractValue</a>(Elt, LaterIndices);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// If the element is masked, handle it.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (AndCst) Elt = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(Elt, AndCst);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Find out if the comparison would be true or false for the i&#39;th element.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#aa61b351a455e9229d3dc58e0883b6cef">ConstantFoldCompareInstOperands</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Elt,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                                  CompareRHS, TD, TLI);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// If the result is undef for this element, ignore it.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C)) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">// Extend range state machines to cover this element in case there is an</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">// undef in the middle of the range.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">if</span> (TrueRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        TrueRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (FalseRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        FalseRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// If we can&#39;t compute the result for any of the elements, we have to give</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// up evaluating the entire conditional.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(C)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Otherwise, we know if the comparison is true or false for this element,</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// update our state machines.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">bool</span> IsTrueForElt = !cast&lt;ConstantInt&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)-&gt;<a class="code" href="Lint_8cpp.html#a6cd8c36c54045fd5897b54d4c30e0044">isZero</a>();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// State machine for single/double/range index comparison.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (IsTrueForElt) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// Update the TrueElement state machine.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> (FirstTrueElement == Undefined)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        FirstTrueElement = TrueRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;  <span class="comment">// First true element.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="comment">// Update double-compare state machine.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">if</span> (SecondTrueElement == Undefined)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          SecondTrueElement = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          SecondTrueElement = Overdefined;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">// Update range state machine.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (TrueRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          TrueRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          TrueRangeEnd = Overdefined;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">// Update the FalseElement state machine.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (FirstFalseElement == Undefined)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        FirstFalseElement = FalseRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; <span class="comment">// First false element.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// Update double-compare state machine.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (SecondFalseElement == Undefined)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          SecondFalseElement = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          SecondFalseElement = Overdefined;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// Update range state machine.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span> (FalseRangeEnd == (<span class="keywordtype">int</span>)<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;          FalseRangeEnd = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          FalseRangeEnd = Overdefined;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// If this element is in range, update our magic bitvector.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 64 &amp;&amp; IsTrueForElt)</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      MagicBitvector |= 1ULL &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// If all of our states become overdefined, bail out early.  Since the</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// predicate is expensive, only check it every 8 elements.  This is only</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// really useful for really huge arrays.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> ((i &amp; 8) == 0 &amp;&amp; i &gt;= 64 &amp;&amp; SecondTrueElement == Overdefined &amp;&amp;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        SecondFalseElement == Overdefined &amp;&amp; TrueRangeEnd == Overdefined &amp;&amp;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        FalseRangeEnd == Overdefined)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// Now that we&#39;ve scanned the entire array, emit our new comparison(s).  We</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// order the state machines in complexity of the generated code.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// If the index is larger than the pointer size of the target, truncate the</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// index down like the GEP would do implicitly.  We don&#39;t have to do this for</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// an inbounds GEP because the index can&#39;t be out of range.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (!GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>()) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TD-&gt;getIntPtrType(GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">unsigned</span> PtrSize = IntPtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">getIntegerBitWidth</a>();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &gt; PtrSize)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      Idx = Builder-&gt;CreateTrunc(Idx, IntPtrTy);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// If the comparison is only true for one or two elements, emit direct</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// comparisons.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (SecondTrueElement != Overdefined) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// None true -&gt; false.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (FirstTrueElement == Undefined)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstTrueIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), FirstTrueElement);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// True for one element -&gt; &#39;i == 47&#39;.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (SecondTrueElement == Undefined)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Idx, FirstTrueIdx);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// True for two elements -&gt; &#39;i == 47 | i == 72&#39;.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = Builder-&gt;CreateICmpEQ(Idx, FirstTrueIdx);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SecondTrueIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), SecondTrueElement);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *C2 = Builder-&gt;CreateICmpEQ(Idx, SecondTrueIdx);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(C1, C2);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// If the comparison is only false for one or two elements, emit direct</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// comparisons.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (SecondFalseElement != Overdefined) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// None false -&gt; true.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (FirstFalseElement == Undefined)</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstFalseIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), FirstFalseElement);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// False for one element -&gt; &#39;i != 47&#39;.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (SecondFalseElement == Undefined)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Idx, FirstFalseIdx);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// False for two elements -&gt; &#39;i != 47 &amp; i != 72&#39;.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = Builder-&gt;CreateICmpNE(Idx, FirstFalseIdx);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SecondFalseIdx = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),SecondFalseElement);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *C2 = Builder-&gt;CreateICmpNE(Idx, SecondFalseIdx);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(C1, C2);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// If the comparison can be replaced with a range comparison for the elements</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// where it is true, emit the range check.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (TrueRangeEnd != Overdefined) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    assert(TrueRangeEnd != FirstTrueElement &amp;&amp; <span class="stringliteral">&quot;Should emit single compare&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Generate (i-FirstTrue) &lt;u (TrueRangeEnd-FirstTrue+1).</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (FirstTrueElement) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Offs = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), -FirstTrueElement);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      Idx = Builder-&gt;CreateAdd(Idx, Offs);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *End = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                  TrueRangeEnd-FirstTrueElement+1);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Idx, End);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// False range check.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">if</span> (FalseRangeEnd != Overdefined) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    assert(FalseRangeEnd != FirstFalseElement &amp;&amp; <span class="stringliteral">&quot;Should emit single compare&quot;</span>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// Generate (i-FirstFalse) &gt;u (FalseRangeEnd-FirstFalse).</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (FirstFalseElement) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Offs = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), -FirstFalseElement);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      Idx = Builder-&gt;CreateAdd(Idx, Offs);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *End = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                  FalseRangeEnd-FirstFalseElement);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, Idx, End);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// If a magic bitvector captures the entire comparison state</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// of this load, replace it with computation that does:</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">//   ((magic_cst &gt;&gt; i) &amp; 1) != 0</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = 0;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Look for an appropriate type:</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// - The type of Idx if the magic fits</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// - The smallest fitting legal type if we have a DataLayout</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// - Default to i32</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (ArrayElementCount &lt;= Idx-&gt;<a class="code" href="namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">getType</a>()-&gt;getIntegerBitWidth())</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      Ty = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TD)</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      Ty = TD-&gt;getSmallestLegalIntType(Init-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), ArrayElementCount);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ArrayElementCount &lt;= 32)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      Ty = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Init-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (Ty != 0) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Builder-&gt;CreateIntCast(Idx, Ty, <span class="keyword">false</span>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      V = Builder-&gt;CreateLShr(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, MagicBitvector), V);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      V = Builder-&gt;CreateAnd(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, 1), V);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, V, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, 0));</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/// EvaluateGEPOffsetExpression - Return a value that can be used to compare</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">/// the *offset* implied by a GEP to zero.  For example, if we have &amp;A[i], we</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/// want to return &#39;i&#39; for &quot;icmp ne i, 0&quot;.  Note that, in general, indices can</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">/// be complex, and scales are involved.  The above expression would also be</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">/// legal to codegen as &quot;icmp ne (i*4), 0&quot; (assuming A is a pointer to i32).</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">/// This later form is less amenable to optimization though, and we are allowed</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">/// to generate the first by knowing that pointer arithmetic doesn&#39;t overflow.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">/// If we can&#39;t emit an optimized form for this expression, this returns null.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#ad6a042fcb94fa8bd65efea3003580f43">  514</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineCompares_8cpp.html#ad6a042fcb94fa8bd65efea3003580f43">EvaluateGEPOffsetExpression</a>(<a class="code" href="classllvm_1_1User.html">User</a> *GEP, <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD = *IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(GEP);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// Check to see if this gep only has a single variable index.  If so, and if</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// any constant indices are a multiple of its scale, then we can compute this</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// in terms of the scale of the variable index.  For example, if the GEP</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// implies an offset of &quot;12 + i*4&quot;, then we can codegen this as &quot;3 + i&quot;,</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// because the expression will cross zero at the same point.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, e = GEP-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  int64_t Offset = 0;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">for</span> (i = 1; i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++GTI) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i))) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// Compute the aggregate offset of constant indices.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;isZero()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="comment">// Handle a struct index, which adds its field offset to the pointer.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(*GTI)) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        Offset += TD.<a class="code" href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy)-&gt;<a class="code" href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(CI-&gt;getZExtValue());</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        uint64_t Size = TD.<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">getIndexedType</a>());</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        Offset += Size*CI-&gt;getSExtValue();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="comment">// Found our variable index.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// If there are no variable indices, we must have a constant offset, just</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">// evaluate it the general way.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">if</span> (i == e) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VariableIdx = GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// Determine the scale factor of the variable element.  For example, this is</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// 4 if the variable index is into an array of i32.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  uint64_t VariableScale = TD.<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">getIndexedType</a>());</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// Verify that there are no other variable indices.  If so, emit the hard way.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">for</span> (++i, ++GTI; i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++GTI) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i));</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">if</span> (!CI) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// Compute the aggregate offset of constant indices.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Handle a struct index, which adds its field offset to the pointer.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(*GTI)) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      Offset += TD.<a class="code" href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy)-&gt;<a class="code" href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>());</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      uint64_t Size = TD.<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">getIndexedType</a>());</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      Offset += Size*CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">getSExtValue</a>();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// Okay, we know we have a single variable index, which must be a</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// pointer/array/vector index.  If there is no offset, life is simple, return</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// the index.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TD.<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(GEP-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordtype">unsigned</span> IntPtrWidth = IntPtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">getIntegerBitWidth</a>();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">if</span> (Offset == 0) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// Cast to intptrty in case a truncation occurs.  If an extension is needed,</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// we don&#39;t need to bother extending: the extension won&#39;t affect where the</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// computation crosses zero.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (VariableIdx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &gt; IntPtrWidth) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      VariableIdx = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(VariableIdx, IntPtrTy);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">return</span> VariableIdx;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// Otherwise, there is an index.  The computation we will do will be modulo</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// the pointer size, so get it.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  uint64_t PtrSizeMask = ~0ULL &gt;&gt; (64-IntPtrWidth);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  Offset &amp;= PtrSizeMask;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  VariableScale &amp;= PtrSizeMask;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// To do this transformation, any constant index must be a multiple of the</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// variable scale factor.  For example, we can evaluate &quot;12 + 4*i&quot; as &quot;3 + i&quot;,</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// but we can&#39;t evaluate &quot;10 + 3*i&quot; in terms of i.  Check that the offset is a</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// multiple of the variable scale.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  int64_t NewOffs = Offset / (int64_t)VariableScale;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> (Offset != NewOffs*(int64_t)VariableScale)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// Okay, we can do this evaluation.  Start by converting the index to intptr.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">if</span> (VariableIdx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IntPtrTy)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    VariableIdx = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(VariableIdx, IntPtrTy,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                            <span class="keyword">true</span> <span class="comment">/*Signed*/</span>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OffsetVal = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntPtrTy, NewOffs);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(VariableIdx, OffsetVal, <span class="stringliteral">&quot;offset&quot;</span>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// FoldGEPICmp - Fold comparisons between a GEP instruction and something</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/// else.  At this point we know that the GEP is on the LHS of the comparison.</span></div><div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a19d3c5610a75f4c8265c667b6cf93177">  611</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a19d3c5610a75f4c8265c667b6cf93177">InstCombiner::FoldGEPICmp</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPLHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                       <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Cond,</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                       <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Don&#39;t transform signed compares of GEPs into index compares. Even if the</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// GEP is inbounds, the final add of the base pointer can have signed overflow</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// and would change the result of the icmp.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// e.g. &quot;&amp;foo[0] &lt;s &amp;foo[1]&quot; can&#39;t be folded to &quot;true&quot; because &quot;foo&quot; could be</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// the maximum signed value for the pointer type.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">ICmpInst::isSigned</a>(Cond))</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// Look through bitcasts.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(RHS))</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    RHS = BCI-&gt;getOperand(0);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrBase = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> (TD &amp;&amp; PtrBase == RHS &amp;&amp; GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#ac876de9f2b1ddbe458be4d57e3e11b16">isInBounds</a>()) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// ((gep Ptr, OFFSET) cmp Ptr)   ---&gt; (OFFSET cmp 0).</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// This transformation (ignoring the base and scales) is valid because we</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// know pointers can&#39;t overflow since the gep is inbounds.  See if we can</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// output an optimized form.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Offset = <a class="code" href="InstCombineCompares_8cpp.html#ad6a042fcb94fa8bd65efea3003580f43">EvaluateGEPOffsetExpression</a>(GEPLHS, *<span class="keyword">this</span>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// If not, synthesize the offset the hard way.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (Offset == 0)</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      Offset = <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">EmitGEPOffset</a>(GEPLHS);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">ICmpInst::getSignedPredicate</a>(Cond), Offset,</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Offset-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPRHS = dyn_cast&lt;GEPOperator&gt;(RHS)) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// If the base pointers are different, but the indices are the same, just</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// compare the base pointer.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (PtrBase != GEPRHS-&gt;getOperand(0)) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordtype">bool</span> IndicesTheSame = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>()==GEPRHS-&gt;getNumOperands();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      IndicesTheSame &amp;= GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() ==</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        GEPRHS-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (IndicesTheSame)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;          <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) != GEPRHS-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            IndicesTheSame = <span class="keyword">false</span>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="comment">// If all indices are the same, just compare the base pointers.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> (IndicesTheSame)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Cond, GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), GEPRHS-&gt;getOperand(0));</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="comment">// If we&#39;re comparing GEPs with two base pointers that only differ in type</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="comment">// and both GEPs have only constant indices or just one use, then fold</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="comment">// the compare with the adjusted indices.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">if</span> (TD &amp;&amp; GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#ac876de9f2b1ddbe458be4d57e3e11b16">isInBounds</a>() &amp;&amp; GEPRHS-&gt;isInBounds() &amp;&amp;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;          (GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#aa8959d3935f9f061c4897d07e42cf658">hasAllConstantIndices</a>() || GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) &amp;&amp;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;          (GEPRHS-&gt;hasAllConstantIndices() || GEPRHS-&gt;hasOneUse()) &amp;&amp;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          PtrBase-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>() ==</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            GEPRHS-&gt;getOperand(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>()) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = Builder-&gt;CreateICmp(<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">ICmpInst::getSignedPredicate</a>(Cond),</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                                         <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">EmitGEPOffset</a>(GEPLHS),</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                         <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">EmitGEPOffset</a>(GEPRHS));</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Cmp);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="comment">// Otherwise, the base pointers are different and the indices are</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="comment">// different, bail out.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// If one of the GEPs has all zero indices, recurse.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordtype">bool</span> AllZeros = <span class="keyword">true</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) ||</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;          !cast&lt;Constant&gt;(GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))-&gt;isNullValue()) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        AllZeros = <span class="keyword">false</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (AllZeros)</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> FoldGEPICmp(GEPRHS, GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                         <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">ICmpInst::getSwappedPredicate</a>(Cond), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// If the other GEP has all zero indices, recurse.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    AllZeros = <span class="keyword">true</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = GEPRHS-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(GEPRHS-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) ||</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;          !cast&lt;Constant&gt;(GEPRHS-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))-&gt;isNullValue()) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        AllZeros = <span class="keyword">false</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (AllZeros)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">return</span> FoldGEPICmp(GEPLHS, GEPRHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Cond, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordtype">bool</span> GEPsInBounds = GEPLHS-&gt;<a class="code" href="classllvm_1_1GEPOperator.html#ac876de9f2b1ddbe458be4d57e3e11b16">isInBounds</a>() &amp;&amp; GEPRHS-&gt;isInBounds();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == GEPRHS-&gt;getNumOperands()) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="comment">// If the GEPs only differ by one index, compare it.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordtype">unsigned</span> NumDifferences = 0;  <span class="comment">// Keep track of # differences.</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordtype">unsigned</span> DiffOperand = 0;     <span class="comment">// The operand that differs.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = GEPRHS-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) != GEPRHS-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          <span class="keywordflow">if</span> (GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() !=</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                   GEPRHS-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;getType()-&gt;getPrimitiveSizeInBits()) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="comment">// Irreconcilable differences.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            NumDifferences = 2;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">if</span> (NumDifferences++) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            DiffOperand = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">if</span> (NumDifferences == 0)   <span class="comment">// SAME GEP?</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <span class="comment">// No comparison is needed here.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                             Builder-&gt;getInt1(<a class="code" href="classllvm_1_1CmpInst.html#ab0fdfb9cef4a80aac8ae338e1d304131">ICmpInst::isTrueWhenEqual</a>(Cond)));</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumDifferences == 1 &amp;&amp; GEPsInBounds) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSV = GEPLHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(DiffOperand);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSV = GEPRHS-&gt;getOperand(DiffOperand);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment">// Make sure we do a signed comparison here.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">ICmpInst::getSignedPredicate</a>(Cond), LHSV, RHSV);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// Only lower this if the icmp is the only user of the GEP or if we expect</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="comment">// the result to fold to a constant!</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span> (TD &amp;&amp;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        GEPsInBounds &amp;&amp;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        (isa&lt;ConstantExpr&gt;(GEPLHS) || GEPLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) &amp;&amp;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        (isa&lt;ConstantExpr&gt;(GEPRHS) || GEPRHS-&gt;hasOneUse())) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="comment">// ((gep Ptr, OFFSET1) cmp (gep Ptr, OFFSET2)  ---&gt;  (OFFSET1 cmp OFFSET2)</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">EmitGEPOffset</a>(GEPLHS);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">EmitGEPOffset</a>(GEPRHS);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">ICmpInst::getSignedPredicate</a>(Cond), L, R);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/// FoldICmpAddOpCst - Fold &quot;icmp pred (X+CI), X&quot;.</span></div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a849c899d9c0fc7e059eb46b6ead86c6e">  745</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a849c899d9c0fc7e059eb46b6ead86c6e">InstCombiner::FoldICmpAddOpCst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;ICI,</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI,</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// If we have X+0, exit early (simplifying logic below) and let it get folded</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// elsewhere.   icmp X+0, X  -&gt; icmp X, X</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">bool</span> isTrue = <a class="code" href="classllvm_1_1CmpInst.html#ab0fdfb9cef4a80aac8ae338e1d304131">ICmpInst::isTrueWhenEqual</a>(Pred);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ICI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), isTrue));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// (X+4) == X -&gt; false.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// (X+4) != X -&gt; true.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// From this point on, we know that (X+C &lt;= X) --&gt; (X+C &lt; X) because C != 0,</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// so the values can never be equal.  Similarly for all other &quot;or equals&quot;</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// operators.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// (X+1) &lt;u X        --&gt; X &gt;u (MAXUINT-1)        --&gt; X == 255</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// (X+2) &lt;u X        --&gt; X &gt;u (MAXUINT-2)        --&gt; X &gt; 253</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// (X+MAXUINT) &lt;u X  --&gt; X &gt;u (MAXUINT-MAXUINT)  --&gt; X != 0</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>) {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *R =</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(<a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()), CI);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, X, R);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// (X+1) &gt;u X        --&gt; X &lt;u (0-1)        --&gt; X != 255</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// (X+2) &gt;u X        --&gt; X &lt;u (0-2)        --&gt; X &lt;u 254</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// (X+MAXUINT) &gt;u X  --&gt; X &lt;u (0-MAXUINT)  --&gt; X &lt;u 1  --&gt; X == 0</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, X, <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(CI));</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordtype">unsigned</span> BitWidth = CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SMax = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                       <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(BitWidth));</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// (X+ 1) &lt;s X       --&gt; X &gt;s (MAXSINT-1)          --&gt; X == 127</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// (X+ 2) &lt;s X       --&gt; X &gt;s (MAXSINT-2)          --&gt; X &gt;s 125</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// (X+MAXSINT) &lt;s X  --&gt; X &gt;s (MAXSINT-MAXSINT)    --&gt; X &gt;s 0</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// (X+MINSINT) &lt;s X  --&gt; X &gt;s (MAXSINT-MINSINT)    --&gt; X &gt;s -1</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// (X+ -2) &lt;s X      --&gt; X &gt;s (MAXSINT- -2)        --&gt; X &gt;s 126</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// (X+ -1) &lt;s X      --&gt; X &gt;s (MAXSINT- -1)        --&gt; X != 127</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, X, <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(SMax, CI));</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// (X+ 1) &gt;s X       --&gt; X &lt;s (MAXSINT-(1-1))       --&gt; X != 127</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// (X+ 2) &gt;s X       --&gt; X &lt;s (MAXSINT-(2-1))       --&gt; X &lt;s 126</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// (X+MAXSINT) &gt;s X  --&gt; X &lt;s (MAXSINT-(MAXSINT-1)) --&gt; X &lt;s 1</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// (X+MINSINT) &gt;s X  --&gt; X &lt;s (MAXSINT-(MINSINT-1)) --&gt; X &lt;s -2</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// (X+ -2) &gt;s X      --&gt; X &lt;s (MAXSINT-(-2-1))      --&gt; X &lt;s -126</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// (X+ -1) &gt;s X      --&gt; X &lt;s (MAXSINT-(-1-1))      --&gt; X == -128</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  assert(Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Builder-&gt;getInt(CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()-1);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, X, <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(SMax, C));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/// FoldICmpDivCst - Fold &quot;icmp pred, ([su]div X, DivRHS), CmpRHS&quot; where DivRHS</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// and CmpRHS are both known to be integer constants.</span></div><div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ab313a0464b35f9c0d59765f4d356d138">  809</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ab313a0464b35f9c0d59765f4d356d138">InstCombiner::FoldICmpDivCst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICI, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *DivI,</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                                          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *DivRHS) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CmpRHS = cast&lt;ConstantInt&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CmpRHSV = CmpRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// FIXME: If the operand types don&#39;t match the type of the divide</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment">// then don&#39;t attempt this transform. The code below doesn&#39;t have the</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">// logic to deal with a signed divide and an unsigned compare (and</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// vice versa). This is because (x /s C1) &lt;s C2  produces different</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// results than (x /s C1) &lt;u C2 or (x /u C1) &lt;s C2 or even</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// (x /u C1) &lt;u C2.  Simply casting the operands and result won&#39;t</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// work. :(  The if statement below tests that condition and bails</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// if it finds it.</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordtype">bool</span> DivIsSigned = DivI-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::SDiv;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; DivIsSigned != ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>())</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">if</span> (DivRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>())</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// The ProdOV computation fails on divide by zero.</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">if</span> (DivIsSigned &amp;&amp; DivRHS-&gt;<a class="code" href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>())</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// The overflow computation also screws up here</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">if</span> (DivRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#aa96ca2cf0bb1e924523900fb911b0a45">isOne</a>()) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// This eliminates some funny cases with INT_MIN.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, DivI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));   <span class="comment">// X/1 == X.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// Compute Prod = CI * DivRHS. We are essentially solving an equation</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// of form X/C1=C2. We solve for X by multiplying C1 (DivRHS) and</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// C2 (CI). By solving for X we can turn this into a range check</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// instead of computing a divide.</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Prod = <a class="code" href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">ConstantExpr::getMul</a>(CmpRHS, DivRHS);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// Determine if the product overflows by seeing if the product is</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// not equal to the divide. Make sure we do the same kind of divide</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// as in the LHS instruction that we&#39;re folding.</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordtype">bool</span> ProdOV = (DivIsSigned ? <a class="code" href="classllvm_1_1ConstantExpr.html#a5553db145ba1df692578ebb8b9d6ac13">ConstantExpr::getSDiv</a>(Prod, DivRHS) :</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                 <a class="code" href="classllvm_1_1ConstantExpr.html#ab2767c28bc3ded2d683a93f0ce1ed502">ConstantExpr::getUDiv</a>(Prod, DivRHS)) != CmpRHS;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// Get the ICmp opcode</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">  /// If the division is known to be exact, then there is no remainder from the</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">  /// divide, so the covered range size is unit, otherwise it is the divisor.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RangeSize = DivI-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>() ? <a class="code" href="InstCombineCompares_8cpp.html#a0772d720f01c3de131e8f60fba99b706">getOne</a>(Prod) : DivRHS;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// Figure out the interval that is being checked.  For example, a comparison</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// like &quot;X /u 5 == 0&quot; is really checking that X is in the interval [0, 5).</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// Compute this interval based on the constants involved and the signedness of</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// the compare/divide.  This computes a half-open interval, keeping track of</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// whether either value in the interval overflows.  After analysis each</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// overflow variable is set to 0 if it&#39;s corresponding bound variable is valid</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// -1 if overflowed off the bottom end, or +1 if overflowed off the top end.</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordtype">int</span> LoOverflow = 0, HiOverflow = 0;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LoBound = 0, *HiBound = 0;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordflow">if</span> (!DivIsSigned) {  <span class="comment">// udiv</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// e.g. X/5 op 3  --&gt; [15, 20)</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    LoBound = Prod;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    HiOverflow = LoOverflow = ProdOV;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> (!HiOverflow) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="comment">// If this is not an exact divide, then many values in the range collapse</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="comment">// to the same result value.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a>(HiBound, LoBound, RangeSize, <span class="keyword">false</span>);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DivRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#aeebb29dd5a7aaf9b4546fec69c43653b">isStrictlyPositive</a>()) { <span class="comment">// Divisor is &gt; 0.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">if</span> (CmpRHSV == 0) {       <span class="comment">// (X / pos) op 0</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="comment">// Can&#39;t overflow.  e.g.  X/2 op 0 --&gt; [-1, 2)</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      LoBound = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">SubOne</a>(RangeSize));</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      HiBound = RangeSize;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CmpRHSV.isStrictlyPositive()) {   <span class="comment">// (X / pos) op pos</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      LoBound = Prod;     <span class="comment">// e.g.   X/5 op 3 --&gt; [15, 20)</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      HiOverflow = LoOverflow = ProdOV;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">if</span> (!HiOverflow)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a>(HiBound, Prod, RangeSize, <span class="keyword">true</span>);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    } <span class="keywordflow">else</span> {                       <span class="comment">// (X / pos) op neg</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="comment">// e.g. X/5 op -3  --&gt; [-15-4, -15+1) --&gt; [-19, -14)</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      HiBound = <a class="code" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a>(Prod);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      LoOverflow = HiOverflow = ProdOV ? -1 : 0;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">if</span> (!LoOverflow) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *DivNeg =cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RangeSize));</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        LoOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a>(LoBound, HiBound, DivNeg, <span class="keyword">true</span>) ? -1 : 0;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DivRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">isNegative</a>()) { <span class="comment">// Divisor is &lt; 0.</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (DivI-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>())</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      RangeSize = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RangeSize));</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (CmpRHSV == 0) {       <span class="comment">// (X / neg) op 0</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="comment">// e.g. X/-5 op 0  --&gt; [-4, 5)</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      LoBound = <a class="code" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a>(RangeSize);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      HiBound = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RangeSize));</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">if</span> (HiBound == DivRHS) {     <span class="comment">// -INTMIN = INTMIN</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        HiOverflow = 1;            <span class="comment">// [INTMIN+1, overflow)</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        HiBound = 0;               <span class="comment">// e.g. X/INTMIN = 0 --&gt; X &gt; INTMIN</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CmpRHSV.isStrictlyPositive()) {   <span class="comment">// (X / neg) op pos</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="comment">// e.g. X/-5 op 3  --&gt; [-19, -14)</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      HiBound = <a class="code" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a>(Prod);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      HiOverflow = LoOverflow = ProdOV ? -1 : 0;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">if</span> (!LoOverflow)</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        LoOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a>(LoBound, HiBound, RangeSize, <span class="keyword">true</span>) ? -1:0;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    } <span class="keywordflow">else</span> {                       <span class="comment">// (X / neg) op neg</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      LoBound = Prod;       <span class="comment">// e.g. X/-5 op -3  --&gt; [15, 20)</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      LoOverflow = HiOverflow = ProdOV;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">if</span> (!HiOverflow)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        HiOverflow = <a class="code" href="InstCombineCompares_8cpp.html#a70e9984c4d8f47168e6e840fc816ce91">SubWithOverflow</a>(HiBound, Prod, RangeSize, <span class="keyword">true</span>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">// Dividing by a negative swaps the condition.  LT &lt;-&gt; GT</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">ICmpInst::getSwappedPredicate</a>(Pred);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = DivI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">switch</span> (Pred) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled icmp opcode!&quot;</span>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (LoOverflow &amp;&amp; HiOverflow)</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (HiOverflow)</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> :</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                          <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, X, LoBound);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (LoOverflow)</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> :</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                          <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, X, HiBound);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, InsertRangeTest(X, LoBound, HiBound,</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                                    DivIsSigned, <span class="keyword">true</span>));</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (LoOverflow &amp;&amp; HiOverflow)</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (HiOverflow)</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> :</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                          ICmpInst::ICMP_ULT, X, LoBound);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (LoOverflow)</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(DivIsSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> :</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                          ICmpInst::ICMP_UGE, X, HiBound);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, InsertRangeTest(X, LoBound, HiBound,</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                                    DivIsSigned, <span class="keyword">false</span>));</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordflow">case</span> ICmpInst::ICMP_ULT:</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (LoOverflow == +1)   <span class="comment">// Low bound is greater than input range.</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (LoOverflow == -1)   <span class="comment">// Low bound is less than input range.</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, X, LoBound);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (HiOverflow == +1)       <span class="comment">// High bound greater than input range.</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (HiOverflow == -1)       <span class="comment">// High bound less than input range.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> ICmpInst(ICmpInst::ICMP_UGE, X, HiBound);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> ICmpInst(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, X, HiBound);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">/// FoldICmpShrCst - Handle &quot;icmp(([al]shr X, cst1), cst2)&quot;.</span></div><div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a0b4733149f89709bb5c06e76d99cf9e8">  966</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a0b4733149f89709bb5c06e76d99cf9e8">InstCombiner::FoldICmpShrCst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICI, <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Shr,</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                                          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShAmt) {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CmpRHSV = cast&lt;ConstantInt&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;getValue();</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// Check that the shift amount is in range.  If not, don&#39;t perform</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// undefined shifts.  When the shift is visited it will be</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// simplified.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  uint32_t TypeBits = CmpRHSV.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>();</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  uint32_t ShAmtVal = (uint32_t)ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(TypeBits);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="keywordflow">if</span> (ShAmtVal &gt;= TypeBits || ShAmtVal == 0)</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// If we have an unsigned comparison and an ashr, we can&#39;t simplify this.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">// Similarly for signed comparisons with lshr.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>() != (Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::AShr))</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">// Otherwise, all lshr and most exact ashr&#39;s are equivalent to a udiv/sdiv</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">// by a power of 2.  Since we already have logic to simplify these,</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// transform to div and then simplify the resultant comparison.</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::AShr &amp;&amp;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        (!Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>() || ShAmtVal == TypeBits - 1))</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">// Revisit the shift (to delete it).</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    Worklist.Add(Shr);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *DivCst =</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(TypeBits, ShAmtVal));</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Tmp =</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::AShr ?</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      Builder-&gt;CreateSDiv(Shr-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), DivCst, <span class="stringliteral">&quot;&quot;</span>, Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>()) :</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      Builder-&gt;CreateUDiv(Shr-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), DivCst, <span class="stringliteral">&quot;&quot;</span>, Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>());</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Tmp);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">// If the builder folded the binop, just return it.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *TheDiv = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Tmp);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (TheDiv == 0)</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="comment">// Otherwise, fold this div/compare.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    assert(TheDiv-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::SDiv ||</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;           TheDiv-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::UDiv);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = FoldICmpDivCst(ICI, TheDiv, cast&lt;ConstantInt&gt;(DivCst));</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    assert(Res &amp;&amp; <span class="stringliteral">&quot;This div/cst should have folded!&quot;</span>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// If we are comparing against bits always shifted out, the</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// comparison cannot succeed.</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Comp = CmpRHSV &lt;&lt; ShAmtVal;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShiftedCmpRHS = Builder-&gt;getInt(Comp);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::LShr)</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    Comp = Comp.<a class="code" href="classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">lshr</a>(ShAmtVal);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    Comp = Comp.<a class="code" href="classllvm_1_1APInt.html#a70a4dac7efca53879acb06d8cd2e9800">ashr</a>(ShAmtVal);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (Comp != CmpRHSV) { <span class="comment">// Comparing against a bit that we know is zero.</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordtype">bool</span> IsICMP_NE = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cst = Builder-&gt;getInt1(IsICMP_NE);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Cst);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// Otherwise, check to see if the bits shifted out are known to be zero.</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// If so, we can compare against the unshifted value:</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="comment">//  (X &amp; 4) &gt;&gt; 1 == 2  --&gt; (X &amp; 4) == 4.</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Shr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>())</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Shr-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ShiftedCmpRHS);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">if</span> (Shr-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// Otherwise strength reduce the shift into an and.</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Val(<a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(TypeBits, TypeBits - ShAmtVal));</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Mask = Builder-&gt;getInt(Val);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = Builder-&gt;CreateAnd(Shr-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                    Mask, Shr-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.mask&quot;</span>);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a>, ShiftedCmpRHS);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/// visitICmpInstWithInstAndIntCst - Handle &quot;icmp (instr, intcst)&quot;.</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a79f00c68a7854fa5e1fde2cf2721bc85"> 1055</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a79f00c68a7854fa5e1fde2cf2721bc85">InstCombiner::visitICmpInstWithInstAndIntCst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICI,</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                                                          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI,</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                                          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;RHSV = RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">switch</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="comment">// Simplify icmp eq (trunc x to i8), 42 -&gt; icmp eq x, 42|highbits if all</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="comment">// of the high bits truncated out of x are known.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keywordtype">unsigned</span> DstBits = LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>(),</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;             SrcBits = LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> KnownZero(SrcBits, 0), KnownOne(SrcBits, 0);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <a class="code" href="namespacellvm.html#a7985318bedfe5c2040025ef13db9c57b">ComputeMaskedBits</a>(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), KnownZero, KnownOne);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="comment">// If all the high bits are known, we can do this xform.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">if</span> ((KnownZero|KnownOne).countLeadingOnes() &gt;= SrcBits-DstBits) {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">// Pull in the high bits from known-ones set.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewRHS = RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(SrcBits);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        NewRHS |= KnownOne &amp; <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(SrcBits, SrcBits-DstBits);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                            Builder-&gt;getInt(NewRHS));</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:         <span class="comment">// (icmp pred (xor X, XorCST), CI)</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *XorCST = dyn_cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="comment">// If this is a comparison that tests the signbit (X &lt; 0) or (x &gt; -1),</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="comment">// fold the xor.</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">if</span> ((ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; RHSV == 0) ||</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; RHSV.isAllOnesValue())) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CompareVal = LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="comment">// If the sign bit of the XorCST is not set, there is no change to</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="comment">// the operation, just stop using the Xor.</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">if</span> (!XorCST-&gt;isNegative()) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;          ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, CompareVal);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;          Worklist.Add(LHSI);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;          <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="comment">// Was the old condition true if the operand is positive?</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordtype">bool</span> isTrueIfPositive = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="comment">// If so, the new one isn&#39;t.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        isTrueIfPositive ^= <span class="keyword">true</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">if</span> (isTrueIfPositive)</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, CompareVal,</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                              <a class="code" href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">SubOne</a>(RHS));</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, CompareVal,</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                              <a class="code" href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a>(RHS));</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="comment">// (icmp u/s (xor A SignBit), C) -&gt; (icmp s/u A, (xor C SignBit))</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; XorCST-&gt;getValue().isSignBit()) {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;SignBit = XorCST-&gt;getValue();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                         ? ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>()</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                         : ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">getSignedPredicate</a>();</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                              Builder-&gt;getInt(RHSV ^ SignBit));</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="comment">// (icmp u/s (xor A ~SignBit), C) -&gt; (icmp s/u (xor C ~SignBit), A)</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; XorCST-&gt;isMaxValue(<span class="keyword">true</span>)) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;NotSignBit = XorCST-&gt;getValue();</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                                         ? ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>()</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                         : ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">getSignedPredicate</a>();</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;          Pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">getSwappedPredicate</a>(Pred);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                              Builder-&gt;getInt(RHSV ^ NotSignBit));</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="comment">// (icmp ugt (xor X, C), ~C) -&gt; (icmp ult X, C)</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="comment">//   iff -C is a power of 2</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;          XorCST-&gt;getValue() == ~RHSV &amp;&amp; (RHSV + 1).isPowerOf2())</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), XorCST);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="comment">// (icmp ult (xor X, C), -C) -&gt; (icmp uge X, C)</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="comment">//   iff -C is a power of 2</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;          XorCST-&gt;getValue() == -RHSV &amp;&amp; RHSV.isPowerOf2())</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), XorCST);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:         <span class="comment">// (icmp pred (and X, AndCST), RHS)</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; isa&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndCST = cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="comment">// If the LHS is an AND of a truncating cast, we can widen the</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="comment">// and/compare to be the input width without changing the value</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="comment">// produced, eliminating a cast.</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *Cast = dyn_cast&lt;TruncInst&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// We can do this transformation if either the AND constant does not</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">// have its sign bit set or if it is an equality comparison.</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="comment">// Extending a relational comparison when we&#39;re checking the sign</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="comment">// bit would not work.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() ||</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            (!AndCST-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">isNegative</a>() &amp;&amp; RHSV.<a class="code" href="classllvm_1_1APInt.html#a28b816a2b6d88476edb2af52948f29ec">isNonNegative</a>())) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd =</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            Builder-&gt;CreateAnd(Cast-&gt;getOperand(0),</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                               <a class="code" href="classllvm_1_1ConstantExpr.html#a80e82791d4d7f4d1d23d68ca0a2b1f64">ConstantExpr::getZExt</a>(AndCST, Cast-&gt;getSrcTy()));</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;          NewAnd-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LHSI);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), NewAnd,</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                              <a class="code" href="classllvm_1_1ConstantExpr.html#a80e82791d4d7f4d1d23d68ca0a2b1f64">ConstantExpr::getZExt</a>(RHS, Cast-&gt;getSrcTy()));</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="comment">// If the LHS is an AND of a zext, and we have an equality compare, we can</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="comment">// shrink the and/compare to the smaller type, eliminating the cast.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *Cast = dyn_cast&lt;ZExtInst&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *Ty = cast&lt;IntegerType&gt;(Cast-&gt;getSrcTy());</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="comment">// Make sure we don&#39;t compare the upper bits, SimplifyDemandedBits</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="comment">// should fold the icmp to true/false in that case.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; RHSV.<a class="code" href="classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">getActiveBits</a>() &lt;= Ty-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>()) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd =</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            Builder-&gt;CreateAnd(Cast-&gt;getOperand(0),</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                               <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(AndCST, Ty));</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;          NewAnd-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LHSI);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), NewAnd,</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                              <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(RHS, Ty));</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="comment">// If this is: (X &gt;&gt; C1) &amp; C2 != C3 (where any shift and any compare</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="comment">// could exist), turn it into (X &amp; (C2 &lt;&lt; C1)) != (C3 &lt;&lt; C1).  This</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="comment">// happens a LOT in code produced by the C front-end, for bitfield</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="comment">// access.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">if</span> (Shift &amp;&amp; !Shift-&gt;isShift())</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        Shift = 0;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShAmt;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      ShAmt = Shift ? <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(Shift-&gt;getOperand(1)) : 0;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Shift ? Shift-&gt;getType() : 0;  <span class="comment">// Type of the shift.</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *AndTy = AndCST-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>();          <span class="comment">// Type of the and.</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="comment">// We can fold this as long as we can&#39;t shift unknown bits</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="comment">// into the mask. This can happen with signed shift</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="comment">// rights, as they sign-extend. With logical shifts,</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="comment">// we must still make sure the comparison is not signed</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <span class="comment">// because we are effectively changing the</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="comment">// position of the sign bit (PR17827).</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="comment">// TODO: We can relax these constraints a bit more.</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">if</span> (ShAmt) {</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="keywordtype">bool</span> CanFold = <span class="keyword">false</span>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordtype">unsigned</span> ShiftOpcode = Shift-&gt;getOpcode();</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordflow">if</span> (ShiftOpcode == Instruction::AShr) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;          <span class="comment">// To test for the bad case of the signed shr, see if any</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;          <span class="comment">// of the bits shifted in could be tested after the mask.</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;          uint32_t TyBits = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;          <span class="keywordtype">int</span> ShAmtVal = TyBits - ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(TyBits);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;          uint32_t BitWidth = AndTy-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(BitWidth, BitWidth-ShAmtVal) &amp;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;               AndCST-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()) == 0)</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            CanFold = <span class="keyword">true</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ShiftOpcode == Instruction::Shl ||</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                   ShiftOpcode == Instruction::LShr) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;          CanFold = !ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>();</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">if</span> (CanFold) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewCst;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;          <span class="keywordflow">if</span> (Shift-&gt;getOpcode() == Instruction::Shl)</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            NewCst = <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(RHS, ShAmt);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            NewCst = <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(RHS, ShAmt);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;          <span class="comment">// Check to see if we are shifting out any of the bits being</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;          <span class="comment">// compared.</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(Shift-&gt;getOpcode(),</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                                       NewCst, ShAmt) != RHS) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="comment">// If we shifted bits out, the fold is not going to work out.</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="comment">// As a special case, check to see if this means that the</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            <span class="comment">// result is always true or false now.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;              <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;              <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, NewCst);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewAndCST;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">if</span> (Shift-&gt;getOpcode() == Instruction::Shl)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;              NewAndCST = <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(AndCST, ShAmt);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;              NewAndCST = <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(AndCST, ShAmt);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, NewAndCST);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Shift-&gt;getOperand(0));</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            Worklist.Add(Shift); <span class="comment">// Shift is dead.</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        }</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <span class="comment">// Turn ((X &gt;&gt; Y) &amp; C) == 0  into  (X &amp; (C &lt;&lt; Y)) == 0.  The later is</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="comment">// preferable because it allows the C&lt;&lt;Y expression to be hoisted out</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="comment">// of a loop if Y is invariant and X is not.</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">if</span> (Shift &amp;&amp; Shift-&gt;hasOneUse() &amp;&amp; RHSV == 0 &amp;&amp;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;          ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; !Shift-&gt;isArithmeticShift() &amp;&amp;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;          !isa&lt;Constant&gt;(Shift-&gt;getOperand(0))) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="comment">// Compute C &lt;&lt; Y.</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NS;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">if</span> (Shift-&gt;getOpcode() == Instruction::LShr) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;          NS = Builder-&gt;CreateShl(AndCST, Shift-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;          <span class="comment">// Insert a logical shift.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;          NS = Builder-&gt;CreateLShr(AndCST, Shift-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="comment">// Compute X &amp; (C &lt;&lt; Y).</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd =</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;          Builder-&gt;CreateAnd(Shift-&gt;getOperand(0), NS, LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, NewAnd);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="comment">// Replace ((X &amp; AndCST) &gt; RHSV) with ((X &amp; AndCST) != 0), if any</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="comment">// bit set in (X &amp; AndCST) will produce a result greater than RHSV.</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordtype">unsigned</span> NTZ = AndCST-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span> ((NTZ &lt; AndCST-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>()) &amp;&amp;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(AndCST-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>(), NTZ).ugt(RHSV))</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, LHSI,</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">// Try to optimize things like &quot;A[i]&amp;42 == 0&quot; to index computations.</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))) {</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP =</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;          dyn_cast&lt;GetElementPtrInst&gt;(LI-&gt;getOperand(0)))</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(GEP-&gt;getOperand(0)))</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;          <span class="keywordflow">if</span> (GV-&gt;isConstant() &amp;&amp; GV-&gt;hasDefinitiveInitializer() &amp;&amp;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;              !LI-&gt;isVolatile() &amp;&amp; isa&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = FoldCmpLoadFromIndexedGlobal(GEP, GV,ICI, C))</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;              <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;          }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">// X &amp; -C == -C -&gt; X &gt;  u ~C</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="comment">// X &amp; -C != -C -&gt; X &lt;= u ~C</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">//   iff C is a power of 2</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; RHS == LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) &amp;&amp; (-RHSV).isPowerOf2())</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;          ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                                  : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;          LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">SubOne</a>(RHS));</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>: {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() || !RHS-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>() || !LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, *Q;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHSI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(P)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Q))))) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="comment">// Simplify icmp eq (or (ptrtoint P), (ptrtoint Q)), 0</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="comment">// -&gt; and (icmp eq P, null), (icmp eq Q, null).</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ICIP = Builder-&gt;CreateICmp(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>,</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(P-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ICIQ = Builder-&gt;CreateICmp(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Q,</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Q-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        Op = BinaryOperator::CreateAnd(ICIP, ICIQ);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        Op = BinaryOperator::CreateOr(ICIP, ICIQ);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keywordflow">return</span> Op;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  }</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul: {       <span class="comment">// (icmp pred (mul X, Val), CI)</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Val = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (!Val) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// If this is a signed comparison to 0 and the mul is sign preserving,</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// use the mul LHS operand instead.</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#abc22daabfc0c272f3bca65808533bdcd">isSignTest</a>(pred, RHS) &amp;&amp; !Val-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>() &amp;&amp;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        cast&lt;BinaryOperator&gt;(LHSI)-&gt;hasNoSignedWrap())</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Val-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">isNegative</a>() ?</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                          <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">ICmpInst::getSwappedPredicate</a>(pred) : pred,</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                          LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()));</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {       <span class="comment">// (icmp pred (shl X, ShAmt), CI)</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    uint32_t TypeBits = RHSV.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>();</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShAmt = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (!ShAmt) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <span class="comment">// (1 &lt;&lt; X) pred P2 -&gt; X pred Log2(P2)</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHSI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)))) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordtype">bool</span> RHSVIsPowerOf2 = RHSV.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>();</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">isUnsigned</a>()) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;          <span class="keywordflow">if</span> (!RHSVIsPowerOf2) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &lt;  30 -&gt; X &lt;= 4</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &lt;= 30 -&gt; X &lt;= 4</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &gt;= 30 -&gt; X &gt;  4</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &gt;  30 -&gt; X &gt;  4</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;              Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;              Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;          }</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;          <span class="keywordtype">unsigned</span> RHSLog2 = RHSV.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>();</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;          <span class="comment">// (1 &lt;&lt; X) &gt;= 2147483648 -&gt; X &gt;= 31 -&gt; X == 31</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;          <span class="comment">// (1 &lt;&lt; X) &gt;  2147483648 -&gt; X &gt;  31 -&gt; false</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;          <span class="comment">// (1 &lt;&lt; X) &lt;= 2147483648 -&gt; X &lt;= 31 -&gt; true</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;          <span class="comment">// (1 &lt;&lt; X) &lt;  2147483648 -&gt; X &lt;  31 -&gt; X != 31</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <span class="keywordflow">if</span> (RHSLog2 == TypeBits-1) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;              Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>)</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;              <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getFalse());</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;              <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getTrue());</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;              Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;          }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, X,</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), RHSLog2));</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()) {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          <span class="keywordflow">if</span> (RHSV.<a class="code" href="classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">isAllOnesValue</a>()) {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &lt;= -1 -&gt; X == 31</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, X,</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), TypeBits-1));</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &gt;  -1 -&gt; X != 31</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>)</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, X,</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), TypeBits-1));</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!RHSV) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &lt;  0 -&gt; X == 31</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &lt;= 0 -&gt; X == 31</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, X,</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), TypeBits-1));</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &gt;= 0 -&gt; X != 31</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            <span class="comment">// (1 &lt;&lt; X) &gt;  0 -&gt; X != 31</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>)</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, X,</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), TypeBits-1));</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;          }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;          <span class="keywordflow">if</span> (RHSVIsPowerOf2)</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                Pred, X, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), RHSV.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>()));</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;              ICI, Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? Builder-&gt;getFalse()</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                             : Builder-&gt;getTrue());</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        }</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">// Check that the shift amount is in range.  If not, don&#39;t perform</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">// undefined shifts.  When the shift is visited it will be</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">// simplified.</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a90982bca61da940a80629040c075e33e">uge</a>(TypeBits))</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="comment">// If we are comparing against bits always shifted out, the</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="comment">// comparison cannot succeed.</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Comp =</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(RHS, ShAmt),</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                                                                 ShAmt);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">if</span> (Comp != RHS) {<span class="comment">// Comparing against a bit that we know is zero.</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="keywordtype">bool</span> IsICMP_NE = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cst = Builder-&gt;getInt1(IsICMP_NE);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Cst);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="comment">// If the shift is NUW, then it is just shifting out zeros, no need for an</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="comment">// AND.</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">if</span> (cast&lt;BinaryOperator&gt;(LHSI)-&gt;hasNoUnsignedWrap())</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                            <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(RHS, ShAmt));</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="comment">// If the shift is NSW and we compare to 0, then it is just shifting out</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="comment">// sign bits, no need for an AND either.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">if</span> (cast&lt;BinaryOperator&gt;(LHSI)-&gt;hasNoSignedWrap() &amp;&amp; RHSV == 0)</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                            <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(RHS, ShAmt));</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="comment">// Otherwise strength reduce the shift into an and.</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        uint32_t ShAmtVal = (uint32_t)ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(TypeBits);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Mask = Builder-&gt;getInt(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(TypeBits,</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                                          TypeBits - ShAmtVal));</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> =</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;          Builder-&gt;CreateAnd(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),Mask, LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.mask&quot;</span>);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a>,</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                            <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(RHS, ShAmt));</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="comment">// If this is a signed comparison to 0 and the shift is sign preserving,</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">// use the shift LHS operand instead.</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineCompares_8cpp.html#abc22daabfc0c272f3bca65808533bdcd">isSignTest</a>(pred, RHS) &amp;&amp;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        cast&lt;BinaryOperator&gt;(LHSI)-&gt;hasNoSignedWrap())</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(pred,</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                          LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()));</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// Otherwise, if this is a comparison of the sign bit, simplify to and/test.</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordtype">bool</span> TrueIfSigned = <span class="keyword">false</span>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="InstCombineCompares_8cpp.html#aab9d1b39f9f6b722e3b89b9650d6051d">isSignBitCheck</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), RHS, TrueIfSigned)) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="comment">// (X &lt;&lt; 31) &lt;s 0  --&gt; (X&amp;1) != 0</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Mask = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                                        <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(TypeBits,</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                                            TypeBits-ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>()-1));</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> =</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        Builder-&gt;CreateAnd(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Mask, LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.mask&quot;</span>);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(TrueIfSigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                          And, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(And-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// Transform (icmp pred iM (shl iM %v, N), CI)</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">// -&gt; (icmp pred i(M-N) (trunc %v iM to i(M-N)), (trunc (CI&gt;&gt;N))</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// Transform the shl to a trunc if (trunc (CI&gt;&gt;N)) has no loss and M-N.</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// This enables to get rid of the shift in favor of a trunc which can be</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// free on the target. It has the additional benefit of comparing to a</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// smaller constant, which will be target friendly.</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordtype">unsigned</span> Amt = ShAmt-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(TypeBits-1);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        Amt != 0 &amp;&amp; RHSV.<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>() &gt;= Amt) {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *NTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(ICI.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), TypeBits - Amt);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NCI = <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                        <a class="code" href="classllvm_1_1ConstantExpr.html#a1870db0671d5177f89779850b6310993">ConstantExpr::getAShr</a>(RHS,</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), Amt)),</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                        NTy);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                          Builder-&gt;CreateTrunc(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), NTy),</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                          NCI);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  }</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:         <span class="comment">// (icmp pred (shr X, ShAmt), CI)</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr: {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="comment">// Handle equality comparisons of shift-by-constant.</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = cast&lt;BinaryOperator&gt;(LHSI);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShAmt = dyn_cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = FoldICmpShrCst(ICI, BO, ShAmt))</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="comment">// Handle exact shr&#39;s.</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>() &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordflow">if</span> (RHSV.<a class="code" href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>())</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    }</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keywordflow">case</span> Instruction::SDiv:</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">// Fold: icmp pred ([us]div X, C1), C2 -&gt; range test</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">// Fold this div into the comparison, producing a range check.</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="comment">// Determine, based on the divide type, what the range is being</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="comment">// checked.  If there is an overflow on the low or high side, remember</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">// it, otherwise compute the range [low, hi) bounding the new value.</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="comment">// See: InsertRangeTest above for the kinds of replacements possible.</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *DivRHS = dyn_cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldICmpDivCst(ICI, cast&lt;BinaryOperator&gt;(LHSI),</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                                          DivRHS))</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub: {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSC = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">if</span> (!LHSC) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;LHSV = LHSC-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// C1-X &lt;u C2 -&gt; (X|(C2-1)) == C1</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">//   iff C1 &amp; (C2-1) == C2-1</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="comment">//       C2 is a power of 2</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        RHSV.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>() &amp;&amp; (LHSV &amp; (RHSV - 1)) == (RHSV - 1))</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                          Builder-&gt;CreateOr(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), RHSV - 1),</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                          LHSC);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="comment">// C1-X &gt;u C2 -&gt; (X|C2) != C1</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="comment">//   iff C1 &amp; C2 == C2</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">//       C2+1 is a power of 2</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        (RHSV + 1).isPowerOf2() &amp;&amp; (LHSV &amp; RHSV) == RHSV)</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                          Builder-&gt;CreateOr(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), RHSV), LHSC);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  }</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="comment">// Fold: icmp pred (add X, C1), C2</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">if</span> (!ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSC = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordflow">if</span> (!LHSC) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;LHSV = LHSC-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CR = ICI.<a class="code" href="classllvm_1_1ICmpInst.html#ac54ee9c0d3aa35349072cebce26af87b">makeConstantRange</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), RHSV)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                            .subtract(LHSV);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">if</span> (CR.<a class="code" href="classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">getLower</a>().<a class="code" href="classllvm_1_1APInt.html#a9e981fb2ff9cfa5bb54229dbb5dc78b7">isSignBit</a>()) {</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                              Builder-&gt;getInt(CR.<a class="code" href="classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">getUpper</a>()));</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CR.<a class="code" href="classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">getUpper</a>().<a class="code" href="classllvm_1_1APInt.html#a9e981fb2ff9cfa5bb54229dbb5dc78b7">isSignBit</a>()) {</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                              Builder-&gt;getInt(CR.<a class="code" href="classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">getLower</a>()));</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">if</span> (CR.<a class="code" href="classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">getLower</a>().<a class="code" href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>()) {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                              Builder-&gt;getInt(CR.<a class="code" href="classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">getUpper</a>()));</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CR.<a class="code" href="classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">getUpper</a>().<a class="code" href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>()) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                              Builder-&gt;getInt(CR.<a class="code" href="classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">getLower</a>()));</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="comment">// X-C1 &lt;u C2 -&gt; (X &amp; -C2) == C1</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="comment">//   iff C1 &amp; (C2-1) == 0</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">//       C2 is a power of 2</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;          RHSV.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>() &amp;&amp; (LHSV &amp; (RHSV - 1)) == 0)</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>,</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                            Builder-&gt;CreateAnd(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), -RHSV),</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                            <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(LHSC));</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="comment">// X-C1 &gt;u C2 -&gt; (X &amp; ~C2) != C1</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="comment">//   iff C1 &amp; C2 == 0</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="comment">//       C2+1 is a power of 2</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;          (RHSV + 1).isPowerOf2() &amp;&amp; (LHSV &amp; RHSV) == 0)</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>,</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                            Builder-&gt;CreateAnd(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), ~RHSV),</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                            <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(LHSC));</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// Simplify icmp_eq and icmp_ne instructions with integer constant RHS.</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordtype">bool</span> isICMP_NE = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="comment">// If the first operand is (add|sub|and|or|xor|rem) with a constant, and</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// the second operand is a constant, simplify a bit.</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(LHSI)) {</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">switch</span> (BO-&gt;getOpcode()) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="keywordflow">case</span> Instruction::SRem:</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="comment">// If we have a signed (X % (2^c)) == 0, turn it into an unsigned one.</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">if</span> (RHSV == 0 &amp;&amp; isa&lt;ConstantInt&gt;(BO-&gt;getOperand(1)) &amp;&amp;BO-&gt;hasOneUse()){</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;V = cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))-&gt;getValue();</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;          <span class="keywordflow">if</span> (V.<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(1) &amp;&amp; V.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRem =</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;              Builder-&gt;CreateURem(BO-&gt;getOperand(0), BO-&gt;getOperand(1),</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                                  BO-&gt;getName());</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), NewRem,</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                                <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(BO-&gt;getType()));</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;          }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="comment">// Replace ((add A, B) != C) with (A != C-B) if B &amp; C are constants.</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BOp1C = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;          <span class="keywordflow">if</span> (BO-&gt;hasOneUse())</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(0),</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                                <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(RHS, BOp1C));</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSV == 0) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;          <span class="comment">// Replace ((add A, B) != 0) with (A != -B) if A or B is</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;          <span class="comment">// efficiently invertible, or if the add has just this one use.</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *BOp0 = BO-&gt;getOperand(0), *BOp1 = BO-&gt;getOperand(1);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NegVal = dyn_castNegVal(BOp1))</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BOp0, NegVal);</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NegVal = dyn_castNegVal(BOp0))</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), NegVal, BOp1);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;          <span class="keywordflow">if</span> (BO-&gt;hasOneUse()) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Neg = Builder-&gt;CreateNeg(BOp1);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            Neg-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(BO);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BOp0, Neg);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;          }</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        }</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <span class="comment">// For the xor case, we can xor two constants together, eliminating</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="comment">// the explicit xor.</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *BOC = dyn_cast&lt;Constant&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(0),</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                              <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(RHS, BOC));</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSV == 0) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;          <span class="comment">// Replace ((xor A, B) != 0) with (A != B)</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(0),</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                              BO-&gt;getOperand(1));</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="comment">// Replace ((sub A, B) != C) with (B != A-C) if A &amp; C are constants.</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BOp0C = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(0))) {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;          <span class="keywordflow">if</span> (BO-&gt;hasOneUse())</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(1),</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                                <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(BOp0C, RHS));</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSV == 0) {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;          <span class="comment">// Replace ((sub A, B) != 0) with (A != B)</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(0),</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                              BO-&gt;getOperand(1));</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        }</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="comment">// If bits are being or&#39;d in that are not present in the constant we</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="comment">// are comparing against, then the comparison could never succeed!</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BOC = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NotCI = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(RHS);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(BOC, NotCI)-&gt;isNullValue())</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getInt1(isICMP_NE));</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        }</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BOC = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;          <span class="comment">// If bits are being compared against that are and&#39;d out, then the</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;          <span class="comment">// comparison can never succeed!</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;          <span class="keywordflow">if</span> ((RHSV &amp; ~BOC-&gt;getValue()) != 0)</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Builder-&gt;getInt1(isICMP_NE));</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;          <span class="comment">// If we have ((X &amp; C) == C), turn it into ((X &amp; C) != 0).</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;          <span class="keywordflow">if</span> (RHS == BOC &amp;&amp; RHSV.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>())</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(isICMP_NE ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> :</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                                <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, LHSI,</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()));</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <span class="comment">// Don&#39;t perform the following transforms if the AND has multiple uses</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;          <span class="keywordflow">if</span> (!BO-&gt;hasOneUse())</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;          <span class="comment">// Replace (and X, (1 &lt;&lt; size(X)-1) != 0) with x s&lt; 0</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;          <span class="keywordflow">if</span> (BOC-&gt;getValue().isSignBit()) {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = BO-&gt;getOperand(0);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = isICMP_NE ?</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;              <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(pred, X, Zero);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;          }</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;          <span class="comment">// ((X &amp; ~7) == 0) --&gt; X &lt; 8</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;          <span class="keywordflow">if</span> (RHSV == 0 &amp;&amp; <a class="code" href="InstCombineCompares_8cpp.html#a3768a0dde13dc5f3ebeb41cb700d4976">isHighOnes</a>(BOC)) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = BO-&gt;getOperand(0);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegX = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(BOC);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = isICMP_NE ?</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;              <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(pred, X, NegX);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;          }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="keywordflow">if</span> (RHSV == 0 &amp;&amp; BO-&gt;hasNoSignedWrap()) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BOC = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="comment">// The trivial case (mul X, 0) is handled by InstSimplify</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="comment">// General case : (mul X, C) != 0 iff X != 0</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="comment">//                (mul X, C) == 0 iff X == 0</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            <span class="keywordflow">if</span> (!BOC-&gt;isZero())</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO-&gt;getOperand(0),</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()));</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;          }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(LHSI)) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="comment">// Handle icmp {eq|ne} &lt;intrinsic&gt;, intcst.</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">Intrinsic::bswap</a>:</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        Worklist.Add(II);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, II-&gt;getArgOperand(0));</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, Builder-&gt;getInt(RHSV.<a class="code" href="classllvm_1_1APInt.html#a513b4047f0685e18fa35a11fd261cebd">byteSwap</a>()));</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aec4d763aa35e2d7933293967ebf71d89">Intrinsic::ctlz</a>:</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acf42e24475fdea623c2a8cb7b3f412c4">Intrinsic::cttz</a>:</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="comment">// ctz(A) == bitwidth(a)  -&gt;  A == 0 and likewise for !=</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span> (RHSV == RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>()) {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;          Worklist.Add(II);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;          ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, II-&gt;getArgOperand(0));</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;          ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>(), 0));</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;          <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a71901b588a9f2b63c6a878ad6c20dc32">Intrinsic::ctpop</a>:</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="comment">// popcount(A) == 0  -&gt;  A == 0 and likewise for !=</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="keywordflow">if</span> (RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;          Worklist.Add(II);</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;          ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, II-&gt;getArgOperand(0));</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;          ICI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, RHS);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;          <span class="keywordflow">return</span> &amp;ICI;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      }</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    }</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;}</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">/// visitICmpInstWithCastAndCast - Handle icmp (cast x to y), (cast/cst).</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment">/// We only handle extending casts so far.</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01786"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a087938e962ce58fbba9141d4906d9c7e"> 1786</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a087938e962ce58fbba9141d4906d9c7e">InstCombiner::visitICmpInstWithCastAndCast</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;ICI) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *LHSCI = cast&lt;CastInst&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSCIOp        = LHSCI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy     = LHSCIOp-&gt;getType();</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy    = LHSCI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSCIOp;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">// Turn icmp (ptrtoint x), (ptrtoint/c) into a compare of the input if the</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// integer type is the same size as the pointer type.</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="keywordflow">if</span> (TD &amp;&amp; LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>() == Instruction::PtrToInt &amp;&amp;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      TD-&gt;getPointerTypeSizeInBits(SrcTy) == DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">getIntegerBitWidth</a>()) {</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSOp = 0;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC = dyn_cast&lt;Constant&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      RHSOp = <a class="code" href="classllvm_1_1ConstantExpr.html#a15e279291892399c141cd01c7e358cbf">ConstantExpr::getIntToPtr</a>(RHSC, SrcTy);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PtrToIntInst.html">PtrToIntInst</a> *RHSC = dyn_cast&lt;PtrToIntInst&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      RHSOp = RHSC-&gt;getOperand(0);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="comment">// If the pointer types don&#39;t match, insert a bitcast.</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="keywordflow">if</span> (LHSCIOp-&gt;getType() != RHSOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        RHSOp = Builder-&gt;CreateBitCast(RHSOp, LHSCIOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    }</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">if</span> (RHSOp)</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSCIOp, RHSOp);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  }</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="comment">// The code below only handles extension cast instructions, so far.</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="comment">// Enforce this.</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>() != Instruction::ZExt &amp;&amp;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>() != Instruction::SExt)</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordtype">bool</span> isSignedExt = LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>() == Instruction::SExt;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordtype">bool</span> isSignedCmp = ICI.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>();</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="comment">// Not an extension from the same type?</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    RHSCIOp = CI-&gt;getOperand(0);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">if</span> (RHSCIOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != LHSCIOp-&gt;getType())</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="comment">// If the signedness of the two casts doesn&#39;t agree (i.e. one is a sext</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="comment">// and the other is a zext), then we can&#39;t handle this.</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;getOpcode() != LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>())</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="comment">// Deal with equality cases early.</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSCIOp, RHSCIOp);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="comment">// A signed comparison of sign extended values simplifies into a</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="comment">// signed comparison.</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">if</span> (isSignedCmp &amp;&amp; isSignedExt)</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSCIOp, RHSCIOp);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="comment">// The other three cases all fold into an unsigned comparison.</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>(), LHSCIOp, RHSCIOp);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  }</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="comment">// If we aren&#39;t dealing with a constant on the RHS, exit early</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(ICI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="keywordflow">if</span> (!CI)</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// Compute the constant that would happen if we truncated to SrcTy then</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// reextended to DestTy.</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Res1 = <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(CI, SrcTy);</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Res2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">ConstantExpr::getCast</a>(LHSCI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>(),</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                                                Res1, DestTy);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="comment">// If the re-extended constant didn&#39;t change...</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keywordflow">if</span> (Res2 == CI) {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="comment">// Deal with equality cases early.</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSCIOp, Res1);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="comment">// A signed comparison of sign extended values simplifies into a</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="comment">// signed comparison.</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span> (isSignedExt &amp;&amp; isSignedCmp)</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSCIOp, Res1);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="comment">// The other three cases all fold into an unsigned comparison.</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(ICI.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>(), LHSCIOp, Res1);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="comment">// The re-extended constant changed so the constant cannot be represented</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="comment">// in the shorter type. Consequently, we cannot emit a simple comparison.</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="comment">// All the cases that fold to true or false will have already been handled</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="comment">// by SimplifyICmpInst, so only deal with the tricky case.</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="keywordflow">if</span> (isSignedCmp || !isSignedExt)</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="comment">// Evaluate the comparison for LT (we invert for GT below). LE and GE cases</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="comment">// should have been folded away previously and not enter in here.</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">// We&#39;re performing an unsigned comp with a sign extended value.</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="comment">// This is true if the input is &gt;= 0. [aka &gt;s -1]</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegOne = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(SrcTy);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = Builder-&gt;CreateICmpSGT(LHSCIOp, NegOne, ICI.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="comment">// Finally, return the value computed.</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">if</span> (ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>)</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(ICI, Result);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  assert(ICI.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <span class="stringliteral">&quot;ICmp should be folded!&quot;</span>);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(Result);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;}</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">/// ProcessUGT_ADDCST_ADD - The caller has matched a pattern of the form:</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">///   I = icmp ugt (add (add A, B), CI2), CI1</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">/// If this is of the form:</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment">///   sum = a + b</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">///   if (sum+128 &gt;u 255)</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">/// Then replace it with llvm.sadd.with.overflow.i8.</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01901"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a0d991c3d5a987e28b2ae44852b1756b5"> 1901</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a0d991c3d5a987e28b2ae44852b1756b5">ProcessUGT_ADDCST_ADD</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>,</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI1,</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                                          <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// The transformation we&#39;re trying to do here is to transform this into an</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="comment">// llvm.sadd.with.overflow.  To do this, we have to replace the original add</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="comment">// with a narrower add, and discard the add-with-constant that is part of the</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="comment">// range check (if we can&#39;t eliminate it, this isn&#39;t profitable).</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="comment">// In order to eliminate the add-with-constant, the compare can be its only</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="comment">// use.</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AddWithCst = cast&lt;Instruction&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">if</span> (!AddWithCst-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="comment">// If CI2 is 2^7, 2^15, 2^31, then it might be an sadd.with.overflow.</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="keywordflow">if</span> (!CI2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="keywordtype">unsigned</span> NewWidth = CI2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>();</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keywordflow">if</span> (NewWidth != 7 &amp;&amp; NewWidth != 15 &amp;&amp; NewWidth != 31) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="comment">// The width of the new add formed is 1 more than the bias.</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  ++NewWidth;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="comment">// Check to see that CI1 is an all-ones value with NewWidth bits.</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>() == NewWidth ||</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() != <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>(), NewWidth))</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">// This is only really a signed overflow check if the inputs have been</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">// sign-extended; check for that condition. For example, if CI2 is 2^31 and</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="comment">// the operands of the add are 64 bits wide, we need at least 33 sign bits.</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordtype">unsigned</span> NeededSignBits = CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>() - NewWidth + 1;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5c6a15b13538f9f97dc6e8a356cbe2c6">ComputeNumSignBits</a>(A) &lt; NeededSignBits ||</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5c6a15b13538f9f97dc6e8a356cbe2c6">ComputeNumSignBits</a>(B) &lt; NeededSignBits)</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// In order to replace the original add with a narrower</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="comment">// llvm.sadd.with.overflow, the only uses allowed are the add-with-constant</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">// and truncates that discard the high bits of the add.  Verify that this is</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// the case.</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigAdd = cast&lt;Instruction&gt;(AddWithCst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span> (*UI == AddWithCst) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="comment">// Only accept truncates for now.  We would really like a nice recursive</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="comment">// predicate like SimplifyDemandedBits, but which goes downwards the use-def</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="comment">// chain to see which bits of a value are actually demanded.  If the</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="comment">// original add had another add which was then immediately truncated, we</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// could still do the transformation.</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> *TI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>&gt;(*UI);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">if</span> (TI == 0 ||</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        TI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &gt; NewWidth) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="comment">// If the pattern matches, truncate the inputs to the narrower type and</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">// use the sadd_with_overflow intrinsic to efficiently compute both the</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// result and the overflow bit.</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewType = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), NewWidth);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(M, <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">Intrinsic::sadd_with_overflow</a>,</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                       NewType);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> *Builder = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="comment">// Put the new code above the original add, in case there are any uses of the</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="comment">// add between the add and the compare.</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  Builder-&gt;<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(OrigAdd);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncA = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(A, NewType, A-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.trunc&quot;</span>);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncB = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(B, NewType, B-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.trunc&quot;</span>);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(F, TruncA, TruncB, <span class="stringliteral">&quot;sadd&quot;</span>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a478d9db5034ad1bef340198c3aaf861a">CreateExtractValue</a>(Call, 0, <span class="stringliteral">&quot;sadd.result&quot;</span>);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ZExt = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">CreateZExt</a>(Add, OrigAdd-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">// The inner add was the result of the narrow add, zero extended to the</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="comment">// wider type.  Replace it with the result computed by the intrinsic.</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(*OrigAdd, ZExt);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="comment">// The original icmp gets replaced with the overflow value.</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(Call, 1, <span class="stringliteral">&quot;sadd.overflow&quot;</span>);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;}</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#a7186564b18aee592f242128da5aa21db"> 1983</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCompares_8cpp.html#a7186564b18aee592f242128da5aa21db">ProcessUAddIdiom</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigAddV,</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                                     <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <span class="comment">// Don&#39;t bother doing this transformation for pointers, don&#39;t do it for</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="comment">// vectors.</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;IntegerType&gt;(OrigAddV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="comment">// If the add is a constant expr, then we don&#39;t bother transforming it.</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigAdd = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(OrigAddV);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="keywordflow">if</span> (OrigAdd == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = OrigAdd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *RHS = OrigAdd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="comment">// Put the new code above the original add, in case there are any uses of the</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="comment">// add between the add and the compare.</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> *Builder = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  Builder-&gt;<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(OrigAdd);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(M, <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">Intrinsic::uadd_with_overflow</a>, Ty);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(F, LHS, RHS, <span class="stringliteral">&quot;uadd&quot;</span>);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a478d9db5034ad1bef340198c3aaf861a">CreateExtractValue</a>(Call, 0);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(*OrigAdd, Add);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// The original icmp gets replaced with the overflow value.</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(Call, 1, <span class="stringliteral">&quot;uadd.overflow&quot;</span>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;}</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">// DemandedBitsLHSMask - When performing a comparison against a constant,</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">// it is possible that not all the bits in the LHS are demanded.  This helper</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">// method computes the mask that IS demanded.</span></div><div class="line"><a name="l02015"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aa8df8b9877663703056c1d9e7ffffc3a"> 2015</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="InstCombineCompares_8cpp.html#aa8df8b9877663703056c1d9e7ffffc3a">DemandedBitsLHSMask</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                                 <span class="keywordtype">unsigned</span> BitWidth, <span class="keywordtype">bool</span> isSignCheck) {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordflow">if</span> (isSignCheck)</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">APInt::getSignBit</a>(BitWidth);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordflow">if</span> (!CI) <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(BitWidth);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;RHS = CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// For a UGT comparison, we don&#39;t care about any bits that</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// correspond to the trailing ones of the comparand.  The value of these</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// bits doesn&#39;t impact the outcome of the comparison, because any value</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// greater than the RHS must differ in a bit higher than these due to carry.</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>: {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordtype">unsigned</span> trailingOnes = RHS.<a class="code" href="classllvm_1_1APInt.html#a3f94def79176d0cd1c4bec190e7eb66c">countTrailingOnes</a>();</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> lowBitsSet = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, trailingOnes);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">return</span> ~lowBitsSet;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// Similarly, for a ULT comparison, we don&#39;t care about the trailing zeros.</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">// Any value less than the RHS must differ in a higher bit because of carries.</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>: {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordtype">unsigned</span> trailingZeros = RHS.<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>();</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> lowBitsSet = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, trailingZeros);</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">return</span> ~lowBitsSet;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  }</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(BitWidth);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  }</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">/// \brief Check if the order of \p Op0 and \p Op1 as operand in an ICmpInst</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">/// should be swapped.</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">/// The descision is based on how many times these two operands are reused</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="comment">/// as subtract operands and their positions in those instructions.</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment">/// The rational is that several architectures use the same instruction for</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment">/// both subtract and cmp, thus it is better if the order of those operands</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="comment">/// match.</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment">/// \return true if Op0 and Op1 should be swapped.</span></div><div class="line"><a name="l02057"></a><span class="lineno"><a class="line" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56"> 2057</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> * Op0,</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> * Op1) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="comment">// Filter out pointer value as those cannot appears directly in subtract.</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="comment">// FIXME: we may want to go through inttoptrs or bitcasts.</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">// Count every uses of both Op0 and Op1 in a subtract.</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// Each time Op0 is the first operand, count -1: swapping is bad, the</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">// subtract has already the same layout as the compare.</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="comment">// Each time Op0 is the second operand, count +1: swapping is good, the</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="comment">// subtract has a diffrent layout as the compare.</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// At the end, if the benefit is greater than 0, Op0 should come second to</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">// expose more CSE opportunities.</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordtype">int</span> GlobalSwapBenefits = 0;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> UI = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), UIEnd = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI != UIEnd; ++UI) {</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BinOp = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(*UI);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">if</span> (!BinOp || BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() != Instruction::Sub)</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="comment">// If Op0 is the first argument, this is not beneficial to swap the</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="comment">// arguments.</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordtype">int</span> LocalSwapBenefits = -1;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordtype">unsigned</span> Op1Idx = 1;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keywordflow">if</span> (BinOp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(Op1Idx) == Op0) {</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      Op1Idx = 0;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      LocalSwapBenefits = 1;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    }</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">if</span> (BinOp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(Op1Idx) != Op1)</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    GlobalSwapBenefits += LocalSwapBenefits;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  }</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="keywordflow">return</span> GlobalSwapBenefits &gt; 0;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;}</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a2b0b27ac57f22393b7c78727cb8539d8"> 2090</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a2b0b27ac57f22393b7c78727cb8539d8">InstCombiner::visitICmpInst</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="keywordtype">unsigned</span> Op0Cplxity = <a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(Op0);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keywordtype">unsigned</span> Op1Cplxity = <a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(Op1);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment">  /// Orders the operands of the compare so that they are listed from most</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">  /// complex to least complex.  This puts constants before unary operators,</span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">  /// before binary operators.</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (Op0Cplxity &lt; Op1Cplxity ||</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        (Op0Cplxity == Op1Cplxity &amp;&amp;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;         <a class="code" href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a>(Op0, Op1))) {</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    I.<a class="code" href="classllvm_1_1ICmpInst.html#acbc778ccd1faf4e95963c9a980acc7a5">swapOperands</a>();</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a06316e4ad9eb44b69c40619212d5132d">SimplifyICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op0, Op1, TD))</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="comment">// comparing -val or val with non-zero is the same as just comparing val</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="comment">// ie, abs(val) != 0 -&gt; val != 0</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>()))</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, *SelectTrue, *SelectFalse;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#af254e0a0a7277f1b415dbabc3ee37fb6">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Cond), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelectTrue),</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelectFalse)))) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = dyn_castNegVal(SelectTrue)) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">if</span> (V == SelectFalse)</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">CmpInst::Create</a>(Instruction::ICmp, I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), V, Op1);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = dyn_castNegVal(SelectFalse)) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">if</span> (V == SelectTrue)</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">CmpInst::Create</a>(Instruction::ICmp, I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), V, Op1);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  }</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="comment">// icmp&#39;s with boolean values can always be turned into bitwise operations</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;isIntegerTy(1)) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid icmp instruction!&quot;</span>);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>: {               <span class="comment">// icmp eq i1 A, B -&gt; ~(A^B)</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a> = Builder-&gt;CreateXor(Op0, Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;tmp&quot;</span>);</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(Xor);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    }</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:                  <span class="comment">// icmp eq i1 A, B -&gt; A^B</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(Op0, Op1);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);                   <span class="comment">// Change icmp ugt -&gt; icmp ult</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <span class="comment">// FALL THROUGH</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:{               <span class="comment">// icmp ult i1 A, B -&gt; ~A &amp; B</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(Op0, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;tmp&quot;</span>);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Not, Op1);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);                   <span class="comment">// Change icmp sgt -&gt; icmp slt</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <span class="comment">// FALL THROUGH</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>: {               <span class="comment">// icmp slt i1 A, B -&gt; A &amp; ~B</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;tmp&quot;</span>);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Not, Op0);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);                   <span class="comment">// Change icmp uge -&gt; icmp ule</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="comment">// FALL THROUGH</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>: {               <span class="comment">//  icmp ule i1 A, B -&gt; ~A | B</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(Op0, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;tmp&quot;</span>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op1);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);                   <span class="comment">// Change icmp sge -&gt; icmp sle</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      <span class="comment">// FALL THROUGH</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>: {               <span class="comment">//  icmp sle i1 A, B -&gt; A | ~B</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;tmp&quot;</span>);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op0);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    }</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordtype">unsigned</span> BitWidth = 0;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;isIntOrIntVectorTy())</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    BitWidth = Ty-&gt;getScalarSizeInBits();</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TD)  <span class="comment">// Pointers require TD info to get their size.</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    BitWidth = TD-&gt;getTypeSizeInBits(Ty-&gt;getScalarType());</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordtype">bool</span> isSignBit = <span class="keyword">false</span>;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="comment">// See if we are doing a comparison with a constant.</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="comment">// Match the following pattern, which is a common idiom when writing</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="comment">// overflow-safe integer arithmetic function.  The source performs an</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="comment">// addition in wider type, and explicitly checks for overflow using</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="comment">// comparisons against INT_MIN and INT_MAX.  Simplify this by using the</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="comment">// sadd_with_overflow intrinsic.</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">// TODO: This could probably be generalized to handle other overflow-safe</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">// operations if we worked out the formulas to compute the appropriate</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="comment">// magic constants.</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">// sum = a + b</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="comment">// if (sum+128 &gt;u 255)  ...  -&gt; llvm.sadd.with.overflow.i8</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2;    <span class="comment">// I = icmp ugt (add (add A, B), CI2), CI</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(CI2))))</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineCompares_8cpp.html#a0d991c3d5a987e28b2ae44852b1756b5">ProcessUGT_ADDCST_ADD</a>(I, A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, CI2, CI, *<span class="keyword">this</span>))</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="comment">// (icmp ne/eq (sub A B) 0) -&gt; (icmp ne/eq A, B)</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() &amp;&amp; CI-&gt;isZero() &amp;&amp;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)))) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <span class="comment">// (icmp cond A B) if cond is equality</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="comment">// If we have an icmp le or icmp ge instruction, turn it into the</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="comment">// appropriate icmp lt or icmp gt instruction.  This allows us to rely on</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="comment">// them being folded in the code below.  The SimplifyICmpInst code has</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="comment">// already handled the edge cases for us, so we just assert on them.</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      assert(!CI-&gt;isMaxValue(<span class="keyword">false</span>));                 <span class="comment">// A &lt;=u MAX -&gt; TRUE</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Op0,</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                          Builder-&gt;getInt(CI-&gt;getValue()+1));</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      assert(!CI-&gt;isMaxValue(<span class="keyword">true</span>));                  <span class="comment">// A &lt;=s MAX -&gt; TRUE</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> ICmpInst(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, Op0,</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                          Builder-&gt;getInt(CI-&gt;getValue()+1));</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      assert(!CI-&gt;isMinValue(<span class="keyword">false</span>));                 <span class="comment">// A &gt;=u MIN -&gt; TRUE</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> ICmpInst(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, Op0,</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                          Builder-&gt;getInt(CI-&gt;getValue()-1));</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      assert(!CI-&gt;isMinValue(<span class="keyword">true</span>));                  <span class="comment">// A &gt;=s MIN -&gt; TRUE</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> ICmpInst(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, Op0,</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                          Builder-&gt;getInt(CI-&gt;getValue()-1));</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    }</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="comment">// If this comparison is a normal comparison, it demands all</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">// bits, if it is a sign bit comparison, it only demands the sign bit.</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordtype">bool</span> UnusedBit;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    isSignBit = <a class="code" href="InstCombineCompares_8cpp.html#aab9d1b39f9f6b722e3b89b9650d6051d">isSignBitCheck</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), CI, UnusedBit);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <span class="comment">// See if we can fold the comparison based on range information we can get</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <span class="comment">// by checking whether bits are known to be zero or one in the input.</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="keywordflow">if</span> (BitWidth != 0) {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0KnownZero(BitWidth, 0), Op0KnownOne(BitWidth, 0);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op1KnownZero(BitWidth, 0), Op1KnownOne(BitWidth, 0);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (SimplifyDemandedBits(I.<a class="code" href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">getOperandUse</a>(0),</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                             <a class="code" href="InstCombineCompares_8cpp.html#aa8df8b9877663703056c1d9e7ffffc3a">DemandedBitsLHSMask</a>(I, BitWidth, isSignBit),</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                             Op0KnownZero, Op0KnownOne, 0))</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">if</span> (SimplifyDemandedBits(I.<a class="code" href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">getOperandUse</a>(1),</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                             <a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(BitWidth),</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                             Op1KnownZero, Op1KnownOne, 0))</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="comment">// Given the known and unknown bits, compute a range that the LHS could be</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="comment">// in.  Compute the Min, Max and RHS values based on the known bits. For the</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment">// EQ and NE we use unsigned values.</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0Min(BitWidth, 0), Op0Max(BitWidth, 0);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op1Min(BitWidth, 0), Op1Max(BitWidth, 0);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()) {</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      <a class="code" href="InstCombineCompares_8cpp.html#a2c8af3f0435c2f2777b08be28da284fb">ComputeSignedMinMaxValuesFromKnownBits</a>(Op0KnownZero, Op0KnownOne,</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                                             Op0Min, Op0Max);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <a class="code" href="InstCombineCompares_8cpp.html#a2c8af3f0435c2f2777b08be28da284fb">ComputeSignedMinMaxValuesFromKnownBits</a>(Op1KnownZero, Op1KnownOne,</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                                             Op1Min, Op1Max);</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <a class="code" href="InstCombineCompares_8cpp.html#ada48609926c51e52629a815158919f39">ComputeUnsignedMinMaxValuesFromKnownBits</a>(Op0KnownZero, Op0KnownOne,</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                                               Op0Min, Op0Max);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <a class="code" href="InstCombineCompares_8cpp.html#ada48609926c51e52629a815158919f39">ComputeUnsignedMinMaxValuesFromKnownBits</a>(Op1KnownZero, Op1KnownOne,</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                                               Op1Min, Op1Max);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="comment">// If Min and Max are known to be the same, then SimplifyDemandedBits</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="comment">// figured out that the LHS is a constant.  Just constant fold this now so</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="comment">// that code below can assume that Min != Max.</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op0) &amp;&amp; Op0Min == Op0Max)</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), Op0Min), Op1);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op1) &amp;&amp; Op1Min == Op1Max)</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op0,</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                          <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Op1-&gt;getType(), Op1Min));</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="comment">// Based on the range information we know about the LHS, see if we can</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="comment">// simplify this comparison.  For example, (x&amp;4) &lt; 8 is always true.</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown icmp opcode!&quot;</span>);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>: {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Op1Min) || Op0Min.ugt(Op1Max))</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <span class="comment">// If all bits are known zero except for one, then we know at most one</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="comment">// bit is set.   If the comparison is against zero, then this is a check</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="comment">// to see if *that* bit is set.</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0KnownZeroInverted = ~Op0KnownZero;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <span class="keywordflow">if</span> (~Op1KnownZero == 0 &amp;&amp; Op0KnownZeroInverted.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="comment">// If the LHS is an AND with the same constant, look through it.</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = 0;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSC = 0;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHS), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(LHSC))) ||</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            LHSC-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() != Op0KnownZeroInverted)</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;          LHS = Op0;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <span class="comment">// If the LHS is 1 &lt;&lt; x, and we know the result is a power of 2 like 8,</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="comment">// then turn &quot;((1 &lt;&lt; x)&amp;8) == 0&quot; into &quot;x != 3&quot;.</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)))) {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;          <span class="keywordtype">unsigned</span> CmpVal = Op0KnownZeroInverted.<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>();</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, X,</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), CmpVal));</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        }</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="comment">// If the LHS is 8 &gt;&gt;u x, and we know the result is a power of 2 like 1,</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="comment">// then turn &quot;((8 &gt;&gt;u x)&amp;1) == 0&quot; into &quot;x != 3&quot;.</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CI;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <span class="keywordflow">if</span> (Op0KnownZeroInverted == 1 &amp;&amp;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(CI), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X))))</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, X,</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                               CI-&gt;<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>()));</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    }</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>: {</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Op1Min) || Op0Min.ugt(Op1Max))</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="comment">// If all bits are known zero except for one, then we know at most one</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      <span class="comment">// bit is set.   If the comparison is against zero, then this is a check</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <span class="comment">// to see if *that* bit is set.</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Op0KnownZeroInverted = ~Op0KnownZero;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <span class="keywordflow">if</span> (~Op1KnownZero == 0 &amp;&amp; Op0KnownZeroInverted.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="comment">// If the LHS is an AND with the same constant, look through it.</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = 0;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSC = 0;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LHS), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(LHSC))) ||</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            LHSC-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() != Op0KnownZeroInverted)</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;          LHS = Op0;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        <span class="comment">// If the LHS is 1 &lt;&lt; x, and we know the result is a power of 2 like 8,</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        <span class="comment">// then turn &quot;((1 &lt;&lt; x)&amp;8) != 0&quot; into &quot;x == 3&quot;.</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)))) {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;          <span class="keywordtype">unsigned</span> CmpVal = Op0KnownZeroInverted.<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>();</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, X,</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), CmpVal));</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        <span class="comment">// If the LHS is 8 &gt;&gt;u x, and we know the result is a power of 2 like 1,</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <span class="comment">// then turn &quot;((8 &gt;&gt;u x)&amp;1) != 0&quot; into &quot;x == 3&quot;.</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CI;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">if</span> (Op0KnownZeroInverted == 1 &amp;&amp;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(CI), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X))))</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, X,</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                                               CI-&gt;<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>()));</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      }</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    }</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Op1Min))          <span class="comment">// A &lt;u B -&gt; true if max(A) &lt; min(B)</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="keywordflow">if</span> (Op0Min.uge(Op1Max))          <span class="comment">// A &lt;u B -&gt; false if min(A) &gt;= max(B)</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">if</span> (Op1Min == Op0Max)            <span class="comment">// A &lt;u B -&gt; A != B if max(A) == min(B)</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <span class="keywordflow">if</span> (Op1Max == Op0Min+1)        <span class="comment">// A &lt;u C -&gt; A == C-1 if min(A)+1 == C</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                              Builder-&gt;getInt(CI-&gt;getValue()-1));</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="comment">// (x &lt;u 2147483648) -&gt; (x &gt;s -1)  -&gt; true if sign bit clear</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;isMinValue(<span class="keyword">true</span>))</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, Op0,</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                           <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      }</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      <span class="keywordflow">if</span> (Op0Min.ugt(Op1Max))          <span class="comment">// A &gt;u B -&gt; true if min(A) &gt; max(B)</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#aa9537475b2b94f72ad6d5e8730dc40cb">ule</a>(Op1Min))          <span class="comment">// A &gt;u B -&gt; false if max(A) &lt;= max(B)</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="keywordflow">if</span> (Op1Max == Op0Min)            <span class="comment">// A &gt;u B -&gt; A != B if min(A) == max(B)</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keywordflow">if</span> (Op1Min == Op0Max-1)        <span class="comment">// A &gt;u C -&gt; A == C+1 if max(a)-1 == C</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                              Builder-&gt;getInt(CI-&gt;getValue()+1));</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        <span class="comment">// (x &gt;u 2147483647) -&gt; (x &lt;s 0)  -&gt; true if sign bit set</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;isMaxValue(<span class="keyword">true</span>))</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, Op0,</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      }</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(Op1Min))          <span class="comment">// A &lt;s B -&gt; true if max(A) &lt; min(C)</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      <span class="keywordflow">if</span> (Op0Min.sge(Op1Max))          <span class="comment">// A &lt;s B -&gt; false if min(A) &gt;= max(C)</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="keywordflow">if</span> (Op1Min == Op0Max)            <span class="comment">// A &lt;s B -&gt; A != B if max(A) == min(B)</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="keywordflow">if</span> (Op1Max == Op0Min+1)        <span class="comment">// A &lt;s C -&gt; A == C-1 if min(A)+1 == C</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                              Builder-&gt;getInt(CI-&gt;getValue()-1));</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      }</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordflow">if</span> (Op0Min.sgt(Op1Max))          <span class="comment">// A &gt;s B -&gt; true if min(A) &gt; max(B)</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a0c054b115b72d730d19b22847d155617">sle</a>(Op1Min))          <span class="comment">// A &gt;s B -&gt; false if max(A) &lt;= min(B)</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;      <span class="keywordflow">if</span> (Op1Max == Op0Min)            <span class="comment">// A &gt;s B -&gt; A != B if min(A) == max(B)</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Op0, Op1);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <span class="keywordflow">if</span> (Op1Min == Op0Max-1)        <span class="comment">// A &gt;s C -&gt; A == C+1 if max(A)-1 == C</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, Op0,</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                              Builder-&gt;getInt(CI-&gt;getValue()+1));</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      }</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      assert(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_SGE with ConstantInt not folded!&quot;</span>);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keywordflow">if</span> (Op0Min.sge(Op1Max))          <span class="comment">// A &gt;=s B -&gt; true if min(A) &gt;= max(B)</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(Op1Min))          <span class="comment">// A &gt;=s B -&gt; false if max(A) &lt; min(B)</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      assert(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_SLE with ConstantInt not folded!&quot;</span>);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a0c054b115b72d730d19b22847d155617">sle</a>(Op1Min))          <span class="comment">// A &lt;=s B -&gt; true if max(A) &lt;= min(B)</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">if</span> (Op0Min.sgt(Op1Max))          <span class="comment">// A &lt;=s B -&gt; false if min(A) &gt; max(B)</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      assert(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_UGE with ConstantInt not folded!&quot;</span>);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <span class="keywordflow">if</span> (Op0Min.uge(Op1Max))          <span class="comment">// A &gt;=u B -&gt; true if min(A) &gt;= max(B)</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">ult</a>(Op1Min))          <span class="comment">// A &gt;=u B -&gt; false if max(A) &lt; min(B)</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      assert(!isa&lt;ConstantInt&gt;(Op1) &amp;&amp; <span class="stringliteral">&quot;ICMP_ULE with ConstantInt not folded!&quot;</span>);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">if</span> (Op0Max.<a class="code" href="classllvm_1_1APInt.html#aa9537475b2b94f72ad6d5e8730dc40cb">ule</a>(Op1Min))          <span class="comment">// A &lt;=u B -&gt; true if max(A) &lt;= min(B)</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      <span class="keywordflow">if</span> (Op0Min.ugt(Op1Max))          <span class="comment">// A &lt;=u B -&gt; false if min(A) &gt; max(B)</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    }</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="comment">// Turn a signed comparison into an unsigned one if both operands</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <span class="comment">// are known to have the same sign.</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>() &amp;&amp;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        ((Op0KnownZero.isNegative() &amp;&amp; Op1KnownZero.isNegative()) ||</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;         (Op0KnownOne.isNegative() &amp;&amp; Op1KnownOne.isNegative())))</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>(), Op0, Op1);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  }</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="comment">// Test if the ICmpInst instruction is used exclusively by a select as</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">// part of a minimum or maximum operation. If so, refrain from doing</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="comment">// any other folding. This helps out other analyses which understand</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="comment">// non-obfuscated minimum and maximum idioms, such as ScalarEvolution</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="comment">// and CodeGen. And in this case, at least one of the comparison</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="comment">// operands has at least one user besides the compare (the select),</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="comment">// which would often largely negate the benefit of folding anyway.</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(*I.<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>()))</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      <span class="keywordflow">if</span> ((SI-&gt;getOperand(1) == Op0 &amp;&amp; SI-&gt;getOperand(2) == Op1) ||</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;          (SI-&gt;getOperand(2) == Op0 &amp;&amp; SI-&gt;getOperand(1) == Op1))</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="comment">// See if we are doing a comparison between a constant and an instruction that</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <span class="comment">// can be folded into the comparison.</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="comment">// Since the RHS is a ConstantInt (CI), if the left hand side is an</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="comment">// instruction, see if that instruction also has constants so that the</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="comment">// instruction can be folded into the icmp</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI = dyn_cast&lt;Instruction&gt;(Op0))</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = visitICmpInstWithInstAndIntCst(I, LHSI, CI))</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="comment">// Handle icmp with constant (but not simple integer constant) RHS</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC = dyn_cast&lt;Constant&gt;(Op1)) {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI = dyn_cast&lt;Instruction&gt;(Op0))</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      <span class="keywordflow">switch</span> (LHSI-&gt;getOpcode()) {</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;          <span class="comment">// icmp pred GEP (P, int 0, int 0, int 0), null -&gt; icmp pred P, null</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <span class="keywordflow">if</span> (RHSC-&gt;isNullValue() &amp;&amp;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            cast&lt;GetElementPtrInst&gt;(LHSI)-&gt;hasAllZeroIndices())</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;getOperand(0),</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(LHSI-&gt;getOperand(0)-&gt;getType()));</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>:</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;        <span class="comment">// Only fold icmp into the PHI if the phi and icmp are in the same</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="comment">// block.  If in the same block, we&#39;re encouraging jump threading.  If</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="comment">// not, we are just pessimizing the code by making an i1 phi.</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <span class="keywordflow">if</span> (LHSI-&gt;getParent() == I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>: {</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        <span class="comment">// If either operand of the select is a constant, we can fold the</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        <span class="comment">// comparison into the select arms, which will cause one to be</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <span class="comment">// constant folded and the select turned into a bitwise or.</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = 0, *Op2 = 0;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(LHSI-&gt;getOperand(1)))</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;          Op1 = <a class="code" href="classllvm_1_1ConstantExpr.html#a593bc53015a060d260c75fc599f9a7b1">ConstantExpr::getICmp</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, RHSC);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(LHSI-&gt;getOperand(2)))</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;          Op2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a593bc53015a060d260c75fc599f9a7b1">ConstantExpr::getICmp</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, RHSC);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="comment">// We only want to perform this transformation if it will not lead to</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="comment">// additional code. This is true if either both sides of the select</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <span class="comment">// fold to a constant (in which case the icmp is replaced with a select</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="comment">// which will usually simplify) or this is the only user of the</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="comment">// select (in which case we are trading a select+icmp for a simpler</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="comment">// select+icmp).</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <span class="keywordflow">if</span> ((Op1 &amp;&amp; Op2) || (LHSI-&gt;hasOneUse() &amp;&amp; (Op1 || Op2))) {</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;          <span class="keywordflow">if</span> (!Op1)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            Op1 = Builder-&gt;CreateICmp(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;getOperand(1),</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                                      RHSC, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;          <span class="keywordflow">if</span> (!Op2)</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;            Op2 = Builder-&gt;CreateICmp(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;getOperand(2),</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                                      RHSC, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(LHSI-&gt;getOperand(0), Op1, Op2);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        }</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="keywordflow">case</span> Instruction::IntToPtr:</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="comment">// icmp pred inttoptr(X), null -&gt; icmp pred X, 0</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <span class="keywordflow">if</span> (RHSC-&gt;isNullValue() &amp;&amp; TD &amp;&amp;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            TD-&gt;getIntPtrType(RHSC-&gt;getType()) ==</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;               LHSI-&gt;getOperand(0)-&gt;getType())</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;getOperand(0),</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(LHSI-&gt;getOperand(0)-&gt;getType()));</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        <span class="comment">// Try to optimize things like &quot;A[i] &gt; 4&quot; to index computations.</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP =</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;              dyn_cast&lt;GetElementPtrInst&gt;(LHSI-&gt;getOperand(0))) {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(GEP-&gt;getOperand(0)))</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            <span class="keywordflow">if</span> (GV-&gt;isConstant() &amp;&amp; GV-&gt;hasDefinitiveInitializer() &amp;&amp;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                !cast&lt;LoadInst&gt;(LHSI)-&gt;isVolatile())</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = FoldCmpLoadFromIndexedGlobal(GEP, GV, I))</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        }</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      }</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  }</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="comment">// If we can optimize a &#39;icmp GEP, P&#39; or &#39;icmp P, GEP&#39;, do so now.</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEP = dyn_cast&lt;GEPOperator&gt;(Op0))</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = FoldGEPICmp(GEP, Op1, I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <span class="keywordflow">return</span> NI;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEP = dyn_cast&lt;GEPOperator&gt;(Op1))</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NI = FoldGEPICmp(GEP, Op0,</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                           <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">ICmpInst::getSwappedPredicate</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()), I))</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;      <span class="keywordflow">return</span> NI;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <span class="comment">// Test to see if the operands of the icmp are casted versions of other</span></div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="comment">// values.  If the ptr-&gt;ptr cast can be stripped off both arguments, we do so</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="comment">// now.</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *CI = dyn_cast&lt;BitCastInst&gt;(Op0)) {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        (isa&lt;Constant&gt;(Op1) || isa&lt;BitCastInst&gt;(Op1))) {</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      <span class="comment">// We keep moving the cast from the left operand over to the right</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      <span class="comment">// operand, where it can often be eliminated completely.</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      Op0 = CI-&gt;getOperand(0);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <span class="comment">// If operand #1 is a bitcast instruction, it must also be a ptr-&gt;ptr cast</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <span class="comment">// so eliminate it as well.</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *CI2 = dyn_cast&lt;BitCastInst&gt;(Op1))</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        Op1 = CI2-&gt;getOperand(0);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      <span class="comment">// If Op1 is a constant, we can fold the cast into the constant.</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != Op1-&gt;getType()) {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op1C = dyn_cast&lt;Constant&gt;(Op1)) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;          Op1 = <a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(Op1C, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;          <span class="comment">// Otherwise, cast the RHS right before the icmp</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;          Op1 = Builder-&gt;CreateBitCast(Op1, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        }</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      }</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op0, Op1);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    }</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  }</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CastInst&gt;(Op0)) {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="comment">// Handle the special case of: icmp (cast bool to X), &lt;cst&gt;</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="comment">// This comes up when you have code like</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="comment">//   int X = A &lt; B;</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <span class="comment">//   if (X) ...</span></div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="comment">// For generality, we handle any zero-extension of any operand comparison</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="comment">// with a constant or another cast from the same type.</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op1) || isa&lt;CastInst&gt;(Op1))</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = visitICmpInstWithCastAndCast(I))</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="comment">// Special logic for binary operators.</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op0);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op1);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">if</span> (BO0 || BO1) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> Pred = I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordtype">bool</span> NoOp0WrapProblem = <span class="keyword">false</span>, NoOp1WrapProblem = <span class="keyword">false</span>;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span> (BO0 &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(BO0))</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      NoOp0WrapProblem = <a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(Pred) ||</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">CmpInst::isUnsigned</a>(Pred) &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">hasNoUnsignedWrap</a>()) ||</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(Pred) &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>());</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="keywordflow">if</span> (BO1 &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(BO1))</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      NoOp1WrapProblem = <a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(Pred) ||</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">CmpInst::isUnsigned</a>(Pred) &amp;&amp; BO1-&gt;hasNoUnsignedWrap()) ||</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        (<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(Pred) &amp;&amp; BO1-&gt;hasNoSignedWrap());</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <span class="comment">// Analyze the case when either Op0 or Op1 is an add instruction.</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    <span class="comment">// Op0 = A + B (or A and B are null); Op1 = C + D (or C and D are null).</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = 0, *D = 0;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::Add)</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;      A = BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;getOpcode() == Instruction::Add)</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = BO1-&gt;getOperand(0), D = BO1-&gt;getOperand(1);</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="comment">// icmp (X+Y), X -&gt; icmp Y, 0 for equalities or if there is no overflow.</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="keywordflow">if</span> ((A == Op1 || <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == Op1) &amp;&amp; NoOp0WrapProblem)</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A == Op1 ? <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> : A,</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <span class="comment">// icmp X, (X+Y) -&gt; icmp 0, Y for equalities or if there is no overflow.</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 || D == Op0) &amp;&amp; NoOp1WrapProblem)</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == Op0 ? D : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="comment">// icmp (X+Y), (X+Z) -&gt; icmp Y, Z for equalities or if there is no overflow.</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; C &amp;&amp; (A == C || A == D || <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == C || <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D) &amp;&amp;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem &amp;&amp;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="comment">// Try not to increase register pressure.</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; BO1-&gt;hasOneUse()) {</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <span class="comment">// Determine Y and Z in the form icmp (X+Y), (X+Z).</span></div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>, *Z;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      <span class="keywordflow">if</span> (A == C) {</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="comment">// C + B == C + D  -&gt;  B == D</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        Y = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        Z = D;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (A == D) {</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="comment">// D + B == C + D  -&gt;  B == C</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        Y = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        Z = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == C) {</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        <span class="comment">// A + C == C + D  -&gt;  A == D</span></div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        Y = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        Z = D;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        assert(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">// A + D == C + D  -&gt;  A == C</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        Y = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        Z = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      }</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Y, Z);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    }</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="comment">// icmp slt (X + -1), Y -&gt; icmp sle X, Y</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>, A, Op1);</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    <span class="comment">// icmp sge (X + -1), Y -&gt; icmp sgt X, Y</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a> &amp;&amp;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, A, Op1);</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="comment">// icmp sle (X + 1), Y -&gt; icmp slt X, Y</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a> &amp;&amp;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, A, Op1);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">// icmp sgt (X + 1), Y -&gt; icmp sge X, Y</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; NoOp0WrapProblem &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>, A, Op1);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="comment">// if C1 has greater magnitude than C2:</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="comment">//  icmp (X + C1), (Y + C2) -&gt; icmp (X + C3), Y</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="comment">//  s.t. C3 = C1 - C2</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">// if C2 has greater magnitude than C1:</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="comment">//  icmp (X + C1), (Y + C2) -&gt; icmp X, (Y + C3)</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="comment">//  s.t. C3 = C2 - C1</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; C &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem &amp;&amp;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        (BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() || BO1-&gt;hasOneUse()) &amp;&amp; !I.<a class="code" href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">isUnsigned</a>())</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C2 = dyn_cast&lt;ConstantInt&gt;(D)) {</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP1 = <a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getValue();</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP2 = C2-&gt;getValue();</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;          <span class="keywordflow">if</span> (AP1.<a class="code" href="classllvm_1_1APInt.html#a0e9a2d7ec903d191ef029589ec647cb6">isNegative</a>() == AP2.<a class="code" href="classllvm_1_1APInt.html#a0e9a2d7ec903d191ef029589ec647cb6">isNegative</a>()) {</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            <a class="code" href="classllvm_1_1APInt.html">APInt</a> AP1Abs = <a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getValue().abs();</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            <a class="code" href="classllvm_1_1APInt.html">APInt</a> AP2Abs = C2-&gt;getValue().<a class="code" href="classllvm_1_1APInt.html#ae130d109fdba9ebb976e4fe2621b374a">abs</a>();</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            <span class="keywordflow">if</span> (AP1Abs.<a class="code" href="classllvm_1_1APInt.html#a0229ff3a1d7432810a86c8efab115c33">uge</a>(AP2Abs)) {</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;              <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C3 = Builder-&gt;getInt(AP1 - AP2);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;              <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = Builder-&gt;CreateNSWAdd(A, C3);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, NewAdd, C);</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;              <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C3 = Builder-&gt;getInt(AP2 - AP1);</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;              <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAdd = Builder-&gt;CreateNSWAdd(C, C3);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, NewAdd);</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;            }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;          }</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        }</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="comment">// Analyze the case when either Op0 or Op1 is a sub instruction.</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="comment">// Op0 = A - B (or A and B are null); Op1 = C - D (or C and D are null).</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    A = 0; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0; C = 0; D = 0;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::Sub)</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      A = BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;getOpcode() == Instruction::Sub)</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      C = BO1-&gt;getOperand(0), D = BO1-&gt;getOperand(1);</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">// icmp (X-Y), X -&gt; icmp 0, Y for equalities or if there is no overflow.</span></div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordflow">if</span> (A == Op1 &amp;&amp; NoOp0WrapProblem)</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="comment">// icmp X, (X-Y) -&gt; icmp Y, 0 for equalities or if there is no overflow.</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="keywordflow">if</span> (C == Op0 &amp;&amp; NoOp1WrapProblem)</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, D, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="comment">// icmp (Y-X), (Z-X) -&gt; icmp Y, Z for equalities or if there is no overflow.</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; D &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem &amp;&amp;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;        <span class="comment">// Try not to increase register pressure.</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; BO1-&gt;hasOneUse())</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, A, C);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <span class="comment">// icmp (X-Y), (X-Z) -&gt; icmp Z, Y for equalities or if there is no overflow.</span></div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; C &amp;&amp; A == C &amp;&amp; NoOp0WrapProblem &amp;&amp; NoOp1WrapProblem &amp;&amp;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        <span class="comment">// Try not to increase register pressure.</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; BO1-&gt;hasOneUse())</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, D, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SRem = NULL;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="comment">// icmp (srem X, Y), Y</span></div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <span class="keywordflow">if</span> (BO0 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::SRem &amp;&amp;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        Op1 == BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      SRem = BO0;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="comment">// icmp Y, (srem X, Y)</span></div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BO1 &amp;&amp; BO1-&gt;getOpcode() == Instruction::SRem &amp;&amp;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;             Op0 == BO1-&gt;getOperand(1))</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;      SRem = BO1;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">if</span> (SRem) {</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      <span class="comment">// We don&#39;t check hasOneUse to avoid increasing register pressure because</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      <span class="comment">// the value we use is the same value this instruction was already using.</span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="keywordflow">switch</span> (SRem == BO0 ? <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">ICmpInst::getSwappedPredicate</a>(Pred) : Pred) {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>, SRem-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>, SRem-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SRem-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    }</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keywordflow">if</span> (BO0 &amp;&amp; BO1 &amp;&amp; BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == BO1-&gt;getOpcode() &amp;&amp;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        BO0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; BO1-&gt;hasOneUse() &amp;&amp;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == BO1-&gt;getOperand(1)) {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="keywordflow">switch</span> (BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>()) {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;        <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())    <span class="comment">// a+x icmp eq/ne b+x --&gt; a icmp b</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                              BO1-&gt;getOperand(0));</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="comment">// icmp u/s (a ^ signbit), (b ^ signbit) --&gt; icmp s/u a, b</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;          <span class="keywordflow">if</span> (CI-&gt;getValue().isSignBit()) {</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;                                           ? I.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>()</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;                                           : I.<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">getSignedPredicate</a>();</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                                BO1-&gt;getOperand(0));</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;          }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;          <span class="keywordflow">if</span> (CI-&gt;isMaxValue(<span class="keyword">true</span>)) {</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                                           ? I.<a class="code" href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">getUnsignedPredicate</a>()</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                                           : I.<a class="code" href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">getSignedPredicate</a>();</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            Pred = I.<a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">getSwappedPredicate</a>(Pred);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                                BO1-&gt;getOperand(0));</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;          }</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;        }</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;      <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        <span class="keywordflow">if</span> (!I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;          <span class="comment">// a * Cst icmp eq/ne b * Cst --&gt; a &amp; Mask icmp b &amp; Mask</span></div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;          <span class="comment">// Mask = -1 &gt;&gt; count-trailing-zeros(Cst).</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;          <span class="keywordflow">if</span> (!CI-&gt;isZero() &amp;&amp; !CI-&gt;isOne()) {</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AP = CI-&gt;getValue();</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Mask = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                                    <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(AP.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>(),</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                                                         AP.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() -</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                                                    AP.<a class="code" href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">countTrailingZeros</a>()));</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *And1 = Builder-&gt;CreateAnd(BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Mask);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *And2 = Builder-&gt;CreateAnd(BO1-&gt;getOperand(0), Mask);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), And1, And2);</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;          }</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        }</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <span class="keywordflow">case</span> Instruction::UDiv:</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="keywordflow">case</span> Instruction::LShr:</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>())</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="comment">// fall-through</span></div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <span class="keywordflow">case</span> Instruction::SDiv:</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;      <span class="keywordflow">case</span> Instruction::AShr:</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">if</span> (!BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>() || !BO1-&gt;isExact())</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                            BO1-&gt;getOperand(0));</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <span class="keywordflow">case</span> Instruction::Shl: {</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        <span class="keywordtype">bool</span> NUW = BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">hasNoUnsignedWrap</a>() &amp;&amp; BO1-&gt;hasNoUnsignedWrap();</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <span class="keywordtype">bool</span> NSW = BO0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>() &amp;&amp; BO1-&gt;hasNoSignedWrap();</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        <span class="keywordflow">if</span> (!NUW &amp;&amp; !NSW)</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <span class="keywordflow">if</span> (!NSW &amp;&amp; I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>())</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), BO0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                            BO1-&gt;getOperand(0));</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      }</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      }</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    }</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  }</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  { <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="comment">// Transform (A &amp; ~B) == 0 --&gt; (A &amp; B) != 0</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="comment">// and       (A &amp; ~B) != 0 --&gt; (A &amp; B) == 0</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <span class="comment">// if A is a power of 2.</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B)))) &amp;&amp;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">isKnownToBeAPowerOfTwo</a>(A) &amp;&amp; I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a3c76890714593c78e3b5d142c9030548">getInversePredicate</a>(),</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                          Builder-&gt;CreateAnd(A, B),</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                          Op1);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">// ~x &lt; ~y --&gt; y &lt; x</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="comment">// ~x &lt; cst --&gt; ~cst &lt; x</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))))</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>);</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSC = dyn_cast&lt;ConstantInt&gt;(Op1))</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(RHSC), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    }</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="comment">// (a+b) &lt;u a  --&gt; llvm.uadd.with.overflow.</span></div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="comment">// (a+b) &lt;u b  --&gt; llvm.uadd.with.overflow.</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        (Op1 == A || Op1 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#a7186564b18aee592f242128da5aa21db">ProcessUAddIdiom</a>(I, Op0, *<span class="keyword">this</span>))</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="comment">// a &gt;u (a+b)  --&gt; llvm.uadd.with.overflow.</span></div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <span class="comment">// b &gt;u (a+b)  --&gt; llvm.uadd.with.overflow.</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        (Op0 == A || Op0 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineCompares_8cpp.html#a7186564b18aee592f242128da5aa21db">ProcessUAddIdiom</a>(I, Op1, *<span class="keyword">this</span>))</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  }</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *D;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B)))) {</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordflow">if</span> (A == Op1 || B == Op1) {    <span class="comment">// (A^B) == A  -&gt;  B == 0</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherVal = A == Op1 ? B : <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), OtherVal,</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      }</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <span class="comment">// A^c1 == C^c2 --&gt; A == C^(c1^c2)</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(B, <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1)) &amp;&amp;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(D, <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C2)) &amp;&amp; Op1-&gt;hasOneUse()) {</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a> = Builder-&gt;getInt(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() ^ C2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a> = Builder-&gt;CreateXor(C, NC);</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a>);</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        }</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;        <span class="comment">// A^B == A^D -&gt; B == D</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        <span class="keywordflow">if</span> (A == C) <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;        <span class="keywordflow">if</span> (A == D) <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        <span class="keywordflow">if</span> (B == C) <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, D);</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        <span class="keywordflow">if</span> (B == D) <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      }</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    }</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        (A == Op0 || B == Op0)) {</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;      <span class="comment">// A == (A^B)  -&gt;  B == 0</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherVal = A == Op0 ? B : <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), OtherVal,</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;                          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    }</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <span class="comment">// (X&amp;Z) == (Y&amp;Z) -&gt; (X^Y) &amp; Z == 0</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B)))) &amp;&amp;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D))))) {</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0, *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = 0, *Z = 0;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      <span class="keywordflow">if</span> (A == C) {</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        X = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>; <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = D; Z = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (A == D) {</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        X = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>; <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; Z = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (B == C) {</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        X = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>; <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = D; Z = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (B == D) {</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        X = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>; <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>; Z = <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      }</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordflow">if</span> (X) {   <span class="comment">// Build (X^Y) &amp; Z</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        Op1 = Builder-&gt;CreateXor(X, <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        Op1 = Builder-&gt;CreateAnd(Op1, Z);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;        I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Op1);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType()));</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      }</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    }</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <span class="comment">// Transform (zext A) == (B &amp; (1&lt;&lt;X)-1) --&gt; A == (trunc B)</span></div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <span class="comment">// and       (B &amp; (1&lt;&lt;X)-1) == (zext A) --&gt; A == (trunc B)</span></div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cst1;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">if</span> ((Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst1)))) ||</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        (Op1-&gt;hasOneUse() &amp;&amp;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst1))) &amp;&amp;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))))) {</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Pow2 = Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() + 1;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <span class="keywordflow">if</span> (Pow2.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>() &amp;&amp; isa&lt;IntegerType&gt;(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;          Pow2.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>() == cast&lt;IntegerType&gt;(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>())</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>,</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                            Builder-&gt;CreateTrunc(B, A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    }</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="comment">// (A &gt;&gt; C) == (B &gt;&gt; C) --&gt; (A^B) u&lt; (1 &lt;&lt; C)</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="comment">// For lshr and ashr pairs.</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst1)))) &amp;&amp;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cst1))))) ||</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst1)))) &amp;&amp;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cst1)))))) {</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="keywordtype">unsigned</span> TypeBits = Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>();</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      <span class="keywordtype">unsigned</span> ShAmt = (unsigned)Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(TypeBits);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <span class="keywordflow">if</span> (ShAmt &lt; TypeBits &amp;&amp; ShAmt != 0) {</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred = I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                                       ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;                                       : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a> = Builder-&gt;CreateXor(A, B, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.unshifted&quot;</span>);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> CmpVal = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(TypeBits, ShAmt);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, Xor, Builder-&gt;getInt(CmpVal));</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      }</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    }</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="comment">// Transform &quot;icmp eq (trunc (lshr(X, cst1)), cst&quot; to</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <span class="comment">// &quot;icmp (and X, mask), cst&quot;</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    uint64_t ShAmt = 0;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A),</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;                                           <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(ShAmt))))) &amp;&amp;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst1)) &amp;&amp;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        <span class="comment">// Only do this when A has multiple uses.  This is most important to do</span></div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="comment">// when it exposes other optimizations.</span></div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;        !A-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      <span class="keywordtype">unsigned</span> ASize =cast&lt;IntegerType&gt;(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getPrimitiveSizeInBits();</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordflow">if</span> (ShAmt &lt; ASize) {</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskV =</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;          <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(ASize, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>());</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        MaskV &lt;&lt;= ShAmt;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> CmpV = Cst1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(ASize);</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        CmpV &lt;&lt;= ShAmt;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Mask = Builder-&gt;CreateAnd(A, Builder-&gt;getInt(MaskV));</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Mask, Builder-&gt;getInt(CmpV));</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;      }</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    }</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  }</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;  {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>; <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cst;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="comment">// icmp X+Cst, X</span></div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst))) &amp;&amp; Op1 == <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>)</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">return</span> FoldICmpAddOpCst(I, X, Cst, I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>());</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    <span class="comment">// icmp X, X+Cst</span></div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(Cst))) &amp;&amp; Op0 == <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>)</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      <span class="keywordflow">return</span> FoldICmpAddOpCst(I, X, Cst, I.<a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">getSwappedPredicate</a>());</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  }</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;}</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;<span class="comment">/// FoldFCmp_IntToFP_Cst - Fold fcmp ([us]itofp x, cst) if possible.</span></div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l03018"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#afe38b6d985a5169315575fc9299178e9"> 3018</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#afe38b6d985a5169315575fc9299178e9">InstCombiner::FoldFCmp_IntToFP_Cst</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;                                                <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI,</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;                                                <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC) {</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantFP&gt;(RHSC)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;RHS = cast&lt;ConstantFP&gt;(RHSC)-&gt;getValueAPF();</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <span class="comment">// Get the width of the mantissa.  We don&#39;t want to hack on conversions that</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  <span class="comment">// might lose information from the integer, e.g. &quot;i64 -&gt; float&quot;</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <span class="keywordtype">int</span> MantissaWidth = LHSI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#afd69a04ba20c2085dec90d69fb9abe64">getFPMantissaWidth</a>();</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <span class="keywordflow">if</span> (MantissaWidth == -1) <span class="keywordflow">return</span> 0;  <span class="comment">// Unknown.</span></div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;  <span class="comment">// Check to see that the input is converted from an integer type that is small</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <span class="comment">// enough that preserves all bits.  TODO: check here for &quot;known&quot; sign bits.</span></div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <span class="comment">// This would allow us to handle (fptosi (x &gt;&gt;s 62) to float) if x is i64 f.e.</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <span class="keywordtype">unsigned</span> InputSize = LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>();</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <span class="comment">// If this is a uitofp instruction, we need an extra bit to hold the sign.</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  <span class="keywordtype">bool</span> LHSUnsigned = isa&lt;UIToFPInst&gt;(LHSI);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="keywordflow">if</span> (LHSUnsigned)</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    ++InputSize;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="comment">// If the conversion would lose info, don&#39;t hack on this.</span></div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)InputSize &gt; MantissaWidth)</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <span class="comment">// Otherwise, we can potentially simplify the comparison.  We know that it</span></div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  <span class="comment">// will always come through as an integer value and we know the constant is</span></div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <span class="comment">// not a NAN (it would have been previously simplified).</span></div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  assert(!RHS.<a class="code" href="classllvm_1_1APFloat.html#a9f3ff4f659fd49bd86d7a35f69142e11">isNaN</a>() &amp;&amp; <span class="stringliteral">&quot;NaN comparison not already folded!&quot;</span>);</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred;</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected predicate!&quot;</span>);</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>:</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>:</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>:</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    Pred = LHSUnsigned ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  }</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntTy = cast&lt;IntegerType&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <span class="comment">// Now we know that the APFloat is a normal number, zero or inf.</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <span class="comment">// See if the FP constant is too large for the integer.  For example,</span></div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <span class="comment">// comparing an i8 to 300.0.</span></div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keywordtype">unsigned</span> IntWidth = IntTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>();</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  <span class="keywordflow">if</span> (!LHSUnsigned) {</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="comment">// If the RHS value is &gt; SignedMax, fold the comparison.  This handles +INF</span></div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <span class="comment">// and large values.</span></div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> SMax(RHS.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>());</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    SMax.<a class="code" href="classllvm_1_1APFloat.html#a768aa39cef837274da386788b7294ffe">convertFromAPInt</a>(<a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(IntWidth), <span class="keyword">true</span>,</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                          <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    <span class="keywordflow">if</span> (SMax.compare(RHS) == <a class="code" href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baae8d0bbef93c1e19af24b10315c856b53">APFloat::cmpLessThan</a>) {  <span class="comment">// smax &lt; 13123.0</span></div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>  || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> ||</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    }</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <span class="comment">// If the RHS value is &gt; UnsignedMax, fold the comparison. This handles</span></div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <span class="comment">// +INF and large values.</span></div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> UMax(RHS.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>());</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    UMax.<a class="code" href="classllvm_1_1APFloat.html#a768aa39cef837274da386788b7294ffe">convertFromAPInt</a>(<a class="code" href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">APInt::getMaxValue</a>(IntWidth), <span class="keyword">false</span>,</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;                          <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="keywordflow">if</span> (UMax.compare(RHS) == <a class="code" href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baae8d0bbef93c1e19af24b10315c856b53">APFloat::cmpLessThan</a>) {  <span class="comment">// umax &lt; 13123.0</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>  || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> ||</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    }</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  }</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  <span class="keywordflow">if</span> (!LHSUnsigned) {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    <span class="comment">// See if the RHS value is &lt; SignedMin.</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> SMin(RHS.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>());</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    SMin.<a class="code" href="classllvm_1_1APFloat.html#a768aa39cef837274da386788b7294ffe">convertFromAPInt</a>(<a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(IntWidth), <span class="keyword">true</span>,</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                          <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>);</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="keywordflow">if</span> (SMin.compare(RHS) == <a class="code" href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baad5181e718678de7d5b9f9ad82b4ecaba">APFloat::cmpGreaterThan</a>) { <span class="comment">// smin &gt; 12312.0</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> ||</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>)</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    }</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="comment">// See if the RHS value is &lt; UnsignedMin.</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> SMin(RHS.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>());</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    SMin.<a class="code" href="classllvm_1_1APFloat.html#a768aa39cef837274da386788b7294ffe">convertFromAPInt</a>(<a class="code" href="classllvm_1_1APInt.html#a65a6479206acd4113b8aa1c0fbc2158c">APInt::getMinValue</a>(IntWidth), <span class="keyword">true</span>,</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                          <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>);</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (SMin.compare(RHS) == <a class="code" href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baad5181e718678de7d5b9f9ad82b4ecaba">APFloat::cmpGreaterThan</a>) { <span class="comment">// umin &gt; 12312.0</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> ||</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>)</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    }</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  }</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <span class="comment">// Okay, now we know that the FP constant fits in the range [SMIN, SMAX] or</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  <span class="comment">// [0, UMAX], but it may still be fractional.  See if it is fractional by</span></div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <span class="comment">// casting the FP value to the integer value and back, checking for equality.</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <span class="comment">// Don&#39;t do this for zero, because -0.0 is not fractional.</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSInt = LHSUnsigned</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    ? <a class="code" href="classllvm_1_1ConstantExpr.html#abeba80fda67aca320ca19754c903d255">ConstantExpr::getFPToUI</a>(RHSC, IntTy)</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    : <a class="code" href="classllvm_1_1ConstantExpr.html#abaa68f5c08c63c4f9a9fc1ffb5636233">ConstantExpr::getFPToSI</a>(RHSC, IntTy);</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  <span class="keywordflow">if</span> (!RHS.<a class="code" href="classllvm_1_1APFloat.html#a30b29f2be19eb73f6225de032a1fafb3">isZero</a>()) {</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    <span class="keywordtype">bool</span> Equal = LHSUnsigned</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      ? <a class="code" href="classllvm_1_1ConstantExpr.html#ac9886f8d0a6ec3c895c9480990296675">ConstantExpr::getUIToFP</a>(RHSInt, RHSC-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) == RHSC</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      : <a class="code" href="classllvm_1_1ConstantExpr.html#adf3b1909bcd98b7b6ddeff43708d43fd">ConstantExpr::getSIToFP</a>(RHSInt, RHSC-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) == RHSC;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="keywordflow">if</span> (!Equal) {</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;      <span class="comment">// If we had a comparison against a fractional value, we have to adjust</span></div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;      <span class="comment">// the compare predicate and sometimes the value.  RHSC is rounded towards</span></div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      <span class="comment">// zero at this point.</span></div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <span class="keywordflow">switch</span> (Pred) {</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected integer comparison!&quot;</span>);</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:  <span class="comment">// (float)int != 4.4   --&gt; true</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:  <span class="comment">// (float)int == 4.4   --&gt; false</span></div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;        <span class="comment">// (float)int &lt;= 4.4   --&gt; int &lt;= 4</span></div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        <span class="comment">// (float)int &lt;= -4.4  --&gt; false</span></div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;        <span class="comment">// (float)int &lt;= 4.4   --&gt; int &lt;= 4</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;        <span class="comment">// (float)int &lt;= -4.4  --&gt; int &lt; -4</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;        <span class="comment">// (float)int &lt; -4.4   --&gt; false</span></div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        <span class="comment">// (float)int &lt; 4.4    --&gt; int &lt;= 4</span></div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        <span class="comment">// (float)int &lt; -4.4   --&gt; int &lt; -4</span></div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <span class="comment">// (float)int &lt; 4.4    --&gt; int &lt;= 4</span></div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        <span class="keywordflow">if</span> (!RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>;</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <span class="comment">// (float)int &gt; 4.4    --&gt; int &gt; 4</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="comment">// (float)int &gt; -4.4   --&gt; true</span></div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        <span class="comment">// (float)int &gt; 4.4    --&gt; int &gt; 4</span></div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <span class="comment">// (float)int &gt; -4.4   --&gt; int &gt;= -4</span></div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>:</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <span class="comment">// (float)int &gt;= -4.4   --&gt; true</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <span class="comment">// (float)int &gt;= 4.4    --&gt; int &gt; 4</span></div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getTrue());</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>:</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <span class="comment">// (float)int &gt;= -4.4   --&gt; int &gt;= -4</span></div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <span class="comment">// (float)int &gt;= 4.4    --&gt; int &gt; 4</span></div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <span class="keywordflow">if</span> (!RHS.<a class="code" href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">isNegative</a>())</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;      }</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    }</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <span class="comment">// Lower this FP comparison into an appropriate integer version of the</span></div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  <span class="comment">// comparison.</span></div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(Pred, LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHSInt);</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;}</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;</div><div class="line"><a name="l03219"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a43d73d8d35bd4f24e1d480021a70f2b1"> 3219</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a43d73d8d35bd4f24e1d480021a70f2b1">InstCombiner::visitFCmpInst</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="comment">  /// Orders the operands of the compare so that they are listed from most</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;<span class="comment">  /// complex to least complex.  This puts constants before unary operators,</span></div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;<span class="comment">  /// before binary operators.</span></div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) &lt; <a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    I.<a class="code" href="classllvm_1_1FCmpInst.html#ad3be45a337f5541511a869dd2dcd7a38">swapOperands</a>();</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  }</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ad2b02aaa059147fe5a834a84b7d74374">SimplifyFCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op0, Op1, TD))</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <span class="comment">// Simplify &#39;fcmp pred X, X&#39;</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;  <span class="keywordflow">if</span> (Op0 == Op1) {</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown predicate!&quot;</span>);</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:    <span class="comment">// True if unordered: isnan(X) | isnan(Y)</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:    <span class="comment">// True if unordered or less than</span></div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:    <span class="comment">// True if unordered or greater than</span></div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:    <span class="comment">// True if unordered or not equal</span></div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;      <span class="comment">// Canonicalize these to be &#39;fcmp uno %X, 0.0&#39;.</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      I.<a class="code" href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">setPredicate</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>);</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:    <span class="comment">// True if ordered (no nans)</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:    <span class="comment">// True if ordered and equal</span></div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:    <span class="comment">// True if ordered and greater than or equal</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:    <span class="comment">// True if ordered and less than or equal</span></div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      <span class="comment">// Canonicalize these to be &#39;fcmp ord %X, 0.0&#39;.</span></div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      I.<a class="code" href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">setPredicate</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    }</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;  }</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;  <span class="comment">// Handle fcmp with constant RHS</span></div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSC = dyn_cast&lt;Constant&gt;(Op1)) {</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI = dyn_cast&lt;Instruction&gt;(Op0))</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      <span class="keywordflow">switch</span> (LHSI-&gt;getOpcode()) {</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <span class="keywordflow">case</span> Instruction::FPExt: {</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;        <span class="comment">// fcmp (fpext x), C -&gt; fcmp x, (fptrunc C) if fptrunc is lossless</span></div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <a class="code" href="classllvm_1_1FPExtInst.html">FPExtInst</a> *LHSExt = cast&lt;FPExtInst&gt;(LHSI);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;        <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *RHSF = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(RHSC);</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;        <span class="keywordflow">if</span> (!RHSF)</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> *Sem;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <span class="comment">// FIXME: This shouldn&#39;t be here.</span></div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a08a0701c278c0e0e1f9bd4823b8e5903">isHalfTy</a>())</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#acd77961b2028e148c829b18ceaef81c4">APFloat::IEEEhalf</a>;</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aeb06cf0f813f643b62d8dd98db0bc249">isFloatTy</a>())</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#a43f6e79227388f373628e8ddd27df965">APFloat::IEEEsingle</a>;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac67ad08d36c989a872a887caa72803c6">isDoubleTy</a>())</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#aac03c2635e359347d396ddf4d7963b89">APFloat::IEEEdouble</a>;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f773f3ab55f89528f8585666eb62e19">isFP128Ty</a>())</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#a05a01faa391a74f808c372231207cf1a">APFloat::IEEEquad</a>;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae011f00644d795f4864d9ee30547b127">isX86_FP80Ty</a>())</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#a8fb913b1bed6dfe011696fe4e287ca70">APFloat::x87DoubleExtended</a>;</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSExt-&gt;<a class="code" href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a15a8263a574e9842b03263ebe0e36c12">isPPC_FP128Ty</a>())</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;          Sem = &amp;<a class="code" href="classllvm_1_1APFloat.html#a2065ce1bee75d8e883077a752dc33081">APFloat::PPCDoubleDouble</a>;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        <span class="keywordtype">bool</span> Lossy;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = RHSF-&gt;getValueAPF();</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        F.<a class="code" href="classllvm_1_1APFloat.html#a4fa2f1464bb4f645082d8aa0e0a9bc0e">convert</a>(*Sem, <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>, &amp;Lossy);</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="comment">// Avoid lossy conversions and denormals. Zero is a special case</span></div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <span class="comment">// that&#39;s OK to convert.</span></div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> Fabs = <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        Fabs.<a class="code" href="classllvm_1_1APFloat.html#af446a362b3f76186bbad24f269c3352b">clearSign</a>();</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        <span class="keywordflow">if</span> (!Lossy &amp;&amp;</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;            ((Fabs.<a class="code" href="classllvm_1_1APFloat.html#aaf5c2c00b5485b2f34bf776e73e88394">compare</a>(<a class="code" href="classllvm_1_1APFloat.html#adfee76ed5e20f77cbcfe297df31b9cda">APFloat::getSmallestNormalized</a>(*Sem)) !=</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;                 <a class="code" href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baae8d0bbef93c1e19af24b10315c856b53">APFloat::cmpLessThan</a>) || Fabs.<a class="code" href="classllvm_1_1APFloat.html#a30b29f2be19eb73f6225de032a1fafb3">isZero</a>()))</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSExt-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;                              <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(RHSC-&gt;getContext(), <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>));</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      }</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>:</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="comment">// Only fold fcmp into the PHI if the phi and fcmp are in the same</span></div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        <span class="comment">// block.  If in the same block, we&#39;re encouraging jump threading.  If</span></div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        <span class="comment">// not, we are just pessimizing the code by making an i1 phi.</span></div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;        <span class="keywordflow">if</span> (LHSI-&gt;getParent() == I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      <span class="keywordflow">case</span> Instruction::SIToFP:</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      <span class="keywordflow">case</span> Instruction::UIToFP:</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldFCmp_IntToFP_Cst(I, LHSI, RHSC))</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>: {</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;        <span class="comment">// If either operand of the select is a constant, we can fold the</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        <span class="comment">// comparison into the select arms, which will cause one to be</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        <span class="comment">// constant folded and the select turned into a bitwise or.</span></div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = 0, *Op2 = 0;</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;        <span class="keywordflow">if</span> (LHSI-&gt;hasOneUse()) {</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(LHSI-&gt;getOperand(1))) {</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            <span class="comment">// Fold the known value into the constant operand.</span></div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            Op1 = <a class="code" href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">ConstantExpr::getCompare</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, RHSC);</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;            <span class="comment">// Insert a new FCmp of the other select operand.</span></div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;            Op2 = Builder-&gt;CreateFCmp(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                                      LHSI-&gt;getOperand(2), RHSC, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(LHSI-&gt;getOperand(2))) {</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;            <span class="comment">// Fold the known value into the constant operand.</span></div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            Op2 = <a class="code" href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">ConstantExpr::getCompare</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, RHSC);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            <span class="comment">// Insert a new FCmp of the other select operand.</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;            Op1 = Builder-&gt;CreateFCmp(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSI-&gt;getOperand(1),</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;                                      RHSC, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;          }</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        }</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        <span class="keywordflow">if</span> (Op1)</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(LHSI-&gt;getOperand(0), Op1, Op2);</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;      }</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <span class="keywordflow">case</span> Instruction::FSub: {</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        <span class="comment">// fcmp pred (fneg x), C -&gt; fcmp swap(pred) x, -C</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHSI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d996b55de3306fdf6f3fd67ae1bce83">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op))))</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">getSwappedPredicate</a>(), Op,</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                              <a class="code" href="classllvm_1_1ConstantExpr.html#a283af50f80d0a7b532f5e845623dce53">ConstantExpr::getFNeg</a>(RHSC));</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      }</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>:</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP =</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;            dyn_cast&lt;GetElementPtrInst&gt;(LHSI-&gt;getOperand(0))) {</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(GEP-&gt;getOperand(0)))</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            <span class="keywordflow">if</span> (GV-&gt;isConstant() &amp;&amp; GV-&gt;hasDefinitiveInitializer() &amp;&amp;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                !cast&lt;LoadInst&gt;(LHSI)-&gt;isVolatile())</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = FoldCmpLoadFromIndexedGlobal(GEP, GV, I))</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;        }</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Instruction::Call</a>: {</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(LHSI);</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">LibFunc::Func</a> <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        <span class="comment">// Various optimization for fabs compared with zero.</span></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        <span class="keywordflow">if</span> (RHSC-&gt;isNullValue() &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>() &amp;&amp;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            TLI-&gt;getLibFunc(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>(), <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>) &amp;&amp;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;            TLI-&gt;has(Func)) {</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;          <span class="keywordflow">if</span> (Func == <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf3a65ea3339861d41948aa2de71ba2e4">LibFunc::fabs</a> || Func == <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf017b93d43a8de0d5fe5680131ec14d6">LibFunc::fabsf</a> ||</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;              Func == <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa311d355a7612d8ed79a9d1f8c3f734fa">LibFunc::fabsl</a>) {</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>()) {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;            <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;            <span class="comment">// fabs(x) &lt; 0 --&gt; false</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;              <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Builder-&gt;getFalse());</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;            <span class="comment">// fabs(x) &gt; 0 --&gt; x != 0</span></div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>:</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>, CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0),</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                  RHSC);</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;            <span class="comment">// fabs(x) &lt;= 0 --&gt; x == 0</span></div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>:</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>, CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0),</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                                  RHSC);</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            <span class="comment">// fabs(x) &gt;= 0 --&gt; !isnan(x)</span></div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>, CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0),</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;                                  RHSC);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <span class="comment">// fabs(x) == 0 --&gt; x == 0</span></div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            <span class="comment">// fabs(x) != 0 --&gt; x != 0</span></div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0),</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                                  RHSC);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;            }</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;          }</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        }</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;      }</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      }</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  }</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  <span class="comment">// fcmp pred (fneg x), (fneg y) -&gt; fcmp swap(pred) x, y</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d996b55de3306fdf6f3fd67ae1bce83">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X))) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d996b55de3306fdf6f3fd67ae1bce83">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y))))</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">getSwappedPredicate</a>(), <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>);</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  <span class="comment">// fcmp (fpext x), (fpext y) -&gt; fcmp x, y</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FPExtInst.html">FPExtInst</a> *LHSExt = dyn_cast&lt;FPExtInst&gt;(Op0))</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FPExtInst.html">FPExtInst</a> *RHSExt = dyn_cast&lt;FPExtInst&gt;(Op1))</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;      <span class="keywordflow">if</span> (LHSExt-&gt;getSrcTy() == RHSExt-&gt;getSrcTy())</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), LHSExt-&gt;getOperand(0),</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;                            RHSExt-&gt;getOperand(0));</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;}</div><div class="ttc" id="classllvm_1_1User_html_a363947eeecf72de326468ed5231e3a04"><div class="ttname"><a href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">llvm::User::getOperandUse</a></div><div class="ttdeci">const Use &amp; getOperandUse(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00099">User.h:99</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00467">PatternMatch.h:467</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a3768a0dde13dc5f3ebeb41cb700d4976"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a3768a0dde13dc5f3ebeb41cb700d4976">isHighOnes</a></div><div class="ttdeci">static bool isHighOnes(const ConstantInt *CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00169">InstCombineCompares.cpp:169</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a70a4dac7efca53879acb06d8cd2e9800"><div class="ttname"><a href="classllvm_1_1APInt.html#a70a4dac7efca53879acb06d8cd2e9800">llvm::APInt::ashr</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT ashr(unsigned shiftAmt) const </div><div class="ttdoc">Arithmetic right-shift function. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01038">APInt.cpp:1038</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html_aa9576aea404b156a949122affc839777"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">llvm::generic_gep_type_iterator::getIndexedType</a></div><div class="ttdeci">Type * getIndexedType() const </div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00057">GetElementPtrTypeIterator.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00445">Constants.cpp:445</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a240475f85dea79ec272c578fdf89acf1"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00139">Constants.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_adc3489e61d5f37a0e4c5589859fbccc2"><div class="ttname"><a href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const </div><div class="ttdoc">Return the opcode of this CastInst. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00603">InstrTypes.h:603</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a2e5e9f65d911e80a46d3098933794056"><div class="ttname"><a href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">llvm::APInt::getSignBit</a></div><div class="ttdeci">static APInt getSignBit(unsigned BitWidth)</div><div class="ttdoc">Get the SignBit for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00443">APInt.h:443</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a513b4047f0685e18fa35a11fd261cebd"><div class="ttname"><a href="classllvm_1_1APInt.html#a513b4047f0685e18fa35a11fd261cebd">llvm::APInt::byteSwap</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT byteSwap() const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00777">APInt.cpp:777</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_adf3b1909bcd98b7b6ddeff43708d43fd"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adf3b1909bcd98b7b6ddeff43708d43fd">llvm::ConstantExpr::getSIToFP</a></div><div class="ttdeci">static Constant * getSIToFP(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01615">Constants.cpp:1615</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ae130d109fdba9ebb976e4fe2621b374a"><div class="ttname"><a href="classllvm_1_1APInt.html#ae130d109fdba9ebb976e4fe2621b374a">llvm::APInt::abs</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT abs() const </div><div class="ttdoc">Get the absolute value;. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01521">APInt.h:1521</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a539bdb4fdbf46e0bfcefebf5ac6d21dd"><div class="ttname"><a href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">llvm::APInt::getAllOnesValue</a></div><div class="ttdeci">static APInt getAllOnesValue(unsigned numBits)</div><div class="ttdoc">Get the all-ones value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00450">APInt.h:450</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00407">PatternMatch.h:407</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a19d3c5610a75f4c8265c667b6cf93177"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a19d3c5610a75f4c8265c667b6cf93177">llvm::InstCombiner::FoldGEPICmp</a></div><div class="ttdeci">Instruction * FoldGEPICmp(GEPOperator *GEPLHS, Value *RHS, ICmpInst::Predicate Cond, Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00611">InstCombineCompares.cpp:611</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a63610224f160a6f88abce922a7e99ba8"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a63610224f160a6f88abce922a7e99ba8">HasSubOverflow</a></div><div class="ttdeci">static bool HasSubOverflow(ConstantInt *Result, ConstantInt *In1, ConstantInt *In2, bool IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00078">InstCombineCompares.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a9f3ff4f659fd49bd86d7a35f69142e11"><div class="ttname"><a href="classllvm_1_1APFloat.html#a9f3ff4f659fd49bd86d7a35f69142e11">llvm::APFloat::isNaN</a></div><div class="ttdeci">bool isNaN() const </div><div class="ttdoc">Returns true if and only if the float is a quiet or signaling NaN. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00386">APFloat.h:386</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad979b3c1bc975ee23810e3018ffe951b"><div class="ttname"><a href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits()</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_aac03c2635e359347d396ddf4d7963b89"><div class="ttname"><a href="classllvm_1_1APFloat.html#aac03c2635e359347d396ddf4d7963b89">llvm::APFloat::IEEEdouble</a></div><div class="ttdeci">static const fltSemantics IEEEdouble</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00133">APFloat.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a2c8af3f0435c2f2777b08be28da284fb"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a2c8af3f0435c2f2777b08be28da284fb">ComputeSignedMinMaxValuesFromKnownBits</a></div><div class="ttdeci">static void ComputeSignedMinMaxValuesFromKnownBits(const APInt &amp;KnownZero, const APInt &amp;KnownOne, APInt &amp;Min, APInt &amp;Max)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00177">InstCombineCompares.cpp:177</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ab3b5beca3a0dedd21adac813123a2ae6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">match_zero m_Zero()</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00137">PatternMatch.h:137</a></div></div>
<div class="ttc" id="InstCombine_8h_html"><div class="ttname"><a href="InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a8bce457e977f23507c48c9dfd7052990"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01455">Instructions.h:1455</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a901362ad921722671d31108bcfaf6b03"><div class="ttname"><a href="classllvm_1_1APInt.html#a901362ad921722671d31108bcfaf6b03">llvm::APInt::setBit</a></div><div class="ttdeci">void setBit(unsigned bitPosition)</div><div class="ttdoc">Set a given bit to 1. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00583">APInt.cpp:583</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a58f423c78837f9854278b6026b34714a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">llvm::ConstantInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">getBitWidth - Return the bitwidth of this constant. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00110">Constants.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03211">Instructions.h:3211</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_abeba80fda67aca320ca19754c903d255"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#abeba80fda67aca320ca19754c903d255">llvm::ConstantExpr::getFPToUI</a></div><div class="ttdeci">static Constant * getFPToUI(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01626">Constants.cpp:1626</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a28b816a2b6d88476edb2af52948f29ec"><div class="ttname"><a href="classllvm_1_1APInt.html#a28b816a2b6d88476edb2af52948f29ec">llvm::APInt::isNonNegative</a></div><div class="ttdeci">bool isNonNegative() const </div><div class="ttdoc">Determine if this APInt Value is non-negative (&gt;= 0) </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00327">APInt.h:327</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a70e9984c4d8f47168e6e840fc816ce91"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a70e9984c4d8f47168e6e840fc816ce91">SubWithOverflow</a></div><div class="ttdeci">static bool SubWithOverflow(Constant *&amp;Result, Constant *In1, Constant *In2, bool IsSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00092">InstCombineCompares.cpp:92</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Get a value with low bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00528">APInt.h:528</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a71901b588a9f2b63c6a878ad6c20dc32"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a71901b588a9f2b63c6a878ad6c20dc32">llvm::Intrinsic::ctpop</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00366">Intrinsics.h:366</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a3c76890714593c78e3b5d142c9030548"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3c76890714593c78e3b5d142c9030548">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const </div><div class="ttdoc">Return the inverse of the instruction&amp;#39;s predicate. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00737">InstrTypes.h:737</a></div></div>
<div class="ttc" id="namespacellvm_html_a87a909169e4e5de59bb72705c1d7d026"><div class="ttname"><a href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">llvm::EmitGEPOffset</a></div><div class="ttdeci">Value * EmitGEPOffset(IRBuilderTy *Builder, const DataLayout &amp;TD, User *GEP, bool NoAssumptions=false)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8h_source.html#l00187">Local.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdoc">unsigned less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00677">InstrTypes.h:677</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdoc">unsigned less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00676">InstrTypes.h:676</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00497">PatternMatch.h:497</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">llvm::Intrinsic::uadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02445">Intrinsics.h:2445</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a13f7eef27b0ecfe146cbac49b3054c91"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const </div><div class="ttdoc">Determine if this instruction is using a signed comparison. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00780">InstrTypes.h:780</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1cd4ab23f4d32e56a4f8af6505e0adf4"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1cd4ab23f4d32e56a4f8af6505e0adf4">llvm::ConstantExpr::getExtractElement</a></div><div class="ttdeci">static Constant * getExtractElement(Constant *Vec, Constant *Idx)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01923">Constants.cpp:1923</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdoc">0 1 0 0 True if ordered and less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00657">InstrTypes.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ac67ad08d36c989a872a887caa72803c6"><div class="ttname"><a href="classllvm_1_1Type.html#ac67ad08d36c989a872a887caa72803c6">llvm::Type::isDoubleTy</a></div><div class="ttdeci">bool isDoubleTy() const </div><div class="ttdoc">isDoubleTy - Return true if this is &amp;#39;double&amp;#39;, a 64-bit IEEE fp type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00149">Type.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_af446a362b3f76186bbad24f269c3352b"><div class="ttname"><a href="classllvm_1_1APFloat.html#af446a362b3f76186bbad24f269c3352b">llvm::APFloat::clearSign</a></div><div class="ttdeci">void clearSign()</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l01596">APFloat.cpp:1596</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdoc">1 1 1 0 True if unordered or not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00667">InstrTypes.h:667</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_afd69a04ba20c2085dec90d69fb9abe64"><div class="ttname"><a href="classllvm_1_1Type.html#afd69a04ba20c2085dec90d69fb9abe64">llvm::Type::getFPMantissaWidth</a></div><div class="ttdeci">int getFPMantissaWidth() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00142">Type.cpp:142</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00997">Instructions.h:997</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ac9886f8d0a6ec3c895c9480990296675"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ac9886f8d0a6ec3c895c9480990296675">llvm::ConstantExpr::getUIToFP</a></div><div class="ttdeci">static Constant * getUIToFP(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01604">Constants.cpp:1604</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a8e7f8107cfcd8c4f169185e70a3d64ff"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">llvm::ExtractValueInst::Create</a></div><div class="ttdeci">static ExtractValueInst * Create(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01766">Instructions.h:1766</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_afe38b6d985a5169315575fc9299178e9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#afe38b6d985a5169315575fc9299178e9">llvm::InstCombiner::FoldFCmp_IntToFP_Cst</a></div><div class="ttdeci">Instruction * FoldFCmp_IntToFP_Cst(FCmpInst &amp;I, Instruction *LHSI, Constant *RHSC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03018">InstCombineCompares.cpp:3018</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a6f603ab84f6f7c79985036f58cca9d48"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Get the number of bits in this IntegerType. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00061">DerivedTypes.h:61</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_ac015f68d60ea67a2e31bc10bc720d3e8"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">llvm::Intrinsic::getType</a></div><div class="ttdeci">FunctionType * getType(LLVMContext &amp;Context, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00657">Function.cpp:657</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02051">Constants.cpp:2051</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d996b55de3306fdf6f3fd67ae1bce83"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d996b55de3306fdf6f3fd67ae1bce83">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">fneg_match&lt; LHS &gt; m_FNeg(const LHS &amp;L)</div><div class="ttdoc">m_FNeg - Match a floating point negate. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00790">PatternMatch.h:790</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00138">GlobalVariable.h:138</a></div></div>
<div class="ttc" id="namespacellvm_html_ad2b02aaa059147fe5a834a84b7d74374"><div class="ttname"><a href="namespacellvm.html#ad2b02aaa059147fe5a834a84b7d74374">llvm::SimplifyFCmpInst</a></div><div class="ttdeci">Value * SimplifyFCmpInst(unsigned Predicate, Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02687">InstructionSimplify.cpp:2687</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a562c9513409b74f02cb3a5c9bae672ea"><div class="ttname"><a href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">llvm::APInt::getSignedMaxValue</a></div><div class="ttdeci">static APInt getSignedMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum signed value of APInt for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00423">APInt.h:423</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02040">Constants.cpp:2040</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html_aa8959d3935f9f061c4897d07e42cf658"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#aa8959d3935f9f061c4897d07e42cf658">llvm::GEPOperator::hasAllConstantIndices</a></div><div class="ttdeci">bool hasAllConstantIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00428">Operator.h:428</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a05e6b3a73a1d4fa4979f13a69d6f931a"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">llvm::APIntOps::Not</a></div><div class="ttdeci">APInt Not(const APInt &amp;APIVal)</div><div class="ttdoc">Bitwise complement function. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01855">APInt.h:1855</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0e9a2d7ec903d191ef029589ec647cb6"><div class="ttname"><a href="classllvm_1_1APInt.html#a0e9a2d7ec903d191ef029589ec647cb6">llvm::APInt::isNegative</a></div><div class="ttdeci">bool isNegative() const </div><div class="ttdoc">Determine sign of this APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00322">APInt.h:322</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a90982bca61da940a80629040c075e33e"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a90982bca61da940a80629040c075e33e">llvm::ConstantInt::uge</a></div><div class="ttdeci">bool uge(uint64_t Num) const </div><div class="ttdoc">Determine if the value is greater or equal to the given number. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00209">Constants.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">llvm::CmpInst::FCMP_UEQ</a></div><div class="ttdoc">1 0 0 1 True if unordered or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00662">InstrTypes.h:662</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa311d355a7612d8ed79a9d1f8c3f734fa"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa311d355a7612d8ed79a9d1f8c3f734fa">llvm::LibFunc::fabsl</a></div><div class="ttdoc">long double fabsl(long double x); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00219">TargetLibraryInfo.h:219</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a8fb913b1bed6dfe011696fe4e287ca70"><div class="ttname"><a href="classllvm_1_1APFloat.html#a8fb913b1bed6dfe011696fe4e287ca70">llvm::APFloat::x87DoubleExtended</a></div><div class="ttdeci">static const fltSemantics x87DoubleExtended</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00136">APFloat.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a478d9db5034ad1bef340198c3aaf861a"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a478d9db5034ad1bef340198c3aaf861a">llvm::IRBuilder::CreateExtractValue</a></div><div class="ttdeci">Value * CreateExtractValue(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01375">IRBuilder.h:1375</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">llvm::CmpInst::FCMP_UNO</a></div><div class="ttdoc">1 0 0 0 True if unordered: isnan(X) | isnan(Y) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00661">InstrTypes.h:661</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5"><div class="ttname"><a href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">llvm::APFloat::rmNearestTiesToEven</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00156">APFloat.h:156</a></div></div>
<div class="ttc" id="namespacellvm_html_a7618d7ef63ad3ee589da4e8c4c6e8d35"><div class="ttname"><a href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">llvm::getComplexity</a></div><div class="ttdeci">static unsigned getComplexity(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00042">InstCombine.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a5acf2a841db50684c87133f36bdd00a1"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00040">ValueTracking.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a5c6a15b13538f9f97dc6e8a356cbe2c6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a5c6a15b13538f9f97dc6e8a356cbe2c6">llvm::InstCombiner::ComputeNumSignBits</a></div><div class="ttdeci">unsigned ComputeNumSignBits(Value *Op, unsigned Depth=0) const </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00312">InstCombine.h:312</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aec4d763aa35e2d7933293967ebf71d89"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aec4d763aa35e2d7933293967ebf71d89">llvm::Intrinsic::ctlz</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00365">Intrinsics.h:365</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00479">PatternMatch.h:479</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00445">DataLayout.cpp:445</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afd44535c4ae204571d5721fa4a7042f2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, Constant *C2, unsigned Flags=0)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01690">Constants.cpp:1690</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdoc">not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00673">InstrTypes.h:673</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_acae189c1d913af7e7f37a8b202070997"><div class="ttname"><a href="classllvm_1_1Type.html#acae189c1d913af7e7f37a8b202070997">llvm::Type::getArrayElementType</a></div><div class="ttdeci">Type * getArrayElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00368">Type.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aab1f107496b17acc1bc5fdcdb2903b38"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">llvm::ConstantExpr::getLShr</a></div><div class="ttdeci">static Constant * getLShr(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02118">Constants.cpp:2118</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa1953b3ad7ef6aa87dc0205db0c2ea45"><div class="ttname"><a href="classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">llvm::APInt::lshr</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT lshr(unsigned shiftAmt) const </div><div class="ttdoc">Logical right-shift function. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01127">APInt.cpp:1127</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a7186564b18aee592f242128da5aa21db"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a7186564b18aee592f242128da5aa21db">ProcessUAddIdiom</a></div><div class="ttdeci">static Instruction * ProcessUAddIdiom(Instruction &amp;I, Value *OrigAddV, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01983">InstCombineCompares.cpp:1983</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">m_Trunc </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00678">PatternMatch.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html"><div class="ttname"><a href="classllvm_1_1InstCombiner.html">llvm::InstCombiner</a></div><div class="ttdoc">InstCombiner - The -instcombine pass. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00072">InstCombine.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00658">InstrTypes.h:658</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a3ec930e681ab860bfd9ee4f7dbb0bba7"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a3ec930e681ab860bfd9ee4f7dbb0bba7">SubOne</a></div><div class="ttdeci">static Constant * SubOne(Constant *C)</div><div class="ttdoc">SubOne - Subtract one from a ConstantInt. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00036">InstCombineCompares.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae906b7591a3335568e5ebe6e589ea6d1"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae906b7591a3335568e5ebe6e589ea6d1">llvm::ConstantExpr::getExtractValue</a></div><div class="ttdeci">static Constant * getExtractValue(Constant *Agg, ArrayRef&lt; unsigned &gt; Idxs)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02000">Constants.cpp:2000</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a05a01faa391a74f808c372231207cf1a"><div class="ttname"><a href="classllvm_1_1APFloat.html#a05a01faa391a74f808c372231207cf1a">llvm::APFloat::IEEEquad</a></div><div class="ttdeci">static const fltSemantics IEEEquad</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00134">APFloat.h:134</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aa5ab8c7b55d8bc7cab66be444daa70a1"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a></div><div class="ttdeci">static ConstantInt * ExtractElement(Constant *V, Constant *Idx)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00040">InstCombineCompares.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a4cfd328368353696e64a4d1b15a7cbfa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">not_match&lt; LHS &gt; m_Not(const LHS &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00738">PatternMatch.h:738</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a97c35b2ca7fa3e1f17c9f25e9dc2087b"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a97c35b2ca7fa3e1f17c9f25e9dc2087b">llvm::ConstantInt::isNegative</a></div><div class="ttdeci">bool isNegative() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00155">Constants.h:155</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00395">PatternMatch.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1PtrToIntInst_html"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html">llvm::PtrToIntInst</a></div><div class="ttdoc">This class represents a cast from a pointer to an integer. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03539">Instructions.h:3539</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4e23a3f51df9950595056234827ca4baad5181e718678de7d5b9f9ad82b4ecaba"><div class="ttname"><a href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baad5181e718678de7d5b9f9ad82b4ecaba">llvm::APFloat::cmpGreaterThan</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00150">APFloat.h:150</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00506">Target/README.txt:506</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">m_ZExt </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00692">PatternMatch.h:692</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a08a0701c278c0e0e1f9bd4823b8e5903"><div class="ttname"><a href="classllvm_1_1Type.html#a08a0701c278c0e0e1f9bd4823b8e5903">llvm::Type::isHalfTy</a></div><div class="ttdeci">bool isHalfTy() const </div><div class="ttdoc">isHalfTy - Return true if this is &amp;#39;half&amp;#39;, a 16-bit IEEE fp type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00143">Type.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1870db0671d5177f89779850b6310993"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1870db0671d5177f89779850b6310993">llvm::ConstantExpr::getAShr</a></div><div class="ttdeci">static Constant * getAShr(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02123">Constants.cpp:2123</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a593bc53015a060d260c75fc599f9a7b1"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a593bc53015a060d260c75fc599f9a7b1">llvm::ConstantExpr::getICmp</a></div><div class="ttdeci">static Constant * getICmp(unsigned short pred, Constant *LHS, Constant *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01881">Constants.cpp:1881</a></div></div>
<div class="ttc" id="classllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">Represents a floating point comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01055">Instructions.h:1055</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a024bb83a7f01e7661ea72ff7dcc460f5"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">llvm::ConstantInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const </div><div class="ttdoc">Get the constant&amp;#39;s value with a saturation limit. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00218">Constants.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0671bc479b3d788cc233dc1ce20ebcb5"><div class="ttname"><a href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01100">APInt.h:1100</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aa8df8b9877663703056c1d9e7ffffc3a"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa8df8b9877663703056c1d9e7ffffc3a">DemandedBitsLHSMask</a></div><div class="ttdeci">static APInt DemandedBitsLHSMask(ICmpInst &amp;I, unsigned BitWidth, bool isSignCheck)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02015">InstCombineCompares.cpp:2015</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a65eb40bd8c732c997e156e14f6b461f4"><div class="ttname"><a href="classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">llvm::APInt::getActiveBits</a></div><div class="ttdeci">unsigned getActiveBits() const </div><div class="ttdoc">Compute the number of active bits in the value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01276">APInt.h:1276</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_a472ce166c50612c9e0cf8fd4927978b5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a472ce166c50612c9e0cf8fd4927978b5">llvm::ICmpInst::getUnsignedPredicate</a></div><div class="ttdeci">Predicate getUnsignedPredicate() const </div><div class="ttdoc">Return the unsigned version of the predicate. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00987">Instructions.h:987</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a942bcf899495377b3c460b8df9fb1c81"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a942bcf899495377b3c460b8df9fb1c81">AddWithOverflow</a></div><div class="ttdeci">static bool AddWithOverflow(Constant *&amp;Result, Constant *In1, Constant *In2, bool IsSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00057">InstCombineCompares.cpp:57</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_af254e0a0a7277f1b415dbabc3ee37fb6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af254e0a0a7277f1b415dbabc3ee37fb6">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">SelectClass_match&lt; Cond, LHS, RHS &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00630">PatternMatch.h:630</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">m_Power2() - Match an integer or vector power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00281">PatternMatch.h:281</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ab2767c28bc3ded2d683a93f0ce1ed502"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ab2767c28bc3ded2d683a93f0ce1ed502">llvm::ConstantExpr::getUDiv</a></div><div class="ttdeci">static Constant * getUDiv(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02073">Constants.cpp:2073</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">llvm::Intrinsic::bswap</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00350">Intrinsics.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a15e279291892399c141cd01c7e358cbf"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a15e279291892399c141cd01c7e358cbf">llvm::ConstantExpr::getIntToPtr</a></div><div class="ttdeci">static Constant * getIntToPtr(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01660">Constants.cpp:1660</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="namespacellvm_html_a06316e4ad9eb44b69c40619212d5132d"><div class="ttname"><a href="namespacellvm.html#a06316e4ad9eb44b69c40619212d5132d">llvm::SimplifyICmpInst</a></div><div class="ttdeci">Value * SimplifyICmpInst(unsigned Predicate, Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02590">InstructionSimplify.cpp:2590</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a087938e962ce58fbba9141d4906d9c7e"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a087938e962ce58fbba9141d4906d9c7e">llvm::InstCombiner::visitICmpInstWithCastAndCast</a></div><div class="ttdeci">Instruction * visitICmpInstWithCastAndCast(ICmpInst &amp;ICI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01786">InstCombineCompares.cpp:1786</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a15a8263a574e9842b03263ebe0e36c12"><div class="ttname"><a href="classllvm_1_1Type.html#a15a8263a574e9842b03263ebe0e36c12">llvm::Type::isPPC_FP128Ty</a></div><div class="ttdeci">bool isPPC_FP128Ty() const </div><div class="ttdoc">isPPC_FP128Ty - Return true if this is powerpc long double. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00158">Type.h:158</a></div></div>
<div class="ttc" id="classllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03175">Instructions.h:3175</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_aa87e8100bba232cc73678f86231d7e58"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">llvm::GetElementPtrInst::isInBounds</a></div><div class="ttdeci">bool isInBounds() const </div><div class="ttdoc">isInBounds - Determine whether the GEP has the inbounds flag. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01426">Instructions.cpp:1426</a></div></div>
<div class="ttc" id="namespacellvm_html_a7985318bedfe5c2040025ef13db9c57b"><div class="ttname"><a href="namespacellvm.html#a7985318bedfe5c2040025ef13db9c57b">llvm::ComputeMaskedBits</a></div><div class="ttdeci">void ComputeMaskedBits(Value *V, APInt &amp;KnownZero, APInt &amp;KnownOne, const DataLayout *TD=0, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00229">ValueTracking.cpp:229</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a1dc5339334162e650ff87e89629bf66c"><div class="ttname"><a href="classllvm_1_1APInt.html#a1dc5339334162e650ff87e89629bf66c">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00515">APInt.cpp:515</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a768aa39cef837274da386788b7294ffe"><div class="ttname"><a href="classllvm_1_1APFloat.html#a768aa39cef837274da386788b7294ffe">llvm::APFloat::convertFromAPInt</a></div><div class="ttdeci">opStatus convertFromAPInt(const APInt &amp;, bool, roundingMode)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l02238">APFloat.cpp:2238</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00442">DataLayout.h:442</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Get a value with high bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00510">APInt.h:510</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4e23a3f51df9950595056234827ca4baae8d0bbef93c1e19af24b10315c856b53"><div class="ttname"><a href="classllvm_1_1APFloat.html#a4e23a3f51df9950595056234827ca4baae8d0bbef93c1e19af24b10315c856b53">llvm::APFloat::cmpLessThan</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00148">APFloat.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a50cca327dba8525d9befc652d0cc0ba4"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a50cca327dba8525d9befc652d0cc0ba4">llvm::InstCombiner::FoldCmpLoadFromIndexedGlobal</a></div><div class="ttdeci">Instruction * FoldCmpLoadFromIndexedGlobal(GetElementPtrInst *GEP, GlobalVariable *GV, CmpInst &amp;ICI, ConstantInt *AndCst=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00227">InstCombineCompares.cpp:227</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdoc">A self-contained host- and target-independent arbitrary-precision floating-point software implementat...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00122">APFloat.h:122</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00060">PatternMatch.h:60</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a0d991c3d5a987e28b2ae44852b1756b5"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a0d991c3d5a987e28b2ae44852b1756b5">ProcessUGT_ADDCST_ADD</a></div><div class="ttdeci">static Instruction * ProcessUGT_ADDCST_ADD(ICmpInst &amp;I, Value *A, Value *B, ConstantInt *CI2, ConstantInt *CI1, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01901">InstCombineCompares.cpp:1901</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_abc22daabfc0c272f3bca65808533bdcd"><div class="ttname"><a href="InstCombineCompares_8cpp.html#abc22daabfc0c272f3bca65808533bdcd">isSignTest</a></div><div class="ttdeci">static bool isSignTest(ICmpInst::Predicate &amp;pred, const ConstantInt *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00145">InstCombineCompares.cpp:145</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a283af50f80d0a7b532f5e845623dce53"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a283af50f80d0a7b532f5e845623dce53">llvm::ConstantExpr::getFNeg</a></div><div class="ttdeci">static Constant * getFNeg(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02028">Constants.cpp:2028</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00491">PatternMatch.h:491</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_adfee76ed5e20f77cbcfe297df31b9cda"><div class="ttname"><a href="classllvm_1_1APFloat.html#adfee76ed5e20f77cbcfe297df31b9cda">llvm::APFloat::getSmallestNormalized</a></div><div class="ttdeci">static APFloat getSmallestNormalized(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l03397">APFloat.cpp:3397</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_ada48609926c51e52629a815158919f39"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ada48609926c51e52629a815158919f39">ComputeUnsignedMinMaxValuesFromKnownBits</a></div><div class="ttdeci">static void ComputeUnsignedMinMaxValuesFromKnownBits(const APInt &amp;KnownZero, const APInt &amp;KnownOne, APInt &amp;Min, APInt &amp;Max)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00201">InstCombineCompares.cpp:201</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_aaf5c2c00b5485b2f34bf776e73e88394"><div class="ttname"><a href="classllvm_1_1APFloat.html#aaf5c2c00b5485b2f34bf776e73e88394">llvm::APFloat::compare</a></div><div class="ttdeci">cmpResult compare(const APFloat &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l01859">APFloat.cpp:1859</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00473">PatternMatch.h:473</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_a9adf718c253dc7c1c7e859265cd3fc3d"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01003">Instructions.h:1003</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00615">IRBuilder.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af767099f07429816d862fc3b23f8789b"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af767099f07429816d862fc3b23f8789b">llvm::ConstantInt::isMaxValue</a></div><div class="ttdeci">bool isMaxValue(bool isSigned) const </div><div class="ttdoc">Determine if the value is maximal. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00185">Constants.h:185</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">llvm::Intrinsic::sadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02431">Intrinsics.h:2431</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af7c1b579548e5b90a8db22d2f26a4afc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">llvm::InstCombiner::ReplaceInstUsesWith</a></div><div class="ttdeci">Instruction * ReplaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00267">InstCombine.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aeb06cf0f813f643b62d8dd98db0bc249"><div class="ttname"><a href="classllvm_1_1Type.html#aeb06cf0f813f643b62d8dd98db0bc249">llvm::Type::isFloatTy</a></div><div class="ttdeci">bool isFloatTy() const </div><div class="ttdoc">isFloatTy - Return true if this is &amp;#39;float&amp;#39;, a 32-bit IEEE fp type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00146">Type.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae6d2fbefb704650e3b01a0bbcdd43ffa"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">llvm::ConstantExpr::getAnd</a></div><div class="ttdeci">static Constant * getAnd(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02099">Constants.cpp:2099</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a0b4733149f89709bb5c06e76d99cf9e8"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a0b4733149f89709bb5c06e76d99cf9e8">llvm::InstCombiner::FoldICmpShrCst</a></div><div class="ttdeci">Instruction * FoldICmpShrCst(ICmpInst &amp;ICI, BinaryOperator *DivI, ConstantInt *DivRHS)</div><div class="ttdoc">FoldICmpShrCst - Handle &quot;icmp(([al]shr X, cst1), cst2)&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00966">InstCombineCompares.cpp:966</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_ad6a042fcb94fa8bd65efea3003580f43"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ad6a042fcb94fa8bd65efea3003580f43">EvaluateGEPOffsetExpression</a></div><div class="ttdeci">static Value * EvaluateGEPOffsetExpression(User *GEP, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00514">InstCombineCompares.cpp:514</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">m_AllOnes() - Match an integer or vector with all bits set to true. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00265">PatternMatch.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aec662ee6ab1490a4cabebf2812e5b9ca"><div class="ttname"><a href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">llvm::APInt::getOneBitSet</a></div><div class="ttdeci">static APInt getOneBitSet(unsigned numBits, unsigned BitNo)</div><div class="ttdoc">Return an APInt with exactly one bit set in the result. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00476">APInt.h:476</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">m_Specific - Match if we have a specific specified value. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00323">PatternMatch.h:323</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0c054b115b72d730d19b22847d155617"><div class="ttname"><a href="classllvm_1_1APInt.html#a0c054b115b72d730d19b22847d155617">llvm::APInt::sle</a></div><div class="ttdeci">bool sle(const APInt &amp;RHS) const </div><div class="ttdoc">Signed less or equal comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01068">APInt.h:1068</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00485">PatternMatch.h:485</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faf017b93d43a8de0d5fe5680131ec14d6"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf017b93d43a8de0d5fe5680131ec14d6">llvm::LibFunc::fabsf</a></div><div class="ttdoc">float fabsf(float x); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00217">TargetLibraryInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00651">InstrTypes.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01252">APInt.h:1252</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4fa2f1464bb4f645082d8aa0e0a9bc0e"><div class="ttname"><a href="classllvm_1_1APFloat.html#a4fa2f1464bb4f645082d8aa0e0a9bc0e">llvm::APFloat::convert</a></div><div class="ttdeci">opStatus convert(const fltSemantics &amp;, roundingMode, bool *)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l01938">APFloat.cpp:1938</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0229ff3a1d7432810a86c8efab115c33"><div class="ttname"><a href="classllvm_1_1APInt.html#a0229ff3a1d7432810a86c8efab115c33">llvm::APInt::uge</a></div><div class="ttdeci">bool uge(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greater or equal comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01116">APInt.h:1116</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a2b0b27ac57f22393b7c78727cb8539d8"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a2b0b27ac57f22393b7c78727cb8539d8">llvm::InstCombiner::visitICmpInst</a></div><div class="ttdeci">Instruction * visitICmpInst(ICmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02090">InstCombineCompares.cpp:2090</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdoc">0 1 1 1 True if ordered (no nans) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00660">InstrTypes.h:660</a></div></div>
<div class="ttc" id="namespacellvm_html_aa61b351a455e9229d3dc58e0883b6cef"><div class="ttname"><a href="namespacellvm.html#aa61b351a455e9229d3dc58e0883b6cef">llvm::ConstantFoldCompareInstOperands</a></div><div class="ttdeci">Constant * ConstantFoldCompareInstOperands(unsigned Predicate, Constant *LHS, Constant *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01053">ConstantFolding.cpp:1053</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_aca9b76334fcf4b5261d418e0294c95c6"><div class="ttname"><a href="classllvm_1_1CastInst.html#aca9b76334fcf4b5261d418e0294c95c6">llvm::CastInst::getSrcTy</a></div><div class="ttdeci">Type * getSrcTy() const </div><div class="ttdoc">Return the source type, as a convenience. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00608">InstrTypes.h:608</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00714">InstrTypes.h:714</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">llvm::LibFunc::Func</a></div><div class="ttdeci">Func</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00020">TargetLibraryInfo.h:20</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02034">Constants.cpp:2034</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a01fee21e2c679094ce5ab193369d5198"><div class="ttname"><a href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00183">Constants.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdoc">Get the all ones value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00163">Constants.cpp:163</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00087">InstCombine.h:87</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f773f3ab55f89528f8585666eb62e19"><div class="ttname"><a href="classllvm_1_1Type.html#a6f773f3ab55f89528f8585666eb62e19">llvm::Type::isFP128Ty</a></div><div class="ttdeci">bool isFP128Ty() const </div><div class="ttdoc">isFP128Ty - Return true if this is &amp;#39;fp128&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00155">Type.h:155</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_acbc778ccd1faf4e95963c9a980acc7a5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#acbc778ccd1faf4e95963c9a980acc7a5">llvm::ICmpInst::swapOperands</a></div><div class="ttdeci">void swapOperands()</div><div class="ttdoc">Swap operands and adjust predicate. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01032">Instructions.h:1032</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a07783e6f39803037259a1ebe376c2b1e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">llvm::BinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdoc">hasNoSignedWrap - Determine whether the no signed wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02013">Instructions.cpp:2013</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af3deb6522c4fe2043fe07af2ec90190c"><div class="ttname"><a href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const </div><div class="ttdoc">Check if this APInt&amp;#39;s value is a power of two greater than zero. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00390">APInt.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09">llvm::CmpInst::FCMP_ULE</a></div><div class="ttdoc">1 1 0 1 True if unordered, less than, or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00666">InstrTypes.h:666</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_acd77961b2028e148c829b18ceaef81c4"><div class="ttname"><a href="classllvm_1_1APFloat.html#acd77961b2028e148c829b18ceaef81c4">llvm::APFloat::IEEEhalf</a></div><div class="ttdeci">static const fltSemantics IEEEhalf</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00131">APFloat.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdoc">signed greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00678">InstrTypes.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_ab8d326a634f66801a402f872f6ea4949"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#ab8d326a634f66801a402f872f6ea4949">llvm::ICmpInst::isRelational</a></div><div class="ttdeci">bool isRelational() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01013">Instructions.h:1013</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad3d358e03c6228af2d19b2e67028886e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01084">APInt.h:1084</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aac277496191547e487eea07f09dffd4b"><div class="ttname"><a href="classllvm_1_1APInt.html#aac277496191547e487eea07f09dffd4b">llvm::APInt::countTrailingZeros</a></div><div class="ttdeci">unsigned countTrailingZeros() const </div><div class="ttdoc">Count the number of trailing zero bits. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00736">APInt.cpp:736</a></div></div>
<div class="ttc" id="Lint_8cpp_html_a6cd8c36c54045fd5897b54d4c30e0044"><div class="ttname"><a href="Lint_8cpp.html#a6cd8c36c54045fd5897b54d4c30e0044">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00507">Lint.cpp:507</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00610">DataLayout.cpp:610</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdoc">0 0 1 0 True if ordered and greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00655">InstrTypes.h:655</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">Get or create an IntegerType instance. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00305">Type.cpp:305</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aba93ec4079f8d709a1d5b4745310782e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01672">Constants.cpp:1672</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="ConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a2065ce1bee75d8e883077a752dc33081"><div class="ttname"><a href="classllvm_1_1APFloat.html#a2065ce1bee75d8e883077a752dc33081">llvm::APFloat::PPCDoubleDouble</a></div><div class="ttdeci">static const fltSemantics PPCDoubleDouble</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00135">APFloat.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a0519dc6e2f153aaed61eed17d965a9f0"><div class="ttname"><a href="classllvm_1_1Type.html#a0519dc6e2f153aaed61eed17d965a9f0">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00178">Type.cpp:178</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="structllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00044">APFloat.cpp:44</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a277dfeaad2a2ada72a6024b0eedc5301"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">llvm::IRBuilder::CreateZExt</a></div><div class="ttdeci">Value * CreateZExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01071">IRBuilder.h:1071</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0cf8014ad2d33b40a6bef55018547f57"><div class="ttname"><a href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">llvm::APInt::slt</a></div><div class="ttdeci">bool slt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00547">APInt.cpp:547</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_aec02d46854c76f20a6da7002e390f612"><div class="ttname"><a href="classllvm_1_1APFloat.html#aec02d46854c76f20a6da7002e390f612">llvm::APFloat::isNegative</a></div><div class="ttdeci">bool isNegative() const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00361">APFloat.h:361</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00326">DataLayout.h:326</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a5553db145ba1df692578ebb8b9d6ac13"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5553db145ba1df692578ebb8b9d6ac13">llvm::ConstantExpr::getSDiv</a></div><div class="ttdeci">static Constant * getSDiv(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02078">Constants.cpp:2078</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00300">Target/README.txt:300</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a474f562a4871689af74b0fd1ae42daa1"><div class="ttname"><a href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01500">APInt.h:1500</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdoc">1 1 0 0 True if unordered or less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00665">InstrTypes.h:665</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 4 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00042">ConstantRange.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdoc">signed less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_a35303bcc6354c08b4ed0cc75b1ec1084"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a35303bcc6354c08b4ed0cc75b1ec1084">llvm::ConstantRange::getLower</a></div><div class="ttdeci">const APInt &amp; getLower() const </div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00079">ConstantRange.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_ab0fdfb9cef4a80aac8ae338e1d304131"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ab0fdfb9cef4a80aac8ae338e1d304131">llvm::CmpInst::isTrueWhenEqual</a></div><div class="ttdeci">bool isTrueWhenEqual() const </div><div class="ttdoc">Determine if this is true when both operands are the same. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00792">InstrTypes.h:792</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_abfc8f5fb56fb06e32a26f28ba7ec1c0b"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">llvm::GetElementPtrInst::getType</a></div><div class="ttdeci">SequentialType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00764">Instructions.h:764</a></div></div>
<div class="ttc" id="namespacellvm_html_affb36b53a017bc7fe4754691559e2cd6"><div class="ttname"><a href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">llvm::isKnownToBeAPowerOfTwo</a></div><div class="ttdeci">bool isKnownToBeAPowerOfTwo(Value *V, bool OrZero=false, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00821">ValueTracking.cpp:821</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a38ea12c04523d63adda732b9c5d6da0a"><div class="ttname"><a href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">Value * stripPointerCasts()</div><div class="ttdoc">Strips off any unneeded pointer casts, all-zero GEPs and aliases from the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00385">Value.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aeebb29dd5a7aaf9b4546fec69c43653b"><div class="ttname"><a href="classllvm_1_1APInt.html#aeebb29dd5a7aaf9b4546fec69c43653b">llvm::APInt::isStrictlyPositive</a></div><div class="ttdeci">bool isStrictlyPositive() const </div><div class="ttdoc">Determine if this APInt Value is positive. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00335">APInt.h:335</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_ab5d3f9900a0284e85ee7a1520a4eeb60"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const </div><div class="ttdoc">Return the predicate as if the operands were swapped. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00753">InstrTypes.h:753</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a65a6479206acd4113b8aa1c0fbc2158c"><div class="ttname"><a href="classllvm_1_1APInt.html#a65a6479206acd4113b8aa1c0fbc2158c">llvm::APInt::getMinValue</a></div><div class="ttdeci">static APInt getMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum unsigned value of APInt for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00430">APInt.h:430</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a0bcd4131e1a1d92215f5385b4e16cd2e"><div class="ttname"><a href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">llvm::CallInst::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01357">Instructions.h:1357</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faf3a65ea3339861d41948aa2de71ba2e4"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf3a65ea3339861d41948aa2de71ba2e4">llvm::LibFunc::fabs</a></div><div class="ttdoc">double fabs(double x); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00215">TargetLibraryInfo.h:215</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_af7717df543a545f000bf7e2367e17925"><div class="ttname"><a href="InstCombineCompares_8cpp.html#af7717df543a545f000bf7e2367e17925">AddOne</a></div><div class="ttdeci">static Constant * AddOne(Constant *C)</div><div class="ttdoc">AddOne - Add one to a ConstantInt. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00032">InstCombineCompares.cpp:32</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aca5cab6b8d2be24d0c857cc4a831feec"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01538">Constants.cpp:1538</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00557">Constants.cpp:557</a></div></div>
<div class="ttc" id="regutils_8h_html_a1fa2460e32327ade49189c95740bc1b5"><div class="ttname"><a href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a></div><div class="ttdeci">#define NC</div><div class="ttdef"><b>Definition:</b> <a href="regutils_8h_source.html#l00039">regutils.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a0f67e7208255f5088f0d515185109174"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">llvm::BinaryOperator::isExact</a></div><div class="ttdeci">bool isExact() const </div><div class="ttdoc">isExact - Determine whether the exact flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02017">Instructions.cpp:2017</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a126a12b67fa620ad28ec0c919ca7a3e8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">llvm::CmpInst::setPredicate</a></div><div class="ttdeci">void setPredicate(Predicate P)</div><div class="ttdoc">Set the predicate for this instruction to the specified value. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00719">InstrTypes.h:719</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_abaa68f5c08c63c4f9a9fc1ffb5636233"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#abaa68f5c08c63c4f9a9fc1ffb5636233">llvm::ConstantExpr::getFPToSI</a></div><div class="ttdeci">static Constant * getFPToSI(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01637">Constants.cpp:1637</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ac8ddb745480a7e75a3862ddf0be3a298"><div class="ttname"><a href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00088">Constants.cpp:88</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00357">Operator.h:357</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdoc">signed less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00681">InstrTypes.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_ac731f43b6d70551357cc1960dcd22173"><div class="ttname"><a href="InstCombineCompares_8cpp.html#ac731f43b6d70551357cc1960dcd22173">HasAddOverflow</a></div><div class="ttdeci">static bool HasAddOverflow(ConstantInt *Result, ConstantInt *In1, ConstantInt *In2, bool IsSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00044">InstCombineCompares.cpp:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a3ffbacd388121d5e3ba1c4360b7449d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">llvm::PatternMatch::m_PtrToInt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::PtrToInt &gt; m_PtrToInt(const OpTy &amp;Op)</div><div class="ttdoc">m_PtrToInt </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00671">PatternMatch.h:671</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_a0772d720f01c3de131e8f60fba99b706"><div class="ttname"><a href="InstCombineCompares_8cpp.html#a0772d720f01c3de131e8f60fba99b706">getOne</a></div><div class="ttdeci">static ConstantInt * getOne(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00027">InstCombineCompares.cpp:27</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a331d69b5f93e47e7c596062b77dd5913"><div class="ttname"><a href="classllvm_1_1APInt.html#a331d69b5f93e47e7c596062b77dd5913">llvm::APInt::getMaxValue</a></div><div class="ttdeci">static APInt getMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum unsigned value of APInt for specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00418">APInt.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a963c4f881fbc3e316e8260bf98453ce4"><div class="ttname"><a href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">llvm::APInt::isMinValue</a></div><div class="ttdeci">bool isMinValue() const </div><div class="ttdoc">Determine if this is the smallest unsigned value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00365">APInt.h:365</a></div></div>
<div class="ttc" id="ConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02021">Constants.cpp:2021</a></div></div>
<div class="ttc" id="GetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a21260f8037e665d235ace5718cf68bc4"><div class="ttname"><a href="classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">llvm::APInt::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdoc">Determine if all bits are set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00340">APInt.h:340</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a4cd12603c3c76eb84d050733f6ddc8b7"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">llvm::CmpInst::Create</a></div><div class="ttdeci">static CmpInst * Create(OtherOps Op, unsigned short predicate, Value *S1, Value *S2, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Create a CmpInst. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03035">Instructions.cpp:3035</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aab9d1b39f9f6b722e3b89b9650d6051d"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aab9d1b39f9f6b722e3b89b9650d6051d">isSignBitCheck</a></div><div class="ttdeci">static bool isSignBitCheck(ICmpInst::Predicate pred, ConstantInt *RHS, bool &amp;TrueIfSigned)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00117">InstCombineCompares.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a43f6e79227388f373628e8ddd27df965"><div class="ttname"><a href="classllvm_1_1APFloat.html#a43f6e79227388f373628e8ddd27df965">llvm::APFloat::IEEEsingle</a></div><div class="ttdeci">static const fltSemantics IEEEsingle</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00132">APFloat.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ae011f00644d795f4864d9ee30547b127"><div class="ttname"><a href="classllvm_1_1Type.html#ae011f00644d795f4864d9ee30547b127">llvm::Type::isX86_FP80Ty</a></div><div class="ttdeci">bool isX86_FP80Ty() const </div><div class="ttdoc">isX86_FP80Ty - Return true if this is x86 long double. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00152">Type.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a80e82791d4d7f4d1d23d68ca0a2b1f64"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a80e82791d4d7f4d1d23d68ca0a2b1f64">llvm::ConstantExpr::getZExt</a></div><div class="ttdeci">static Constant * getZExt(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01566">Constants.cpp:1566</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html_ac876de9f2b1ddbe458be4d57e3e11b16"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#ac876de9f2b1ddbe458be4d57e3e11b16">llvm::GEPOperator::isInBounds</a></div><div class="ttdeci">bool isInBounds() const </div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00373">Operator.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdoc">unsigned greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a54c3b6a0fd1aaeab8c6a2493fb9c549a"><div class="ttname"><a href="classllvm_1_1APInt.html#a54c3b6a0fd1aaeab8c6a2493fb9c549a">llvm::APInt::clearBit</a></div><div class="ttdeci">void clearBit(unsigned bitPosition)</div><div class="ttdoc">Set a given bit to 0. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00592">APInt.cpp:592</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00659">InstrTypes.h:659</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a9e981fb2ff9cfa5bb54229dbb5dc78b7"><div class="ttname"><a href="classllvm_1_1APInt.html#a9e981fb2ff9cfa5bb54229dbb5dc78b7">llvm::APInt::isSignBit</a></div><div class="ttdeci">bool isSignBit() const </div><div class="ttdoc">Check if the APInt&amp;#39;s value is returned by getSignBit. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00399">APInt.h:399</a></div></div>
<div class="ttc" id="MemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_ac54ee9c0d3aa35349072cebce26af87b"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#ac54ee9c0d3aa35349072cebce26af87b">llvm::ICmpInst::makeConstantRange</a></div><div class="ttdeci">static ConstantRange makeConstantRange(Predicate pred, const APInt &amp;C)</div><div class="ttdoc">Make a ConstantRange for a relation with a constant value. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03148">Instructions.cpp:3148</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a3f94def79176d0cd1c4bec190e7eb66c"><div class="ttname"><a href="classllvm_1_1APInt.html#a3f94def79176d0cd1c4bec190e7eb66c">llvm::APInt::countTrailingOnes</a></div><div class="ttdeci">unsigned countTrailingOnes() const </div><div class="ttdoc">Count the number of trailing one bits. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01382">APInt.h:1382</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aa5ad9e9e7cc67e1675d8d1631a73e625"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">llvm::ConstantExpr::getShl</a></div><div class="ttdeci">static Constant * getShl(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02111">Constants.cpp:2111</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a79f00c68a7854fa5e1fde2cf2721bc85"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a79f00c68a7854fa5e1fde2cf2721bc85">llvm::InstCombiner::visitICmpInstWithInstAndIntCst</a></div><div class="ttdeci">Instruction * visitICmpInstWithInstAndIntCst(ICmpInst &amp;ICI, Instruction *LHS, ConstantInt *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l01055">InstCombineCompares.cpp:1055</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">llvm::A64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00046">AArch64BaseInfo.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aeaf73fee81cb53d8bb6136a3d0ad39f6"><div class="ttname"><a href="classllvm_1_1Type.html#aeaf73fee81cb53d8bb6136a3d0ad39f6">llvm::Type::getArrayNumElements</a></div><div class="ttdeci">uint64_t getArrayNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00210">Type.cpp:210</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">llvm::CmpInst::FCMP_UGT</a></div><div class="ttdoc">1 0 1 0 True if unordered or greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00663">InstrTypes.h:663</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ab313a0464b35f9c0d59765f4d356d138"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ab313a0464b35f9c0d59765f4d356d138">llvm::InstCombiner::FoldICmpDivCst</a></div><div class="ttdeci">Instruction * FoldICmpDivCst(ICmpInst &amp;ICI, BinaryOperator *DivI, ConstantInt *DivRHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00809">InstCombineCompares.cpp:809</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acf42e24475fdea623c2a8cb7b3f412c4"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acf42e24475fdea623c2a8cb7b3f412c4">llvm::Intrinsic::cttz</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00367">Intrinsics.h:367</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_acc4aad24e3e9f04088c9b7802a7a5718"><div class="ttname"><a href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">llvm::CmpInst::isUnsigned</a></div><div class="ttdeci">bool isUnsigned() const </div><div class="ttdoc">Determine if this instruction is using an unsigned comparison. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00786">InstrTypes.h:786</a></div></div>
<div class="ttc" id="classllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00415">Record.h:415</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a902af4d6cb3a421a7f5723d0fc81efd1"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">llvm::IRBuilder::CreateCall2</a></div><div class="ttdeci">CallInst * CreateCall2(Value *Callee, Value *Arg1, Value *Arg2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01310">IRBuilder.h:1310</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_af88b7acdd025620663e38ca68ff746f5"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#af88b7acdd025620663e38ca68ff746f5">llvm::ConstantRange::getUpper</a></div><div class="ttdeci">const APInt &amp; getUpper() const </div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00083">ConstantRange.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1FCmpInst_html_ad3be45a337f5541511a869dd2dcd7a38"><div class="ttname"><a href="classllvm_1_1FCmpInst.html#ad3be45a337f5541511a869dd2dcd7a38">llvm::FCmpInst::swapOperands</a></div><div class="ttdeci">void swapOperands()</div><div class="ttdoc">Swap operands and adjust predicate. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01141">Instructions.h:1141</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00433">APInt.h:433</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aaead33f71104b5e889a5cd491cd2bb56"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aaead33f71104b5e889a5cd491cd2bb56">swapMayExposeCSEOpportunities</a></div><div class="ttdeci">static bool swapMayExposeCSEOpportunities(const Value *Op0, const Value *Op1)</div><div class="ttdoc">Check if the order of Op0 and Op1 as operand in an ICmpInst should be swapped. The descision is based...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l02057">InstCombineCompares.cpp:2057</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdoc">0 0 0 1 True if ordered and equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00654">InstrTypes.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01068">IRBuilder.h:1068</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a5b6cd6c043f54b40899aff62e6e40488"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">llvm::BinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const </div><div class="ttdoc">hasNoUnsignedWrap - Determine whether the no unsigned wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02009">Instructions.cpp:2009</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00664">InstrTypes.h:664</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a30b29f2be19eb73f6225de032a1fafb3"><div class="ttname"><a href="classllvm_1_1APFloat.html#a30b29f2be19eb73f6225de032a1fafb3">llvm::APFloat::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdoc">Returns true if and only if the float is plus or minus zero. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00376">APFloat.h:376</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">m_One() - Match an integer 1 or a vector with all elements equal to 1. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00257">PatternMatch.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_a07a99ca6c9f72dfa90f46a2b3ec22c86"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a07a99ca6c9f72dfa90f46a2b3ec22c86">llvm::ICmpInst::getSignedPredicate</a></div><div class="ttdeci">Predicate getSignedPredicate() const </div><div class="ttdoc">Return the signed version of the predicate. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00975">Instructions.h:975</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a43d73d8d35bd4f24e1d480021a70f2b1"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a43d73d8d35bd4f24e1d480021a70f2b1">llvm::InstCombiner::visitFCmpInst</a></div><div class="ttdeci">Instruction * visitFCmpInst(FCmpInst &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l03219">InstCombineCompares.cpp:3219</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdoc">unsigned greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00674">InstrTypes.h:674</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a6142fc5662411269a7ca0217f49f338c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">llvm::APInt::zext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT zext(unsigned width) const </div><div class="ttdoc">Zero extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00983">APInt.cpp:983</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ac5728c914b7e92030243a21e49ab1552"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01809">Constants.cpp:1809</a></div></div>
<div class="ttc" id="OcamlGCPrinter_8cpp_html_a1bdbcdc4205781eefd549946d40ff378"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;,&quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aa3e1005525fe79e631f1fe5bd91fdf3c"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">llvm::ConstantExpr::getMul</a></div><div class="ttdeci">static Constant * getMul(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02062">Constants.cpp:2062</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a0ad1d1442a12b21931b730201f58ab5e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01904">Instructions.cpp:1904</a></div></div>
<div class="ttc" id="classllvm_1_1FPExtInst_html"><div class="ttname"><a href="classllvm_1_1FPExtInst.html">llvm::FPExtInst</a></div><div class="ttdoc">This class represents an extension of floating point types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03319">Instructions.h:3319</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a097c2d42e4deffabe6d54b007ad83367"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdoc">Return the sign extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00124">Constants.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00656">InstrTypes.h:656</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1e1ce75d651c76b6869b4218e34618c8"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01444">Constants.cpp:1444</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa9537475b2b94f72ad6d5e8730dc40cb"><div class="ttname"><a href="classllvm_1_1APInt.html#aa9537475b2b94f72ad6d5e8730dc40cb">llvm::APInt::ule</a></div><div class="ttdeci">bool ule(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned less or equal comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01052">APInt.h:1052</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4f9fe1ca06b44499c16742431c00cb34"><div class="ttname"><a href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">llvm::APFloat::getSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getSemantics() const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00397">APFloat.h:397</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa96ca2cf0bb1e924523900fb911b0a45"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa96ca2cf0bb1e924523900fb911b0a45">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const </div><div class="ttdoc">Determine if the value is one. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00168">Constants.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a849c899d9c0fc7e059eb46b6ead86c6e"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a849c899d9c0fc7e059eb46b6ead86c6e">llvm::InstCombiner::FoldICmpAddOpCst</a></div><div class="ttdeci">Instruction * FoldICmpAddOpCst(Instruction &amp;ICI, Value *X, ConstantInt *CI, ICmpInst::Predicate Pred)</div><div class="ttdoc">FoldICmpAddOpCst - Fold &quot;icmp pred (X+CI), X&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00745">InstCombineCompares.cpp:745</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdoc">signed greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00679">InstrTypes.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9fe0b1e68f897c642cde7e54184f2f4e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">llvm::ConstantExpr::getXor</a></div><div class="ttdeci">static Constant * getXor(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02107">Constants.cpp:2107</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:00 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
