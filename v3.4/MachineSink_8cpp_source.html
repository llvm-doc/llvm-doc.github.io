<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: MachineSink.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MachineSink_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MachineSink.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MachineSink_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- MachineSink.cpp - Sinking for machine instructions ----------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass moves instructions into successor blocks when possible, so that</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// they aren&#39;t executed on paths where their results aren&#39;t needed.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// This pass is not intended to be a replacement or a complete alternative</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// for an LLVM-IR-level sinking pass. It is only designed to sink simple</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// constructs that are not exposed before lowering and instruction selection.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="MachineSink_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   19</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;machine-sink&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="MachineSink_8cpp.html#a090dd2b3e5094e686da7077ca7677e7a">SplitEdges</a>(<span class="stringliteral">&quot;machine-sink-split&quot;</span>,</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Split critical edges during machine sinking&quot;</span>),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;           <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<a class="code" href="MachineSink_8cpp.html#aee951f454f5c55d15d0b3c362744ca2c">STATISTIC</a>(NumSunk,      <span class="stringliteral">&quot;Number of machine instructions sunk&quot;</span>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="MachineSink_8cpp.html#aee951f454f5c55d15d0b3c362744ca2c">STATISTIC</a>(NumSplit,     <span class="stringliteral">&quot;Number of critical edges split&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="MachineSink_8cpp.html#aee951f454f5c55d15d0b3c362744ca2c">STATISTIC</a>(NumCoalesces, <span class="stringliteral">&quot;Number of copies coalesced&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">class </span>MachineSinking : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a>  *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;  <span class="comment">// Machine register information</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a> *DT;   <span class="comment">// Machine dominator tree</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *LI;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Remember which edges have been considered for breaking.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;std::pair&lt;MachineBasicBlock*,MachineBasicBlock*&gt;</a>, 8&gt;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    CEBCandidates;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    MachineSinking() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <a class="code" href="namespacellvm.html#a910d02b9b941c7232f370a3f7c345621">initializeMachineSinkingPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseMemory() {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      CEBCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">bool</span> ProcessBlock(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">bool</span> isWorthBreakingCriticalEdge(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *From,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *To);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *From,</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *To,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                         <span class="keywordtype">bool</span> BreakPHIEdge);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">bool</span> SinkInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">bool</span> &amp;SawStore);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">bool</span> AllUsesDominatedByBlock(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefMBB,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                 <span class="keywordtype">bool</span> &amp;BreakPHIEdge, <span class="keywordtype">bool</span> &amp;LocalUse) <span class="keyword">const</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FindSuccToSinkTo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;               <span class="keywordtype">bool</span> &amp;BreakPHIEdge);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">bool</span> isProfitableToSinkTo(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                              <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                              <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccToSinkTo);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">bool</span> PerformTrivialForwardCoalescing(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  };</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// SuccessorSorter - Sort Successors according to their loop depth. </span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">struct </span>SuccessorSorter {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    SuccessorSorter(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>) : LI(LoopInfo) {}</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *LHS,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *RHS)<span class="keyword"> const </span>{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">return</span> LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">getLoopDepth</a>(LHS) &lt; LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">getLoopDepth</a>(RHS);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *LI;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  };</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineSinking::ID</a> = 0;</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2a307065c6152b458d2b8ceaea1823d7">  114</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a2a307065c6152b458d2b8ceaea1823d7">llvm::MachineSinkingID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineSinking::ID</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<a class="code" href="MachineSink_8cpp.html#a100af58fa38f02cfd948c6d936296ef7">INITIALIZE_PASS_BEGIN</a>(MachineSinking, <span class="stringliteral">&quot;machine-sink&quot;</span>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="stringliteral">&quot;Machine code sinking&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="MachineSink_8cpp.html#a640e4b41923b109e68705e2ca9918848">  120</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(MachineSinking, &quot;machine-<a class="code" href="MachineSink_8cpp.html#abaeca283dd5280e74ec8774a25829c8d">sink</a>&quot;,</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                &quot;<a class="code" href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a> <a class="code" href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a> <a class="code" href="MachineSink_8cpp.html#a640e4b41923b109e68705e2ca9918848">sinking</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keywordtype">bool</span> MachineSinking::PerformTrivialForwardCoalescing(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;isCopy())</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">unsigned</span> SrcReg = MI-&gt;getOperand(1).getReg();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">unsigned</span> DstReg = MI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(SrcReg) ||</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(DstReg) ||</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      !MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">hasOneNonDBGUse</a>(SrcReg))</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *SRC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(SrcReg);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *DRC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(DstReg);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (SRC != DRC)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(SrcReg);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a100d59f6313d76435a54425d3d11bf99">isCopyLike</a>())</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Coalescing: &quot;</span> &lt;&lt; *DefMI);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** to: &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a0eb653bae4f5a11b4b19a6247fd0021c">replaceRegWith</a>(DstReg, SrcReg);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  MI-&gt;eraseFromParent();</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  ++NumCoalesces;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/// AllUsesDominatedByBlock - Return true if all uses of the specified register</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// occur in blocks dominated by the specified block. If any use is in the</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/// definition block, then return false since it is never legal to move def</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">/// after uses.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;MachineSinking::AllUsesDominatedByBlock(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefMBB,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                        <span class="keywordtype">bool</span> &amp;BreakPHIEdge,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                        <span class="keywordtype">bool</span> &amp;LocalUse)<span class="keyword"> const </span>{</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         <span class="stringliteral">&quot;Only makes sense for vregs&quot;</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// Ignore debug uses because debug info doesn&#39;t affect the code.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">use_nodbg_empty</a>(Reg))</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// BreakPHIEdge is true if all the uses are in the successor MBB being sunken</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// into and they are all PHI nodes. In this case, machine-sink must break</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// the critical edge first. e.g.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// BB#1: derived from LLVM BB %bb4.preheader</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">//   Predecessors according to CFG: BB#0</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">//     ...</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">//     %reg16385&lt;def&gt; = DEC64_32r %reg16437, %EFLAGS&lt;imp-def,dead&gt;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">//     ...</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">//     JE_4 &lt;BB#37&gt;, %EFLAGS&lt;imp-use&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">//   Successors according to CFG: BB#37 BB#2</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// BB#2: derived from LLVM BB %bb.nph</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">//   Predecessors according to CFG: BB#0 BB#1</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">//     %reg16386&lt;def&gt; = PHI %reg16434, &lt;BB#0&gt;, %reg16385, &lt;BB#1&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  BreakPHIEdge = <span class="keyword">true</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg), E = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseInst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UseBlock = UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (!(UseBlock == MBB &amp;&amp; UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>() &amp;&amp;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperandNo()+1).getMBB() == DefMBB)) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      BreakPHIEdge = <span class="keyword">false</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (BreakPHIEdge)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg), E = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Determine the block of the use.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseInst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UseBlock = UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>()) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// PHI nodes use the operand in the predecessor block, not the block with</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="comment">// the PHI.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      UseBlock = UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperandNo()+1).getMBB();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UseBlock == DefMBB) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      LocalUse = <span class="keyword">true</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// Check that it dominates.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(MBB, UseBlock))</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordtype">bool</span> MachineSinking::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;******** Machine Sinking ********\n&quot;</span>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>();</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  TII = TM.<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  TRI = TM.<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  MRI = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  DT = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  LI = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  AA = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">bool</span> EverMadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// Process all basic blocks.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    CEBCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      MadeChange |= ProcessBlock(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// If this iteration over the code changed anything, keep iterating.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (!MadeChange) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    EverMadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">return</span> EverMadeChange;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keywordtype">bool</span> MachineSinking::ProcessBlock(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// Can&#39;t sink anything out of a block that has less than two successors.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">if</span> (MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() &lt;= 1 || MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Don&#39;t bother sinking code out of unreachable blocks. In addition to being</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// unprofitable, it can also lead to infinite looping, because in an</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// unreachable loop there may be nowhere to stop.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a442d084f7e48aead200646a2541a9786">isReachableFromEntry</a>(&amp;MBB)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Walk the basic block bottom-up.  Remember if we saw a store.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">bool</span> ProcessedBegin, SawStore = <span class="keyword">false</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;  <span class="comment">// The instruction to sink.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Predecrement I (if it&#39;s not begin) so that it isn&#39;t invalidated by</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// sinking.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    ProcessedBegin = I == MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!ProcessedBegin)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>())</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">bool</span> Joined = PerformTrivialForwardCoalescing(MI, &amp;MBB);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (Joined) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (SinkInstruction(MI, SawStore))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      ++NumSunk, MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// If we just processed the first instruction in the block, we&#39;re done.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  } <span class="keywordflow">while</span> (!ProcessedBegin);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="keywordtype">bool</span> MachineSinking::isWorthBreakingCriticalEdge(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *From,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *To) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// FIXME: Need much better heuristics.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// If the pass has already considered breaking this edge (during this pass</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// through the function), then let&#39;s go ahead and break it. This means</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// sinking multiple &quot;cheap&quot; instructions into the same block.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (!CEBCandidates.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(std::make_pair(From, To)))</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>() &amp;&amp; !MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2d31549cd95bf8c917744e997bf73f7">isAsCheapAsAMove</a>())</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// MI is cheap, we probably don&#39;t want to break the critical edge for it.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// However, if this would allow some definitions of its source operands</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// to be sunk then it&#39;s probably worth it.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>())</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (Reg == 0)</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// We don&#39;t move live definitions of physical registers,</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// so sinking their uses won&#39;t enable any opportunities.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// If this instruction is the only user of a virtual register,</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// check if breaking the edge will enable sinking</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// both this instruction and the defining instruction.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">hasOneNonDBGUse</a>(Reg)) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">// If the definition resides in same MBB,</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// claim it&#39;s likely we can sink these together.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// If definition resides elsewhere, we aren&#39;t</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// blocking it from being sunk so don&#39;t break the edge.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(Reg);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>() == MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>())</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">MachineSinking::SplitCriticalEdge</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FromBB,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ToBB,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                                     <span class="keywordtype">bool</span> BreakPHIEdge) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (!isWorthBreakingCriticalEdge(MI, FromBB, ToBB))</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// Avoid breaking back edge. From == To means backedge for single BB loop.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MachineSink_8cpp.html#a090dd2b3e5094e686da7077ca7677e7a">SplitEdges</a> || FromBB == ToBB)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Check for backedges of more &quot;complex&quot; loops.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">getLoopFor</a>(FromBB) == LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">getLoopFor</a>(ToBB) &amp;&amp;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#adfdacd885fe7df6a8124bb5503313cd7">isLoopHeader</a>(ToBB))</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// It&#39;s not always legal to break critical edges and sink the computation</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// to the edge.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// BB#1:</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// v1024</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Beq BB#3</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="comment">// &lt;fallthrough&gt;</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// BB#2:</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// ... no uses of v1024</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// &lt;fallthrough&gt;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// BB#3:</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// ...</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">//       = v1024</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// If BB#1 -&gt; BB#3 edge is broken and computation of v1024 is inserted:</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// BB#1:</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// ...</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// Bne BB#2</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// BB#4:</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// v1024 =</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// B BB#3</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// BB#2:</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// ... no uses of v1024</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// &lt;fallthrough&gt;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// BB#3:</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// ...</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">//       = v1024</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// This is incorrect since v1024 is not computed along the BB#1-&gt;BB#2-&gt;BB#3</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// flow. We need to ensure the new basic block where the computation is</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// sunk to dominates all the uses.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// It&#39;s only legal to break critical edge and sink the computation to the</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// new block if all the predecessors of &quot;To&quot;, except for &quot;From&quot;, are</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// not dominated by &quot;From&quot;. Given SSA property, this means these</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// predecessors are dominated by &quot;To&quot;.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// There is no need to do this check if all the uses are PHI nodes. PHI</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// sources are only defined on the specific predecessor edges.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (!BreakPHIEdge) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = ToBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;           E = ToBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != E; ++PI) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">if</span> (*PI == FromBB)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(ToBB, *PI))</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> FromBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af93cadf3685e509daac270c8cfd2b52f">SplitCriticalEdge</a>(ToBB, <span class="keyword">this</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="MachineSink_8cpp.html#ae2f9c0a78760ea2667c6c11347860dd3">  407</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineSink_8cpp.html#ae2f9c0a78760ea2667c6c11347860dd3">AvoidsSinking</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *MRI) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">return</span> MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a4a81bce0636d52246dbf2170201cd4f2">isInsertSubreg</a>() || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a764d76a5036b1b5debe2b529baf9b47d">isSubregToReg</a>() || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#afd3c04beba982703c5a4df17ca3180cc">isRegSequence</a>();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">/// collectDebgValues - Scan instructions following MI and collect any</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">/// matching DBG_VALUEs.</span></div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="MachineSink_8cpp.html#ab2133df1c81acacf56639de8037dadd1">  413</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MachineSink_8cpp.html#ab2133df1c81acacf56639de8037dadd1">collectDebugValues</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;DbgValues) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  DbgValues.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> DI = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>; ++DI;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;       DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; ++DI) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (!DI-&gt;isDebugValue())</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (DI-&gt;getOperand(0).isReg() &amp;&amp;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        DI-&gt;getOperand(0).getReg() == MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>())</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      DbgValues.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(DI);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/// isPostDominatedBy - Return true if A is post dominated by B.</span></div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="MachineSink_8cpp.html#a9ffcd301c6cff096704d110fd7128ada">  431</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineSink_8cpp.html#a9ffcd301c6cff096704d110fd7128ada">isPostDominatedBy</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// FIXME - Use real post dominator.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (A-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() != 2)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">MachineBasicBlock::succ_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = A-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (B == *I)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *OtherSuccBlock = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (OtherSuccBlock-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() != 1 ||</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      *(OtherSuccBlock-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()) != B)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// isProfitableToSinkTo - Return true if it is profitable to sink MI.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineSinking::isProfitableToSinkTo(<span class="keywordtype">unsigned</span> Reg, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                          <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                          <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccToSinkTo) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  assert (MI &amp;&amp; <span class="stringliteral">&quot;Invalid MachineInstr!&quot;</span>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  assert (SuccToSinkTo &amp;&amp; <span class="stringliteral">&quot;Invalid SinkTo Candidate BB&quot;</span>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (MBB == SuccToSinkTo)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// It is profitable if SuccToSinkTo does not post dominate current block.</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MachineSink_8cpp.html#a9ffcd301c6cff096704d110fd7128ada">isPostDominatedBy</a>(MBB, SuccToSinkTo))</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// Check if only use in post dominated block is PHI instruction.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordtype">bool</span> NonPHIUse = <span class="keyword">false</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg), E = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseInst = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UseBlock = UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (UseBlock == SuccToSinkTo &amp;&amp; !UseInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>())</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      NonPHIUse = <span class="keyword">true</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (!NonPHIUse)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// If SuccToSinkTo post dominates then also it may be profitable if MI</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// can further profitably sinked into another block in next round.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">bool</span> BreakPHIEdge = <span class="keyword">false</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// FIXME - If finding successor is compile time expensive then catch results.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB2 = FindSuccToSinkTo(MI, SuccToSinkTo, BreakPHIEdge))</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> isProfitableToSinkTo(Reg, MI, SuccToSinkTo, MBB2);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// If SuccToSinkTo is final destination and it is a post dominator of current</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// block then it is not profitable to sink MI into SuccToSinkTo block.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">/// FindSuccToSinkTo - Find a successor to sink this instruction to.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MachineSinking::FindSuccToSinkTo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                   <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                   <span class="keywordtype">bool</span> &amp;BreakPHIEdge) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  assert (MI &amp;&amp; <span class="stringliteral">&quot;Invalid MachineInstr!&quot;</span>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  assert (MBB &amp;&amp; <span class="stringliteral">&quot;Invalid MachineBasicBlock!&quot;</span>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// Loop over all the operands of the specified instruction.  If there is</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// anything we can&#39;t handle, bail out.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// SuccToSinkTo - This is the successor to sink this instruction to, once we</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// decide.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccToSinkTo = 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;  <span class="comment">// Ignore non-register operands.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg)) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">// If the physreg has no defs anywhere, it&#39;s just an ambient register</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment">// and we can freely move its uses. Alternatively, if it&#39;s allocatable,</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">// it could get allocated to something with a def during allocation.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> (!MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9d7134fb4c7b07bd2fab941063bea585">isConstantPhysReg</a>(Reg, *MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>()))</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>()) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// A def that isn&#39;t dead. We can&#39;t move it.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="comment">// Virtual register uses are always safe to sink.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// If it&#39;s not safe to move defs of the register class, then abort.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a55a712162fbc804860c3a003f75fd050">isSafeToMoveRegClassDefs</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(Reg)))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="comment">// FIXME: This picks a successor to sink into based on having one</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// successor that dominates all the uses.  However, there are cases where</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="comment">// sinking can happen but where the sink point isn&#39;t a successor.  For</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="comment">// example:</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="comment">//   x = computation</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="comment">//   if () {} else {}</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="comment">//   use x</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="comment">// the instruction could be sunk over the whole diamond for the</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="comment">// if/then/else (or loop, etc), allowing it to be sunk into other blocks</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="comment">// after that.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="comment">// Virtual register defs can only be sunk if all their uses are in blocks</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="comment">// dominated by one of the successors.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (SuccToSinkTo) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// If a previous operand picked a block to sink to, then this operand</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">// must be sinkable to the same block.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordtype">bool</span> LocalUse = <span class="keyword">false</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (!AllUsesDominatedByBlock(Reg, SuccToSinkTo, MBB,</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                                     BreakPHIEdge, LocalUse))</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="comment">// Otherwise, we should look at all the successors and decide which one</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// we should sink to.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="comment">// We give successors with smaller loop depth higher priority.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 4&gt;</a> Succs(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(), MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>());</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      std::stable_sort(Succs.begin(), Succs.end(), SuccessorSorter(LI));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;MachineBasicBlock *&gt;::iterator</a> SI = Succs.begin(),</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;             E = Succs.end(); SI != E; ++SI) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBlock = *SI;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordtype">bool</span> LocalUse = <span class="keyword">false</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">if</span> (AllUsesDominatedByBlock(Reg, SuccBlock, MBB,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                    BreakPHIEdge, LocalUse)) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          SuccToSinkTo = SuccBlock;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (LocalUse)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <span class="comment">// Def is used locally, it&#39;s never safe to move this def.</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// If we couldn&#39;t find a block to sink to, ignore this instruction.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">if</span> (SuccToSinkTo == 0)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isProfitableToSinkTo(Reg, MI, MBB, SuccToSinkTo))</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// It is not possible to sink an instruction into its own block.  This can</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// happen with loops.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (MBB == SuccToSinkTo)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// It&#39;s not safe to sink instructions to EH landing pad. Control flow into</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// landing pad is implicitly defined.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (SuccToSinkTo &amp;&amp; SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>())</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">return</span> SuccToSinkTo;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">/// SinkInstruction - Determine whether it is safe to sink the specified machine</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/// instruction out of its current block into a successor.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineSinking::SinkInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI, <span class="keywordtype">bool</span> &amp;SawStore) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// Don&#39;t sink insert_subreg, subreg_to_reg, reg_sequence. These are meant to</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// be close to the source to make it easier to coalesce.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineSink_8cpp.html#ae2f9c0a78760ea2667c6c11347860dd3">AvoidsSinking</a>(MI, MRI))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// Check if it&#39;s safe to move the instruction.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">isSafeToMove</a>(TII, AA, SawStore))</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// FIXME: This should include support for sinking instructions within the</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// block they are currently in to shorten the live ranges.  We often get</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// instructions sunk into the top of a large block, but it would be better to</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// also sink them down before their first use in the block.  This xform has to</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// be careful not to *increase* register pressure though, e.g. sinking</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// &quot;x = y + z&quot; down if it kills y and z would increase the live ranges of y</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// and z and only shrink the live range of x.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">bool</span> BreakPHIEdge = <span class="keyword">false</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ParentBlock = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccToSinkTo = FindSuccToSinkTo(MI, ParentBlock, BreakPHIEdge);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// If there are no outputs, it must have side-effects.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">if</span> (SuccToSinkTo == 0)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// If the instruction to move defines a dead physical register which is live</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// when leaving the basic block, don&#39;t move it because it could turn into a</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// &quot;zombie&quot; define of that preg. E.g., EFLAGS. (&lt;rdar://problem/8030636&gt;)</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (Reg == 0 || !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a183fc29cc1ccec18f5e9e4122a4aab1c">isLiveIn</a>(Reg))</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Sink instr &quot;</span> &lt;&lt; *MI &lt;&lt; <span class="stringliteral">&quot;\tinto block &quot;</span> &lt;&lt; *SuccToSinkTo);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// If the block has multiple predecessors, this is a critical edge.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">// Decide if we can sink along it or need to break the edge.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">if</span> (SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() &gt; 1) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// We cannot sink a load across a critical edge - there may be stores in</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// other code paths.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordtype">bool</span> TryBreak = <span class="keyword">false</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="CodeGen_2README_8txt.html#a52fe3196795ff2431bd18d85568da5d1">store</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">isSafeToMove</a>(TII, AA, store)) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** NOTE: Won&#39;t sink load along critical edge.\n&quot;</span>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      TryBreak = <span class="keyword">true</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// We don&#39;t want to sink across a critical edge if we don&#39;t dominate the</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// successor. We could be introducing calculations to new code paths.</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (!TryBreak &amp;&amp; !DT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(ParentBlock, SuccToSinkTo)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** NOTE: Critical edge found\n&quot;</span>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      TryBreak = <span class="keyword">true</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// Don&#39;t sink instructions into a loop.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (!TryBreak &amp;&amp; LI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#adfdacd885fe7df6a8124bb5503313cd7">isLoopHeader</a>(SuccToSinkTo)) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** NOTE: Loop header found\n&quot;</span>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      TryBreak = <span class="keyword">true</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// Otherwise we are OK with sinking along a critical edge.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (!TryBreak)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Sinking along critical edge.\n&quot;</span>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewSucc =</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(MI, ParentBlock, SuccToSinkTo, BreakPHIEdge);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">if</span> (!NewSucc) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** PUNTING: Not legal or profitable to &quot;</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        <span class="stringliteral">&quot;break critical edge\n&quot;</span>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** Splitting critical edge:&quot;</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;              <span class="stringliteral">&quot; BB#&quot;</span> &lt;&lt; ParentBlock-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; -- BB#&quot;</span> &lt;&lt; NewSucc-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; -- BB#&quot;</span> &lt;&lt; SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        SuccToSinkTo = NewSucc;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        ++NumSplit;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        BreakPHIEdge = <span class="keyword">false</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (BreakPHIEdge) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// BreakPHIEdge is true if all the uses are in the successor MBB being</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// sunken into and they are all PHI nodes. In this case, machine-sink must</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// break the critical edge first.</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewSucc = <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(MI, ParentBlock,</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                                   SuccToSinkTo, BreakPHIEdge);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (!NewSucc) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** PUNTING: Not legal or profitable to &quot;</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="stringliteral">&quot;break critical edge\n&quot;</span>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; *** Splitting critical edge:&quot;</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;          <span class="stringliteral">&quot; BB#&quot;</span> &lt;&lt; ParentBlock-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; -- BB#&quot;</span> &lt;&lt; NewSucc-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; -- BB#&quot;</span> &lt;&lt; SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    SuccToSinkTo = NewSucc;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    ++NumSplit;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// Determine where to insert into. Skip phi nodes.</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPos = SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">while</span> (InsertPos != SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; InsertPos-&gt;isPHI())</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    ++InsertPos;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// collect matching debug values.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 2&gt;</a> DbgValuesToSink;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <a class="code" href="MachineSink_8cpp.html#ab2133df1c81acacf56639de8037dadd1">collectDebugValues</a>(MI, DbgValuesToSink);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Move the instruction.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertPos, ParentBlock, MI,</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                       ++<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>(MI));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// Move debug values.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;MachineInstr *&gt;::iterator</a> DBI = DbgValuesToSink.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         DBE = DbgValuesToSink.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); DBI != DBE; ++DBI) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DbgMI = *DBI;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    SuccToSinkTo-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertPos, ParentBlock,  DbgMI,</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                         ++<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>(DbgMI));</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Conservatively, clear any kill flags, since it&#39;s possible that they are no</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// longer correct.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae26854c9925fc93880d644c0dcac8ba7">clearKillInfo</a>();</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div><div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a9d7134fb4c7b07bd2fab941063bea585"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a9d7134fb4c7b07bd2fab941063bea585">llvm::MachineRegisterInfo::isConstantPhysReg</a></div><div class="ttdeci">bool isConstantPhysReg(unsigned PhysReg, const MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00413">MachineRegisterInfo.cpp:413</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9ac05913a143322136efcad10ed7548c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_aee951f454f5c55d15d0b3c362744ca2c"><div class="ttname"><a href="MachineSink_8cpp.html#aee951f454f5c55d15d0b3c362744ca2c">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumSunk,&quot;Number of machine instructions sunk&quot;)</div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00317">MachineFunction.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00315">MachineFunction.h:315</a></div></div>
<div class="ttc" id="namespacellvm_html_afa6abaa0eea3b2083902cf651a9653b1"><div class="ttname"><a href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(TerminatorInst *TI, unsigned SuccNum, Pass *P=0, bool MergeIdenticalEdges=false, bool DontDeleteUselessPHIs=false, bool SplitLandingPads=false)</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00140">BreakCriticalEdges.cpp:140</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00284">MachineOperand.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00278">MachineBasicBlock.h:278</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ac02c0424a7e7a4021fd9efc0a71d7473"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">llvm::MachineRegisterInfo::use_nodbg_empty</a></div><div class="ttdeci">bool use_nodbg_empty(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00285">MachineRegisterInfo.h:285</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_a640e4b41923b109e68705e2ca9918848"><div class="ttname"><a href="MachineSink_8cpp.html#a640e4b41923b109e68705e2ca9918848">sinking</a></div><div class="ttdeci">machine Machine code sinking</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00120">MachineSink.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a355ba266da19094cc0948311c431768e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">llvm::MachineRegisterInfo::use_nodbg_end</a></div><div class="ttdeci">static use_nodbg_iterator use_nodbg_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00281">MachineRegisterInfo.h:281</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae26854c9925fc93880d644c0dcac8ba7"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae26854c9925fc93880d644c0dcac8ba7">llvm::MachineInstr::clearKillInfo</a></div><div class="ttdeci">void clearKillInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01194">MachineInstr.cpp:1194</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ad70025709baab4e42d5d9d83023bc402"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">llvm::MachineInstr::isPHI</a></div><div class="ttdeci">bool isPHI() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00648">MachineInstr.h:648</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aefba5f2af370add1bc8aaceedf7878ef"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">llvm::MachineBasicBlock::succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00249">MachineBasicBlock.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af93cadf3685e509daac270c8cfd2b52f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af93cadf3685e509daac270c8cfd2b52f">llvm::MachineBasicBlock::SplitCriticalEdge</a></div><div class="ttdeci">MachineBasicBlock * SplitCriticalEdge(MachineBasicBlock *Succ, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00671">MachineBasicBlock.cpp:671</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa37d95a1d7bc824da0c596d8334c4ceb"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00220">MachineBasicBlock.h:220</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a76b3fc7c102561fb5210d5151531e409"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">llvm::SmallSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00097">SmallSet.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a100d59f6313d76435a54425d3d11bf99"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a100d59f6313d76435a54425d3d11bf99">llvm::MachineInstr::isCopyLike</a></div><div class="ttdeci">bool isCopyLike() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00678">MachineInstr.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00247">MachineBasicBlock.h:247</a></div></div>
<div class="ttc" id="COFFYAML_8cpp_html_a9dbc9c66cf3908e866b252feca6395a4"><div class="ttname"><a href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a></div><div class="ttdeci">COFF::MachineTypes Machine</div><div class="ttdef"><b>Definition:</b> <a href="COFFYAML_8cpp_source.html#l00211">COFFYAML.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a4a81bce0636d52246dbf2170201cd4f2"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a4a81bce0636d52246dbf2170201cd4f2">llvm::MachineInstr::isInsertSubreg</a></div><div class="ttdeci">bool isInsertSubreg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00657">MachineInstr.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a6fd27da145ca5d0d4b72b763092f3aed"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">llvm::MachineLoopInfo::getLoopFor</a></div><div class="ttdeci">MachineLoop * getLoopFor(const MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00099">MachineLoopInfo.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_ae2f9c0a78760ea2667c6c11347860dd3"><div class="ttname"><a href="MachineSink_8cpp.html#ae2f9c0a78760ea2667c6c11347860dd3">AvoidsSinking</a></div><div class="ttdeci">static bool AvoidsSinking(MachineInstr *MI, MachineRegisterInfo *MRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00407">MachineSink.cpp:407</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2d31549cd95bf8c917744e997bf73f7"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2d31549cd95bf8c917744e997bf73f7">llvm::MachineInstr::isAsCheapAsAMove</a></div><div class="ttdeci">bool isAsCheapAsAMove(QueryType Type=AllInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00560">MachineInstr.h:560</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae0ac5973cd95f76e3365e67aaad69de6"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00669">MachineInstr.h:669</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_a9ffcd301c6cff096704d110fd7128ada"><div class="ttname"><a href="MachineSink_8cpp.html#a9ffcd301c6cff096704d110fd7128ada">isPostDominatedBy</a></div><div class="ttdeci">static bool isPostDominatedBy(MachineBasicBlock *A, MachineBasicBlock *B)</div><div class="ttdoc">isPostDominatedBy - Return true if A is post dominated by B. </div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00431">MachineSink.cpp:431</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a52fe3196795ff2431bd18d85568da5d1"><div class="ttname"><a href="CodeGen_2README_8txt.html#a52fe3196795ff2431bd18d85568da5d1">store</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM ID Predecessors according to mbb&lt; bb27, 0x8b0a7c0 &gt; Note ADDri is not a two address instruction its result reg1037 is an operand of the PHI node in bb76 and its operand reg1039 is the result of the PHI node We should treat it as a two address code and make sure the ADDri is scheduled after any node that reads reg1039 Use local info(i.e.register scavenger) to assign it a free register to allow reuse the collector could move the objects and invalidate the derived pointer This is bad enough in the first but safe points can crop up unpredictably **array_addr i32 n y store obj obj **nth_el If the i64 division is lowered to a then a safe point array and nth_el no longer point into the correct object The fix for this is to copy address calculations so that dependent pointers are never live across safe point boundaries But the loads cannot be copied like this if there was an intervening store</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00133">CodeGen/README.txt:133</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_a5d98a8b5139e56ebf0d2ff4cbaa0dc5e"><div class="ttname"><a href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb then taking the smallest *Add support for compiling individual basic blocks in thumb when in a larger ARM function This can be used for presumed cold code</div><div class="ttdef"><b>Definition:</b> <a href="README-Thumb_8txt_source.html#l00005">README-Thumb.txt:5</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="namespacellvm_html_a2a307065c6152b458d2b8ceaea1823d7"><div class="ttname"><a href="namespacellvm.html#a2a307065c6152b458d2b8ceaea1823d7">llvm::MachineSinkingID</a></div><div class="ttdeci">char &amp; MachineSinkingID</div><div class="ttdoc">MachineSinking - This pass performs sinking on machine instructions. </div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00114">MachineSink.cpp:114</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00589">LoopInfo.h:589</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00249">Pass.cpp:249</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_ab2133df1c81acacf56639de8037dadd1"><div class="ttname"><a href="MachineSink_8cpp.html#ab2133df1c81acacf56639de8037dadd1">collectDebugValues</a></div><div class="ttdeci">static void collectDebugValues(MachineInstr *MI, SmallVectorImpl&lt; MachineInstr * &gt; &amp;DbgValues)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00413">MachineSink.cpp:413</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a764d76a5036b1b5debe2b529baf9b47d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a764d76a5036b1b5debe2b529baf9b47d">llvm::MachineInstr::isSubregToReg</a></div><div class="ttdeci">bool isSubregToReg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00660">MachineInstr.h:660</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a55f1c19ebb9fce7a442816eeb154174f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">llvm::MachineInstr::isSafeToMove</a></div><div class="ttdeci">bool isSafeToMove(const TargetInstrInfo *TII, AliasAnalysis *AA, bool &amp;SawStore) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01228">MachineInstr.cpp:1228</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a0eb653bae4f5a11b4b19a6247fd0021c"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a0eb653bae4f5a11b4b19a6247fd0021c">llvm::MachineRegisterInfo::replaceRegWith</a></div><div class="ttdeci">void replaceRegWith(unsigned FromReg, unsigned ToReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00293">MachineRegisterInfo.cpp:293</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3f522ae33859d693fb5781efe690e9e6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">llvm::MachineBasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00331">MachineBasicBlock.h:331</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00539">MachineBasicBlock.h:539</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a183fc29cc1ccec18f5e9e4122a4aab1c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a183fc29cc1ccec18f5e9e4122a4aab1c">llvm::MachineBasicBlock::isLiveIn</a></div><div class="ttdeci">bool isLiveIn(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00340">MachineBasicBlock.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a8be4959abd44b6fbd158dba0d7c315bc"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00327">MachineRegisterInfo.cpp:327</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">llvm::X86II::DE</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="namespacellvm_html_a910d02b9b941c7232f370a3f7c345621"><div class="ttname"><a href="namespacellvm.html#a910d02b9b941c7232f370a3f7c345621">llvm::initializeMachineSinkingPass</a></div><div class="ttdeci">void initializeMachineSinkingPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="MachineSink_8cpp_html_a100af58fa38f02cfd948c6d936296ef7"><div class="ttname"><a href="MachineSink_8cpp.html#a100af58fa38f02cfd948c6d936296ef7">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(MachineSinking,&quot;machine-sink&quot;,&quot;Machine code sinking&quot;, false, false) INITIALIZE_PASS_END(MachineSinking</div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abf69f92f1977440a4e443a26baeb73c0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00308">MachineRegisterInfo.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a442d084f7e48aead200646a2541a9786"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a442d084f7e48aead200646a2541a9786">llvm::MachineDominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const MachineBasicBlock *A)</div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00165">MachineDominators.h:165</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_abaeca283dd5280e74ec8774a25829c8d"><div class="ttname"><a href="MachineSink_8cpp.html#abaeca283dd5280e74ec8774a25829c8d">sink</a></div><div class="ttdeci">machine sink</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l00120">MachineSink.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a77d3f9c52df47750480d4302ae639749"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">llvm::MachineLoopInfo::getLoopDepth</a></div><div class="ttdeci">unsigned getLoopDepth(const MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00111">MachineLoopInfo.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="MachineSink_8cpp_html_a090dd2b3e5094e686da7077ca7677e7a"><div class="ttname"><a href="MachineSink_8cpp.html#a090dd2b3e5094e686da7077ca7677e7a">SplitEdges</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; SplitEdges(&quot;machine-sink-split&quot;, cl::desc(&quot;Split critical edges during machine sinking&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_adfdacd885fe7df6a8124bb5503313cd7"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#adfdacd885fe7df6a8124bb5503313cd7">llvm::MachineLoopInfo::isLoopHeader</a></div><div class="ttdeci">bool isLoopHeader(MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00116">MachineLoopInfo.h:116</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a55a712162fbc804860c3a003f75fd050"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a55a712162fbc804860c3a003f75fd050">llvm::TargetInstrInfo::isSafeToMoveRegClassDefs</a></div><div class="ttdeci">virtual bool isSafeToMoveRegClassDefs(const TargetRegisterClass *RC) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00711">TargetInstrInfo.h:711</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_afd3c04beba982703c5a4df17ca3180cc"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#afd3c04beba982703c5a4df17ca3180cc">llvm::MachineInstr::isRegSequence</a></div><div class="ttdeci">bool isRegSequence() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00663">MachineInstr.h:663</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a22bd7da7d9fa4793cb214e659c198ff6"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">llvm::MachineDominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const MachineDomTreeNode *A, const MachineDomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00071">MachineDominators.h:71</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aad684f050965249161650dcdf5a58fa4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">llvm::MachineRegisterInfo::use_nodbg_begin</a></div><div class="ttdeci">use_nodbg_iterator use_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00278">MachineRegisterInfo.h:278</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:55 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
