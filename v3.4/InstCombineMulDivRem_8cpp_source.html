<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InstCombineMulDivRem.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InstCombineMulDivRem_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InstCombineMulDivRem.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineMulDivRem_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineMulDivRem.cpp -------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the visit functions for mul, fmul, sdiv, udiv, fdiv,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// srem, urem, frem.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombine_8h.html">InstCombine.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/// simplifyValueKnownNonZero - The specific integer value is used in a context</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// where it is known to be non-zero.  If this allows us to simplify the</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/// computation, do so and return the new operand, otherwise return null.</span></div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">   26</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">simplifyValueKnownNonZero</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// If V has multiple uses, then we would have to do more analysis to determine</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// if this is safe.  For example, the use could be in dynamically unreached</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment">// code.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// ((1 &lt;&lt; A) &gt;&gt;u B) --&gt; (1 &lt;&lt; (A-B))</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// Because V cannot be zero, we know that B is less than A.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0, *PowerOf2 = 0;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(PowerOf2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="comment">// The &quot;1&quot; can be any value known to be a power of 2.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <a class="code" href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">isKnownToBeAPowerOfTwo</a>(PowerOf2)) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    A = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">CreateSub</a>(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">CreateShl</a>(PowerOf2, A);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// (PowerOfTwo &gt;&gt;u B) --&gt; isExact since shifting out the result would make it</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// inexact.  Similarly for &lt;&lt;.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;BinaryOperator&gt;(V))</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isLogicalShift() &amp;&amp; <a class="code" href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">isKnownToBeAPowerOfTwo</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0))) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="comment">// We know that this is an exact/nuw shift and that the input is a</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="comment">// non-zero context as well.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">simplifyValueKnownNonZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), IC)) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setOperand(0, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::LShr &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isExact()) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setIsExact();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Shl &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasNoUnsignedWrap()) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setHasNoUnsignedWrap();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// TODO: Lots more we could do here:</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">//    If V is a phi node, we can call this on each of its operands.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">//    &quot;select cond, X, 0&quot; can simplify to &quot;X&quot;.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">return</span> MadeChange ? V : 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/// MultiplyOverflows - True if the multiply can not be expressed in an int</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// this size.</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a6a2f9c787f06fbf87c28a469ffb5f000">   77</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineMulDivRem_8cpp.html#a6a2f9c787f06fbf87c28a469ffb5f000">MultiplyOverflows</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C2, <span class="keywordtype">bool</span> sign) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  uint32_t W = C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> LHSExt = C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>(), RHSExt = C2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">if</span> (sign) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    LHSExt = LHSExt.<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(W * 2);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    RHSExt = RHSExt.<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(W * 2);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    LHSExt = LHSExt.<a class="code" href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(W * 2);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    RHSExt = RHSExt.<a class="code" href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(W * 2);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> MulExt = LHSExt * RHSExt;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (!sign)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> MulExt.<a class="code" href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">ugt</a>(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(W * 2, W));</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Min = <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(W).<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(W * 2);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Max = <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(W).<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(W * 2);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">return</span> MulExt.<a class="code" href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">slt</a>(Min) || MulExt.<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(Max);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/// \brief A helper routine of InstCombiner::visitMul().</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">/// If C is a vector of known powers of 2, then this function returns</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/// a new vector obtained from C replacing each element with its logBase2.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/// Return a null pointer otherwise.</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#ad1b100f1cc68b21533ae3045283d4c3f">  103</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#ad1b100f1cc68b21533ae3045283d4c3f">getLogBase2Vector</a>(<a class="code" href="classllvm_1_1ConstantDataVector.html">ConstantDataVector</a> *CV) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *IVal;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 4&gt;</a> Elts;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = CV-&gt;<a class="code" href="classllvm_1_1ConstantDataSequential.html#ac2214c4d65e9e94d39408312433ea895">getNumElements</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = CV-&gt;<a class="code" href="classllvm_1_1ConstantDataSequential.html#a35cf81aa3eb4ac68691caa75bee667b5">getElementAsConstant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Elt, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(IVal)) || !IVal-&gt;<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>())</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    Elts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Elt-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IVal-&gt;<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>()));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Elts);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a8c6772ab80eaa5cba38dc9d7c5d3f313">  117</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a8c6772ab80eaa5cba38dc9d7c5d3f313">InstCombiner::visitMul</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordtype">bool</span> Changed = SimplifyAssociativeOrCommutative(I);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a16e6b2e2a8b7efd5ce9a39f39f045502">SimplifyMulInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyUsingDistributiveLaws(I))</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))  <span class="comment">// X * -1 == 0 - X</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#ac0b4ab314244698be760dbe58b869956">BinaryOperator::CreateNeg</a>(Op0, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// Also allow combining multiply instructions on vectors.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *IVal;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NewOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2)),</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C1))) &amp;&amp;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(IVal)))</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">// ((X &lt;&lt; C1)*C2) == (X * (C2 &lt;&lt; C1))</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateMul(NewOp, <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(C1, C2));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NewOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C1)))) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewCst = 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(IVal)) &amp;&amp; IVal-&gt;<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>())</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// Replace X*(2^C) with X &lt;&lt; C, where C is either a scalar or a splat.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        NewCst = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(NewOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IVal-&gt;<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>());</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantDataVector.html">ConstantDataVector</a> *CV = dyn_cast&lt;ConstantDataVector&gt;(C1))</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="comment">// Replace X*(2^C) with X &lt;&lt; C, where C is a vector of known</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment">// constant powers of 2.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        NewCst = <a class="code" href="InstCombineMulDivRem_8cpp.html#ad1b100f1cc68b21533ae3045283d4c3f">getLogBase2Vector</a>(CV);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span> (NewCst) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Shl = BinaryOperator::CreateShl(NewOp, NewCst);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>()) Shl-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">setHasNoSignedWrap</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">hasNoUnsignedWrap</a>()) Shl-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#aaa9083a85e23c9c5ee366920d90ae51e">setHasNoUnsignedWrap</a>();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> Shl;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Canonicalize (X+C1)*CI -&gt; X*CI+C1*CI.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    { <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>; <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1)))) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateMul(X, CI);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAdd(Add, Builder-&gt;CreateMul(C1, CI));</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// (Y - X) * (-(2**n)) -&gt; (X - Y) * (2**n), for positive nonzero n</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// (Y + const) * (-(2**n)) -&gt; (-constY) * (2**n), for positive nonzero n</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// The &quot;* (2**n)&quot; thus becomes a potential shifting opportunity.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;   Val = CI-&gt;getValue();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;PosVal = Val.<a class="code" href="classllvm_1_1APInt.html#ae130d109fdba9ebb976e4fe2621b374a">abs</a>();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">if</span> (Val.<a class="code" href="classllvm_1_1APInt.html#a0e9a2d7ec903d191ef029589ec647cb6">isNegative</a>() &amp;&amp; PosVal.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0, *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = 0;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = 0;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X))))</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            Sub = Builder-&gt;CreateSub(X, <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>, <span class="stringliteral">&quot;suba&quot;</span>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1))))</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            Sub = Builder-&gt;CreateSub(Builder-&gt;CreateNeg(C1), <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>, <span class="stringliteral">&quot;subc&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="keywordflow">if</span> (Sub)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;              BinaryOperator::CreateMul(Sub,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>-&gt;getType(), PosVal));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// Simplify mul instructions with a constant RHS.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op1)) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// Try to fold constant mul into select arguments.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0v = dyn_castNegVal(Op0))     <span class="comment">// -X * -Y = X*Y</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op1v = dyn_castNegVal(Op1))</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateMul(Op0v, Op1v);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// (X / Y) *  Y = X - (X % Y)</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// (X / Y) * -Y = (X % Y) - X</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1C = Op1;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op0);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (!BO ||</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() != Instruction::UDiv &amp;&amp;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;         BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() != Instruction::SDiv)) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      Op1C = Op0;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      BO = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op1);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Neg = dyn_castNegVal(Op1C);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (BO &amp;&amp; BO-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        (BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == Op1C || BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == Neg) &amp;&amp;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::UDiv ||</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::SDiv)) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0BO = BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1BO = BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="comment">// If the division is exact, X % Y is zero, so we end up with X or -X.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PossiblyExactOperator.html">PossiblyExactOperator</a> *SDiv = dyn_cast&lt;PossiblyExactOperator&gt;(BO))</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> (SDiv-&gt;isExact()) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;          <span class="keywordflow">if</span> (Op1BO == Op1C)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Op0BO);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#ac0b4ab314244698be760dbe58b869956">BinaryOperator::CreateNeg</a>(Op0BO);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Rem;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::UDiv)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        Rem = Builder-&gt;CreateURem(Op0BO, Op1BO);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        Rem = Builder-&gt;CreateSRem(Op0BO, Op1BO);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      Rem-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(BO);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span> (Op1BO == Op1C)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateSub(Op0BO, Rem);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateSub(Rem, Op0BO);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">  /// i1 mul -&gt; i1 and.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, Op1);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// X*(1 &lt;&lt; Y) --&gt; X &lt;&lt; Y</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// (1 &lt;&lt; Y)*X --&gt; X &lt;&lt; Y</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y))))</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateShl(Op1, Y);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y))))</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateShl(Op0, Y);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// If one of the operands of the multiply is a cast from a boolean value, then</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// we know the bool is either zero or one, so this is a &#39;masking&#39; multiply.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">//   X * Y (where Y is 0 or 1) -&gt; X &amp; (0-Y)</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (!I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// -2 is &quot;-1 &lt;&lt; 1&quot; so it is all bits set except the low one.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Negative2(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>(), (uint64_t)-2, <span class="keyword">true</span>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BoolCast = 0, *OtherOp = 0;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0, Negative2))</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      BoolCast = Op0, OtherOp = Op1;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op1, Negative2))</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      BoolCast = Op1, OtherOp = Op0;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (BoolCast) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Builder-&gt;CreateSub(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                    BoolCast);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(V, OtherOp);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">// Detect pattern:</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// log2(Y*0.5)</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// And check for corresponding fast math flags</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a4e140b14586cc5e1edb1311daf9474b3">  294</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstCombineMulDivRem_8cpp.html#a4e140b14586cc5e1edb1311daf9474b3">detectLog2OfHalf</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Op, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>, <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *&amp;Log2) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>&gt;(Op);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">if</span> (!II)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>() != <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e">Intrinsic::log2</a> || !II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">hasUnsafeAlgebra</a>())</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   Log2 = II;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="classllvm_1_1Value.html">Value</a> *OpLog2Of = II-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">if</span> (!OpLog2Of-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(OpLog2Of);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">if</span> (!I)</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() != Instruction::FMul || !I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">hasUnsafeAlgebra</a>())</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">if</span> (CFP &amp;&amp; CFP-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a3dfcda042e1f4f0953dc47d268cc560f">isExactlyValue</a>(0.5)) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;     Y = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   CFP = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">if</span> (CFP &amp;&amp; CFP-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a3dfcda042e1f4f0953dc47d268cc560f">isExactlyValue</a>(0.5))</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;     Y = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/// Helper function of InstCombiner::visitFMul(BinaryOperator(). It returns</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/// true iff the given value is FMul or FDiv with one and only one operand</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">/// being a normal constant (i.e. not Zero/NaN/Infinity).</span></div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">  329</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">isFMulOrFDivWithConstant</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (!I || (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() != Instruction::FMul &amp;&amp;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;             I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() != Instruction::FDiv))</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *C0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (C0 &amp;&amp; C1)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">return</span> (C0 &amp;&amp; C0-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">getValueAPF</a>().<a class="code" href="classllvm_1_1APFloat.html#aa8a88d5824ef974147709959b515448a">isFiniteNonZero</a>()) ||</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         (C1 &amp;&amp; C1-&gt;getValueAPF().isFiniteNonZero());</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">  345</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;Flt = C-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">getValueAPF</a>();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> Flt.<a class="code" href="classllvm_1_1APFloat.html#a280db20941932e0d6e2ba89a8ec6037d">isNormal</a>();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/// foldFMulConst() is a helper routine of InstCombiner::visitFMul().</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">/// The input \p FMulOrDiv is a FMul/FDiv with one and only one operand</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/// being a constant (i.e. isFMulOrFDivWithConstant(FMulOrDiv) == true).</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">/// This function is to simplify &quot;FMulOrDiv * C&quot; and returns the</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">/// resulting expression. Note that this function could return NULL in</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">/// case the constants cannot be folded into a normal floating-point.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ae75d4e9a5692594f1e2c2a6836daef45">  357</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ae75d4e9a5692594f1e2c2a6836daef45">InstCombiner::foldFMulConst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FMulOrDiv, <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                   <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  assert(<a class="code" href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">isFMulOrFDivWithConstant</a>(FMulOrDiv) &amp;&amp; <span class="stringliteral">&quot;V is invalid&quot;</span>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0 = FMulOrDiv-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1 = FMulOrDiv-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *C0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(Opnd0);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(Opnd1);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *R = 0;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// (X * C0) * C =&gt; X * (C0*C)</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (FMulOrDiv-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::FMul) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">ConstantExpr::getFMul</a>(C1 ? C1 : C0, C);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(cast&lt;ConstantFP&gt;(F)))</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      R = BinaryOperator::CreateFMul(C1 ? Opnd0 : Opnd1, F);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (C0) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="comment">// (C0 / X) * C =&gt; (C0 * C) / X</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (FMulOrDiv-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// It would otherwise introduce another div.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = cast&lt;ConstantFP&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">ConstantExpr::getFMul</a>(C0, C));</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(F))</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          R = BinaryOperator::CreateFDiv(F, Opnd1);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">// (X / C1) * C =&gt; X * (C/C1) if C/C1 is not a denormal</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = cast&lt;ConstantFP&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">ConstantExpr::getFDiv</a>(C, C1));</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(F)) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        R = BinaryOperator::CreateFMul(Opnd0, F);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// (X / C1) * C =&gt; X / (C1/C)</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *F = <a class="code" href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">ConstantExpr::getFDiv</a>(C1, C);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(cast&lt;ConstantFP&gt;(F)))</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          R = BinaryOperator::CreateFDiv(Opnd0, F);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (R) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    R-&gt;setHasUnsafeAlgebra(<span class="keyword">true</span>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    InsertNewInstWith(R, *InsertBefore);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> R;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a032fd706f6579bac3061ca85dba86499">  405</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a032fd706f6579bac3061ca85dba86499">InstCombiner::visitFMul</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordtype">bool</span> Changed = SimplifyAssociativeOrCommutative(I);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op0))</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a603e39bd7102628d207431f0289a2942">SimplifyFMulInst</a>(Op0, Op1, I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>(), TD))</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">bool</span> AllowReassociate = I.<a class="code" href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">hasUnsafeAlgebra</a>();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Simplify mul instructions with a constant RHS.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op1)) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Try to fold constant mul into select arguments.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(Op1);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (C &amp;&amp; AllowReassociate &amp;&amp; C-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">getValueAPF</a>().<a class="code" href="classllvm_1_1APFloat.html#aa8a88d5824ef974147709959b515448a">isFiniteNonZero</a>()) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="comment">// Let MDC denote an expression in one of these forms:</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="comment">// X * C, C/X, X/C, where C is a constant.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="comment">// Try to simplify &quot;MDC * Constant&quot;</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">isFMulOrFDivWithConstant</a>(Op0)) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldFMulConst(cast&lt;Instruction&gt;(Op0), C, &amp;I);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (V)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">// (MDC +/- C1) * C =&gt; (MDC * C) +/- (C1 * C)</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FAddSub = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(Op0);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (FAddSub &amp;&amp;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          (FAddSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::FAdd ||</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;           FAddSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::FSub)) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0 = FAddSub-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1 = FAddSub-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *C0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(Opnd0);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a>&gt;(Opnd1);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordtype">bool</span> Swap = <span class="keyword">false</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> (C0) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(C0, C1);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Opnd0, Opnd1);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          Swap = <span class="keyword">true</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> (C1 &amp;&amp; C1-&gt;getValueAPF().isFiniteNonZero() &amp;&amp;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <a class="code" href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">isFMulOrFDivWithConstant</a>(Opnd0)) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *M1 = <a class="code" href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">ConstantExpr::getFMul</a>(C1, C);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *M0 = <a class="code" href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a>(cast&lt;ConstantFP&gt;(M1)) ?</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                      foldFMulConst(cast&lt;Instruction&gt;(Opnd0), C, &amp;I) :</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                      0;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <span class="keywordflow">if</span> (M0 &amp;&amp; M1) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">if</span> (Swap &amp;&amp; FAddSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::FSub)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;              <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(M0, M1);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RI = (FAddSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::FAdd)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                  ? BinaryOperator::CreateFAdd(M0, M1)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                  : BinaryOperator::CreateFSub(M0, M1);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab637365777e388d026ec0a7b404fd5f9">copyFastMathFlags</a>(&amp;I);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">return</span> RI;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Under unsafe algebra do:</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// X * log2(0.5*Y) = X*log2(Y) - X</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">hasUnsafeAlgebra</a>()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OpX = NULL;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OpY = NULL;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *Log2;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="InstCombineMulDivRem_8cpp.html#a4e140b14586cc5e1edb1311daf9474b3">detectLog2OfHalf</a>(Op0, OpY, Log2);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (OpY) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      OpX = Op1;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="InstCombineMulDivRem_8cpp.html#a4e140b14586cc5e1edb1311daf9474b3">detectLog2OfHalf</a>(Op1, OpY, Log2);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">if</span> (OpY) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        OpX = Op0;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// if pattern detected emit alternate sequence</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (OpX &amp;&amp; OpY) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">BuilderTy::FastMathFlagGuard</a> Guard(*Builder);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      Builder-&gt;SetFastMathFlags(Log2-&gt;<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      Log2-&gt;<a class="code" href="classllvm_1_1CallInst.html#abc04eae9879e3b4fe7f01ce0f4d4e71e">setArgOperand</a>(0, OpY);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FMulVal = Builder-&gt;CreateFMul(OpX, Log2);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FSub = Builder-&gt;CreateFSub(FMulVal, OpX);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      FSub-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(I, FSub);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// Handle symmetric situation in a 2-iteration loop</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0 = Op0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd1 = Op1;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">bool</span> IgnoreZeroSign = I.<a class="code" href="classllvm_1_1Instruction.html#a5b799c271262bab7f1db840892a4edae">hasNoSignedZeros</a>();</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html#ab87cae7de3df7420fff131c5305d5b6f">BinaryOperator::isFNeg</a>(Opnd0, IgnoreZeroSign)) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">BuilderTy::FastMathFlagGuard</a> Guard(*Builder);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      Builder-&gt;SetFastMathFlags(I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *N0 = dyn_castFNegVal(Opnd0, IgnoreZeroSign);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *N1 = dyn_castFNegVal(Opnd1, IgnoreZeroSign);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="comment">// -X * -Y =&gt; X*Y</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">if</span> (N1)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateFMul(N0, N1);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">if</span> (Opnd0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">// -X * Y =&gt; -(X*Y) (Promote negation as high as possible)</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classT.html">T</a> = Builder-&gt;CreateFMul(N0, Opnd1);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Neg = Builder-&gt;CreateFNeg(T);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        Neg-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Neg);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// (X*Y) * X =&gt; (X*X) * Y where Y != X</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">//  The purpose is two-fold:</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">//   1) to form a power expression (of X).</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="comment">//   2) potentially shorten the critical path: After transformation, the</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">//  latency of the instruction Y is amortized by the expression of X*X,</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">//  and therefore Y is in a &quot;less critical&quot; position compared to what it</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">//  was before the transformation.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (AllowReassociate) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0_0, *Opnd0_1;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">if</span> (Opnd0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Opnd0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Opnd0_0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Opnd0_1)))) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = 0;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span> (Opnd0_0 == Opnd1 &amp;&amp; Opnd0_1 != Opnd1)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          Y = Opnd0_1;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Opnd0_1 == Opnd1 &amp;&amp; Opnd0_0 != Opnd1)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          Y = Opnd0_0;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">if</span> (Y) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          <a class="code" href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">BuilderTy::FastMathFlagGuard</a> Guard(*Builder);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;          Builder-&gt;SetFastMathFlags(I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classT.html">T</a> = Builder-&gt;CreateFMul(Opnd1, Opnd1);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *R = Builder-&gt;CreateFMul(T, Y);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          R-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I, R);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// B * (uitofp i1 C) -&gt; select C, B, 0</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#a2ea5ab5267aca8ac32495ee0b2e7e38d">hasNoNaNs</a>() &amp;&amp; I.<a class="code" href="classllvm_1_1Instruction.html#af20bbe3776ed95ad3f1fac9ccc54920a">hasNoInfs</a>() &amp;&amp; I.<a class="code" href="classllvm_1_1Instruction.html#a5b799c271262bab7f1db840892a4edae">hasNoSignedZeros</a>()) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = Op0, *RHS = Op1;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">m_UIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C))))</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">m_UIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C))) &amp;&amp; C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        B = LHS;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1ConstantFP.html#abc03a029964125e1264bb57d1736a574">ConstantFP::getNegativeZero</a>(B-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(C, B, Zero);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// A * (1 - uitofp i1 C) -&gt; select C, 0, A</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#a2ea5ab5267aca8ac32495ee0b2e7e38d">hasNoNaNs</a>() &amp;&amp; I.<a class="code" href="classllvm_1_1Instruction.html#af20bbe3776ed95ad3f1fac9ccc54920a">hasNoInfs</a>() &amp;&amp; I.<a class="code" href="classllvm_1_1Instruction.html#a5b799c271262bab7f1db840892a4edae">hasNoSignedZeros</a>()) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = Op0, *RHS = Op1;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a8f87f39b5e0dedd0793bb3a450f463cf">m_FPOne</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">m_UIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C)))))</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a8f87f39b5e0dedd0793bb3a450f463cf">m_FPOne</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">m_UIToFP</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C)))) &amp;&amp;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        A = LHS;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1ConstantFP.html#abc03a029964125e1264bb57d1736a574">ConstantFP::getNegativeZero</a>(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(C, Zero, A);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op1))</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Opnd0, Opnd1);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/// SimplifyDivRemOfSelect - Try to fold a divide or remainder of a select</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/// instruction.</span></div><div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#aae14e514ac5ec1e7f0b7b4470fc3fe17">  600</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombiner.html#aae14e514ac5ec1e7f0b7b4470fc3fe17">InstCombiner::SimplifyDivRemOfSelect</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = cast&lt;SelectInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// div/rem X, (Cond ? 0 : Y) -&gt; div/rem X, Y</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">int</span> NonNullOperand = -1;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = dyn_cast&lt;Constant&gt;(SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>-&gt;isNullValue())</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      NonNullOperand = 2;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// div/rem X, (Cond ? Y : 0) -&gt; div/rem X, Y</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = dyn_cast&lt;Constant&gt;(SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2)))</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>-&gt;isNullValue())</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      NonNullOperand = 1;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (NonNullOperand == -1)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectCond = SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// Change the div/rem to use &#39;Y&#39; instead of the select.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(NonNullOperand));</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Okay, we know we replace the operand of the div/rem with &#39;Y&#39; with no</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// problem.  However, the select, or the condition of the select may have</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// multiple uses.  Based on our knowledge that the operand must be non-zero,</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// propagate the known value for the select into other uses of it, and</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// propagate a known value of the condition into its other users.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="comment">// If the select and condition only have a single use, don&#39;t bother with this,</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// early exit.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; SelectCond-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// Scan the current block backward, looking for other uses of SI.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BBFront = I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">while</span> (BBI != BBFront) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    --BBI;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// If we found a call to a function, we can&#39;t assume it will return, so</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// information from below it cannot be propagated above it.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(BBI) &amp;&amp; !isa&lt;IntrinsicInst&gt;(BBI))</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// Replace uses of the select or its condition with the known values.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Instruction::op_iterator</a> I = BBI-&gt;op_begin(), E = BBI-&gt;op_end();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">if</span> (*I == SI) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        *I = SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(NonNullOperand);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        Worklist.Add(BBI);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*I == SelectCond) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        *I = Builder-&gt;getInt1(NonNullOperand == 1);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        Worklist.Add(BBI);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// If we past the instruction, quit looking for it.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (&amp;*BBI == SI)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      SI = 0;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (&amp;*BBI == SelectCond)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      SelectCond = 0;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// If we ran out of things to eliminate, break out of the loop.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (SelectCond == 0 &amp;&amp; SI == 0)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">/// This function implements the transforms common to both integer division</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/// instructions (udiv and sdiv). It is called by the visitors to those integer</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">/// division instructions.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// @brief Common integer divide transforms</span></div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a1b344947e9e0c6e1cdc4b5716cd52ab8">  673</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a1b344947e9e0c6e1cdc4b5716cd52ab8">InstCombiner::commonIDivTransforms</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// The RHS is known non-zero.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">simplifyValueKnownNonZero</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), *<span class="keyword">this</span>)) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, V);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// Handle cases involving: [su]div X, (select Cond, Y, Z)</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// This does not apply for fdiv.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(Op1) &amp;&amp; SimplifyDivRemOfSelect(I))</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// (X / C1) / C2  -&gt; X / (C1*C2)</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHS = dyn_cast&lt;Instruction&gt;(Op0))</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a>(LHS-&gt;getOpcode()) == I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>())</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSRHS = dyn_cast&lt;ConstantInt&gt;(LHS-&gt;getOperand(1))) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#a6a2f9c787f06fbf87c28a469ffb5f000">MultiplyOverflows</a>(RHS, LHSRHS,</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>()==Instruction::SDiv))</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(), LHS-&gt;getOperand(0),</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                        <a class="code" href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">ConstantExpr::getMul</a>(RHS, LHSRHS));</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (!RHS-&gt;isZero()) { <span class="comment">// avoid X udiv 0</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          <span class="keywordflow">return</span> R;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// See if we can fold away this div instruction.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(I))</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> &amp;I;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// (X - (X rem Y)) / Y -&gt; X / Y; usually originates as ((X / Y) * Y) / Y</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0, *Z = 0;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Z)))) { <span class="comment">// (X - Z) / Y; Y = Op1</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordtype">bool</span> isSigned = I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Instruction::SDiv;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> ((isSigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Z, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42df6a41563b50a3fd1872230ed0b5ec">m_SRem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))) ||</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        (!isSigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Z, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">m_URem</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(), <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, Op1);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/// dyn_castZExtVal - Checks if V is a zext or constant that can</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/// be truncated to Ty without losing bits.</span></div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a4b5e643a45da5115a99284a9f513b143">  727</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#a4b5e643a45da5115a99284a9f513b143">dyn_castZExtVal</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *Z = dyn_cast&lt;ZExtInst&gt;(V)) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (Z-&gt;getSrcTy() == Ty)</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">return</span> Z-&gt;getOperand(0);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(V)) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue().getActiveBits() &lt;= cast&lt;IntegerType&gt;(Ty)-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>())</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ty);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a> = 6;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *(*FoldUDivOperandCb)(<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                          <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/// \brief Used to maintain state for visitUDivOperand().</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"></span><span class="keyword">struct </span>UDivFoldAction {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  FoldUDivOperandCb FoldAction; <span class="comment">///&lt; Informs visitUDiv() how to fold this</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment"></span><span class="comment">                                ///&lt; operand.  This can be zero if this action</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span><span class="comment">                                ///&lt; joins two actions together.</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OperandToFold;         <span class="comment">///&lt; Which operand to fold.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span>  <span class="keyword">union </span>{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldResult;    <span class="comment">///&lt; The instruction returned when FoldAction is</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span><span class="comment">                                ///&lt; invoked.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordtype">size_t</span> SelectLHSIdx;        <span class="comment">///&lt; Stores the LHS action index if this action</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span><span class="comment">                                ///&lt; joins two actions together.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span>  };</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  UDivFoldAction(FoldUDivOperandCb FA, <a class="code" href="classllvm_1_1Value.html">Value</a> *InputOperand)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      : FoldAction(FA), OperandToFold(InputOperand), FoldResult(0) {}</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  UDivFoldAction(FoldUDivOperandCb FA, <a class="code" href="classllvm_1_1Value.html">Value</a> *InputOperand, <span class="keywordtype">size_t</span> SLHS)</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      : FoldAction(FA), OperandToFold(InputOperand), SelectLHSIdx(SLHS) {}</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;};</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">// X udiv 2^C -&gt; X &gt;&gt; C</span></div><div class="line"><a name="l00767"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#aaa8e01ad2c93826880a6ebc29973aceb">  767</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#aaa8e01ad2c93826880a6ebc29973aceb">foldUDivPow2Cst</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1,</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;Constant&gt;(Op1)-&gt;getUniqueInteger();</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *LShr = BinaryOperator::CreateLShr(</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      Op0, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), C.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>()));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>()) LShr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#aac502d7d65e2996cf6b819b14e17499c">setIsExact</a>();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">return</span> LShr;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">// X udiv C, where C &gt;= signbit</span></div><div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#a24d387cfae6e7342944bbb7592df1933">  777</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#a24d387cfae6e7342944bbb7592df1933">foldUDivNegCst</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ICI = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">CreateICmpULT</a>(Op0, cast&lt;ConstantInt&gt;(Op1));</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(ICI, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                            <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1));</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;}</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">// X udiv (C1 &lt;&lt; N), where C1 is &quot;1&lt;&lt;C2&quot;  --&gt;  X &gt;&gt; (N+C2)</span></div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#ade18d83b3bc9ade5e5ca57bf7f23578a">  786</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#ade18d83b3bc9ade5e5ca57bf7f23578a">foldUDivShl</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ShiftLeft = cast&lt;Instruction&gt;(Op1);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ZExtInst&gt;(ShiftLeft))</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    ShiftLeft = cast&lt;Instruction&gt;(ShiftLeft-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CI =</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      cast&lt;Constant&gt;(ShiftLeft-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))-&gt;getUniqueInteger();</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = ShiftLeft-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">if</span> (CI != 1)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    N = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(N, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(N-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), CI.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>()));</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *Z = dyn_cast&lt;ZExtInst&gt;(Op1))</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    N = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">CreateZExt</a>(N, Z-&gt;getDestTy());</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *LShr = BinaryOperator::CreateLShr(Op0, N);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>()) LShr-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#aac502d7d65e2996cf6b819b14e17499c">setIsExact</a>();</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">return</span> LShr;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">// \brief Recursively visits the possible right hand operands of a udiv</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">// instruction, seeing through select instructions, to determine if we can</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">// replace the udiv with something simpler.  If we find that an operand is not</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">// able to simplify the udiv, we abort the entire transformation.</span></div><div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">  808</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">visitUDivOperand</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;UDivFoldAction&gt;</a> &amp;Actions,</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                               <span class="keywordtype">unsigned</span> Depth = 0) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// Check to see if this is an unsigned division with an exact power of 2,</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// if so, convert to a right shift.</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>())) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UDivFoldAction(<a class="code" href="InstCombineMulDivRem_8cpp.html#aaa8e01ad2c93826880a6ebc29973aceb">foldUDivPow2Cst</a>, Op1));</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(Op1))</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// X udiv C, where C &gt;= signbit</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue().isNegative()) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UDivFoldAction(<a class="code" href="InstCombineMulDivRem_8cpp.html#a24d387cfae6e7342944bbb7592df1933">foldUDivNegCst</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordflow">return</span> Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// X udiv (C1 &lt;&lt; N), where C1 is &quot;1&lt;&lt;C2&quot;  --&gt;  X &gt;&gt; (N+C2)</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UDivFoldAction(<a class="code" href="InstCombineMulDivRem_8cpp.html#ade18d83b3bc9ade5e5ca57bf7f23578a">foldUDivShl</a>, Op1));</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// The remaining tests are all recursive, so bail out if we hit the limit.</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">if</span> (Depth++ == <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a>)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op1))</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">size_t</span> LHSIdx = <a class="code" href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">visitUDivOperand</a>(Op0, SI-&gt;getOperand(1), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Actions))</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">visitUDivOperand</a>(Op0, SI-&gt;getOperand(2), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Actions)) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UDivFoldAction((FoldUDivOperandCb)0, Op1, LHSIdx-1));</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">return</span> Actions.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a0ca240e4472a1ce75d975ae0b8b8d2ec">  846</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a0ca240e4472a1ce75d975ae0b8b8d2ec">InstCombiner::visitUDiv</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ad7ee9212902791ff198d39227fb73f9e">SimplifyUDivInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// Handle the integer div common cases</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Common = commonIDivTransforms(I))</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span> Common;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// (x lshr C1) udiv C2 --&gt; x udiv (C2 &lt;&lt; C1)</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C2 = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1)))) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a> = C2-&gt;getValue().shl(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">getBitWidth</a>()-1));</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateUDiv(X, Builder-&gt;getInt(NC));</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// (zext A) udiv (zext B) --&gt; zext (A udiv B)</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *ZOp0 = dyn_cast&lt;ZExtInst&gt;(Op0))</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *ZOp1 = <a class="code" href="InstCombineMulDivRem_8cpp.html#a4b5e643a45da5115a99284a9f513b143">dyn_castZExtVal</a>(Op1, ZOp0-&gt;getSrcTy()))</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(Builder-&gt;CreateUDiv(ZOp0-&gt;getOperand(0), ZOp1, <span class="stringliteral">&quot;div&quot;</span>,</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                                              I.<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>()),</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                          I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// (LHS udiv (select (select (...)))) -&gt; (LHS &gt;&gt; (select (select (...))))</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;UDivFoldAction, 6&gt;</a> UDivActions;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">visitUDivOperand</a>(Op0, Op1, I, UDivActions))</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = UDivActions.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      FoldUDivOperandCb Action = UDivActions[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].FoldAction;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ActionOp1 = UDivActions[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].OperandToFold;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">if</span> (Action)</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        Inst = Action(Op0, ActionOp1, I, *<span class="keyword">this</span>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="comment">// This action joins two actions together.  The RHS of this action is</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">// simply the last action we processed, we saved the LHS action index in</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// the joining action.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordtype">size_t</span> SelectRHSIdx = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectRHS = UDivActions[SelectRHSIdx].FoldResult;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordtype">size_t</span> SelectLHSIdx = UDivActions[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].SelectLHSIdx;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectLHS = UDivActions[SelectLHSIdx].FoldResult;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        Inst = <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(cast&lt;SelectInst&gt;(ActionOp1)-&gt;getCondition(),</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                                  SelectLHS, SelectRHS);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="comment">// If this is the last action to process, return it to the InstCombiner.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="comment">// Otherwise, we insert it before the UDiv and record it so that we may</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// use it as part of a joining action (i.e., a SelectInst).</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (e - <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != 1) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(&amp;I);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        UDivActions[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].FoldResult = Inst;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">return</span> Inst;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a9309eb5893efa752da8f3382d5fa95c6">  907</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a9309eb5893efa752da8f3382d5fa95c6">InstCombiner::visitSDiv</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a4da5b3524ef6e4182893b97b5d8aadad">SimplifySDivInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Handle the integer div common cases</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Common = commonIDivTransforms(I))</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">return</span> Common;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// sdiv X, -1 == -X</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (RHS-&gt;isAllOnesValue())</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#ac0b4ab314244698be760dbe58b869956">BinaryOperator::CreateNeg</a>(Op0);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">// sdiv X, C  --&gt;  ashr exact X, log2(C)</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">isExact</a>() &amp;&amp; RHS-&gt;getValue().isNonNegative() &amp;&amp;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        RHS-&gt;getValue().isPowerOf2()) {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShAmt = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a>(RHS-&gt;getType(),</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                            RHS-&gt;getValue().exactLogBase2());</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateExactAShr(Op0, ShAmt, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">// -X/C  --&gt;  X/-C  provided the negation doesn&#39;t overflow.</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SubOperator.html">SubOperator</a> *Sub = dyn_cast&lt;SubOperator&gt;(Op0))</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sub-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>()) &amp;&amp; Sub-&gt;hasNoSignedWrap())</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateSDiv(Sub-&gt;getOperand(1),</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                          <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RHS));</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// If the sign bits of both operands are zero (i.e. we can prove they are</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">// unsigned inputs), turn this into a udiv.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask(<a class="code" href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">APInt::getSignBit</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>()));</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0, Mask)) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op1, Mask)) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="comment">// X sdiv Y -&gt; X udiv Y, iff X and Y don&#39;t have sign bit set</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateUDiv(Op0, Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="comment">// X sdiv (1 &lt;&lt; Y) -&gt; X udiv (1 &lt;&lt; Y) ( -&gt; X u&gt;&gt; Y)</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="comment">// Safe because the only negative value (1 &lt;&lt; Y) can take on is</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="comment">// INT_MIN, and X sdiv INT_MIN == X udiv INT_MIN == 0 if X doesn&#39;t have</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="comment">// the sign bit set.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateUDiv(Op0, Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">/// CvtFDivConstToReciprocal tries to convert X/C into X*1/C if C not a special</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">/// FP value and:</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">///    1) 1/C is exact, or</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">///    2) reciprocal is allowed.</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">/// If the conversion was successful, the simplified expression &quot;X * 1/C&quot; is</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">/// returned; otherwise, NULL is returned.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="InstCombineMulDivRem_8cpp.html#adef083da7c87f1126a9bba9f29bfa1f2">  967</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineMulDivRem_8cpp.html#adef083da7c87f1126a9bba9f29bfa1f2">CvtFDivConstToReciprocal</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Dividend,</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                             <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *Divisor,</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                             <span class="keywordtype">bool</span> AllowReciprocal) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;FpVal = Divisor-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">getValueAPF</a>();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> Reciprocal(FpVal.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>());</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordtype">bool</span> Cvt = FpVal.<a class="code" href="classllvm_1_1APFloat.html#ae05012c5159493832065a06aecc4f954">getExactInverse</a>(&amp;Reciprocal);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> (!Cvt &amp;&amp; AllowReciprocal &amp;&amp; FpVal.<a class="code" href="classllvm_1_1APFloat.html#aa8a88d5824ef974147709959b515448a">isFiniteNonZero</a>()) {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    Reciprocal = <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">APFloat</a>(FpVal.<a class="code" href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">getSemantics</a>(), 1.0f);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    (void)Reciprocal.divide(FpVal, <a class="code" href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">APFloat::rmNearestTiesToEven</a>);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    Cvt = !Reciprocal.isDenormal();</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">if</span> (!Cvt)</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *R;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  R = <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(Dividend-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), Reciprocal);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">return</span> BinaryOperator::CreateFMul(Dividend, R);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a6aee22d0bb63ae90e84b2049feea167e">  988</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a6aee22d0bb63ae90e84b2049feea167e">InstCombiner::visitFDiv</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a1077d93bf3babca286b7a389f78e70cb">SimplifyFDivInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Op0))</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op1))</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">bool</span> AllowReassociate = I.<a class="code" href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">hasUnsafeAlgebra</a>();</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordtype">bool</span> AllowReciprocal = I.<a class="code" href="classllvm_1_1Instruction.html#a1ed87a709a54e33728e46407f50fd497">hasAllowReciprocal</a>();</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *Op1C = dyn_cast&lt;ConstantFP&gt;(Op1)) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (AllowReassociate) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = 0;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *C2 = Op1C;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = 0;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">m_ConstantFP</a>(C1)))) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="comment">// (X*C1)/C2 =&gt; X * (C1/C2)</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">ConstantExpr::getFDiv</a>(C1, C2);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = cast&lt;ConstantFP&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)-&gt;getValueAPF();</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1APFloat.html#a280db20941932e0d6e2ba89a8ec6037d">isNormal</a>())</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          Res = BinaryOperator::CreateFMul(X, C);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">m_ConstantFP</a>(C1)))) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="comment">// (X/C1)/C2 =&gt; X /(C2*C1) [=&gt; X * 1/(C2*C1) if reciprocal is allowed]</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">ConstantExpr::getFMul</a>(C1, C2);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = cast&lt;ConstantFP&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)-&gt;getValueAPF();</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1APFloat.html#a280db20941932e0d6e2ba89a8ec6037d">isNormal</a>()) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;          Res = <a class="code" href="InstCombineMulDivRem_8cpp.html#adef083da7c87f1126a9bba9f29bfa1f2">CvtFDivConstToReciprocal</a>(X, cast&lt;ConstantFP&gt;(C),</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                         AllowReciprocal);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;          <span class="keywordflow">if</span> (!Res)</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            Res = BinaryOperator::CreateFDiv(X, C);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">if</span> (Res) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        Res-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="comment">// X / C =&gt; X * 1/C</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classT.html">T</a> = <a class="code" href="InstCombineMulDivRem_8cpp.html#adef083da7c87f1126a9bba9f29bfa1f2">CvtFDivConstToReciprocal</a>(Op0, Op1C, AllowReciprocal))</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classT.html">T</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">if</span> (AllowReassociate &amp;&amp; isa&lt;ConstantFP&gt;(Op0)) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = cast&lt;ConstantFP&gt;(Op0), *C2;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Fold = 0;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordtype">bool</span> CreateDiv = <span class="keyword">true</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// C1 / (X*C2) =&gt; (C1/C2) / X</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">m_FMul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">m_ConstantFP</a>(C2))))</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      Fold = <a class="code" href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">ConstantExpr::getFDiv</a>(C1, C2);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">m_ConstantFP</a>(C2)))) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="comment">// C1 / (X/C2) =&gt; (C1*C2) / X</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      Fold = <a class="code" href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">ConstantExpr::getFMul</a>(C1, C2);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">m_ConstantFP</a>(C2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)))) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="comment">// C1 / (C2/X) =&gt; (C1/C2) * X</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      Fold = <a class="code" href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">ConstantExpr::getFDiv</a>(C1, C2);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      CreateDiv = <span class="keyword">false</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (Fold) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> &amp;FoldC = cast&lt;ConstantFP&gt;(Fold)-&gt;getValueAPF();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">if</span> (FoldC.<a class="code" href="classllvm_1_1APFloat.html#a280db20941932e0d6e2ba89a8ec6037d">isNormal</a>()) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = CreateDiv ?</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                         BinaryOperator::CreateFDiv(Fold, X) :</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                         BinaryOperator::CreateFMul(X, Fold);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        R-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">if</span> (AllowReassociate) {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewInst = 0;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SimpR = 0;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y)))) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="comment">// (X/Y) / Z =&gt; X / (Y*Z)</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantFP&gt;(Y) || !isa&lt;ConstantFP&gt;(Op1)) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        NewInst = Builder-&gt;CreateFMul(Y, Op1);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        SimpR = BinaryOperator::CreateFDiv(X, NewInst);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op1-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">m_FDiv</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y)))) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="comment">// Z / (X/Y) =&gt; Z*Y / X</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ConstantFP&gt;(Y) || !isa&lt;ConstantFP&gt;(Op0)) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        NewInst = Builder-&gt;CreateFMul(Op0, Y);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        SimpR = BinaryOperator::CreateFDiv(NewInst, X);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (NewInst) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classT.html">T</a> = dyn_cast&lt;Instruction&gt;(NewInst))</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <a class="code" href="classT.html">T</a>-&gt;setDebugLoc(I.<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      SimpR-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>());</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">return</span> SimpR;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/// This function implements the transforms common to both integer remainder</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/// instructions (urem and srem). It is called by the visitors to those integer</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">/// remainder instructions.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// @brief Common integer remainder transforms</span></div><div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a88f3fc8edf9d54c62e09e1545d449ae8"> 1113</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a88f3fc8edf9d54c62e09e1545d449ae8">InstCombiner::commonIRemTransforms</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="comment">// The RHS is known non-zero.</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">simplifyValueKnownNonZero</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), *<span class="keyword">this</span>)) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, V);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// Handle cases involving: rem X, (select Cond, Y, Z)</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(Op1) &amp;&amp; SimplifyDivRemOfSelect(I))</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op0I = dyn_cast&lt;Instruction&gt;(Op0)) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0I)) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0I)) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="comment">// See if we can fold away this rem instruction.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(I))</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a1946cf629a42a59130f6f1d3e9f6786f"> 1145</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a1946cf629a42a59130f6f1d3e9f6786f">InstCombiner::visitURem</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#acf46bab8eca4c3c7204079f2cf80ab35">SimplifyURemInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="Target_2X86_2README_8txt.html#a23011c5e3833afd34cdf77df5760c78b">common</a> = commonIRemTransforms(I))</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Target_2X86_2README_8txt.html#a23011c5e3833afd34cdf77df5760c78b">common</a>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// (zext A) urem (zext B) --&gt; zext (A urem B)</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> *ZOp0 = dyn_cast&lt;ZExtInst&gt;(Op0))</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *ZOp1 = <a class="code" href="InstCombineMulDivRem_8cpp.html#a4b5e643a45da5115a99284a9f513b143">dyn_castZExtVal</a>(Op1, ZOp0-&gt;getSrcTy()))</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(Builder-&gt;CreateURem(ZOp0-&gt;getOperand(0), ZOp1),</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                          I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// X urem Y -&gt; X and Y-1, where Y is a power of 2,</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">isKnownToBeAPowerOfTwo</a>(Op1, <span class="comment">/*OrZero*/</span><span class="keyword">true</span>)) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *N1 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateAdd(Op1, N1);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, Add);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// 1 urem X -&gt; zext(X != 1)</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = Builder-&gt;CreateICmpNE(Op1, Op0);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">Ext</a> = Builder-&gt;CreateZExt(Cmp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Ext);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a72d7eb7c8fe3475caa3382ab1934c647"> 1177</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a72d7eb7c8fe3475caa3382ab1934c647">InstCombiner::visitSRem</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ac5f8ec2a1bbffc4a64095b4745be2804">SimplifySRemInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// Handle the integer rem common cases</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Common = commonIRemTransforms(I))</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">return</span> Common;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *RHSNeg = dyn_castNegVal(Op1))</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(RHSNeg) ||</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        (isa&lt;ConstantInt&gt;(RHSNeg) &amp;&amp;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         cast&lt;ConstantInt&gt;(RHSNeg)-&gt;getValue().isStrictlyPositive())) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="comment">// X % -Y -&gt; X % Y</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      Worklist.AddValue(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, RHSNeg);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// If the sign bits of both operands are zero (i.e. we can prove they are</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="comment">// unsigned inputs), turn this into a urem.</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask(<a class="code" href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">APInt::getSignBit</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>()));</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op1, Mask) &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0, Mask)) {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="comment">// X srem Y -&gt; X urem Y, iff X and Y don&#39;t have sign bit set</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateURem(Op0, Op1, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    }</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// If it&#39;s a constant vector, flip any negative values positive.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantVector&gt;(Op1) || isa&lt;ConstantDataVector&gt;(Op1)) {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;Constant&gt;(Op1);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordtype">unsigned</span> VWidth = C-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordtype">bool</span> hasNegative = <span class="keyword">false</span>;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordtype">bool</span> hasMissing = <span class="keyword">false</span>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != VWidth; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = C-&gt;<a class="code" href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">if</span> (Elt == 0) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        hasMissing = <span class="keyword">true</span>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Elt))</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">if</span> (RHS-&gt;isNegative())</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;          hasNegative = <span class="keyword">true</span>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (hasNegative &amp;&amp; !hasMissing) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Elts(VWidth);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != VWidth; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        Elts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = C-&gt;<a class="code" href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);  <span class="comment">// Handle undef, etc.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Elts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;          <span class="keywordflow">if</span> (RHS-&gt;isNegative())</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            Elts[i] = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(RHS));</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewRHSV = <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Elts);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">if</span> (NewRHSV != C) {  <span class="comment">// Don&#39;t loop on -MININT</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        Worklist.AddValue(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, NewRHSV);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a67862b6d25ca3e8db946c6abc6d98d94"> 1248</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a67862b6d25ca3e8db946c6abc6d98d94">InstCombiner::visitFRem</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a973f98a5bc51515b4348eb9207dd2e8a">SimplifyFRemInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// Handle cases involving: rem X, (select Cond, Y, Z)</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(Op1) &amp;&amp; SimplifyDivRemOfSelect(I))</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;}</div><div class="ttc" id="classllvm_1_1ConstantDataVector_html"><div class="ttname"><a href="classllvm_1_1ConstantDataVector.html">llvm::ConstantDataVector</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00697">Constants.h:697</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_ade18d83b3bc9ade5e5ca57bf7f23578a"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#ade18d83b3bc9ade5e5ca57bf7f23578a">foldUDivShl</a></div><div class="ttdeci">static Instruction * foldUDivShl(Value *Op0, Value *Op1, const BinaryOperator &amp;I, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00786">InstCombineMulDivRem.cpp:786</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a9309eb5893efa752da8f3382d5fa95c6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a9309eb5893efa752da8f3382d5fa95c6">llvm::InstCombiner::visitSDiv</a></div><div class="ttdeci">Instruction * visitSDiv(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00907">InstCombineMulDivRem.cpp:907</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a21ce697328893029ae2c63974061a294"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">llvm::BinaryOperator::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02001">Instructions.cpp:2001</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a2e5e9f65d911e80a46d3098933794056"><div class="ttname"><a href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">llvm::APInt::getSignBit</a></div><div class="ttdeci">static APInt getSignBit(unsigned BitWidth)</div><div class="ttdoc">Get the SignBit for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00443">APInt.h:443</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00137">Instruction.cpp:137</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ae130d109fdba9ebb976e4fe2621b374a"><div class="ttname"><a href="classllvm_1_1APInt.html#ae130d109fdba9ebb976e4fe2621b374a">llvm::APInt::abs</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT abs() const </div><div class="ttdoc">Get the absolute value;. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01521">APInt.h:1521</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00407">PatternMatch.h:407</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_aae14e514ac5ec1e7f0b7b4470fc3fe17"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aae14e514ac5ec1e7f0b7b4470fc3fe17">llvm::InstCombiner::SimplifyDivRemOfSelect</a></div><div class="ttdeci">bool SimplifyDivRemOfSelect(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00600">InstCombineMulDivRem.cpp:600</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a0a77c976c6edefcb3c05ad8a225fd36e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0a77c976c6edefcb3c05ad8a225fd36e">llvm::PatternMatch::m_FDiv</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FDiv &gt; m_FDiv(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00443">PatternMatch.h:443</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a42df6a41563b50a3fd1872230ed0b5ec"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42df6a41563b50a3fd1872230ed0b5ec">llvm::PatternMatch::m_SRem</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::SRem &gt; m_SRem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00455">PatternMatch.h:455</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ab3b5beca3a0dedd21adac813123a2ae6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">match_zero m_Zero()</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00137">PatternMatch.h:137</a></div></div>
<div class="ttc" id="InstCombine_8h_html"><div class="ttname"><a href="InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a8bce457e977f23507c48c9dfd7052990"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01455">Instructions.h:1455</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">llvm::MipsISD::Ext</a></div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00104">MipsISelLowering.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a58f423c78837f9854278b6026b34714a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a58f423c78837f9854278b6026b34714a">llvm::ConstantInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">getBitWidth - Return the bitwidth of this constant. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00110">Constants.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03211">Instructions.h:3211</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a67862b6d25ca3e8db946c6abc6d98d94"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a67862b6d25ca3e8db946c6abc6d98d94">llvm::InstCombiner::visitFRem</a></div><div class="ttdeci">Instruction * visitFRem(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l01248">InstCombineMulDivRem.cpp:1248</a></div></div>
<div class="ttc" id="namespacellvm_html_a8bc4c3e77e6f3d6c54b8b4504393dfa7"><div class="ttname"><a href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(Value *V, const APInt &amp;Mask, const DataLayout *TD=0, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01115">ValueTracking.cpp:1115</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00127">NVPTX.h:127</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_ad1b100f1cc68b21533ae3045283d4c3f"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#ad1b100f1cc68b21533ae3045283d4c3f">getLogBase2Vector</a></div><div class="ttdeci">static Constant * getLogBase2Vector(ConstantDataVector *CV)</div><div class="ttdoc">A helper routine of InstCombiner::visitMul(). </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00103">InstCombineMulDivRem.cpp:103</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00419">PatternMatch.h:419</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantDataSequential_html_a35cf81aa3eb4ac68691caa75bee667b5"><div class="ttname"><a href="classllvm_1_1ConstantDataSequential.html#a35cf81aa3eb4ac68691caa75bee667b5">llvm::ConstantDataSequential::getElementAsConstant</a></div><div class="ttdeci">Constant * getElementAsConstant(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02515">Constants.cpp:2515</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Get a value with low bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00528">APInt.h:528</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00078">PatternMatch.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9c30c87af01068ceae02cd371748d175"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">llvm::IRBuilder::CreateICmpULT</a></div><div class="ttdeci">Value * CreateICmpULT(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01218">IRBuilder.h:1218</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ace8e61a4dcf2a13945cdde73a3a6805a"><div class="ttname"><a href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00175">Instruction.cpp:175</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aac83d9218356dfe82518cb81e3a53f2f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">llvm::PatternMatch::m_FSub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FSub &gt; m_FSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00413">PatternMatch.h:413</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_aa8a88d5824ef974147709959b515448a"><div class="ttname"><a href="classllvm_1_1APFloat.html#aa8a88d5824ef974147709959b515448a">llvm::APFloat::isFiniteNonZero</a></div><div class="ttdeci">bool isFiniteNonZero() const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00399">APFloat.h:399</a></div></div>
<div class="ttc" id="namespacellvm_html_ad7ee9212902791ff198d39227fb73f9e"><div class="ttname"><a href="namespacellvm.html#ad7ee9212902791ff198d39227fb73f9e">llvm::SimplifyUDivInst</a></div><div class="ttdeci">Value * SimplifyUDivInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01161">InstructionSimplify.cpp:1161</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a23011c5e3833afd34cdf77df5760c78b"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a23011c5e3833afd34cdf77df5760c78b">common</a></div><div class="ttdeci">compiles rbx movl r14d r14d testl r14d je LBB0_2 Instead of doing an we can use the flags off the sar This occurs in a bigger testcase like which is pretty common</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00098">Target/X86/README.txt:98</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a562c9513409b74f02cb3a5c9bae672ea"><div class="ttname"><a href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">llvm::APInt::getSignedMaxValue</a></div><div class="ttdeci">static APInt getSignedMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum signed value of APInt for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00423">APInt.h:423</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a823f9e4f999cff8e782a56058320287a"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a823f9e4f999cff8e782a56058320287a">simplifyValueKnownNonZero</a></div><div class="ttdeci">static Value * simplifyValueKnownNonZero(Value *V, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00026">InstCombineMulDivRem.cpp:26</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afa1cb82e021c7f516f65d40162fe6c53"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">llvm::IRBuilder::CreateSub</a></div><div class="ttdeci">Value * CreateSub(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00637">IRBuilder.h:637</a></div></div>
<div class="ttc" id="namespacellvm_html_a4da5b3524ef6e4182893b97b5d8aadad"><div class="ttname"><a href="namespacellvm.html#a4da5b3524ef6e4182893b97b5d8aadad">llvm::SimplifySDivInst</a></div><div class="ttdeci">Value * SimplifySDivInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01145">InstructionSimplify.cpp:1145</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a032fd706f6579bac3061ca85dba86499"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a032fd706f6579bac3061ca85dba86499">llvm::InstCombiner::visitFMul</a></div><div class="ttdeci">Instruction * visitFMul(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00405">InstCombineMulDivRem.cpp:405</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6aee22d0bb63ae90e84b2049feea167e"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6aee22d0bb63ae90e84b2049feea167e">llvm::InstCombiner::visitFDiv</a></div><div class="ttdeci">Instruction * visitFDiv(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00988">InstCombineMulDivRem.cpp:988</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a8c6772ab80eaa5cba38dc9d7c5d3f313"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a8c6772ab80eaa5cba38dc9d7c5d3f313">llvm::InstCombiner::visitMul</a></div><div class="ttdeci">Instruction * visitMul(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00117">InstCombineMulDivRem.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_adcfb21c42b5d24acf2108c2407c75578"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adcfb21c42b5d24acf2108c2407c75578">llvm::ConstantExpr::getFMul</a></div><div class="ttdeci">static Constant * getFMul(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02069">Constants.cpp:2069</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a88f3fc8edf9d54c62e09e1545d449ae8"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a88f3fc8edf9d54c62e09e1545d449ae8">llvm::InstCombiner::commonIRemTransforms</a></div><div class="ttdeci">Instruction * commonIRemTransforms(BinaryOperator &amp;I)</div><div class="ttdoc">Common integer remainder transforms. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l01113">InstCombineMulDivRem.cpp:1113</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0e9a2d7ec903d191ef029589ec647cb6"><div class="ttname"><a href="classllvm_1_1APInt.html#a0e9a2d7ec903d191ef029589ec647cb6">llvm::APInt::isNegative</a></div><div class="ttdeci">bool isNegative() const </div><div class="ttdoc">Determine sign of this APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00322">APInt.h:322</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5"><div class="ttname"><a href="classllvm_1_1APFloat.html#a26f3c979ec46a5d2d9bccd300eb606fea3a561d1750cb3c30d5deb1193c8e1ec5">llvm::APFloat::rmNearestTiesToEven</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00156">APFloat.h:156</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a2ea5ab5267aca8ac32495ee0b2e7e38d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2ea5ab5267aca8ac32495ee0b2e7e38d">llvm::Instruction::hasNoNaNs</a></div><div class="ttdeci">bool hasNoNaNs() const </div><div class="ttdoc">Determine whether the no-NaNs flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00149">Instruction.cpp:149</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00040">ValueTracking.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_aaa9083a85e23c9c5ee366920d90ae51e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#aaa9083a85e23c9c5ee366920d90ae51e">llvm::BinaryOperator::setHasNoUnsignedWrap</a></div><div class="ttdeci">void setHasNoUnsignedWrap(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01997">Instructions.cpp:1997</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantVector_html_ade9fa017ca3aa82f7694a47090547bc1"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">llvm::ConstantVector::get</a></div><div class="ttdeci">static Constant * get(ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00923">Constants.cpp:923</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html"><div class="ttname"><a href="classllvm_1_1InstCombiner.html">llvm::InstCombiner</a></div><div class="ttdoc">InstCombiner - The -instcombine pass. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00072">InstCombine.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a1ed87a709a54e33728e46407f50fd497"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1ed87a709a54e33728e46407f50fd497">llvm::Instruction::hasAllowReciprocal</a></div><div class="ttdeci">bool hasAllowReciprocal() const </div><div class="ttdoc">Determine whether the allow-reciprocal flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00167">Instruction.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a1b344947e9e0c6e1cdc4b5716cd52ab8"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a1b344947e9e0c6e1cdc4b5716cd52ab8">llvm::InstCombiner::commonIDivTransforms</a></div><div class="ttdeci">Instruction * commonIDivTransforms(BinaryOperator &amp;I)</div><div class="ttdoc">Common integer divide transforms. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00673">InstCombineMulDivRem.cpp:673</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00395">PatternMatch.h:395</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aa45ee6e4ddefff8dc93df07422cf0a47"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa45ee6e4ddefff8dc93df07422cf0a47">llvm::PatternMatch::m_ConstantFP</a></div><div class="ttdeci">bind_ty&lt; ConstantFP &gt; m_ConstantFP(ConstantFP *&amp;C)</div><div class="ttdoc">m_ConstantFP - Match a ConstantFP, capturing the value if we match. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00309">PatternMatch.h:309</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a72d7eb7c8fe3475caa3382ab1934c647"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a72d7eb7c8fe3475caa3382ab1934c647">llvm::InstCombiner::visitSRem</a></div><div class="ttdeci">Instruction * visitSRem(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l01177">InstCombineMulDivRem.cpp:1177</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00387">Instruction.h:387</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">m_ZExt </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00692">PatternMatch.h:692</a></div></div>
<div class="ttc" id="namespacellvm_html_a603e39bd7102628d207431f0289a2942"><div class="ttname"><a href="namespacellvm.html#a603e39bd7102628d207431f0289a2942">llvm::SimplifyFMulInst</a></div><div class="ttdeci">Value * SimplifyFMulInst(Value *LHS, Value *RHS, FastMathFlags FMF, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01049">InstructionSimplify.cpp:1049</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a024bb83a7f01e7661ea72ff7dcc460f5"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">llvm::ConstantInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const </div><div class="ttdoc">Get the constant&amp;#39;s value with a saturation limit. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00218">Constants.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0671bc479b3d788cc233dc1ce20ebcb5"><div class="ttname"><a href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01100">APInt.h:1100</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5446d547c394ffdbaa2da907b51fd259"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5446d547c394ffdbaa2da907b51fd259">llvm::Instruction::hasUnsafeAlgebra</a></div><div class="ttdeci">bool hasUnsafeAlgebra() const </div><div class="ttdoc">Determine whether the unsafe-algebra flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00143">Instruction.cpp:143</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">m_Power2() - Match an integer or vector power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00281">PatternMatch.h:281</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="namespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a56697632782c9ab774d6c132a955674a">llvm::lltok::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00182">LLToken.h:182</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a3489aaf01867afa5ac461a432b7fc1a2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a3489aaf01867afa5ac461a432b7fc1a2">llvm::ConstantExpr::getFDiv</a></div><div class="ttdeci">static Constant * getFDiv(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02083">Constants.cpp:2083</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a1794b9bb9e7e016500d21441fce87c0b"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a1794b9bb9e7e016500d21441fce87c0b">isNormalFp</a></div><div class="ttdeci">static bool isNormalFp(const ConstantFP *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00345">InstCombineMulDivRem.cpp:345</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdoc">A self-contained host- and target-independent arbitrary-precision floating-point software implementat...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00122">APFloat.h:122</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a0ca240e4472a1ce75d975ae0b8b8d2ec"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a0ca240e4472a1ce75d975ae0b8b8d2ec">llvm::InstCombiner::visitUDiv</a></div><div class="ttdeci">Instruction * visitUDiv(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00846">InstCombineMulDivRem.cpp:846</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00060">PatternMatch.h:60</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1FastMathFlagGuard.html">llvm::IRBuilderBase::FastMathFlagGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00219">IRBuilder.h:219</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00491">PatternMatch.h:491</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00183">PatternMatch.h:183</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00615">IRBuilder.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">m_AllOnes() - Match an integer or vector with all bits set to true. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00265">PatternMatch.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">m_Specific - Match if we have a specific specified value. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00323">PatternMatch.h:323</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa3464694bcec68b89b4bffd71360b897"><div class="ttname"><a href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">llvm::APInt::sext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT sext(unsigned width) const </div><div class="ttdoc">Sign extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00942">APInt.cpp:942</a></div></div>
<div class="ttc" id="classllvm_1_1PossiblyExactOperator_html"><div class="ttname"><a href="classllvm_1_1PossiblyExactOperator.html">llvm::PossiblyExactOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00131">Operator.h:131</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00485">PatternMatch.h:485</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_ac0b4ab314244698be760dbe58b869956"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#ac0b4ab314244698be760dbe58b869956">llvm::BinaryOperator::CreateNeg</a></div><div class="ttdeci">NUW NUW NUW NUW Exact static Exact BinaryOperator * CreateNeg(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01850">Instructions.cpp:1850</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a24d387cfae6e7342944bbb7592df1933"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a24d387cfae6e7342944bbb7592df1933">foldUDivNegCst</a></div><div class="ttdeci">static Instruction * foldUDivNegCst(Value *Op0, Value *Op1, const BinaryOperator &amp;I, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00777">InstCombineMulDivRem.cpp:777</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_af47a0ac3d4c6efa0afd013094e10ecaa"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#af47a0ac3d4c6efa0afd013094e10ecaa">visitUDivOperand</a></div><div class="ttdeci">static size_t visitUDivOperand(Value *Op0, Value *Op1, const BinaryOperator &amp;I, SmallVectorImpl&lt; UDivFoldAction &gt; &amp;Actions, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00808">InstCombineMulDivRem.cpp:808</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a01fee21e2c679094ce5ab193369d5198"><div class="ttname"><a href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00183">Constants.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdoc">Get the all ones value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00163">Constants.cpp:163</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00087">InstCombine.h:87</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a07783e6f39803037259a1ebe376c2b1e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">llvm::BinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdoc">hasNoSignedWrap - Determine whether the no signed wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02013">Instructions.cpp:2013</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af3deb6522c4fe2043fe07af2ec90190c"><div class="ttname"><a href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const </div><div class="ttdoc">Check if this APInt&amp;#39;s value is a power of two greater than zero. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00390">APInt.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_aac502d7d65e2996cf6b819b14e17499c"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#aac502d7d65e2996cf6b819b14e17499c">llvm::BinaryOperator::setIsExact</a></div><div class="ttdeci">void setIsExact(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02005">Instructions.cpp:2005</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a26e11e9c1ef55164b429eb9dc019f213"><div class="ttname"><a href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a></div><div class="ttdeci">const unsigned MaxDepth</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00036">ValueTracking.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad3d358e03c6228af2d19b2e67028886e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01084">APInt.h:1084</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a07730bf9e7d3ff2009c8fc747ec27fb7"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a07730bf9e7d3ff2009c8fc747ec27fb7">isFMulOrFDivWithConstant</a></div><div class="ttdeci">static bool isFMulOrFDivWithConstant(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00329">InstCombineMulDivRem.cpp:329</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a277dfeaad2a2ada72a6024b0eedc5301"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">llvm::IRBuilder::CreateZExt</a></div><div class="ttdeci">Value * CreateZExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01071">IRBuilder.h:1071</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0cf8014ad2d33b40a6bef55018547f57"><div class="ttname"><a href="classllvm_1_1APInt.html#a0cf8014ad2d33b40a6bef55018547f57">llvm::APInt::slt</a></div><div class="ttdeci">bool slt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed less than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00547">APInt.cpp:547</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad8f27f0b94a56abcd296b8461737a3af"><div class="ttname"><a href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00214">Type.cpp:214</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00300">Target/README.txt:300</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a474f562a4871689af74b0fd1ae42daa1"><div class="ttname"><a href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01500">APInt.h:1500</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ae1a04895305aaea96e5e82d95c39bbe0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae1a04895305aaea96e5e82d95c39bbe0">llvm::PatternMatch::m_URem</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::URem &gt; m_URem(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00449">PatternMatch.h:449</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="namespacellvm_html_affb36b53a017bc7fe4754691559e2cd6"><div class="ttname"><a href="namespacellvm.html#affb36b53a017bc7fe4754691559e2cd6">llvm::isKnownToBeAPowerOfTwo</a></div><div class="ttdeci">bool isKnownToBeAPowerOfTwo(Value *V, bool OrZero=false, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00821">ValueTracking.cpp:821</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aca5cab6b8d2be24d0c857cc4a831feec"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01538">Constants.cpp:1538</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ac47353e50683b2440ca9ad4a1fa860d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac47353e50683b2440ca9ad4a1fa860d0">llvm::PatternMatch::m_UIToFP</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::UIToFP &gt; m_UIToFP(const OpTy &amp;Op)</div><div class="ttdoc">m_UIToFP </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00699">PatternMatch.h:699</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ab637365777e388d026ec0a7b404fd5f9"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab637365777e388d026ec0a7b404fd5f9">llvm::Instruction::copyFastMathFlags</a></div><div class="ttdeci">void copyFastMathFlags(const Instruction *I)</div><div class="ttdoc">Copy I&amp;#39;s fast-math flags. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00181">Instruction.cpp:181</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00557">Constants.cpp:557</a></div></div>
<div class="ttc" id="regutils_8h_html_a1fa2460e32327ade49189c95740bc1b5"><div class="ttname"><a href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a></div><div class="ttdeci">#define NC</div><div class="ttdef"><b>Definition:</b> <a href="regutils_8h_source.html#l00039">regutils.h:39</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a7aff89f4f22502c8ad9118bed59ce21c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7aff89f4f22502c8ad9118bed59ce21c">llvm::PatternMatch::m_FMul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FMul &gt; m_FMul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00425">PatternMatch.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a0f67e7208255f5088f0d515185109174"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a0f67e7208255f5088f0d515185109174">llvm::BinaryOperator::isExact</a></div><div class="ttdeci">bool isExact() const </div><div class="ttdoc">isExact - Determine whether the exact flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02017">Instructions.cpp:2017</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ae75d4e9a5692594f1e2c2a6836daef45"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae75d4e9a5692594f1e2c2a6836daef45">llvm::InstCombiner::foldFMulConst</a></div><div class="ttdeci">Value * foldFMulConst(Instruction *FMulOrDiv, ConstantFP *C, Instruction *InsertBefore)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00357">InstCombineMulDivRem.cpp:357</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_abc03a029964125e1264bb57d1736a574"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#abc03a029964125e1264bb57d1736a574">llvm::ConstantFP::getNegativeZero</a></div><div class="ttdeci">static ConstantFP * getNegativeZero(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00588">Constants.cpp:588</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_aaa8e01ad2c93826880a6ebc29973aceb"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#aaa8e01ad2c93826880a6ebc29973aceb">foldUDivPow2Cst</a></div><div class="ttdeci">static Instruction * foldUDivPow2Cst(Value *Op0, Value *Op1, const BinaryOperator &amp;I, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00767">InstCombineMulDivRem.cpp:767</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_adef083da7c87f1126a9bba9f29bfa1f2"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#adef083da7c87f1126a9bba9f29bfa1f2">CvtFDivConstToReciprocal</a></div><div class="ttdeci">static Instruction * CvtFDivConstToReciprocal(Value *Dividend, ConstantFP *Divisor, bool AllowReciprocal)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00967">InstCombineMulDivRem.cpp:967</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a4d49fd9a4cc4f2a74d4555bd08b13910"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">llvm::IRBuilder::CreateShl</a></div><div class="ttdeci">Value * CreateShl(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00734">IRBuilder.h:734</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02021">Constants.cpp:2021</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a8f87f39b5e0dedd0793bb3a450f463cf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f87f39b5e0dedd0793bb3a450f463cf">llvm::PatternMatch::m_FPOne</a></div><div class="ttdeci">specific_fpval m_FPOne()</div><div class="ttdoc">Match a float 1.0 or vector with all elements equal to 1.0. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00348">PatternMatch.h:348</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e">llvm::Intrinsic::log2</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01258">Intrinsics.h:1258</a></div></div>
<div class="ttc" id="namespacellvm_html_ac5f8ec2a1bbffc4a64095b4745be2804"><div class="ttname"><a href="namespacellvm.html#ac5f8ec2a1bbffc4a64095b4745be2804">llvm::SimplifySRemInst</a></div><div class="ttdeci">Value * SimplifySRemInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01250">InstructionSimplify.cpp:1250</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a1946cf629a42a59130f6f1d3e9f6786f"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a1946cf629a42a59130f6f1d3e9f6786f">llvm::InstCombiner::visitURem</a></div><div class="ttdeci">Instruction * visitURem(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l01145">InstCombineMulDivRem.cpp:1145</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_ab87cae7de3df7420fff131c5305d5b6f"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#ab87cae7de3df7420fff131c5305d5b6f">llvm::BinaryOperator::isFNeg</a></div><div class="ttdeci">static bool isFNeg(const Value *V, bool IgnoreZeroSign=false)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01934">Instructions.cpp:1934</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1SubOperator_html"><div class="ttname"><a href="classllvm_1_1SubOperator.html">llvm::SubOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00331">Operator.h:331</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af20bbe3776ed95ad3f1fac9ccc54920a"><div class="ttname"><a href="classllvm_1_1Instruction.html#af20bbe3776ed95ad3f1fac9ccc54920a">llvm::Instruction::hasNoInfs</a></div><div class="ttdeci">bool hasNoInfs() const </div><div class="ttdoc">Determine whether the no-infs flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00155">Instruction.cpp:155</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_abc04eae9879e3b4fe7f01ce0f4d4e71e"><div class="ttname"><a href="classllvm_1_1CallInst.html#abc04eae9879e3b4fe7f01ce0f4d4e71e">llvm::CallInst::setArgOperand</a></div><div class="ttdeci">void setArgOperand(unsigned i, Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01246">Instructions.h:1246</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantDataSequential_html_ac2214c4d65e9e94d39408312433ea895"><div class="ttname"><a href="classllvm_1_1ConstantDataSequential.html#ac2214c4d65e9e94d39408312433ea895">llvm::ConstantDataSequential::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">getNumElements - Return the number of elements in the array or vector. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02228">Constants.cpp:2228</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aa5ad9e9e7cc67e1675d8d1631a73e625"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">llvm::ConstantExpr::getShl</a></div><div class="ttdeci">static Constant * getShl(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02111">Constants.cpp:2111</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5b799c271262bab7f1db840892a4edae"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5b799c271262bab7f1db840892a4edae">llvm::Instruction::hasNoSignedZeros</a></div><div class="ttdeci">bool hasNoSignedZeros() const </div><div class="ttdoc">Determine whether the no-signed-zeros flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00161">Instruction.cpp:161</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a4a4628e91a9c6a339fa61105614fac76"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01834">Instructions.cpp:1834</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">llvm::A64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00046">AArch64BaseInfo.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="namespacellvm_html_a1077d93bf3babca286b7a389f78e70cb"><div class="ttname"><a href="namespacellvm.html#a1077d93bf3babca286b7a389f78e70cb">llvm::SimplifyFDivInst</a></div><div class="ttdeci">Value * SimplifyFDivInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01180">InstructionSimplify.cpp:1180</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_a0f839f7633a4709c1d89e128f49b3d43"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a0f839f7633a4709c1d89e128f49b3d43">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00263">Constants.h:263</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html_a3dfcda042e1f4f0953dc47d268cc560f"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a3dfcda042e1f4f0953dc47d268cc560f">llvm::ConstantFP::isExactlyValue</a></div><div class="ttdeci">bool isExactlyValue(const APFloat &amp;V) const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00650">Constants.cpp:650</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00433">APInt.h:433</a></div></div>
<div class="ttc" id="namespacellvm_html_acf46bab8eca4c3c7204079f2cf80ab35"><div class="ttname"><a href="namespacellvm.html#acf46bab8eca4c3c7204079f2cf80ab35">llvm::SimplifyURemInst</a></div><div class="ttdeci">Value * SimplifyURemInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01266">InstructionSimplify.cpp:1266</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a5b6cd6c043f54b40899aff62e6e40488"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">llvm::BinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const </div><div class="ttdoc">hasNoUnsignedWrap - Determine whether the no unsigned wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02009">Instructions.cpp:2009</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">m_One() - Match an integer 1 or a vector with all elements equal to 1. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00257">PatternMatch.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a6142fc5662411269a7ca0217f49f338c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">llvm::APInt::zext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT zext(unsigned width) const </div><div class="ttdoc">Zero extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00983">APInt.cpp:983</a></div></div>
<div class="ttc" id="namespacellvm_html_a973f98a5bc51515b4348eb9207dd2e8a"><div class="ttname"><a href="namespacellvm.html#a973f98a5bc51515b4348eb9207dd2e8a">llvm::SimplifyFRemInst</a></div><div class="ttdeci">Value * SimplifyFRemInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01285">InstructionSimplify.cpp:1285</a></div></div>
<div class="ttc" id="OcamlGCPrinter_8cpp_html_a1bdbcdc4205781eefd549946d40ff378"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;,&quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a6a2f9c787f06fbf87c28a469ffb5f000"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a6a2f9c787f06fbf87c28a469ffb5f000">MultiplyOverflows</a></div><div class="ttdeci">static bool MultiplyOverflows(ConstantInt *C1, ConstantInt *C2, bool sign)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00077">InstCombineMulDivRem.cpp:77</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a4b5e643a45da5115a99284a9f513b143"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a4b5e643a45da5115a99284a9f513b143">dyn_castZExtVal</a></div><div class="ttdeci">static Value * dyn_castZExtVal(Value *V, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00727">InstCombineMulDivRem.cpp:727</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aa3e1005525fe79e631f1fe5bd91fdf3c"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">llvm::ConstantExpr::getMul</a></div><div class="ttdeci">static Constant * getMul(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02062">Constants.cpp:2062</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_ae05012c5159493832065a06aecc4f954"><div class="ttname"><a href="classllvm_1_1APFloat.html#ae05012c5159493832065a06aecc4f954">llvm::APFloat::getExactInverse</a></div><div class="ttdeci">bool getExactInverse(APFloat *inv) const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l03714">APFloat.cpp:3714</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="InstCombineMulDivRem_8cpp_html_a4e140b14586cc5e1edb1311daf9474b3"><div class="ttname"><a href="InstCombineMulDivRem_8cpp.html#a4e140b14586cc5e1edb1311daf9474b3">detectLog2OfHalf</a></div><div class="ttdeci">static void detectLog2OfHalf(Value *&amp;Op, Value *&amp;Y, IntrinsicInst *&amp;Log2)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineMulDivRem_8cpp_source.html#l00294">InstCombineMulDivRem.cpp:294</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a4f9fe1ca06b44499c16742431c00cb34"><div class="ttname"><a href="classllvm_1_1APFloat.html#a4f9fe1ca06b44499c16742431c00cb34">llvm::APFloat::getSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getSemantics() const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00397">APFloat.h:397</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="namespacellvm_html_a16e6b2e2a8b7efd5ce9a39f39f045502"><div class="ttname"><a href="namespacellvm.html#a16e6b2e2a8b7efd5ce9a39f39f045502">llvm::SimplifyMulInst</a></div><div class="ttdeci">Value * SimplifyMulInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01057">InstructionSimplify.cpp:1057</a></div></div>
<div class="ttc" id="classllvm_1_1APFloat_html_a280db20941932e0d6e2ba89a8ec6037d"><div class="ttname"><a href="classllvm_1_1APFloat.html#a280db20941932e0d6e2ba89a8ec6037d">llvm::APFloat::isNormal</a></div><div class="ttdeci">bool isNormal() const </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00367">APFloat.h:367</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:01 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
