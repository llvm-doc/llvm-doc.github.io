<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: ArgumentPromotion.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ArgumentPromotion_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ArgumentPromotion.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ArgumentPromotion_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- ArgumentPromotion.cpp - Promote by-reference arguments ------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass promotes &quot;by reference&quot; arguments to be &quot;by value&quot; arguments.  In</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// practice, this means looking for internal functions that have pointer</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// arguments.  If it can prove, through the use of alias analysis, that an</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// argument is *only* loaded, then it can pass the value into the function</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// instead of the address of the value.  This can cause recursive simplification</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// of code and lead to the elimination of allocas (especially in C++ template</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// code like the STL).</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// This pass also handles aggregate arguments that are passed into a function,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// scalarizing them if the elements of the aggregate are only loaded.  Note that</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// by default it refuses to scalarize aggregates which would require passing in</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// more than three operands to the function, because passing thousands of</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// operands for a large array or structure is unprofitable! This limit can be</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// configured or disabled, however.</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// Note that this transformation could also be done for arguments that are only</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// stored to (returning the value instead), but does not currently.  This case</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// would be best handled when and if LLVM begins supporting multiple return</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// values from functions.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   32</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;argpromotion&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2IPO_8h.html">llvm/Transforms/IPO.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraph_8h.html">llvm/Analysis/CallGraph.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraphSCCPass_8h.html">llvm/Analysis/CallGraphSCCPass.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2CFG_8h.html">llvm/Support/CFG.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallSite_8h.html">llvm/Support/CallSite.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="ArgumentPromotion_8cpp.html#a16d278574b824e8c2eeaf08a0121b8be">STATISTIC</a>(NumArgumentsPromoted , <span class="stringliteral">&quot;Number of pointer arguments promoted&quot;</span>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<a class="code" href="ArgumentPromotion_8cpp.html#a16d278574b824e8c2eeaf08a0121b8be">STATISTIC</a>(NumAggregatesPromoted, <span class="stringliteral">&quot;Number of aggregate arguments promoted&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="ArgumentPromotion_8cpp.html#a16d278574b824e8c2eeaf08a0121b8be">STATISTIC</a>(NumByValArgsPromoted , <span class="stringliteral">&quot;Number of byval arguments promoted&quot;</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="ArgumentPromotion_8cpp.html#a16d278574b824e8c2eeaf08a0121b8be">STATISTIC</a>(NumArgumentsDead     , <span class="stringliteral">&quot;Number of dead pointer args eliminated&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">  /// ArgPromotion - The &#39;by reference&#39; to &#39;by value&#39; argument promotion pass.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>ArgPromotion : <span class="keyword">public</span> <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a> {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="classllvm_1_1CallGraphSCCPass.html#aafcbee837fed187a54b74f201a748160">CallGraphSCCPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;SCC);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">explicit</span> ArgPromotion(<span class="keywordtype">unsigned</span> maxElements = 3)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        : <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>(ID), maxElements(maxElements) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <a class="code" href="namespacellvm.html#aef8ac40e3bbdde96d7db6b3dfb38738a">initializeArgPromotionPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">    /// A vector used to hold the indices of a single GEP instruction</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span>    <span class="keyword">typedef</span> std::vector&lt;uint64_t&gt; IndicesVector;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *PromoteArguments(<a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CGN);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">bool</span> isSafeToPromoteArgument(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *Arg, <span class="keywordtype">bool</span> isByVal) <span class="keyword">const</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *DoPromotion(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                               <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> &amp;ArgsToPromote,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                               <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> &amp;ByValArgsToTransform);<span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">    /// The maximum number of elements to expand, or 0 for unlimited.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> maxElements;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  };</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ArgPromotion::ID</a> = 0;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<a class="code" href="ArgumentPromotion_8cpp.html#a06e1c4e09df640814ad12c22aae9d262">INITIALIZE_PASS_BEGIN</a>(ArgPromotion, <span class="stringliteral">&quot;argpromotion&quot;</span>,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <span class="stringliteral">&quot;Promote &#39;by reference&#39; arguments to scalars&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a>)</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#ad6f471355f16d777b075f7d1884d3622">   92</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(ArgPromotion, &quot;<a class="code" href="ArgumentPromotion_8cpp.html#a7f6d8503e31ad05e7c66d8eea30b942b">argpromotion</a>&quot;,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                &quot;Promote &#39;by reference&#39; <a class="code" href="Target_2README_8txt.html#a66529b13967f1d18538dfa09dfb603d8">arguments</a> <a class="code" href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a> <a class="code" href="ArgumentPromotion_8cpp.html#ad6f471355f16d777b075f7d1884d3622">scalars</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7207382fdf2cf1c66ec3aadbeb392b45">   95</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a7207382fdf2cf1c66ec3aadbeb392b45">createArgumentPromotionPass</a>(<span class="keywordtype">unsigned</span> maxElements) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ArgPromotion(maxElements);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordtype">bool</span> ArgPromotion::runOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;SCC) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>, LocalChange;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">do</span> {  <span class="comment">// Iterate until we stop promoting from this SCC.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    LocalChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// Attempt to promote arguments from all functions in this SCC.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = SCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CGN = PromoteArguments(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        LocalChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        SCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a78d3ea30abf1bae03b398ec1b266eeeb">ReplaceNode</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, CGN);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    Changed |= LocalChange;               <span class="comment">// Remember that we changed something.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  } <span class="keywordflow">while</span> (LocalChange);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  </div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// PromoteArguments - This method checks the specified function to see if there</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// are any promotable arguments and if it is safe to promote the function (for</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// example, all callers are direct).  If safe to promote some arguments, it</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/// calls the DoPromotion method.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *ArgPromotion::PromoteArguments(<a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CGN) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">getFunction</a>();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Make sure that it is local to this module.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (!F || !F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// First check: see if there are any pointer arguments!  If not, quick exit.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Argument*, 16&gt;</a> PointerArgs;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isPointerTy())</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      PointerArgs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span> (PointerArgs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// Second check: make sure that all callers are direct callers.  We can&#39;t</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// transform functions that have indirect callers.  Also see if the function</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// is self-recursive.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">bool</span> isSelfRecursive = <span class="keyword">false</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = F-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(*UI);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// Must be a direct call.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>() == 0 || !CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a0359da073a544050d5aa25ea1d6eacb9">isCallee</a>(UI)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>() == <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      isSelfRecursive = <span class="keyword">true</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  </div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Check to see which arguments are promotable.  If an argument is promotable,</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// add it to ArgsToPromote.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> ArgsToPromote;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> ByValArgsToTransform;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PointerArgs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Argument</a> *PtrArg = PointerArgs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *AgTy = cast&lt;PointerType&gt;(PtrArg-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getElementType();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// If this is a byval argument, and if the aggregate type is small, just</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// pass the elements, which is always safe.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (PtrArg-&gt;<a class="code" href="classllvm_1_1Argument.html#aee2867e0d1b4332055f536ac3d521d40">hasByValAttr</a>()) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(AgTy)) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (maxElements &gt; 0 &amp;&amp; STy-&gt;getNumElements() &gt; maxElements) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;argpromotion disable promoting argument &#39;&quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                &lt;&lt; PtrArg-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; because it would require adding more&quot;</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                &lt;&lt; <span class="stringliteral">&quot; than &quot;</span> &lt;&lt; maxElements &lt;&lt; <span class="stringliteral">&quot; arguments to the function.\n&quot;</span>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        </div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">// If all the elements are single-value types, we can promote it.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordtype">bool</span> AllSimple = <span class="keyword">true</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = STy-&gt;getNumElements(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <span class="keywordflow">if</span> (!STy-&gt;getElementType(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;isSingleValueType()) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            AllSimple = <span class="keyword">false</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// Safe to transform, don&#39;t even bother trying to &quot;promote&quot; it.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// Passing the elements as a scalar will allow scalarrepl to hack on</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="comment">// the new alloca we introduce.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> (AllSimple) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(PtrArg);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// If the argument is a recursive type and we&#39;re in a recursive</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// function, we could end up infinitely peeling the function argument.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (isSelfRecursive) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(AgTy)) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordtype">bool</span> RecursiveType = <span class="keyword">false</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = STy-&gt;getNumElements(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <span class="keywordflow">if</span> (STy-&gt;getElementType(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == PtrArg-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            RecursiveType = <span class="keyword">true</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span> (RecursiveType)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    </div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// Otherwise, see if we can promote the pointer to its value.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (isSafeToPromoteArgument(PtrArg, PtrArg-&gt;<a class="code" href="classllvm_1_1Argument.html#aee2867e0d1b4332055f536ac3d521d40">hasByValAttr</a>()))</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      ArgsToPromote.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(PtrArg);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// No promotable pointer arguments.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (ArgsToPromote.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">empty</a>() &amp;&amp; ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">empty</a>()) </div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">return</span> DoPromotion(F, ArgsToPromote, ByValArgsToTransform);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/// AllCallersPassInValidPointerForArgument - Return true if we can prove that</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/// all callees pass in a valid pointer for the specified function argument.</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#a1f2bd647828daba21f30392942995471">  217</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ArgumentPromotion_8cpp.html#a1f2bd647828daba21f30392942995471">AllCallersPassInValidPointerForArgument</a>(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *Arg) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Callee = Arg-&gt;<a class="code" href="classllvm_1_1Argument.html#a8b552efcb257de36f35d73a20ee781c6">getParent</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">unsigned</span> ArgNo = Arg-&gt;<a class="code" href="classllvm_1_1Argument.html#ac70153649461940646eeb8b9ce50e416">getArgNo</a>();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// Look at all call sites of the function.  At this pointer we know we only</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// have direct callees.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = Callee-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Callee-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(*UI);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    assert(CS &amp;&amp; <span class="stringliteral">&quot;Should only have direct calls!&quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (!CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">getArgument</a>(ArgNo)-&gt;<a class="code" href="classllvm_1_1Value.html#ae6a2729f1446acc2ae3e5a05bc2a5a4b">isDereferenceablePointer</a>())</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// Returns true if Prefix is a prefix of longer. That means, Longer has a size</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/// that is greater than or equal to the size of prefix, and each of the</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/// elements in Prefix is the same as the corresponding elements in Longer.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/// This means it also returns true when Prefix and Longer are equal!</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">  240</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">IsPrefix</a>(<span class="keyword">const</span> ArgPromotion::IndicesVector &amp;<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                     <span class="keyword">const</span> ArgPromotion::IndicesVector &amp;Longer) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (Prefix.size() &gt; Longer.size())</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">std::equal</a>(Prefix.begin(), Prefix.end(), Longer.begin());</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">/// Checks if Indices, or a prefix of Indices, is in Set.</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#a6b21a344416a0993c5fd24c304e0c867">  249</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ArgumentPromotion_8cpp.html#a6b21a344416a0993c5fd24c304e0c867">PrefixIn</a>(<span class="keyword">const</span> ArgPromotion::IndicesVector &amp;Indices,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                     std::set&lt;ArgPromotion::IndicesVector&gt; &amp;Set) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    std::set&lt;ArgPromotion::IndicesVector&gt;::iterator Low;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Low = Set.upper_bound(Indices);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (Low != Set.begin())</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      Low--;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Low is now the last element smaller than or equal to Indices. This means</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// it points to a prefix of Indices (possibly Indices itself), if such</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// prefix exists.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// This load is safe if any prefix of its operands is safe to load.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> Low != Set.end() &amp;&amp; <a class="code" href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">IsPrefix</a>(*Low, Indices);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// Mark the given indices (ToMark) as safe in the given set of indices</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// (Safe). Marking safe usually means adding ToMark to Safe. However, if there</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/// is already a prefix of Indices in Safe, Indices are implicitely marked safe</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// already. Furthermore, any indices that Indices is itself a prefix of, are</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// removed from Safe (since they are implicitely safe because of Indices now).</span></div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="ArgumentPromotion_8cpp.html#adb6ec376d294cfb4c4b4588663e67b7f">  268</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ArgumentPromotion_8cpp.html#adb6ec376d294cfb4c4b4588663e67b7f">MarkIndicesSafe</a>(<span class="keyword">const</span> ArgPromotion::IndicesVector &amp;ToMark,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                            std::set&lt;ArgPromotion::IndicesVector&gt; &amp;Safe) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  std::set&lt;ArgPromotion::IndicesVector&gt;::iterator Low;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  Low = Safe.upper_bound(ToMark);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Guard against the case where Safe is empty</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (Low != Safe.begin())</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    Low--;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Low is now the last element smaller than or equal to Indices. This</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// means it points to a prefix of Indices (possibly Indices itself), if</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// such prefix exists.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (Low != Safe.end()) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">IsPrefix</a>(*Low, ToMark))</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="comment">// If there is already a prefix of these indices (or exactly these</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="comment">// indices) marked a safe, don&#39;t bother adding these indices</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Increment Low, so we can use it as a &quot;insert before&quot; hint</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    ++Low;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// Insert</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  Low = Safe.insert(Low, ToMark);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  ++Low;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// If there we&#39;re a prefix of longer index list(s), remove those</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  std::set&lt;ArgPromotion::IndicesVector&gt;::iterator End = Safe.end();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">while</span> (Low != End &amp;&amp; <a class="code" href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">IsPrefix</a>(ToMark, *Low)) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    std::set&lt;ArgPromotion::IndicesVector&gt;::iterator Remove = Low;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    ++Low;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    Safe.erase(Remove);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/// isSafeToPromoteArgument - As you might guess from the name of this method,</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/// it checks to see if it is both safe and useful to promote the argument.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// This method limits promotion of aggregates to only promote up to three</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// elements of the aggregate in order to avoid exploding the number of</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/// arguments passed in.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> ArgPromotion::isSafeToPromoteArgument(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *Arg, <span class="keywordtype">bool</span> isByVal)<span class="keyword"> const </span>{</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">typedef</span> std::set&lt;IndicesVector&gt; GEPIndicesSet;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// Quick exit for unused arguments</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">if</span> (Arg-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// We can only promote this argument if all of the uses are loads, or are GEP</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// instructions (with constant indices) that are subsequently loaded.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// Promoting the argument causes it to be loaded in the caller</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// unconditionally. This is only safe if we can prove that either the load</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// would have happened in the callee anyway (ie, there is a load in the entry</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// block) or the pointer passed in at every call site is guaranteed to be</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// valid.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// In the former case, invalid loads can happen, but would have happened</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// anyway, in the latter case, invalid loads won&#39;t happen. This prevents us</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// from introducing an invalid load that wouldn&#39;t have happened in the</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// original code.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// This set will contain all sets of indices that are loaded in the entry</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// block, and thus are safe to unconditionally load in the caller.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  GEPIndicesSet SafeToUnconditionallyLoad;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// This set contains all the sets of indices that we are planning to promote.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// This makes it possible to limit the number of arguments added.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  GEPIndicesSet ToPromote;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// If the pointer is always valid, any load with first index 0 is valid.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (isByVal || <a class="code" href="ArgumentPromotion_8cpp.html#a1f2bd647828daba21f30392942995471">AllCallersPassInValidPointerForArgument</a>(Arg))</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    SafeToUnconditionallyLoad.insert(IndicesVector(1, 0));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// First, iterate the entry block and mark loads of (geps of) arguments as</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// safe.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBlock = Arg-&gt;<a class="code" href="classllvm_1_1Argument.html#a8b552efcb257de36f35d73a20ee781c6">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>();</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// Declare this here so we can reuse it</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  IndicesVector Indices;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = EntryBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = EntryBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = LI-&gt;getPointerOperand();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(V)) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        V = GEP-&gt;getPointerOperand();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span> (V == Arg) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          <span class="comment">// This load actually loads (part of) Arg? Check the indices then.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          Indices.reserve(GEP-&gt;getNumIndices());</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> II = GEP-&gt;idx_begin(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = GEP-&gt;idx_end();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;               II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(*II))</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;              Indices.push_back(CI-&gt;getSExtValue());</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;              <span class="comment">// We found a non-constant GEP index for this argument? Bail out</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;              <span class="comment">// right away, can&#39;t promote this argument at all.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          <span class="comment">// Indices checked out, mark them as safe</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          <a class="code" href="ArgumentPromotion_8cpp.html#adb6ec376d294cfb4c4b4588663e67b7f">MarkIndicesSafe</a>(Indices, SafeToUnconditionallyLoad);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;          Indices.clear();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (V == Arg) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// Direct loads are equivalent to a GEP with a single 0 index.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="ArgumentPromotion_8cpp.html#adb6ec376d294cfb4c4b4588663e67b7f">MarkIndicesSafe</a>(IndicesVector(1, 0), SafeToUnconditionallyLoad);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Now, iterate all uses of the argument to see if there are any uses that are</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// not (GEP+)loads, or any (GEP+)loads that are not safe to promote.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadInst*, 16&gt;</a> Loads;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  IndicesVector Operands;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = Arg-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Arg-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = *UI;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    Operands.clear();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="comment">// Don&#39;t hack volatile/atomic loads</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">if</span> (!LI-&gt;isSimple()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      Loads.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(LI);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">// Direct loads are equivalent to a GEP with a zero index and then a load.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      Operands.push_back(0);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">if</span> (GEP-&gt;use_empty()) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// Dead GEP&#39;s cause trouble later.  Just remove them if we run into</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="comment">// them.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        getAnalysis&lt;AliasAnalysis&gt;().deleteValue(GEP);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        GEP-&gt;eraseFromParent();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// TODO: This runs the above loop over and over again for dead GEPs</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="comment">// Couldn&#39;t we just do increment the UI iterator earlier and erase the</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="comment">// use?</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">return</span> isSafeToPromoteArgument(Arg, isByVal);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="comment">// Ensure that all of the indices are constants.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = GEP-&gt;idx_begin(), e = GEP-&gt;idx_end();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(*<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          Operands.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getSExtValue());</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not a constant operand GEP!</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">// Ensure that the only users of the GEP are load instructions.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = GEP-&gt;use_begin(), E = GEP-&gt;use_end();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;           UI != E; ++UI)</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(*UI)) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;          <span class="comment">// Don&#39;t hack volatile/atomic loads</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          <span class="keywordflow">if</span> (!LI-&gt;isSimple()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;          Loads.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(LI);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="comment">// Other uses than load?</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not a load or a GEP.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// Now, see if it is safe to promote this load / loads of this GEP. Loading</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// is safe if Operands, or a prefix of Operands, is marked as safe.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ArgumentPromotion_8cpp.html#a6b21a344416a0993c5fd24c304e0c867">PrefixIn</a>(Operands, SafeToUnconditionallyLoad))</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// See if we are already promoting a load with these indices. If not, check</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// to make sure that we aren&#39;t promoting too many elements.  If so, nothing</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// to do.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (ToPromote.find(Operands) == ToPromote.end()) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (maxElements &gt; 0 &amp;&amp; ToPromote.size() == maxElements) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;argpromotion not promoting argument &#39;&quot;</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;              &lt;&lt; Arg-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; because it would require adding more &quot;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;than &quot;</span> &lt;&lt; maxElements &lt;&lt; <span class="stringliteral">&quot; arguments to the function.\n&quot;</span>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="comment">// We limit aggregate promotion to only promoting up to a fixed number</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// of elements of the aggregate.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      ToPromote.insert(Operands);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (Loads.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// No users, this is a dead argument.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// Okay, now we know that the argument is only used by load instructions and</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// it is safe to unconditionally perform all of them. Use alias analysis to</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// check to see if the pointer is guaranteed to not be modified from entry of</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// the function to each of the load instructions.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// Because there could be several/many load instructions, remember which</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// blocks we know to be transparent to the load.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> TranspBlocks;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA = getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Loads.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// Check to see if the load is invalidated from the start of the block to</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// the load itself.</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a> = Loads[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Load-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> Loc = AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">getLocation</a>(Load);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3572979924cb7e5a79817108029c40ee">canInstructionRangeModify</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>(), *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a>, Loc))</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Pointer is invalidated!</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Now check every path from the entry block to the load for transparency.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// To do this, we perform a depth first search on the inverse CFG from the</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// loading block.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != E; ++PI) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1idf__ext__iterator.html">idf_ext_iterator</a>&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>*, <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> &gt;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a4ddfe0438b44a385c93e68dd3b37c2aa">idf_ext_begin</a>(P, TranspBlocks),</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;             E = <a class="code" href="namespacellvm.html#acdac968e816d011aeabbf609469d21e4">idf_ext_end</a>(P, TranspBlocks); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a34c694ccba4c3e7e4045b12a90962322">canBasicBlockModify</a>(**<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Loc))</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// If the path from the entry of the function to each load is free of</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// instructions that potentially invalidate the load, we can make the</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// transformation!</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">/// DoPromotion - This method actually performs the promotion of the specified</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">/// arguments, and returns the new function.  At this point, we know that it&#39;s</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/// safe to do so.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *ArgPromotion::DoPromotion(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                               <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> &amp;ArgsToPromote,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                              <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Argument*, 8&gt;</a> &amp;ByValArgsToTransform) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// Start by computing a new prototype for the function, which is the same as</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// the old function, but has modified arguments.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  std::vector&lt;Type*&gt; Params;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keyword">typedef</span> std::set&lt;IndicesVector&gt; ScalarizeTable;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// ScalarizedElements - If we are promoting a pointer that has elements</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// accessed out of it, keep track of which elements are accessed so that we</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// can add one argument for each.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="comment">// Arguments that are directly loaded will have a zero element value here, to</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// handle cases where there are both a direct load and GEP accesses.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  std::map&lt;Argument*, ScalarizeTable&gt; ScalarizedElements;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// OriginalLoads - Keep track of a representative load instruction from the</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// original function so that we can tell the alias analysis implementation</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// what the new GEP/Load instructions we are inserting look like.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// We need to keep the original loads for each argument and the elements</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// of the argument that are accessed.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  std::map&lt;std::pair&lt;Argument*, IndicesVector&gt;, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>*&gt; OriginalLoads;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// Attribute - Keep track of the parameter attributes for the arguments</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// that we are *not* promoting. For the ones that we do promote, the parameter</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// attributes are lost</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 8&gt;</a> AttributesVec;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;PAL = F-&gt;<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// Add any return attributes.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (PAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::ReturnIndex))</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                              PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">getRetAttributes</a>()));</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// First, determine the new argument list</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">unsigned</span> ArgIndex = 1;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;       ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++ArgIndex) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// Simple byval argument? Just add all the struct element types.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *AgTy = cast&lt;PointerType&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType())-&gt;getElementType();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(AgTy);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = STy-&gt;<a class="code" href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        Params.push_back(STy-&gt;<a class="code" href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      ++NumByValArgsPromoted;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!ArgsToPromote.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="comment">// Unchanged argument</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      Params.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType());</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> attrs = PAL.<a class="code" href="classllvm_1_1AttributeSet.html#abcc698a1bc0c1060a6c07476597631e5">getParamAttributes</a>(ArgIndex);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">if</span> (attrs.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(ArgIndex)) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(attrs, ArgIndex);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        AttributesVec.</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Params.size(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty()) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="comment">// Dead argument (which are always marked as promotable)</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      ++NumArgumentsDead;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="comment">// Okay, this is being promoted. This means that the only uses are loads</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="comment">// or GEPs which are only used by loads</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">// In this table, we will track which indices are loaded from the argument</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">// (where direct loads are tracked as no indices).</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      ScalarizeTable &amp;ArgIndices = ScalarizedElements[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_begin(), E = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_end(); UI != E;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;           ++UI) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        assert(isa&lt;LoadInst&gt;(User) || isa&lt;GetElementPtrInst&gt;(User));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        IndicesVector Indices;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        Indices.reserve(User-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() - 1);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">// Since loads will only have a single operand, and GEPs only a single</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// non-index operand, this will record direct loads without any indices,</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">// and gep+loads with the GEP indices.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> II = User-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>() + 1, <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = User-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;             II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          Indices.push_back(cast&lt;ConstantInt&gt;(*II)-&gt;getSExtValue());</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment">// GEPs with a single 0 index can be merged with direct loads</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (Indices.size() == 1 &amp;&amp; Indices.front() == 0)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          Indices.clear();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        ArgIndices.insert(Indices);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *OrigLoad;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(User))</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          OrigLoad = L;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          <span class="comment">// Take any load, we will use it only to update Alias Analysis</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          OrigLoad = cast&lt;LoadInst&gt;(User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">use_back</a>());</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        OriginalLoads[std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Indices)] = OrigLoad;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="comment">// Add a parameter to the function for each element passed in.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">for</span> (ScalarizeTable::iterator SI = ArgIndices.begin(),</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;             E = ArgIndices.end(); SI != E; ++SI) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">// not allowed to dereference -&gt;begin() if size() is 0</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        Params.push_back(<a class="code" href="classllvm_1_1GetElementPtrInst.html#a6bdc5f35d542c35932593fabf6811c68">GetElementPtrInst::getIndexedType</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), *SI));</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        assert(Params.back());</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (ArgIndices.size() == 1 &amp;&amp; ArgIndices.begin()-&gt;empty())</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        ++NumArgumentsPromoted;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        ++NumAggregatesPromoted;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// Add any function attributes.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (PAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::FunctionIndex))</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(FTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(),</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                              PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">getFnAttributes</a>()));</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>();</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// Construct the new function type using the new arguments.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *NFTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(RetTy, Params, FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>());</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// Create the new function body and insert it into the module.</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NF = <a class="code" href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">Function::Create</a>(NFTy, F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>(), F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#a05e6f4dd6bc551b79995792404af490b">copyAttributesFrom</a>(F);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  </div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ARG PROMOTION:  Promoting to:&quot;</span> &lt;&lt; *NF &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;From: &quot;</span> &lt;&lt; *F);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  </div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// Recompute the parameter attributes list based on the new arguments for</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// the function.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  NF-&gt;setAttributes(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), AttributesVec));</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  AttributesVec.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">getFunctionList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(F, NF);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  NF-&gt;takeName(F);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// Get the alias analysis information that we need to update to reflect our</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// changes.</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA = getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// Get the callgraph information that we need to update to reflect our</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// changes.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG = getAnalysis&lt;CallGraph&gt;();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  </div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// Get a new callgraph node for NF.</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *NF_CGN = CG.getOrInsertFunction(NF);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// Loop over all of the callers of the function, transforming the call sites</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// to pass in the loaded pointers.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 16&gt;</a> Args;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordflow">while</span> (!F-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(F-&gt;<a class="code" href="classllvm_1_1Value.html#ad9a329f9f85bc896a726a628aa3f4e9d">use_back</a>());</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    assert(CS.getCalledFunction() == <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = CS.getInstruction();</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;CallPAL = CS.getAttributes();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// Add any return attributes.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::ReturnIndex))</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                                CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">getRetAttributes</a>()));</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// Loop over the operands, inserting GEP and loads in the caller as</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// appropriate.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">CallSite::arg_iterator</a> AI = CS.arg_begin();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    ArgIndex = 1;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++AI, ++ArgIndex)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">if</span> (!ArgsToPromote.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        Args.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*AI);          <span class="comment">// Unmodified argument</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(ArgIndex)) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;          <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(CallPAL, ArgIndex);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;          AttributesVec.</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Args.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="comment">// Emit a GEP and load for each element of the struct.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *AgTy = cast&lt;PointerType&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType())-&gt;getElementType();</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(AgTy);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Idxs[2] = {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;              <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()), 0), 0 };</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = STy-&gt;<a class="code" href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          Idxs[1] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">GetElementPtrInst::Create</a>(*AI, Idxs,</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                                 (*AI)-&gt;getName()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">utostr</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                 <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;          <span class="comment">// TODO: Tell AA about the new values?</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;          Args.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(Idx, Idx-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.val&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>));</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty()) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="comment">// Non-dead argument: insert GEPs and loads as appropriate.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        ScalarizeTable &amp;ArgIndices = ScalarizedElements[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment">// Store the Value* version of the indices in here, but declare it now</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="comment">// for reuse.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        std::vector&lt;Value*&gt; Ops;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keywordflow">for</span> (ScalarizeTable::iterator SI = ArgIndices.begin(),</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;               E = ArgIndices.end(); SI != E; ++SI) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *V = *AI;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *OrigLoad = OriginalLoads[std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *SI)];</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          <span class="keywordflow">if</span> (!SI-&gt;empty()) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            Ops.reserve(SI-&gt;size());</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *ElTy = V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">for</span> (IndicesVector::const_iterator II = SI-&gt;begin(),</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                 <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = SI-&gt;end(); II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;              <span class="comment">// Use i32 to index structs, and i64 for others (pointers/arrays).</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;              <span class="comment">// This satisfies GEP constraints.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = (ElTy-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() ?</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()) : </div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                    <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()));</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;              Ops.push_back(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IdxTy, *II));</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;              <span class="comment">// Keep track of the type we&#39;re currently indexing.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;              ElTy = cast&lt;CompositeType&gt;(ElTy)-&gt;getTypeAtIndex(*II);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="comment">// And create a GEP to extract those indices.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            V = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">GetElementPtrInst::Create</a>(V, Ops, V-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.idx&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            Ops.clear();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">copyValue</a>(OrigLoad-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), V);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <span class="comment">// Since we&#39;re replacing a load make sure we take the alignment</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          <span class="comment">// of the previous load.</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;          <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *newLoad = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(V, V-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.val&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;          newLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(OrigLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <span class="comment">// Transfer the TBAA info too.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          newLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>,</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                               OrigLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>));</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;          Args.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(newLoad);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;          AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">copyValue</a>(OrigLoad, Args.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>());</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// Push any varargs arguments on the list.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">for</span> (; AI != CS.arg_end(); ++AI, ++ArgIndex) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      Args.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*AI);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(ArgIndex)) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(CallPAL, ArgIndex);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        AttributesVec.</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Args.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// Add any function attributes.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::FunctionIndex))</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(Call-&gt;getContext(),</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                                CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">getFnAttributes</a>()));</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(Call)) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      New = <a class="code" href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">InvokeInst::Create</a>(NF, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                               Args, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setCallingConv(CS.getCallingConv());</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setAttributes(AttributeSet::get(II-&gt;getContext(),</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                                            AttributesVec));</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      New = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(NF, Args, <span class="stringliteral">&quot;&quot;</span>, Call);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setCallingConv(CS.getCallingConv());</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setAttributes(AttributeSet::get(New-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                                          AttributesVec));</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">if</span> (cast&lt;CallInst&gt;(Call)-&gt;isTailCall())</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        cast&lt;CallInst&gt;(New)-&gt;setTailCall();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    Args.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// Update the alias analysis implementation to know that we are replacing</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// the old call with a new one.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(Call, New);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// Update the callgraph to know that the callsite has been transformed.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CalleeNode = CG[Call-&gt;getParent()-&gt;getParent()];</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    CalleeNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ae691d3aeb7e8719ce17477fa0cb42c30">replaceCallEdge</a>(Call, New, NF_CGN);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (!Call-&gt;use_empty()) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      Call-&gt;replaceAllUsesWith(New);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      New-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Call);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">// Finally, remove the old call from the program, reducing the use-count of</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// F.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    Call-&gt;eraseFromParent();</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// Since we have now created the new function, splice the body of the old</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// function right into the new function, leaving the old rotting hulk of the</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// function empty.</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  NF-&gt;getBasicBlockList().splice(NF-&gt;begin(), F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>());</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// Loop over the argument list, transferring uses of the old arguments over to</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// the new arguments, also transferring over the names as well.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(),</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;       I2 = NF-&gt;arg_begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (!ArgsToPromote.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="comment">// If this is an unmodified argument, move the name and users over to the</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="comment">// new version.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(I2);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      I2-&gt;takeName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, I2);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      ++I2;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (ByValArgsToTransform.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="comment">// In the callee, we create an alloca, and store each of the new incoming</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="comment">// arguments into the alloca.</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt = NF-&gt;begin()-&gt;begin();</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="comment">// Just add all the struct element types.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *AgTy = cast&lt;PointerType&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType())-&gt;getElementType();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TheAlloca = <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(AgTy, 0, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(AgTy);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Idxs[2] = {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()), 0), 0 };</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = STy-&gt;<a class="code" href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        Idxs[1] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>()), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = </div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <a class="code" href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">GetElementPtrInst::Create</a>(TheAlloca, Idxs,</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                                    TheAlloca-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), </div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                                    InsertPt);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        I2-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName()+<span class="stringliteral">&quot;.&quot;</span>+<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(I2++, Idx, InsertPt);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// Anything that used the arg should now use the alloca.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(TheAlloca);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      TheAlloca-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TheAlloca);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty()) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a2fc1bfe12fa3756cb293da322a3a0454">deleteValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// Otherwise, if we promoted this argument, then all users are load</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// instructions (or GEPs with only load users), and all loads should be</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">// using the new argument that we added.</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    ScalarizeTable &amp;ArgIndices = ScalarizedElements[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty()) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_back())) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        assert(ArgIndices.begin()-&gt;empty() &amp;&amp;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;               <span class="stringliteral">&quot;Load element should sort to front!&quot;</span>);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        I2-&gt;setName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName()+<span class="stringliteral">&quot;.val&quot;</span>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        LI-&gt;replaceAllUsesWith(I2);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(LI, I2);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        LI-&gt;eraseFromParent();</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Promoted load of argument &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName()</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;&#39; in function &#39;&quot;</span> &lt;&lt; F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = cast&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_back());</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        IndicesVector Operands;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        Operands.reserve(GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#acdc6505f15f589324fce8b59cc2cb8a2">getNumIndices</a>());</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> II = GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = GEP-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a63d9ee4f6ab51fd7586c7ad7510a5b33">idx_end</a>();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;             II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;          Operands.push_back(cast&lt;ConstantInt&gt;(*II)-&gt;getSExtValue());</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="comment">// GEPs with a single 0 index can be merged with direct loads</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (Operands.size() == 1 &amp;&amp; Operands.front() == 0)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;          Operands.clear();</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> TheArg = I2;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">for</span> (ScalarizeTable::iterator It = ArgIndices.begin();</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;             *It != Operands; ++It, ++TheArg) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          assert(It != ArgIndices.end() &amp;&amp; <span class="stringliteral">&quot;GEP not handled??&quot;</span>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        std::string NewName = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName();</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Operands.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            NewName += <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">utostr</a>(Operands[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        NewName += <span class="stringliteral">&quot;.val&quot;</span>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        TheArg-&gt;setName(NewName);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Promoted agg argument &#39;&quot;</span> &lt;&lt; TheArg-&gt;getName()</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;&#39; of function &#39;&quot;</span> &lt;&lt; NF-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="comment">// All of the uses must be load instructions.  Replace them all with</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="comment">// the argument specified by ArgNo.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">while</span> (!GEP-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;          <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = cast&lt;LoadInst&gt;(GEP-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">use_back</a>());</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(TheArg);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;          AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(L, TheArg);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          L-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a2fc1bfe12fa3756cb293da322a3a0454">deleteValue</a>(GEP);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        GEP-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// Increment I2 past all of the arguments added for this promoted pointer.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="namespacellvm_1_1object.html#a63a8f680ecd1aa68ae0efdd3b5c4f4a7">std::advance</a>(I2, ArgIndices.size());</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// Tell the alias analysis that the old function is about to disappear.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(F, NF);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  </div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  NF_CGN-&gt;stealCalledFunctionsFrom(CG[F]);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  </div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// Now that the old function is dead, delete it.  If there is a dangling</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// reference to the CallgraphNode, just leave the dead function around for</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// someone else to nuke.</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CGN = CG[<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>];</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ad6d5e40ca95b691559c4fb254722ed6e">getNumReferences</a>() == 0)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keyword">delete</span> CG.removeFunctionFromModule(CGN);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    F-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  </div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">return</span> NF_CGN;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div><div class="ttc" id="classllvm_1_1AliasAnalysis_html_acb21f179f1adb9169b51db96a2450009"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">llvm::AliasAnalysis::replaceWithNewValue</a></div><div class="ttdeci">void replaceWithNewValue(Value *Old, Value *New)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00551">AliasAnalysis.h:551</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a38ea691c2eeaf3facd74d5cfb0c725b0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00218">GlobalValue.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a0359da073a544050d5aa25ea1d6eacb9"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a0359da073a544050d5aa25ea1d6eacb9">llvm::CallSiteBase::isCallee</a></div><div class="ttdeci">bool isCallee(value_use_iterator&lt; UserTy &gt; UI) const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00107">CallSite.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00167">Function.cpp:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">LLVM Argument representation. </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00035">Argument.h:35</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_abcc698a1bc0c1060a6c07476597631e5"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#abcc698a1bc0c1060a6c07476597631e5">llvm::AttributeSet::getParamAttributes</a></div><div class="ttdeci">AttributeSet getParamAttributes(unsigned Index) const </div><div class="ttdoc">The attributes for the specified index are returned. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00792">Attributes.cpp:792</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a5dc6f41d85a83e036bf7f9a25797e2ec"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">llvm::CallGraphSCC::iterator</a></div><div class="ttdeci">std::vector&lt; CallGraphNode * &gt;::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00100">CallGraphSCCPass.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00131">CommandLine.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="CallGraphSCCPass_8h_html"><div class="ttname"><a href="CallGraphSCCPass_8h.html">CallGraphSCCPass.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdoc">Externally visible function. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00034">GlobalValue.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a34c694ccba4c3e7e4045b12a90962322"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a34c694ccba4c3e7e4045b12a90962322">llvm::AliasAnalysis::canBasicBlockModify</a></div><div class="ttdeci">bool canBasicBlockModify(const BasicBlock &amp;BB, const Location &amp;Loc)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00496">AliasAnalysis.cpp:496</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00418">Function.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a33603355becfb1a050b62aa015c1cc57"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00205">BasicBlock.h:205</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html">llvm::CallGraphNode</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00173">CallGraph.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_acdc6505f15f589324fce8b59cc2cb8a2"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#acdc6505f15f589324fce8b59cc2cb8a2">llvm::GetElementPtrInst::getNumIndices</a></div><div class="ttdeci">unsigned getNumIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00827">Instructions.h:827</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html_aafcbee837fed187a54b74f201a748160"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#aafcbee837fed187a54b74f201a748160">llvm::CallGraphSCCPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;Info) const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00572">CallGraphSCCPass.cpp:572</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a65a550af73bd99c96abea847916aa4e9"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">llvm::CallSiteBase::getArgument</a></div><div class="ttdeci">ValTy * getArgument(unsigned ArgNo) const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00111">CallSite.h:111</a></div></div>
<div class="ttc" id="CallSite_8h_html"><div class="ttname"><a href="CallSite_8h.html">CallSite.h</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a799ffb6d2bab62ea523b0c13f748d080"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">llvm::AttributeSet::getRetAttributes</a></div><div class="ttdeci">AttributeSet getRetAttributes() const </div><div class="ttdoc">The attributes for the ret value are returned. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00800">Attributes.cpp:800</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ab40c70f303f70e989a10efced4036a57"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">llvm::CallGraphNode::getFunction</a></div><div class="ttdeci">Function * getFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00212">CallGraph.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ad6d5e40ca95b691559c4fb254722ed6e"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ad6d5e40ca95b691559c4fb254722ed6e">llvm::CallGraphNode::getNumReferences</a></div><div class="ttdeci">unsigned getNumReferences() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00223">CallGraph.h:223</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a06e1c4e09df640814ad12c22aae9d262"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a06e1c4e09df640814ad12c22aae9d262">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(ArgPromotion,&quot;argpromotion&quot;,&quot;Promote 'by reference' arguments to scalars&quot;, false, false) INITIALIZE_PASS_END(ArgPromotion</div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1object_html_a63a8f680ecd1aa68ae0efdd3b5c4f4a7"><div class="ttname"><a href="namespacellvm_1_1object.html#a63a8f680ecd1aa68ae0efdd3b5c4f4a7">llvm::object::advance</a></div><div class="ttdeci">static error_code advance(T &amp;it, size_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="MachOObjectFile_8cpp_source.html#l00278">MachOObjectFile.cpp:278</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_ad6f471355f16d777b075f7d1884d3622"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#ad6f471355f16d777b075f7d1884d3622">scalars</a></div><div class="ttdeci">Promote by reference arguments to scalars</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00092">ArgumentPromotion.cpp:92</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a6699d964429a39e8f78b348cb2535bf2"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">llvm::CallGraphSCC::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00102">CallGraphSCCPass.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html"><div class="ttname"><a href="classllvm_1_1AttributeSet.html">llvm::AttributeSet</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00202">Attributes.h:202</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ae691d3aeb7e8719ce17477fa0cb42c30"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ae691d3aeb7e8719ce17477fa0cb42c30">llvm::CallGraphNode::replaceCallEdge</a></div><div class="ttdeci">void replaceCallEdge(CallSite CS, CallSite NewCS, CallGraphNode *NewNode)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8cpp_source.html#l00249">CallGraph.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="namespacellvm_html_aef8ac40e3bbdde96d7db6b3dfb38738a"><div class="ttname"><a href="namespacellvm.html#aef8ac40e3bbdde96d7db6b3dfb38738a">llvm::initializeArgPromotionPass</a></div><div class="ttdeci">void initializeArgPromotionPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html">llvm::CallGraphSCCPass</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00034">CallGraphSCCPass.h:34</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="namespacellvm_html_a7207382fdf2cf1c66ec3aadbeb392b45"><div class="ttname"><a href="namespacellvm.html#a7207382fdf2cf1c66ec3aadbeb392b45">llvm::createArgumentPromotionPass</a></div><div class="ttdeci">Pass * createArgumentPromotionPass(unsigned maxElements=3)</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00095">ArgumentPromotion.cpp:95</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a91f4469a9d29e354421494afd4ba466d"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a></div><div class="ttdeci">Should compile to</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00449">Target/ARM/README.txt:449</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a05e6f4dd6bc551b79995792404af490b"><div class="ttname"><a href="classllvm_1_1Function.html#a05e6f4dd6bc551b79995792404af490b">llvm::Function::copyAttributesFrom</a></div><div class="ttdeci">void copyAttributesFrom(const GlobalValue *Src)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00347">Function.cpp:347</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a533cd570eeebdb48681e253dc174a777"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">llvm::AliasAnalysis::copyValue</a></div><div class="ttdeci">virtual void copyValue(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00068">AliasAnalysis.cpp:68</a></div></div>
<div class="ttc" id="CallGraph_8h_html"><div class="ttname"><a href="CallGraph_8h.html">CallGraph.h</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_aceaa5a2bd964e34d0dbf3ed1f146abc7"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">llvm::GetElementPtrInst::idx_begin</a></div><div class="ttdeci">op_iterator idx_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00785">Instructions.h:785</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00361">Type.cpp:361</a></div></div>
<div class="ttc" id="namespacellvm_html_ae094b310153c30b08dcec1b40459d385"><div class="ttname"><a href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">llvm::utostr</a></div><div class="ttdeci">static std::string utostr(uint64_t X, bool isNeg=false)</div><div class="ttdef"><b>Definition:</b> <a href="StringExtras_8h_source.html#l00088">StringExtras.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="Transforms_2IPO_8h_html"><div class="ttname"><a href="Transforms_2IPO_8h.html">IPO.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a9c293af587813d72fdc976697dd07f23"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">llvm::CallSiteBase&lt; Function, Value, User, Instruction, CallInst, InvokeInst, User::op_iterator &gt;::arg_iterator</a></div><div class="ttdeci">User::op_iterator arg_iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00133">CallSite.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a3fa62eb5b39154600bc9f84688ef0fd1"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a3fa62eb5b39154600bc9f84688ef0fd1">IsPrefix</a></div><div class="ttdeci">static bool IsPrefix(const ArgPromotion::IndicesVector &amp;Prefix, const ArgPromotion::IndicesVector &amp;Longer)</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00240">ArgumentPromotion.cpp:240</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ae4c67f835911559821939fb23a2e7aff"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">llvm::CallSiteBase::getInstruction</a></div><div class="ttdeci">InstrTy * getInstruction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00079">CallSite.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html_a8b552efcb257de36f35d73a20ee781c6"><div class="ttname"><a href="classllvm_1_1Argument.html#a8b552efcb257de36f35d73a20ee781c6">llvm::Argument::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00049">Argument.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00390">Attributes.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="Support_2CFG_8h_html"><div class="ttname"><a href="Support_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="namespacellvm_html_acdac968e816d011aeabbf609469d21e4"><div class="ttname"><a href="namespacellvm.html#acdac968e816d011aeabbf609469d21e4">llvm::idf_ext_end</a></div><div class="ttdeci">idf_ext_iterator&lt; T, SetTy &gt; idf_ext_end(const T &amp;G, SetTy &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00262">DepthFirstIterator.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html_a03007b982a936464f7116e3c47df89ee"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">llvm::InvokeInst::Create</a></div><div class="ttdeci">static InvokeInst * Create(Value *Func, BasicBlock *IfNormal, BasicBlock *IfException, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02863">Instructions.h:2863</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00410">Function.h:410</a></div></div>
<div class="ttc" id="structllvm_1_1AliasAnalysis_1_1Location_html"><div class="ttname"><a href="structllvm_1_1AliasAnalysis_1_1Location.html">llvm::AliasAnalysis::Location</a></div><div class="ttdoc">Location - A description of a memory location. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00106">AliasAnalysis.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a095445850ef2c64e96b4c05120cecf66"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">llvm::SmallPtrSetImpl::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00074">SmallPtrSet.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01065">Instructions.cpp:1065</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a2fc1bfe12fa3756cb293da322a3a0454"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a2fc1bfe12fa3756cb293da322a3a0454">llvm::AliasAnalysis::deleteValue</a></div><div class="ttdeci">virtual void deleteValue(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00063">AliasAnalysis.cpp:63</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00589">Metadata.cpp:589</a></div></div>
<div class="ttc" id="namespacellvm_html_a4ddfe0438b44a385c93e68dd3b37c2aa"><div class="ttname"><a href="namespacellvm.html#a4ddfe0438b44a385c93e68dd3b37c2aa">llvm::idf_ext_begin</a></div><div class="ttdeci">idf_ext_iterator&lt; T, SetTy &gt; idf_ext_begin(const T &amp;G, SetTy &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00257">DepthFirstIterator.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a861226dd056dd2438da26760b8e7a9a0"><div class="ttname"><a href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01187">Instructions.h:1187</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html_aee2867e0d1b4332055f536ac3d521d40"><div class="ttname"><a href="classllvm_1_1Argument.html#aee2867e0d1b4332055f536ac3d521d40">llvm::Argument::hasByValAttr</a></div><div class="ttdeci">bool hasByValAttr() const </div><div class="ttdoc">Return true if this argument has the byval attribute on it in its containing function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00081">Function.cpp:81</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a020ed4dc4297b07bdad741f18cf369ae"><div class="ttname"><a href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">llvm::Module::getFunctionList</a></div><div class="ttdeci">const FunctionListType &amp; getFunctionList() const </div><div class="ttdoc">Get the Module&amp;#39;s list of functions (constant). </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00492">Module.h:492</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4d34a40b2667246539b80589adf2028e"><div class="ttname"><a href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">llvm::Function::getBasicBlockList</a></div><div class="ttdeci">const BasicBlockListType &amp; getBasicBlockList() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00374">Function.h:374</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a16d278574b824e8c2eeaf08a0121b8be"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a16d278574b824e8c2eeaf08a0121b8be">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumArgumentsPromoted,&quot;Number of pointer arguments promoted&quot;)</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a1585a1ee545bef997b3120f87fd992a0"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00726">Instructions.h:726</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_aa262134562bc5f5df6c3f536162469b6"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">llvm::CallGraphSCC::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00101">CallGraphSCCPass.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5ac211f24970dea81fa9a7118a8ce36b"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">llvm::Instruction::use_back</a></div><div class="ttdeci">Instruction * use_back()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00049">Instruction.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_aec9dbab832cd8052f85cd2a9dbb3816e"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">llvm::AliasAnalysis::getLocation</a></div><div class="ttdeci">Location getLocation(const LoadInst *LI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00227">AliasAnalysis.cpp:227</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a7f6d8503e31ad05e7c66d8eea30b942b"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a7f6d8503e31ad05e7c66d8eea30b942b">argpromotion</a></div><div class="ttdeci">argpromotion</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00092">ArgumentPromotion.cpp:92</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00212">Type.h:212</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a6b21a344416a0993c5fd24c304e0c867"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a6b21a344416a0993c5fd24c304e0c867">PrefixIn</a></div><div class="ttdeci">static bool PrefixIn(const ArgPromotion::IndicesVector &amp;Indices, std::set&lt; ArgPromotion::IndicesVector &gt; &amp;Set)</div><div class="ttdoc">Checks if Indices, or a prefix of Indices, is in Set. </div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00249">ArgumentPromotion.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae6a2729f1446acc2ae3e5a05bc2a5a4b"><div class="ttname"><a href="classllvm_1_1Value.html#ae6a2729f1446acc2ae3e5a05bc2a5a4b">llvm::Value::isDereferenceablePointer</a></div><div class="ttdeci">bool isDereferenceablePointer() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00500">Value.cpp:500</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="StringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraph_html"><div class="ttname"><a href="classllvm_1_1CallGraph.html">llvm::CallGraph</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00072">CallGraph.h:72</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_adb6ec376d294cfb4c4b4588663e67b7f"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#adb6ec376d294cfb4c4b4588663e67b7f">MarkIndicesSafe</a></div><div class="ttdeci">static void MarkIndicesSafe(const ArgPromotion::IndicesVector &amp;ToMark, std::set&lt; ArgPromotion::IndicesVector &gt; &amp;Safe)</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00268">ArgumentPromotion.cpp:268</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a78d3ea30abf1bae03b398ec1b266eeeb"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a78d3ea30abf1bae03b398ec1b266eeeb">llvm::CallGraphSCC::ReplaceNode</a></div><div class="ttdeci">void ReplaceNode(CallGraphNode *Old, CallGraphNode *New)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00512">CallGraphSCCPass.cpp:512</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad9a329f9f85bc896a726a628aa3f4e9d"><div class="ttname"><a href="classllvm_1_1Value.html#ad9a329f9f85bc896a726a628aa3f4e9d">llvm::Value::use_back</a></div><div class="ttdeci">User * use_back()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00154">Value.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a63d9ee4f6ab51fd7586c7ad7510a5b33"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a63d9ee4f6ab51fd7586c7ad7510a5b33">llvm::GetElementPtrInst::idx_end</a></div><div class="ttdeci">op_iterator idx_end()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00787">Instructions.h:787</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_ac1dc3fd2de69fea5cda5bca3974ec719"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">llvm::AttributeSet::hasAttributes</a></div><div class="ttdeci">bool hasAttributes(unsigned Index) const </div><div class="ttdoc">Return true if attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00828">Attributes.cpp:828</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_adf66d58e85fb4e46e9c1ae55186a6930"><div class="ttname"><a href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00171">Function.cpp:171</a></div></div>
<div class="ttc" id="structllvm_1_1idf__ext__iterator_html"><div class="ttname"><a href="structllvm_1_1idf__ext__iterator.html">llvm::idf_ext_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00249">DepthFirstIterator.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_abefc2d8baa67d6f9e49c95912cfde480"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00211">GlobalValue.h:211</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_ab9b67f93a2231970abb3d95636660ffc"><div class="ttname"><a href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">llvm::FunctionType::isVarArg</a></div><div class="ttdeci">bool isVarArg() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00120">DerivedTypes.h:120</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a9eda832d6e80bc19b98f22f4ec714e3f"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">llvm::FunctionType::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00121">DerivedTypes.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a6bdc5f35d542c35932593fabf6811c68"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a6bdc5f35d542c35932593fabf6811c68">llvm::GetElementPtrInst::getIndexedType</a></div><div class="ttdeci">static Type * getIndexedType(Type *Ptr, ArrayRef&lt; Value * &gt; IdxList)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01384">Instructions.cpp:1384</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a66529b13967f1d18538dfa09dfb603d8"><div class="ttname"><a href="Target_2README_8txt.html#a66529b13967f1d18538dfa09dfb603d8">arguments</a></div><div class="ttdeci">we compile this esp call L1 $pb L1 esp je LBB1_2 esp ret but is currently always computed in the entry block It would be better to sink the picbase computation down into the block for the as it is the only one that uses it This happens for a lot of code with early outs Another example is loads of arguments</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00444">Target/README.txt:444</a></div></div>
<div class="ttc" id="ArgumentPromotion_8cpp_html_a1f2bd647828daba21f30392942995471"><div class="ttname"><a href="ArgumentPromotion_8cpp.html#a1f2bd647828daba21f30392942995471">AllCallersPassInValidPointerForArgument</a></div><div class="ttdeci">static bool AllCallersPassInValidPointerForArgument(Argument *Arg)</div><div class="ttdef"><b>Definition:</b> <a href="ArgumentPromotion_8cpp_source.html#l00217">ArgumentPromotion.cpp:217</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html">llvm::CallGraphSCC</a></div><div class="ttdoc">CallGraphSCC - This is a single SCC that a CallGraphSCCPass is run on. </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00083">CallGraphSCCPass.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a3572979924cb7e5a79817108029c40ee"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a3572979924cb7e5a79817108029c40ee">llvm::AliasAnalysis::canInstructionRangeModify</a></div><div class="ttdeci">bool canInstructionRangeModify(const Instruction &amp;I1, const Instruction &amp;I2, const Location &amp;Loc)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00506">AliasAnalysis.cpp:506</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html_ac70153649461940646eeb8b9ce50e416"><div class="ttname"><a href="classllvm_1_1Argument.html#ac70153649461940646eeb8b9ce50e416">llvm::Argument::getArgNo</a></div><div class="ttdeci">unsigned getArgNo() const </div><div class="ttdoc">Return the index of this formal argument in its containing function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00067">Function.cpp:67</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02841">Instructions.h:2841</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">llvm::lltok::equal</a></div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00025">LLToken.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_aa2113dcf8c96c19c9a2abf786b9ad3b7"><div class="ttname"><a href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">llvm::StructType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Random access to the elements. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00286">DerivedTypes.h:286</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a162a63c89ac118c8ffef75b3a892efa0"><div class="ttname"><a href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, const Twine &amp;N=&quot;&quot;, Module *M=0)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00128">Function.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a1c8b14cc527bd65daa7418deb83cbedc"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">llvm::AttributeSet::getFnAttributes</a></div><div class="ttdeci">AttributeSet getFnAttributes() const </div><div class="ttdoc">The function attributes are returned. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00809">Attributes.cpp:809</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:03 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
