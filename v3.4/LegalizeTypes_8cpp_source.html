<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: LegalizeTypes.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('LegalizeTypes_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LegalizeTypes.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LegalizeTypes_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- LegalizeTypes.cpp - Common code for DAG type legalizer ------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the SelectionDAG::LegalizeTypes method.  It transforms</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// an arbitrary well-formed SelectionDAG to only consist of legal types.  This</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// is common code shared among the LegalizeTypes*.cpp files.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizeTypes_8h.html">LegalizeTypes.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallingConv_8h.html">llvm/IR/CallingConv.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="LegalizeTypes_8cpp.html#ab7fbd43620ad37bfb6f0ed6d717319b6">EnableExpensiveChecks</a>(<span class="stringliteral">&quot;enable-legalize-types-checking&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// PerformExpensiveChecks - Do extensive, expensive, sanity checking.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::PerformExpensiveChecks() {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">// If a node is not processed, then none of its values should be mapped by any</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// of PromotedIntegers, ExpandedIntegers, ..., ReplacedValues.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// If a node is processed, then each value with an illegal type must be mapped</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// by exactly one of PromotedIntegers, ExpandedIntegers, ..., ReplacedValues.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// Values with a legal type may be mapped by ReplacedValues, but not by any of</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// the other maps.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// Note that these invariants may not hold momentarily when processing a node:</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// the node being processed may be put in a map before being marked Processed.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Note that it is possible to have nodes marked NewNode in the DAG.  This can</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// occur in two ways.  Firstly, a node may be created during legalization but</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// never passed to the legalization core.  This is usually due to the implicit</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// folding that occurs when using the DAG.getNode operators.  Secondly, a new</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// node may be passed to the legalization core, but when analyzed may morph</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// into a different node, leaving the original node as a NewNode in the DAG.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// A node may morph if one of its operands changes during analysis.  Whether</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// it actually morphs or not depends on whether, after updating its operands,</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// it is equivalent to an existing node: if so, it morphs into that existing</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// node (CSE).  An operand can change during analysis if the operand is a new</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// node that morphs, or it is a processed value that was mapped to some other</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// value (as recorded in ReplacedValues) in which case the operand is turned</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// into that other value.  If a node morphs then the node it morphed into will</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// be used instead of it for legalization, however the original node continues</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// to live on in the DAG.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// The conclusion is that though there may be nodes marked NewNode in the DAG,</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// all uses of such nodes are also marked NewNode: the result is a fungus of</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// NewNodes growing on top of the useful nodes, and perhaps using them, but</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// not used by them.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// If a value is mapped by ReplacedValues, then it must have no uses, except</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// by nodes marked NewNode (see above).</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// The final node obtained by mapping by ReplacedValues is not marked NewNode.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// Note that ReplacedValues should be applied iteratively.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Note that the ReplacedValues map may also map deleted nodes (by iterating</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// over the DAG we never dereference deleted nodes).  This means that it may</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// also map nodes marked NewNode if the deallocated memory was reallocated as</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// another node, and that new node was not seen by the LegalizeTypes machinery</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// (for example because it was created but not used).  In general, we cannot</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// distinguish between new nodes and deleted nodes.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDNode*, 16&gt;</a> NewNodes;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">SelectionDAG::allnodes_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#ac493b7df1666d70c1b355c82028148f0">allnodes_begin</a>(),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;       E = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a21c371ac00fe037f24e3f48cb62d2048">allnodes_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// Remember nodes marked NewNode - they are subject to extra checking below.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      NewNodes.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Res(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordtype">bool</span> Failed = <span class="keyword">false</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keywordtype">unsigned</span> Mapped = 0;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">if</span> (ReplacedValues.find(Res) != ReplacedValues.end()) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        Mapped |= 1;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// Check that remapped values are only used by nodes marked NewNode.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_begin(), UE = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_end();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;             UI != UE; ++UI)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          <span class="keywordflow">if</span> (UI.getUse().getResNo() == <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            assert(UI-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                   <span class="stringliteral">&quot;Remapped value has non-trivial use!&quot;</span>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">// Check that the final result of applying ReplacedValues is not</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// marked NewNode.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewVal = ReplacedValues[Res];</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ReplacedValues.find(NewVal);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">while</span> (I != ReplacedValues.end()) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;          NewVal = I-&gt;second;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          I = ReplacedValues.find(NewVal);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        assert(NewVal.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;               <span class="stringliteral">&quot;ReplacedValues maps to a new node!&quot;</span>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordflow">if</span> (PromotedIntegers.find(Res) != PromotedIntegers.end())</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        Mapped |= 2;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">if</span> (SoftenedFloats.find(Res) != SoftenedFloats.end())</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        Mapped |= 4;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span> (ScalarizedVectors.find(Res) != ScalarizedVectors.end())</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        Mapped |= 8;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">if</span> (ExpandedIntegers.find(Res) != ExpandedIntegers.end())</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        Mapped |= 16;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">if</span> (ExpandedFloats.find(Res) != ExpandedFloats.end())</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        Mapped |= 32;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">if</span> (SplitVectors.find(Res) != SplitVectors.end())</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        Mapped |= 64;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span> (WidenedVectors.find(Res) != WidenedVectors.end())</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        Mapped |= 128;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">if</span> (I-&gt;getNodeId() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="comment">// Since we allow ReplacedValues to map deleted nodes, it may map nodes</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// marked NewNode too, since a deleted node may have been reallocated as</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// another node that has not been seen by the LegalizeTypes machinery.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> ((I-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; Mapped &gt; 1) ||</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            (I-&gt;getNodeId() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; Mapped != 0)) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unprocessed value in a map!&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isTypeLegal(Res.getValueType()) || IgnoreNodeResults(I)) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">if</span> (Mapped &gt; 1) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Value with legal type was transformed!&quot;</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (Mapped == 0) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Processed value not in any map!&quot;</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Mapped &amp; (Mapped - 1)) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Value in multiple maps!&quot;</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">if</span> (Failed) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 1)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ReplacedValues&quot;</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 2)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; PromotedIntegers&quot;</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 4)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; SoftenedFloats&quot;</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 8)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ScalarizedVectors&quot;</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 16)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ExpandedIntegers&quot;</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 32)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ExpandedFloats&quot;</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 64)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; SplitVectors&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (Mapped &amp; 128)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; WidenedVectors&quot;</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// Checked that NewNodes are only used by other NewNodes.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewNodes.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = NewNodes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> UI = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a>(), UE = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a>();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         UI != UE; ++UI)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      assert(UI-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; <span class="stringliteral">&quot;NewNode used by non-NewNode!&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// run - This is the main entry point for the type legalizer.  This does a</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/// top-down traversal of the dag, legalizing types as it goes.  Returns &quot;true&quot;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// if it made any changes.</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classllvm_1_1DAGTypeLegalizer.html#a39cafb39798d9b0f3b611b9ee0fff149">  179</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#a39cafb39798d9b0f3b611b9ee0fff149">DAGTypeLegalizer::run</a>() {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Create a dummy node (which is not added to allnodes), that adds a reference</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// to the root node, preventing it from being deleted, and tracking any</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// changes of the root.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="classllvm_1_1HandleSDNode.html">HandleSDNode</a> <a class="code" href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>(DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a2afe36f1344e00c9ef5f8cdb39d21890">getRoot</a>());</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>.setNodeId(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// The root of the dag may dangle to deleted nodes until the type legalizer is</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// done.  Set it to null to avoid confusion.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a>(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>());</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// Walk all nodes in the graph, assigning them a NodeId of &#39;ReadyToProcess&#39;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// (and remembering them) if they are leaves and assigning &#39;Unanalyzed&#39; if</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// non-leaves.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">SelectionDAG::allnodes_iterator</a> I = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#ac493b7df1666d70c1b355c82028148f0">allnodes_begin</a>(),</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;       E = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a21c371ac00fe037f24e3f48cb62d2048">allnodes_end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (I-&gt;getNumOperands() == 0) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      I-&gt;setNodeId(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      Worklist.push_back(I);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      I-&gt;setNodeId(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// Now that we have a set of nodes to process, handle them all.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#ifndef XDEBUG</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LegalizeTypes_8cpp.html#ab7fbd43620ad37bfb6f0ed6d717319b6">EnableExpensiveChecks</a>)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      PerformExpensiveChecks();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N = Worklist.back();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    Worklist.pop_back();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a> &amp;&amp;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;           <span class="stringliteral">&quot;Node should be ready if on worklist!&quot;</span>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (IgnoreNodeResults(N))</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">goto</span> ScanOperands;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Scan the values produced by the node, checking to see if any result</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// types are illegal.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, NumResults = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumResults; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="structllvm_1_1EVT.html">EVT</a> ResultVT = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">switch</span> (getTypeAction(ResultVT)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193af54ec6880362512f9fec982cd4ce39fb">TargetLowering::TypeLegal</a>:</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">// The following calls must take care of *all* of the node&#39;s results,</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="comment">// not just the illegal result they were passed (this includes results</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="comment">// with a legal type).  Results can be remapped using ReplaceValueWith,</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">// or their promoted/expanded/etc values registered in PromotedIntegers,</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="comment">// ExpandedIntegers etc.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">TargetLowering::TypePromoteInteger</a>:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        PromoteIntegerResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5c111d159cec321b85802cb1baba7f12">TargetLowering::TypeExpandInteger</a>:</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        ExpandIntegerResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a2f11b8376488870063cf0c3036fb9577">TargetLowering::TypeSoftenFloat</a>:</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        SoftenFloatResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a43bc669b0f21542131c6623548c567e3">TargetLowering::TypeExpandFloat</a>:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        ExpandFloatResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193aba2534b602f98a2952464c3682a39dbc">TargetLowering::TypeScalarizeVector</a>:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        ScalarizeVectorResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a40cd81ebfaf97cef327ad65d37b816da">TargetLowering::TypeSplitVector</a>:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        SplitVectorResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5290057031a9bc71850f61e757cb940e">TargetLowering::TypeWidenVector</a>:</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        WidenVectorResult(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">goto</span> NodeDone;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;ScanOperands:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Scan the operand list for the node, handling any nodes with operands that</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// are illegal.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">unsigned</span> NumOperands = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">bool</span> NeedsReanalyzing = <span class="keyword">false</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">for</span> (i = 0; i != NumOperands; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">if</span> (IgnoreNodeResults(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(i).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="structllvm_1_1EVT.html">EVT</a> OpVT = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(i).<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">switch</span> (getTypeAction(OpVT)) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193af54ec6880362512f9fec982cd4ce39fb">TargetLowering::TypeLegal</a>:</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="comment">// The following calls must either replace all of the node&#39;s results</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="comment">// using ReplaceValueWith, and return &quot;false&quot;; or update the node&#39;s</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="comment">// operands in place, and return &quot;true&quot;.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">TargetLowering::TypePromoteInteger</a>:</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        NeedsReanalyzing = PromoteIntegerOperand(N, i);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5c111d159cec321b85802cb1baba7f12">TargetLowering::TypeExpandInteger</a>:</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        NeedsReanalyzing = ExpandIntegerOperand(N, i);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a2f11b8376488870063cf0c3036fb9577">TargetLowering::TypeSoftenFloat</a>:</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        NeedsReanalyzing = SoftenFloatOperand(N, i);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a43bc669b0f21542131c6623548c567e3">TargetLowering::TypeExpandFloat</a>:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        NeedsReanalyzing = ExpandFloatOperand(N, i);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193aba2534b602f98a2952464c3682a39dbc">TargetLowering::TypeScalarizeVector</a>:</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        NeedsReanalyzing = ScalarizeVectorOperand(N, i);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a40cd81ebfaf97cef327ad65d37b816da">TargetLowering::TypeSplitVector</a>:</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        NeedsReanalyzing = SplitVectorOperand(N, i);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5290057031a9bc71850f61e757cb940e">TargetLowering::TypeWidenVector</a>:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        NeedsReanalyzing = WidenVectorOperand(N, i);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// The sub-method updated N in place.  Check to see if any operands are new,</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// and if so, mark them.  If the node needs revisiting, don&#39;t add all users</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// to the worklist etc.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (NeedsReanalyzing) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a> &amp;&amp; <span class="stringliteral">&quot;Node ID recalculated?&quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">// Recompute the NodeId and correct processed operands, adding the node to</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment">// the worklist if ready.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = AnalyzeNewNode(N);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> (M == N)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// The node didn&#39;t morph - nothing special to do, it will be revisited.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">// The node morphed - this is equivalent to legalizing by replacing every</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// value of N with the corresponding value of M.  So do that now.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() == M-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() &amp;&amp;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;             <span class="stringliteral">&quot;Node morphing changed the number of results!&quot;</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">// Replacing the value takes care of remapping the new value.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        ReplaceValueWith(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, i), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(M, i));</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; <span class="stringliteral">&quot;Unexpected node state!&quot;</span>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="comment">// The node continues to live on as part of the NewNode fungus that</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="comment">// grows on top of the useful nodes.  Nothing more needs to be done</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">// with it - move on to the next node.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (i == NumOperands) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Legally typed node: &quot;</span>; N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(&amp;DAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;NodeDone:</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// If we reach here, the node was processed, potentially creating new nodes.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Mark it as processed and add its users to the worklist as appropriate.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a> &amp;&amp; <span class="stringliteral">&quot;Node ID recalculated?&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> UI = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a>(), E = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a>();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         UI != E; ++UI) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="classllvm_1_1User.html">User</a> = *UI;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordtype">int</span> NodeId = User-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">// This node has two options: it can either be a new node or its Node ID</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="comment">// may be a count of the number of operands it has that are not ready.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">if</span> (NodeId &gt; 0) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        User-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(NodeId-1);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// If this was the last use it was waiting on, add it to the ready list.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (NodeId-1 == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a>)</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          Worklist.push_back(User);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="comment">// If this is an unreachable new node, then ignore it.  If it ever becomes</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="comment">// reachable by being used by a newly created node then it will be handled</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="comment">// by AnalyzeNewNode.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">if</span> (NodeId == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// Otherwise, this node is new: this is the first operand of it that</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// became ready.  Its new NodeId is the number of operands it has minus 1</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// (as this node is now processed).</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      assert(NodeId == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a> &amp;&amp; <span class="stringliteral">&quot;Unknown node ID!&quot;</span>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      User-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(User-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>() - 1);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// If the node only has a single operand, it is now ready.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>() == 1)</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        Worklist.push_back(User);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#ifndef XDEBUG</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LegalizeTypes_8cpp.html#ab7fbd43620ad37bfb6f0ed6d717319b6">EnableExpensiveChecks</a>)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    PerformExpensiveChecks();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// If the root changed (e.g. it was a dead load) update the root.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a>(<a class="code" href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>.getValue());</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// Remove dead nodes.  This is important to do for cleanliness but also before</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// the checking loop below.  Implicit folding by the DAG.getNode operators and</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// node morphing can cause unreachable nodes to be around with their flags set</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// to new.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a92c8c043c2a2d8db5b6cf9767394b747">RemoveDeadNodes</a>();</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// In a debug build, scan all the nodes to make sure we found them all.  This</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// ensures that there are no cycles and that everything got processed.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">SelectionDAG::allnodes_iterator</a> I = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#ac493b7df1666d70c1b355c82028148f0">allnodes_begin</a>(),</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;       E = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a21c371ac00fe037f24e3f48cb62d2048">allnodes_end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">bool</span> Failed = <span class="keyword">false</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Check that all result types are legal.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (!IgnoreNodeResults(I))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, NumVals = I-&gt;getNumValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumVals; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> (!isTypeLegal(I-&gt;getValueType(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Result type &quot;</span> &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; illegal!\n&quot;</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Check that all operand types are legal.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, NumOps = I-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumOps; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (!IgnoreNodeResults(I-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getNode()) &amp;&amp;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          !isTypeLegal(I-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getValueType())) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Operand type &quot;</span> &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; illegal!\n&quot;</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (I-&gt;getNodeId() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;       <span class="keywordflow">if</span> (I-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New node not analyzed?\n&quot;</span>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a>)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unanalyzed node not noticed?\n&quot;</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I-&gt;getNodeId() &gt; 0)</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Operand not processed?\n&quot;</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I-&gt;getNodeId() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a>)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;         <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not added to worklist?\n&quot;</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       Failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (Failed) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      I-&gt;dump(&amp;DAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/// AnalyzeNewNode - The specified node is the root of a subtree of potentially</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// new nodes.  Correct any processed operands (this may change the node) and</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// calculate the NodeId.  If the node itself changes to a processed node, it</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// is not remapped - the caller needs to take care of this.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/// Returns the potentially changed node.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *DAGTypeLegalizer::AnalyzeNewNode(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// If this was an existing node that is already done, we&#39;re done.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a>)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> N;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// Remove any stale map entries.</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  ExpungeNode(N);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// Okay, we know that this node is new.  Recursively walk all of its operands</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// to see if they are new also.  The depth of this walk is bounded by the size</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// of the new tree that was constructed (usually 2-3 nodes), so we don&#39;t worry</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// about revisiting of nodes.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// As we walk the operands, keep track of the number of nodes that are</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// processed.  If non-zero, this will become the new nodeid of this node.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// Operands may morph when they are analyzed.  If so, the node will be</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// updated after all operands have been analyzed.  Since this is rare,</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// the code tries to minimize overhead in the non-morphing case.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a> NewOps;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">unsigned</span> NumProcessed = 0;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> OrigOp = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op = OrigOp;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    AnalyzeNewValue(Op); <span class="comment">// Op may morph.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      ++NumProcessed;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (!NewOps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="comment">// Some previous operand changed.  Add this one to the list.</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op != OrigOp) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">// This is the first operand to change - add all operands so far.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      NewOps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a20f382e841761654032bf8b4712e805f">op_begin</a>(), N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a20f382e841761654032bf8b4712e805f">op_begin</a>() + <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Some operands changed - update the node.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (!NewOps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a>(N, &amp;NewOps[0], NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (M != N) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// The node morphed into a different node.  Normally for this to happen</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">// the original node would have to be marked NewNode.  However this can</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// in theory momentarily not be the case while ReplaceValueWith is doing</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="comment">// its stuff.  Mark the original node NewNode to help sanity checking.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">if</span> (M-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; M-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">Unanalyzed</a>)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// It morphed into a previously analyzed node - nothing more to do.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">return</span> M;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// It morphed into a different new node.  Do the equivalent of passing</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="comment">// it to AnalyzeNewNode: expunge it and calculate the NodeId.  No need</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">// to remap the operands, since they are the same as the operands we</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// remapped above.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      N = <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      ExpungeNode(N);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// Calculate the NodeId.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>() - NumProcessed);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">ReadyToProcess</a>)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    Worklist.push_back(N);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/// AnalyzeNewValue - Call AnalyzeNewNode, updating the node in Val if needed.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// If the node changes to a processed node, then remap it.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::AnalyzeNewValue(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Val) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  Val.<a class="code" href="classllvm_1_1SDValue.html#ad575e4867727668f7d50952bc9e1a1cd">setNode</a>(AnalyzeNewNode(Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">if</span> (Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// We were passed a processed node, or it morphed into one - remap it.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    RemapValue(Val);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">/// ExpungeNode - If N has a bogus mapping in ReplacedValues, eliminate it.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">/// This can occur when a node is deleted then reallocated as a new node -</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">/// the mapping in ReplacedValues applies to the deleted node, not the new</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">/// one.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// The only map that can have a deleted node as a source is ReplacedValues.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/// Other maps can have deleted nodes as targets, but since their looked-up</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/// values are always immediately remapped using RemapValue, resulting in a</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/// not-deleted node, this is harmless as long as ReplacedValues/RemapValue</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/// always performs correct mappings.  In order to keep the mapping correct,</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// ExpungeNode should be called on any new nodes *before* adding them as</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">/// either source or target to ReplacedValues (which typically means calling</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// Expunge when a new node is first seen, since it may no longer be marked</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/// NewNode by the time it is added to ReplacedValues).</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::ExpungeNode(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a>)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// If N is not remapped by ReplacedValues then there is nothing to do.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, e;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">for</span> (i = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (ReplacedValues.find(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, i)) != ReplacedValues.end())</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (i == e)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// Remove N from all maps - this is expensive but rare.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = PromotedIntegers.begin(),</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;       E = PromotedIntegers.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = SoftenedFloats.begin(),</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;       E = SoftenedFloats.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = ScalarizedVectors.begin(),</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;       E = ScalarizedVectors.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = WidenedVectors.begin(),</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;       E = WidenedVectors.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>, std::pair&lt;SDValue, SDValue&gt; &gt;::iterator</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;       I = ExpandedIntegers.begin(), E = ExpandedIntegers.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>){</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    RemapValue(I-&gt;second.first);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    RemapValue(I-&gt;second.second);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>, std::pair&lt;SDValue, SDValue&gt; &gt;::iterator</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;       I = ExpandedFloats.begin(), E = ExpandedFloats.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    RemapValue(I-&gt;second.first);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    RemapValue(I-&gt;second.second);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>, std::pair&lt;SDValue, SDValue&gt; &gt;::iterator</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;       I = SplitVectors.begin(), E = SplitVectors.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    assert(I-&gt;first.getNode() != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    RemapValue(I-&gt;second.first);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    RemapValue(I-&gt;second.second);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = ReplacedValues.begin(),</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;       E = ReplacedValues.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    ReplacedValues.erase(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, i));</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// RemapValue - If the specified value was already legalized to another value,</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/// replace it by that value.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::RemapValue(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;N) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;SDValue, SDValue&gt;::iterator</a> I = ReplacedValues.find(N);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (I != ReplacedValues.end()) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// Use path compression to speed up future lookups if values get multiply</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// replaced with other values.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    RemapValue(I-&gt;second);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    N = I-&gt;second;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// Note that it is possible to have N.getNode()-&gt;getNodeId() == NewNode at</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// this point because it is possible for a node to be put in the map before</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// being processed.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">  /// NodeUpdateListener - This class is a DAGUpdateListener that listens for</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">  /// updates to nodes and recomputes their ready state.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>NodeUpdateListener : <span class="keyword">public</span> <a class="code" href="structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">SelectionDAG::DAGUpdateListener</a> {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a> &amp;DTL;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;SDNode*, 16&gt;</a> &amp;NodesToAnalyze;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keyword">explicit</span> NodeUpdateListener(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a> &amp;dtl,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;SDNode*, 16&gt;</a> &amp;nta)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      : <a class="code" href="classllvm_1_1SelectionDAG.html#ae465b76a465f0d698764e660f1be55d0">SelectionDAG::DAGUpdateListener</a>(dtl.<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#a8b1050d762b2748264df08db6b97e4a6">getDAG</a>()),</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        DTL(dtl), NodesToAnalyze(nta) {}</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> NodeDeleted(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *E) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">DAGTypeLegalizer::ReadyToProcess</a> &amp;&amp;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;             N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">DAGTypeLegalizer::Processed</a> &amp;&amp;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;             <span class="stringliteral">&quot;Invalid node ID for RAUW deletion!&quot;</span>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">// It is possible, though rare, for the deleted node N to occur as a</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="comment">// target in a map, so note the replacement N -&gt; E in ReplacedValues.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      assert(E &amp;&amp; <span class="stringliteral">&quot;Node not replaced?&quot;</span>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      DTL.<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#a78a7f585aa9b0de8a1d509d616cc1b5e">NoteDeletion</a>(N, E);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="comment">// In theory the deleted node could also have been scheduled for analysis.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">// So remove it from the set of nodes which will be analyzed.</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">remove</a>(N);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="comment">// In general nothing needs to be done for E, since it didn&#39;t change but</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="comment">// only gained new uses.  However N -&gt; E was just added to ReplacedValues,</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="comment">// and the result of a ReplacedValues mapping is not allowed to be marked</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="comment">// NewNode.  So if E is marked NewNode, then it needs to be analyzed.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">DAGTypeLegalizer::NewNode</a>)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(E);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> NodeUpdated(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="comment">// Node updates can mean pretty much anything.  It is possible that an</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="comment">// operand was set to something already processed (f.e.) in which case</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="comment">// this node could become ready.  Recompute its flags.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">DAGTypeLegalizer::ReadyToProcess</a> &amp;&amp;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;             N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">DAGTypeLegalizer::Processed</a> &amp;&amp;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;             <span class="stringliteral">&quot;Invalid node ID for RAUW deletion!&quot;</span>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(<a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">DAGTypeLegalizer::NewNode</a>);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(N);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  };</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// ReplaceValueWith - The specified value was legalized to the specified other</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/// value.  Update the DAG and NodeIds replacing any uses of From to use To</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/// instead.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::ReplaceValueWith(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> From, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> To) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  assert(From.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() != To.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() &amp;&amp; <span class="stringliteral">&quot;Potential legalization loop!&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// If expansion produced new nodes, make sure they are properly marked.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  ExpungeNode(From.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>());</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  AnalyzeNewValue(To); <span class="comment">// Expunges To.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// Anything that used the old node should now use the new one.  Note that this</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// can potentially cause recursive merging.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;SDNode*, 16&gt;</a> NodesToAnalyze;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  NodeUpdateListener NUL(*<span class="keyword">this</span>, NodesToAnalyze);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    DAG.ReplaceAllUsesOfValueWith(From, To);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// The old node may still be present in a map like ExpandedIntegers or</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">// PromotedIntegers.  Inform maps about the replacement.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    ReplacedValues[From] = To;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// Process the list of nodes that need to be reanalyzed.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">while</span> (!NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">empty</a>()) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N = NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#ab3c81c0f4bd671c840c2839c4c614e02">back</a>();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      NodesToAnalyze.<a class="code" href="classllvm_1_1SetVector.html#a818774b6d4f0dab505e6906086908eeb">pop_back</a>();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">DAGTypeLegalizer::NewNode</a>)</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment">// The node was analyzed while reanalyzing an earlier node - it is safe</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="comment">// to skip.  Note that this is not a morphing node - otherwise it would</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">// still be marked NewNode.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="comment">// Analyze the node&#39;s operands and recalculate the node ID.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = AnalyzeNewNode(N);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (M != N) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="comment">// The node morphed into a different node.  Make everyone use the new</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="comment">// node instead.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        assert(M-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() != <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">NewNode</a> &amp;&amp; <span class="stringliteral">&quot;Analysis resulted in NewNode!&quot;</span>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() == M-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() &amp;&amp;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;               <span class="stringliteral">&quot;Node morphing changed the number of results!&quot;</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> OldVal(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewVal(M, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          <span class="keywordflow">if</span> (M-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">Processed</a>)</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            RemapValue(NewVal);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          DAG.ReplaceAllUsesOfValueWith(OldVal, NewVal);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;          <span class="comment">// OldVal may be a target of the ReplacedValues map which was marked</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          <span class="comment">// NewNode to force reanalysis because it was updated.  Ensure that</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          <span class="comment">// anything that ReplacedValues mapped to OldVal will now be mapped</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;          <span class="comment">// all the way to NewVal.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          ReplacedValues[OldVal] = NewVal;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="comment">// The original node continues to exist in the DAG, marked NewNode.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// When recursively update nodes with new nodes, it is possible to have</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// new uses of From due to CSE. If this happens, replace the new uses of</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// From with To.</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  } <span class="keywordflow">while</span> (!From.<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>());</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetPromotedInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  assert(Result.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() ==</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;         TLI.getTypeToTransformTo(*DAG.getContext(), Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()) &amp;&amp;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <span class="stringliteral">&quot;Invalid type for promoted integer&quot;</span>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  AnalyzeNewValue(Result);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;OpEntry = PromotedIntegers[Op];</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  assert(OpEntry.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0 &amp;&amp; <span class="stringliteral">&quot;Node is already promoted!&quot;</span>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  OpEntry = Result;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetSoftenedFloat(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  assert(Result.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() ==</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         TLI.getTypeToTransformTo(*DAG.getContext(), Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()) &amp;&amp;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         <span class="stringliteral">&quot;Invalid type for softened float&quot;</span>);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  AnalyzeNewValue(Result);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;OpEntry = SoftenedFloats[Op];</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  assert(OpEntry.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0 &amp;&amp; <span class="stringliteral">&quot;Node is already converted to integer!&quot;</span>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  OpEntry = Result;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetScalarizedVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// Note that in some cases vector operation operands may be greater than</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// the vector element type. For example BUILD_VECTOR of type &lt;1 x i1&gt; with</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// a constant i8 operand.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  assert(Result.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() &gt;=</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a3a07c062cc9330acd8e8c4e3930cbb25">getVectorElementType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() &amp;&amp;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <span class="stringliteral">&quot;Invalid type for scalarized vector&quot;</span>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  AnalyzeNewValue(Result);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;OpEntry = ScalarizedVectors[Op];</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  assert(OpEntry.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0 &amp;&amp; <span class="stringliteral">&quot;Node is already scalarized!&quot;</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  OpEntry = Result;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::GetExpandedInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;<a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">Lo</a>,</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;<a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">Hi</a>) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = ExpandedIntegers[Op];</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  RemapValue(Entry.first);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  RemapValue(Entry.second);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  assert(Entry.first.getNode() &amp;&amp; <span class="stringliteral">&quot;Operand isn&#39;t expanded&quot;</span>);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  Lo = Entry.first;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  Hi = Entry.second;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetExpandedInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Lo,</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Hi) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  assert(Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() ==</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;         TLI.getTypeToTransformTo(*DAG.getContext(), Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()) &amp;&amp;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;         Hi.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() &amp;&amp;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;         <span class="stringliteral">&quot;Invalid type for expanded integer&quot;</span>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// Lo/Hi may have been newly allocated, if so, add nodeid&#39;s as relevant.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  AnalyzeNewValue(Lo);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  AnalyzeNewValue(Hi);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// Remember that this is the result of the node.</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = ExpandedIntegers[Op];</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  assert(Entry.first.getNode() == 0 &amp;&amp; <span class="stringliteral">&quot;Node already expanded&quot;</span>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  Entry.first = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">Lo</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  Entry.second = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">Hi</a>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::GetExpandedFloat(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Lo,</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Hi) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = ExpandedFloats[Op];</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  RemapValue(Entry.first);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  RemapValue(Entry.second);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  assert(Entry.first.getNode() &amp;&amp; <span class="stringliteral">&quot;Operand isn&#39;t expanded&quot;</span>);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  Lo = Entry.first;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  Hi = Entry.second;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetExpandedFloat(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Lo,</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Hi) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  assert(Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() ==</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         TLI.getTypeToTransformTo(*DAG.getContext(), Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()) &amp;&amp;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         Hi.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() &amp;&amp;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;         <span class="stringliteral">&quot;Invalid type for expanded float&quot;</span>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// Lo/Hi may have been newly allocated, if so, add nodeid&#39;s as relevant.</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  AnalyzeNewValue(Lo);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  AnalyzeNewValue(Hi);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment">// Remember that this is the result of the node.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = ExpandedFloats[Op];</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  assert(Entry.first.getNode() == 0 &amp;&amp; <span class="stringliteral">&quot;Node already expanded&quot;</span>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  Entry.first = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">Lo</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  Entry.second = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">Hi</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::GetSplitVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Lo,</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Hi) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = SplitVectors[Op];</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  RemapValue(Entry.first);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  RemapValue(Entry.second);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  assert(Entry.first.getNode() &amp;&amp; <span class="stringliteral">&quot;Operand isn&#39;t split&quot;</span>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  Lo = Entry.first;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  Hi = Entry.second;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetSplitVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Lo,</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Hi) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  assert(Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a3a07c062cc9330acd8e8c4e3930cbb25">getVectorElementType</a>() ==</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a3a07c062cc9330acd8e8c4e3930cbb25">getVectorElementType</a>() &amp;&amp;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         2*Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a42bca41d2438197c12b6db2c710a959c">getVectorNumElements</a>() ==</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;         Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a42bca41d2438197c12b6db2c710a959c">getVectorNumElements</a>() &amp;&amp;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;         Hi.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() &amp;&amp;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <span class="stringliteral">&quot;Invalid type for split vector&quot;</span>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// Lo/Hi may have been newly allocated, if so, add nodeid&#39;s as relevant.</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  AnalyzeNewValue(Lo);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  AnalyzeNewValue(Hi);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// Remember that this is the result of the node.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  std::pair&lt;SDValue, SDValue&gt; &amp;Entry = SplitVectors[Op];</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  assert(Entry.first.getNode() == 0 &amp;&amp; <span class="stringliteral">&quot;Node already split&quot;</span>);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  Entry.first = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">Lo</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  Entry.second = <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">Hi</a>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;}</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="keywordtype">void</span> DAGTypeLegalizer::SetWidenedVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  assert(Result.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() ==</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         TLI.getTypeToTransformTo(*DAG.getContext(), Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()) &amp;&amp;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         <span class="stringliteral">&quot;Invalid type for widened vector&quot;</span>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  AnalyzeNewValue(Result);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;OpEntry = WidenedVectors[Op];</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  assert(OpEntry.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0 &amp;&amp; <span class="stringliteral">&quot;Node already widened!&quot;</span>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  OpEntry = Result;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;}</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">// Utilities.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">/// BitConvertToInteger - Convert to an integer of the same size.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::BitConvertToInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordtype">unsigned</span> BitWidth = Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">return</span> DAG.getNode(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a412ddf522b53f07690a86bffba1278e7">ISD::BITCAST</a>, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Op),</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                     <a class="code" href="structllvm_1_1EVT.html#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(*DAG.getContext(), BitWidth), Op);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">/// BitConvertVectorToIntegerVector - Convert to a vector of integers of the</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">/// same size.</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::BitConvertVectorToIntegerVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  assert(Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a73f7c824cad61a47c21bf6d652ae2fd7">isVector</a>() &amp;&amp; <span class="stringliteral">&quot;Only applies to vectors!&quot;</span>);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordtype">unsigned</span> EltWidth = Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a3a07c062cc9330acd8e8c4e3930cbb25">getVectorElementType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>();</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> EltNVT = <a class="code" href="structllvm_1_1EVT.html#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(*DAG.getContext(), EltWidth);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a42bca41d2438197c12b6db2c710a959c">getVectorNumElements</a>();</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordflow">return</span> DAG.getNode(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a412ddf522b53f07690a86bffba1278e7">ISD::BITCAST</a>, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Op),</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                     <a class="code" href="structllvm_1_1EVT.html#a18c2edf1939f6e87f1e586b815f398cd">EVT::getVectorVT</a>(*DAG.getContext(), EltNVT, NumElts), Op);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::CreateStackStoreLoad(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op,</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                               <a class="code" href="structllvm_1_1EVT.html">EVT</a> DestVT) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Op);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// Create the stack frame object.  Make sure it is aligned for both</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// the source and destination types.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> StackPtr = DAG.CreateStackTemporary(Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), DestVT);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// Emit a store to the stack slot.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> = DAG.getStore(DAG.getEntryNode(), dl, Op, StackPtr,</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                               <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>, 0);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// Result is a load from the stack slot.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">return</span> DAG.getLoad(DestVT, dl, Store, StackPtr, <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                     <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">/// CustomLowerNode - Replace the node&#39;s results with custom code provided</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">/// by the target and return &quot;true&quot;, or do nothing and return &quot;false&quot;.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">/// The last parameter is FALSE if we are dealing with a node with legal</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">/// result types and illegal operand. The second parameter denotes the type of</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">/// illegal OperandNo in that case.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">/// The last parameter being TRUE means we are dealing with a</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">/// node with illegal result types. The second parameter denotes the type of</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/// illegal ResNo in that case.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DAGTypeLegalizer::CustomLowerNode(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N, <a class="code" href="structllvm_1_1EVT.html">EVT</a> VT, <span class="keywordtype">bool</span> LegalizeResult) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// See if the target wants to custom lower this node.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">if</span> (TLI.getOperationAction(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>(), VT) != <a class="code" href="classllvm_1_1TargetLoweringBase.html#a2856b7fb24e0784cfc29ddfd5be74d1ba3441acf8576e4bbf48e9bd73ca3c0d8c">TargetLowering::Custom</a>)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a> Results;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (LegalizeResult)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    TLI.ReplaceNodeResults(N, Results, DAG);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    TLI.LowerOperationWrapper(N, Results, DAG);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">if</span> (Results.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// The target didn&#39;t want to custom lower it after all.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Make everything that once used N&#39;s values now use those in Results instead.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  assert(Results.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() &amp;&amp;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         <span class="stringliteral">&quot;Custom lowering returned the wrong number of results!&quot;</span>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Results.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    ReplaceValueWith(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Results[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">/// CustomWidenLowerNode - Widen the node&#39;s results with custom code provided</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">/// by the target and return &quot;true&quot;, or do nothing and return &quot;false&quot;.</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DAGTypeLegalizer::CustomWidenLowerNode(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N, <a class="code" href="structllvm_1_1EVT.html">EVT</a> VT) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// See if the target wants to custom lower this node.</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">if</span> (TLI.getOperationAction(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>(), VT) != <a class="code" href="classllvm_1_1TargetLoweringBase.html#a2856b7fb24e0784cfc29ddfd5be74d1ba3441acf8576e4bbf48e9bd73ca3c0d8c">TargetLowering::Custom</a>)</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a> Results;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  TLI.ReplaceNodeResults(N, Results, DAG);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordflow">if</span> (Results.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="comment">// The target didn&#39;t want to custom widen lower its result  after all.</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// Update the widening map.</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  assert(Results.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>() &amp;&amp;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;         <span class="stringliteral">&quot;Custom lowering returned the wrong number of results!&quot;</span>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Results.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    SetWidenedVector(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Results[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::DisintegrateMERGE_VALUES(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N, <span class="keywordtype">unsigned</span> ResNo) {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != ResNo)</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      ReplaceValueWith(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(ResNo));</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">/// GetPairElements - Use ISD::EXTRACT_ELEMENT nodes to extract the low and</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">/// high parts of the given value.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::GetPairElements(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Pair,</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                                       <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Lo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Hi) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Pair);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> NVT = TLI.getTypeToTransformTo(*DAG.getContext(), Pair.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>());</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  Lo = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7e6dca8262a3de788d1bab4ba184d675">ISD::EXTRACT_ELEMENT</a>, dl, NVT, Pair,</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                   DAG.getIntPtrConstant(0));</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  Hi = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7e6dca8262a3de788d1bab4ba184d675">ISD::EXTRACT_ELEMENT</a>, dl, NVT, Pair,</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                   DAG.getIntPtrConstant(1));</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::GetVectorElementPointer(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> VecPtr, <a class="code" href="structllvm_1_1EVT.html">EVT</a> EltVT,</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                                                  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Index) {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Index);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// Make sure the index type is big enough to compute in.</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  Index = DAG.getZExtOrTrunc(Index, dl, TLI.getPointerTy());</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// Calculate the element offset and add it to the pointer.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordtype">unsigned</span> EltSize = EltVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() / 8; <span class="comment">// FIXME: should be ABI size.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  Index = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>, dl, Index.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), Index,</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                      DAG.getConstant(EltSize, Index.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>()));</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> DAG.getNode(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>, dl, Index.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), Index, VecPtr);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/// JoinIntegers - Build an integer with low bits Lo and high bits Hi.</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::JoinIntegers(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Lo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Hi) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// Arbitrarily use dlHi for result SDLoc</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dlHi(Hi);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dlLo(Lo);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> LVT = Lo.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>();</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> HVT = Hi.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> NVT = <a class="code" href="structllvm_1_1EVT.html#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(*DAG.getContext(),</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                              LVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() + HVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>());</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  Lo = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO_EXTEND</a>, dlLo, NVT, Lo);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  Hi = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY_EXTEND</a>, dlHi, NVT, Hi);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  Hi = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, dlHi, NVT, Hi,</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                   DAG.getConstant(LVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>(), TLI.getPointerTy()));</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">return</span> DAG.getNode(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>, dlHi, NVT, Lo, Hi);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;}</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">/// LibCallify - Convert the node into a libcall with the same prototype.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::LibCallify(<a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> LC, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N,</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                     <span class="keywordtype">bool</span> isSigned) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordtype">unsigned</span> NumOps = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>();</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(N);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">if</span> (NumOps == 0) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">return</span> TLI.makeLibCall(DAG, LC, N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(0), 0, 0, isSigned,</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                           dl).first;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumOps == 1) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> TLI.makeLibCall(DAG, LC, N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(0), &amp;Op, 1, isSigned,</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                           dl).first;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumOps == 2) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[2] = { N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0), N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1) };</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> TLI.makeLibCall(DAG, LC, N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(0), Ops, 2, isSigned,</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                           dl).first;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a> Ops(NumOps);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumOps; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">return</span> TLI.makeLibCall(DAG, LC, N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(0),</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                         &amp;Ops[0], NumOps, isSigned, dl).first;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">// ExpandChainLibCall - Expand a node into a call to a libcall. Similar to</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">// ExpandLibCall except that the first operand is the in-chain.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;std::pair&lt;SDValue, SDValue&gt;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;DAGTypeLegalizer::ExpandChainLibCall(<a class="code" href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">RTLIB::Libcall</a> LC,</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                                         <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node,</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                                         <span class="keywordtype">bool</span> isSigned) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> InChain = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="classllvm_1_1TargetLowering.html#ab6132d2ff56c64c551cf71e714dbb5c2">TargetLowering::ArgListTy</a> Args;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <a class="code" href="structllvm_1_1TargetLowering_1_1ArgListEntry.html">TargetLowering::ArgListEntry</a> Entry;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="structllvm_1_1EVT.html">EVT</a> ArgVT = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>();</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTy = ArgVT.<a class="code" href="structllvm_1_1EVT.html#a226345d0c8262e9469d30a993d1656ff">getTypeForEVT</a>(*DAG.getContext());</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    Entry.<a class="code" href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#a7d3f92aa62dcbaa4321822b441e384e6">Node</a> = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    Entry.<a class="code" href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#a5d2b21233cb3005cfa01f9cfb260f094">Ty</a> = ArgTy;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    Entry.<a class="code" href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#ab7802dda6f90fdff2523fe0092b6f568">isSExt</a> = isSigned;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    Entry.<a class="code" href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#aefa8d74587b487931cadd874614c0df4">isZExt</a> = !isSigned;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    Args.push_back(Entry);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Callee = DAG.getExternalSymbol(TLI.getLibcallName(LC),</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                                         TLI.getPointerTy());</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a>(0).<a class="code" href="structllvm_1_1EVT.html#a226345d0c8262e9469d30a993d1656ff">getTypeForEVT</a>(*DAG.getContext());</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <a class="code" href="structllvm_1_1TargetLowering_1_1CallLoweringInfo.html">TargetLowering::</a></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<a class="code" href="structllvm_1_1TargetLowering_1_1CallLoweringInfo.html">  CallLoweringInfo</a> CLI(InChain, RetTy, isSigned, !isSigned, <span class="keyword">false</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                    0, TLI.getLibcallCallingConv(LC), <span class="comment">/*isTailCall=*/</span><span class="keyword">false</span>,</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                    <span class="comment">/*doesNotReturn=*/</span><span class="keyword">false</span>, <span class="comment">/*isReturnValueUsed=*/</span><span class="keyword">true</span>,</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                    Callee, Args, DAG, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Node));</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  std::pair&lt;SDValue, SDValue&gt; CallInfo = TLI.LowerCallTo(CLI);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">return</span> CallInfo;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/// PromoteTargetBoolean - Promote the given target boolean to a target boolean</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">/// of the given type.  A target boolean is an integer value, not necessarily of</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">/// type i1, the bits of which conform to getBooleanContents.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDValue.html">SDValue</a> DAGTypeLegalizer::PromoteTargetBoolean(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Bool, <a class="code" href="structllvm_1_1EVT.html">EVT</a> VT) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Bool);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">ISD::NodeType</a> ExtendCode =</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="classllvm_1_1TargetLoweringBase.html#affa111c5fcedf4f9c7eaf11be9977f32">TargetLowering::getExtendForContent</a>(TLI.getBooleanContents(VT.<a class="code" href="structllvm_1_1EVT.html#a73f7c824cad61a47c21bf6d652ae2fd7">isVector</a>()));</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">return</span> DAG.getNode(ExtendCode, dl, VT, Bool);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">/// SplitInteger - Return the lower LoVT bits of Op in Lo and the upper HiVT</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">/// bits in Hi.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::SplitInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op,</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                    <a class="code" href="structllvm_1_1EVT.html">EVT</a> LoVT, <a class="code" href="structllvm_1_1EVT.html">EVT</a> HiVT,</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Lo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Hi) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Op);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  assert(LoVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() + HiVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() ==</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid integer splitting!&quot;</span>);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  Lo = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, LoVT, Op);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  Hi = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, dl, Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), Op,</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                   DAG.getConstant(LoVT.<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>(), TLI.getPointerTy()));</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  Hi = DAG.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a>, dl, HiVT, Hi);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;}</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">/// SplitInteger - Return the lower and upper halves of Op&#39;s bits in a value</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">/// type half the size of Op&#39;s.</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAGTypeLegalizer::SplitInteger(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op,</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Lo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Hi) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> HalfVT = <a class="code" href="structllvm_1_1EVT.html#a752372e170e4e7c595bf8810bb52adf2">EVT::getIntegerVT</a>(*DAG.getContext(),</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                                 Op.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>().<a class="code" href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a>()/2);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  SplitInteger(Op, HalfVT, HalfVT, Lo, Hi);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;}</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">//  Entry Point</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">/// LegalizeTypes - This transforms the SelectionDAG into a SelectionDAG that</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">/// only uses types natively supported by the target.  Returns &quot;true&quot; if it made</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">/// any changes.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">/// Note that this is an involved process that may invalidate pointers into</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">/// the graph.</span></div><div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a"> 1106</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a>() {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1DAGTypeLegalizer.html#a5438ea08f38ef6b3bf1243490d779e48">DAGTypeLegalizer</a>(*this).run();</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a412ddf522b53f07690a86bffba1278e7"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a412ddf522b53f07690a86bffba1278e7">llvm::ISD::BITCAST</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00420">ISDOpcodes.h:420</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7e6dca8262a3de788d1bab4ba184d675"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7e6dca8262a3de788d1bab4ba184d675">llvm::ISD::EXTRACT_ELEMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00160">ISDOpcodes.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_affe59e12b70bcd9f5476f7ab289fa84a"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">llvm::SelectionDAG::LegalizeTypes</a></div><div class="ttdeci">bool LegalizeTypes()</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8cpp_source.html#l01106">LegalizeTypes.cpp:1106</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTXISD_html_a594ac167d52343b1fe4cec37bb7dc31ca7cff9cc4a40fe2b19129ee8e9b0ec645"><div class="ttname"><a href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca7cff9cc4a40fe2b19129ee8e9b0ec645">llvm::NVPTXISD::Dummy</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8h_source.html#l00053">NVPTXISelLowering.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a535ca517df1b4ae62e75475141e65787"><div class="ttname"><a href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">llvm::SDNode::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Dump this node, for debugging. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGDumper_8cpp_source.html#l00328">SelectionDAGDumper.cpp:328</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193aba2534b602f98a2952464c3682a39dbc"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193aba2534b602f98a2952464c3682a39dbc">llvm::TargetLoweringBase::TypeScalarizeVector</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00095">TargetLowering.h:95</a></div></div>
<div class="ttc" id="CallingConv_8h_html"><div class="ttname"><a href="CallingConv_8h.html">CallingConv.h</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="structllvm_1_1SelectionDAG_1_1DAGUpdateListener_html"><div class="ttname"><a href="structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">llvm::SelectionDAG::DAGUpdateListener</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00217">SelectionDAG.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ae465b76a465f0d698764e660f1be55d0"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ae465b76a465f0d698764e660f1be55d0">llvm::SelectionDAG::DAGUpdateListener</a></div><div class="ttdeci">friend struct DAGUpdateListener</div><div class="ttdoc">DAGUpdateListener is a friend so it can manipulate the listener stack. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00249">SelectionDAG.h:249</a></div></div>
<div class="ttc" id="namespacellvm_1_1RTLIB_html_a50a0bab21f1d14a86a1483ec283e4447"><div class="ttname"><a href="namespacellvm_1_1RTLIB.html#a50a0bab21f1d14a86a1483ec283e4447">llvm::RTLIB::Libcall</a></div><div class="ttdeci">Libcall</div><div class="ttdef"><b>Definition:</b> <a href="RuntimeLibcalls_8h_source.html#l00030">RuntimeLibcalls.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_af0d328f3f61168f4ea7d6e4044af4f97"><div class="ttname"><a href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">llvm::SDNode::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00369">SelectionDAGNodes.h:369</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_affa111c5fcedf4f9c7eaf11be9977f32"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#affa111c5fcedf4f9c7eaf11be9977f32">llvm::TargetLoweringBase::getExtendForContent</a></div><div class="ttdeci">static ISD::NodeType getExtendForContent(BooleanContent Content)</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00120">TargetLowering.h:120</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a226345d0c8262e9469d30a993d1656ff"><div class="ttname"><a href="structllvm_1_1EVT.html#a226345d0c8262e9469d30a993d1656ff">llvm::EVT::getTypeForEVT</a></div><div class="ttdeci">Type * getTypeForEVT(LLVMContext &amp;Context) const </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8cpp_source.html#l00180">ValueTypes.cpp:180</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_abc5c2f1d47a517373030133c6a102106"><div class="ttname"><a href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">llvm::SDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00548">SelectionDAGNodes.h:548</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a5c111d159cec321b85802cb1baba7f12"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5c111d159cec321b85802cb1baba7f12">llvm::TargetLoweringBase::TypeExpandInteger</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00092">TargetLowering.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a836c27481205f56e708fe0c15538d5ff"><div class="ttname"><a href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">llvm::SDNode::getOperand</a></div><div class="ttdeci">const SDValue &amp; getOperand(unsigned Num) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00554">SelectionDAGNodes.h:554</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html">llvm::DAGTypeLegalizer</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00035">LegalizeTypes.h:35</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1ArgListEntry_html_ab7802dda6f90fdff2523fe0092b6f568"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#ab7802dda6f90fdff2523fe0092b6f568">llvm::TargetLowering::ArgListEntry::isSExt</a></div><div class="ttdeci">bool isSExt</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01928">TargetLowering.h:1928</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a5689e9ae35c6ceb3b9377299c98e0e97"><div class="ttname"><a href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">llvm::SDNode::setNodeId</a></div><div class="ttdeci">void setNodeId(int Id)</div><div class="ttdoc">setNodeId - Set unique node id. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00420">SelectionDAGNodes.h:420</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a3d2e079387a6e69ce2c8bb27bf7c2f32"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">llvm::SelectionDAG::setRoot</a></div><div class="ttdeci">const SDValue &amp; setRoot(SDValue N)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00338">SelectionDAG.h:338</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">llvm::ISD::NodeType</a></div><div class="ttdeci">NodeType</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00039">ISDOpcodes.h:39</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1ArgListEntry_html_a7d3f92aa62dcbaa4321822b441e384e6"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#a7d3f92aa62dcbaa4321822b441e384e6">llvm::TargetLowering::ArgListEntry::Node</a></div><div class="ttdeci">SDValue Node</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01926">TargetLowering.h:1926</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a73f7c824cad61a47c21bf6d652ae2fd7"><div class="ttname"><a href="structllvm_1_1EVT.html#a73f7c824cad61a47c21bf6d652ae2fd7">llvm::EVT::isVector</a></div><div class="ttdeci">bool isVector() const </div><div class="ttdoc">isVector - Return true if this is a vector value type. </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00661">ValueTypes.h:661</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994acc58a6895ccc71b318f6eb9bd6a17ac2">llvm::DAGTypeLegalizer::Unanalyzed</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00052">LegalizeTypes.h:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">llvm::ISD::SHL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00306">ISDOpcodes.h:306</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_aed0958deb6d25f9fdccd7518e26b50f8"><div class="ttname"><a href="classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">llvm::SDNode::getValueType</a></div><div class="ttdeci">EVT getValueType(unsigned ResNo) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00609">SelectionDAGNodes.h:609</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a21c371ac00fe037f24e3f48cb62d2048"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a21c371ac00fe037f24e3f48cb62d2048">llvm::SelectionDAG::allnodes_end</a></div><div class="ttdeci">allnodes_const_iterator allnodes_end() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00318">SelectionDAG.h:318</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a6357ff5654c7cbe5fed8516dc8328eb4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::remove</a></div><div class="ttdeci">bool remove(const value_type &amp;X)</div><div class="ttdoc">Remove an item from the set vector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00118">SetVector.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a818774b6d4f0dab505e6906086908eeb"><div class="ttname"><a href="classllvm_1_1SetVector.html#a818774b6d4f0dab505e6906086908eeb">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdoc">Remove the last element of the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00167">SetVector.h:167</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a3a07c062cc9330acd8e8c4e3930cbb25"><div class="ttname"><a href="structllvm_1_1EVT.html#a3a07c062cc9330acd8e8c4e3930cbb25">llvm::EVT::getVectorElementType</a></div><div class="ttdeci">EVT getVectorElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00762">ValueTypes.h:762</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00102">SetVector.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_ab319fc51db27ec95fd50a910c7ccec94"><div class="ttname"><a href="classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">llvm::SDNode::getNumValues</a></div><div class="ttdeci">unsigned getNumValues() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00605">SelectionDAGNodes.h:605</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">llvm::ISD::ADD</a></div><div class="ttdoc">Simple integer binary arithmetic operators. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00176">ISDOpcodes.h:176</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a298a4f422dfc8478ad9cdd0a106cd5e4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00059">SetVector.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a2f11b8376488870063cf0c3036fb9577"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a2f11b8376488870063cf0c3036fb9577">llvm::TargetLoweringBase::TypeSoftenFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00093">TargetLowering.h:93</a></div></div>
<div class="ttc" id="LegalizeTypes_8cpp_html_ab7fbd43620ad37bfb6f0ed6d717319b6"><div class="ttname"><a href="LegalizeTypes_8cpp.html#ab7fbd43620ad37bfb6f0ed6d717319b6">EnableExpensiveChecks</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableExpensiveChecks(&quot;enable-legalize-types-checking&quot;, cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a3fad042e27ba626acf5366c845b352d3"><div class="ttname"><a href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">llvm::SDValue::getNode</a></div><div class="ttdeci">SDNode * getNode() const </div><div class="ttdoc">get the SDNode which holds the desired result </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00105">SelectionDAGNodes.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_a39cafb39798d9b0f3b611b9ee0fff149"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#a39cafb39798d9b0f3b611b9ee0fff149">llvm::DAGTypeLegalizer::run</a></div><div class="ttdeci">bool run()</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8cpp_source.html#l00179">LegalizeTypes.cpp:179</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonISD_html_aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">llvm::HexagonISD::Lo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00043">HexagonISelLowering.h:43</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">llvm::ISD::SRL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00306">ISDOpcodes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a2856b7fb24e0784cfc29ddfd5be74d1ba3441acf8576e4bbf48e9bd73ca3c0d8c"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a2856b7fb24e0784cfc29ddfd5be74d1ba3441acf8576e4bbf48e9bd73ca3c0d8c">llvm::TargetLoweringBase::Custom</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00084">TargetLowering.h:84</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a8538ef2e6f2a154d8fb2032f068a3ed8">llvm::DAGTypeLegalizer::NewNode</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00048">LegalizeTypes.h:48</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonISD_html_aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">llvm::HexagonISD::Hi</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00043">HexagonISelLowering.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a92c8c043c2a2d8db5b6cf9767394b747"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a92c8c043c2a2d8db5b6cf9767394b747">llvm::SelectionDAG::RemoveDeadNodes</a></div><div class="ttdeci">void RemoveDeadNodes()</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l00549">SelectionDAG.cpp:549</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_1_1use__iterator_html"><div class="ttname"><a href="classllvm_1_1SDNode_1_1use__iterator.html">llvm::SDNode::use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00439">SelectionDAGNodes.h:439</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a5290057031a9bc71850f61e757cb940e"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a5290057031a9bc71850f61e757cb940e">llvm::TargetLoweringBase::TypeWidenVector</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00097">TargetLowering.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a8810bf428dcf84d48f39c8f5ba9a8c94"><div class="ttname"><a href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">llvm::SDNode::use_begin</a></div><div class="ttdeci">use_iterator use_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00496">SelectionDAGNodes.h:496</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html"><div class="ttname"><a href="structllvm_1_1EVT.html">llvm::EVT</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00576">ValueTypes.h:576</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html_ab6132d2ff56c64c551cf71e714dbb5c2"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#ab6132d2ff56c64c551cf71e714dbb5c2">llvm::TargetLowering::ArgListTy</a></div><div class="ttdeci">std::vector&lt; ArgListEntry &gt; ArgListTy</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01943">TargetLowering.h:1943</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1CallLoweringInfo_html"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1CallLoweringInfo.html">llvm::TargetLowering::CallLoweringInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01949">TargetLowering.h:1949</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">llvm::ISD::MUL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00176">ISDOpcodes.h:176</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a18c2edf1939f6e87f1e586b815f398cd"><div class="ttname"><a href="structllvm_1_1EVT.html#a18c2edf1939f6e87f1e586b815f398cd">llvm::EVT::getVectorVT</a></div><div class="ttdeci">static EVT getVectorVT(LLVMContext &amp;Context, EVT VT, unsigned NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00616">ValueTypes.h:616</a></div></div>
<div class="ttc" id="structllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00032">MachineMemOperand.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a2afe36f1344e00c9ef5f8cdb39d21890"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a2afe36f1344e00c9ef5f8cdb39d21890">llvm::SelectionDAG::getRoot</a></div><div class="ttdeci">const SDValue &amp; getRoot() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00328">SelectionDAG.h:328</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_a8b1050d762b2748264df08db6b97e4a6"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#a8b1050d762b2748264df08db6b97e4a6">llvm::DAGTypeLegalizer::getDAG</a></div><div class="ttdeci">SelectionDAG &amp; getDAG() const </div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00142">LegalizeTypes.h:142</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_a78a7f585aa9b0de8a1d509d616cc1b5e"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#a78a7f585aa9b0de8a1d509d616cc1b5e">llvm::DAGTypeLegalizer::NoteDeletion</a></div><div class="ttdeci">void NoteDeletion(SDNode *Old, SDNode *New)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00135">LegalizeTypes.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00218">SetVector.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ac493b7df1666d70c1b355c82028148f0"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ac493b7df1666d70c1b355c82028148f0">llvm::SelectionDAG::allnodes_begin</a></div><div class="ttdeci">allnodes_const_iterator allnodes_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00317">SelectionDAG.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_ad575e4867727668f7d50952bc9e1a1cd"><div class="ttname"><a href="classllvm_1_1SDValue.html#ad575e4867727668f7d50952bc9e1a1cd">llvm::SDValue::setNode</a></div><div class="ttdeci">void setNode(SDNode *N)</div><div class="ttdoc">set the SDNode </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00108">SelectionDAGNodes.h:108</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">llvm::ISD::OR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00295">ISDOpcodes.h:295</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ae8c041f67463ea67d6c43867729b82cb"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">llvm::SelectionDAG::UpdateNodeOperands</a></div><div class="ttdeci">SDNode * UpdateNodeOperands(SDNode *N, SDValue Op)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l05066">SelectionDAG.cpp:5066</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a43bc669b0f21542131c6623548c567e3"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a43bc669b0f21542131c6623548c567e3">llvm::TargetLoweringBase::TypeExpandFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00094">TargetLowering.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1SDLoc_html"><div class="ttname"><a href="classllvm_1_1SDLoc.html">llvm::SDLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00799">SelectionDAGNodes.h:799</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html"><div class="ttname"><a href="classllvm_1_1SDNode.html">llvm::SDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00306">SelectionDAGNodes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_ad07bffbe0e911b0ce1b44b4f7e23468a"><div class="ttname"><a href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">llvm::SDValue::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00867">SelectionDAGNodes.h:867</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994af6b7630aca04cca9a65516a381267417">llvm::DAGTypeLegalizer::Processed</a></div><div class="ttdoc">Processed - This is a node that has already been processed. </div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00055">LegalizeTypes.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">llvm::TargetLoweringBase::TypePromoteInteger</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00091">TargetLowering.h:91</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a20f382e841761654032bf8b4712e805f"><div class="ttname"><a href="classllvm_1_1SDNode.html#a20f382e841761654032bf8b4712e805f">llvm::SDNode::op_begin</a></div><div class="ttdeci">op_iterator op_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00560">SelectionDAGNodes.h:560</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_aef02f2c1bd12936a80611b134b24a47d"><div class="ttname"><a href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">llvm::SDNode::use_end</a></div><div class="ttdeci">static use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00500">SelectionDAGNodes.h:500</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">llvm::ISD::ZERO_EXTEND</a></div><div class="ttdoc">ZERO_EXTEND - Used for integer types, zeroing the new bits. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00357">ISDOpcodes.h:357</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">llvm::ISD::ANY_EXTEND</a></div><div class="ttdoc">ANY_EXTEND - Used for integer types. The high bits are undefined. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00360">ISDOpcodes.h:360</a></div></div>
<div class="ttc" id="LegalizeTypes_8h_html"><div class="ttname"><a href="LegalizeTypes_8h.html">LegalizeTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1ArgListEntry_html_a5d2b21233cb3005cfa01f9cfb260f094"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#a5d2b21233cb3005cfa01f9cfb260f094">llvm::TargetLowering::ArgListEntry::Ty</a></div><div class="ttdeci">Type * Ty</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01927">TargetLowering.h:1927</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a8cca25ddb3be86ad23567dc8d36dacd3"><div class="ttname"><a href="structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">llvm::EVT::getSizeInBits</a></div><div class="ttdeci">unsigned getSizeInBits() const </div><div class="ttdoc">getSizeInBits - Return the size of the specified value type in bits. </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00779">ValueTypes.h:779</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1ArgListEntry_html_aefa8d74587b487931cadd874614c0df4"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1ArgListEntry.html#aefa8d74587b487931cadd874614c0df4">llvm::TargetLowering::ArgListEntry::isZExt</a></div><div class="ttdeci">bool isZExt</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01929">TargetLowering.h:1929</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_ab3c81c0f4bd671c840c2839c4c614e02"><div class="ttname"><a href="classllvm_1_1SetVector.html#ab3c81c0f4bd671c840c2839c4c614e02">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::back</a></div><div class="ttdeci">const T &amp; back() const</div><div class="ttdoc">Return the last element of the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00089">SetVector.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a7869db2aca4044d21da972bed855b0d0"><div class="ttname"><a href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">llvm::SDNode::getNodeId</a></div><div class="ttdeci">int getNodeId() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00417">SelectionDAGNodes.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a7d2ad4aa4277eb4e1138ff9791c8fbb7"><div class="ttname"><a href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">llvm::SDValue::getValueType</a></div><div class="ttdeci">EVT getValueType() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00843">SelectionDAGNodes.h:843</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1ArgListEntry_html"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1ArgListEntry.html">llvm::TargetLowering::ArgListEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01925">TargetLowering.h:1925</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00037">DenseMap.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1HandleSDNode_html"><div class="ttname"><a href="classllvm_1_1HandleSDNode.html">llvm::HandleSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00942">SelectionDAGNodes.h:942</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a40cd81ebfaf97cef327ad65d37b816da"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a40cd81ebfaf97cef327ad65d37b816da">llvm::TargetLoweringBase::TypeSplitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00096">TargetLowering.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#ab1ef8198b3a82d5a2161eb72f5910994a5c4b2709df114f7ca7344a9e264ca9b8">llvm::DAGTypeLegalizer::ReadyToProcess</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00044">LegalizeTypes.h:44</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">llvm::ISD::TRUNCATE</a></div><div class="ttdoc">TRUNCATE - Completely drop the high bits. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00363">ISDOpcodes.h:363</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html"><div class="ttname"><a href="classllvm_1_1SDValue.html">llvm::SDValue</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00094">SelectionDAGNodes.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193af54ec6880362512f9fec982cd4ce39fb"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193af54ec6880362512f9fec982cd4ce39fb">llvm::TargetLoweringBase::TypeLegal</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00090">TargetLowering.h:90</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a752372e170e4e7c595bf8810bb52adf2"><div class="ttname"><a href="structllvm_1_1EVT.html#a752372e170e4e7c595bf8810bb52adf2">llvm::EVT::getIntegerVT</a></div><div class="ttdeci">static EVT getIntegerVT(LLVMContext &amp;Context, unsigned BitWidth)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00607">ValueTypes.h:607</a></div></div>
<div class="ttc" id="classllvm_1_1DAGTypeLegalizer_html_a5438ea08f38ef6b3bf1243490d779e48"><div class="ttname"><a href="classllvm_1_1DAGTypeLegalizer.html#a5438ea08f38ef6b3bf1243490d779e48">llvm::DAGTypeLegalizer::DAGTypeLegalizer</a></div><div class="ttdeci">DAGTypeLegalizer(SelectionDAG &amp;dag)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeTypes_8h_source.html#l00123">LegalizeTypes.h:123</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a42bca41d2438197c12b6db2c710a959c"><div class="ttname"><a href="structllvm_1_1EVT.html#a42bca41d2438197c12b6db2c710a959c">llvm::EVT::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00771">ValueTypes.h:771</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:16 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
