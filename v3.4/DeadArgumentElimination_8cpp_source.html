<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: DeadArgumentElimination.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('DeadArgumentElimination_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DeadArgumentElimination.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="DeadArgumentElimination_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- DeadArgumentElimination.cpp - Eliminate dead arguments ------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass deletes dead arguments from internal functions.  Dead argument</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// elimination removes arguments which are directly dead, as well as arguments</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// only passed into function calls as dead arguments of other functions.  This</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// pass also deletes dead return values in a similar way.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// This pass is often useful as a cleanup pass to run after aggressive</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// interprocedural passes, which add possibly-dead arguments or return values.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="DeadArgumentElimination_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   20</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;deadargelim&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2IPO_8h.html">llvm/Transforms/IPO.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DIBuilder_8h.html">llvm/DIBuilder.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfo_8h.html">llvm/DebugInfo.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallingConv_8h.html">llvm/IR/CallingConv.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallSite_8h.html">llvm/Support/CallSite.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<a class="code" href="DeadArgumentElimination_8cpp.html#a44735b3025ed4789ba2518cad2f1d600">STATISTIC</a>(NumArgumentsEliminated, <span class="stringliteral">&quot;Number of unread args removed&quot;</span>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="DeadArgumentElimination_8cpp.html#a44735b3025ed4789ba2518cad2f1d600">STATISTIC</a>(NumRetValsEliminated  , <span class="stringliteral">&quot;Number of unused return values removed&quot;</span>);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<a class="code" href="DeadArgumentElimination_8cpp.html#a44735b3025ed4789ba2518cad2f1d600">STATISTIC</a>(NumArgumentsReplacedWithUndef, </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;          <span class="stringliteral">&quot;Number of unread args replaced with undef&quot;</span>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">  /// DAE - The dead argument elimination pass.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>DAE : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">    /// Struct that represents (part of) either a return value or a function</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">    /// argument.  Used so that arguments and return values can be used</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">    /// interchangeably.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>RetOrArg {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      RetOrArg(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <span class="keywordtype">unsigned</span> Idx, <span class="keywordtype">bool</span> IsArg) : F(F), Idx(Idx),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;               IsArg(IsArg) {}</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordtype">unsigned</span> Idx;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keywordtype">bool</span> IsArg;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">      /// Make RetOrArg comparable, so we can put it into a map.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span>      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a7c469a194119a14e5a018ebb9b847cf0">operator&lt;</a>(<span class="keyword">const</span> RetOrArg &amp;O)<span class="keyword"> const </span>{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span> (F != O.F)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;          <span class="keywordflow">return</span> F &lt; O.F;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Idx != O.Idx)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;          <span class="keywordflow">return</span> Idx &lt; O.Idx;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;          <span class="keywordflow">return</span> IsArg &lt; O.IsArg;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">      /// Make RetOrArg comparable, so we can easily iterate the multimap.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span>      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> RetOrArg &amp;O)<span class="keyword"> const </span>{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> F == O.F &amp;&amp; Idx == O.Idx &amp;&amp; IsArg == O.IsArg;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      std::string getDescription()<span class="keyword"> const </span>{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> std::string((IsArg ? <span class="stringliteral">&quot;Argument #&quot;</span> : <span class="stringliteral">&quot;Return value #&quot;</span>))</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;               + <a class="code" href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">utostr</a>(Idx) + <span class="stringliteral">&quot; of function &quot;</span> + F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    };</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">    /// Liveness enum - During our initial pass over the program, we determine</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    /// that things are either alive or maybe alive. We don&#39;t mark anything</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    /// explicitly dead (even if we know they are), since anything not alive</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    /// with no registered uses (in Uses) will never be marked alive and will</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">    /// thus become dead in the end.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span>    <span class="keyword">enum</span> Liveness { Live, MaybeLive };</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">    /// Convenience wrapper</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span>    RetOrArg CreateRet(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *F, <span class="keywordtype">unsigned</span> Idx) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> RetOrArg(F, Idx, <span class="keyword">false</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">    /// Convenience wrapper</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span>    RetOrArg CreateArg(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *F, <span class="keywordtype">unsigned</span> Idx) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> RetOrArg(F, Idx, <span class="keyword">true</span>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">typedef</span> std::multimap&lt;RetOrArg, RetOrArg&gt; UseMap;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /// This maps a return value or argument to any MaybeLive return values or</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">    /// arguments it uses. This allows the MaybeLive values to be marked live</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">    /// when any of its users is marked live.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    /// For example (indices are left out for clarity):</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">    ///  - Uses[ret F] = ret G</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">    ///    This means that F calls G, and F returns the value returned by G.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    ///  - Uses[arg F] = ret G</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    ///    This means that some function calls G and passes its result as an</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">    ///    argument to F.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">    ///  - Uses[ret F] = arg F</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    ///    This means that F returns one of its own arguments.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    ///  - Uses[arg F] = arg G</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">    ///    This means that G calls F and passes one of its own (G&#39;s) arguments</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    ///    directly to F.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span>    UseMap Uses;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">typedef</span> std::set&lt;RetOrArg&gt; LiveSet;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">typedef</span> std::set&lt;const Function*&gt; LiveFuncSet;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">    /// This set contains all values that have been determined to be live.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span>    LiveSet LiveValues;<span class="comment"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">    /// This set contains all values that are cannot be changed in any way.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>    LiveFuncSet LiveFunctions;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RetOrArg, 5&gt;</a> UseVector;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Map each LLVM function to corresponding metadata with debug info. If</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// the function is replaced with another one, we should patch the pointer</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// to LLVM function in metadata.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// As the code generation for module is finished (and DIBuilder is</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// finalized) we assume that subprogram descriptors won&#39;t be changed, and</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// they are stored in map for short duration anyway.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Function*, DISubprogram&gt;</a> FunctionDIMap;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    FunctionDIMap FunctionDIs;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">protected</span>:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// DAH uses this to specify a different ID.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">explicit</span> DAE(<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>) : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(ID) {}</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    DAE() : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(ID) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="namespacellvm.html#acba49a9fdebd32e2613c2a3da9e7d5d2">initializeDAEPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> ShouldHackArguments()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    Liveness MarkIfNotLive(RetOrArg <a class="code" href="classllvm_1_1Use.html">Use</a>, UseVector &amp;MaybeLiveUses);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    Liveness SurveyUse(<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> U, UseVector &amp;MaybeLiveUses,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                       <span class="keywordtype">unsigned</span> RetValNum = 0);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    Liveness SurveyUses(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V, UseVector &amp;MaybeLiveUses);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">void</span> CollectFunctionDIs(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">void</span> SurveyFunction(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">void</span> MarkValue(<span class="keyword">const</span> RetOrArg &amp;RA, Liveness L,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                   <span class="keyword">const</span> UseVector &amp;MaybeLiveUses);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">void</span> MarkLive(<span class="keyword">const</span> RetOrArg &amp;RA);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">void</span> MarkLive(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">void</span> PropagateLiveness(<span class="keyword">const</span> RetOrArg &amp;RA);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">bool</span> RemoveDeadStuffFromFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> *F);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">bool</span> DeleteDeadVarargs(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">bool</span> RemoveDeadArgumentsFromCallers(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  };</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">DAE::ID</a> = 0;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<a class="code" href="DeadArgumentElimination_8cpp.html#a6be32cfa10efb9f5de6e980582f8e088">INITIALIZE_PASS</a>(DAE, <span class="stringliteral">&quot;deadargelim&quot;</span>, <span class="stringliteral">&quot;Dead Argument Elimination&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;namespace {<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /// DAH - DeadArgumentHacking pass - Same as dead argument elimination, but</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  /// deletes arguments to functions which are external.  This is only for use</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">  /// by bugpoint.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>DAH : <span class="keyword">public</span> DAE {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    DAH() : DAE(ID) {}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> ShouldHackArguments()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  };</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">DAH::ID</a> = 0;</div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="DeadArgumentElimination_8cpp.html#a6be32cfa10efb9f5de6e980582f8e088">  186</a></span>&#160;<a class="code" href="DeadArgumentElimination_8cpp.html#a6be32cfa10efb9f5de6e980582f8e088">INITIALIZE_PASS</a>(DAH, <span class="stringliteral">&quot;deadarghaX0r&quot;</span>, </div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="stringliteral">&quot;Dead Argument Hacking (BUGPOINT USE ONLY; DO NOT USE)&quot;</span>,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/// createDeadArgEliminationPass - This pass removes arguments from functions</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span><span class="comment">/// which are not used by the body of the function.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span><span class="comment">///</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aa2dd61067e690ea927b852fa7e0b4317">createDeadArgEliminationPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> DAE(); }</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="namespacellvm.html#ae6cc56f0b4b54792d6733188c7c49e92">  194</a></span>&#160;<a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *<a class="code" href="namespacellvm.html#ae6cc56f0b4b54792d6733188c7c49e92">llvm::createDeadArgHackingPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> DAH(); }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/// CollectFunctionDIs - Map each function in the module to its debug info</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/// descriptor.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAE::CollectFunctionDIs(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  FunctionDIs.clear();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Module.html#a06dca74a66b3e9cae0cc8035aa42167f">Module::named_metadata_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M.<a class="code" href="classllvm_1_1Module.html#a5d052342d8cb7a6952a4c123b5385f90">named_metadata_begin</a>(),</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;       E = M.<a class="code" href="classllvm_1_1Module.html#ab52eefaf4892829072b70e0e2e3d88bf">named_metadata_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> &amp;NMD = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> MDIndex = 0, MDNum = NMD.<a class="code" href="classllvm_1_1NamedMDNode.html#a24a3512f374b3f29b573a223dfd13f2a">getNumOperands</a>();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         MDIndex &lt; MDNum; ++MDIndex) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Node = NMD.<a class="code" href="classllvm_1_1NamedMDNode.html#acf77b1de56fc46b8a5118ff95fae1403">getOperand</a>(MDIndex);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1DIDescriptor.html">DIDescriptor</a>(Node).isCompileUnit())</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="classllvm_1_1DICompileUnit.html">DICompileUnit</a> <a class="code" href="namespaceCU.html">CU</a>(Node);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DIArray.html">DIArray</a> &amp;SPs = CU.<a class="code" href="classllvm_1_1DICompileUnit.html#a3c6854ffdc6a80751b1c263b632113e2">getSubprograms</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SPIndex = 0, SPNum = SPs.<a class="code" href="classllvm_1_1DIArray.html#a1682be4e8828c033e2f2b4e2bd5ac95c">getNumElements</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;           SPIndex &lt; SPNum; ++SPIndex) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> SP(SPs.<a class="code" href="classllvm_1_1DIArray.html#a22a66d1d4f5e1a339d3a6d8ee7fa2dab">getElement</a>(SPIndex));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        assert((!SP || SP.isSubprogram()) &amp;&amp;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <span class="stringliteral">&quot;A MDNode in subprograms of a CU should be null or a DISubprogram.&quot;</span>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span> (!SP)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *F = SP.getFunction())</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          FunctionDIs[F] = SP;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/// DeleteDeadVarargs - If this is an function that takes a ... list, and if</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">/// llvm.vastart is never called, the varargs list is dead for the function.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DAE::DeleteDeadVarargs(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  assert(Fn.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>() &amp;&amp; <span class="stringliteral">&quot;Function isn&#39;t varargs!&quot;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>() || !Fn.<a class="code" href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// Ensure that the function is only directly called.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Function.html#aafc2232f97cd2d2fae9b4f5bda77a363">hasAddressTaken</a>())</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Okay, we know we can transform this function if safe.  Scan its body</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// looking for calls to llvm.vastart.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Fn.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = Fn.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin(), E = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a073e1c928b17a9c950d06dd368e40ab1">Intrinsic::vastart</a>)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// If we get here, there are no calls to llvm.vastart in the function body,</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// remove the &quot;...&quot; and adjust all the calls.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// Start by computing a new prototype for the function, which is the same as</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// the old function, but doesn&#39;t have isVarArg set.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = Fn.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  std::vector&lt;Type*&gt; Params(FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ae80a20e450d3c835ba9d2422b7ff5d24">param_begin</a>(), FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#afd679fbb50dac6b114f8df0e0f2876f3">param_end</a>());</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *NFTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>(),</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                                Params, <span class="keyword">false</span>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">unsigned</span> NumArgs = Params.size();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// Create the new function body and insert it into the module...</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NF = <a class="code" href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">Function::Create</a>(NFTy, Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>());</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#a05e6f4dd6bc551b79995792404af490b">copyAttributesFrom</a>(&amp;Fn);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">getFunctionList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(&amp;Fn, NF);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;Fn);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Loop over all of the callers of the function, transforming the call sites</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// to pass in a smaller number of arguments into the new function.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  std::vector&lt;Value*&gt; Args;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn.<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Fn.<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (!CS)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// Pass all the same arguments.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    Args.assign(CS.<a class="code" href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">arg_begin</a>(), CS.<a class="code" href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">arg_begin</a>() + NumArgs);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// Drop any attributes that were on the vararg arguments.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> PAL = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a4e7c7828319bc9db0f49c3c6d8f56ac7">getAttributes</a>();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (!PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a93514af69d7c446e721c1023af2b78ec">isEmpty</a>() &amp;&amp; PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a564314dce5264ab0cfe6ae3d9f3f9c12">getSlotIndex</a>(PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a048066a2eb851073ae71cf3dc7a2bfe7">getNumSlots</a>() - 1) &gt; NumArgs) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 8&gt;</a> AttributesVec;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a564314dce5264ab0cfe6ae3d9f3f9c12">getSlotIndex</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;= NumArgs; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a43d638279385ef1f48cb3e4990482e4c">getSlotAttributes</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">if</span> (PAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::FunctionIndex))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(Fn.<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                                  PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">getFnAttributes</a>()));</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      PAL = AttributeSet::get(Fn.<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), AttributesVec);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(Call)) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      New = <a class="code" href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">InvokeInst::Create</a>(NF, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                               Args, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setCallingConv(CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ac651192f7bb4de8e675b000f406d6489">getCallingConv</a>());</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setAttributes(PAL);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      New = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(NF, Args, <span class="stringliteral">&quot;&quot;</span>, Call);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setCallingConv(CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ac651192f7bb4de8e675b000f406d6489">getCallingConv</a>());</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setAttributes(PAL);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> (cast&lt;CallInst&gt;(Call)-&gt;isTailCall())</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        cast&lt;CallInst&gt;(New)-&gt;setTailCall();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    New-&gt;setDebugLoc(Call-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    Args.clear();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (!Call-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      Call-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(New);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    New-&gt;takeName(Call);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// Finally, remove the old call from the program, reducing the use-count of</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// F.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    Call-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// Since we have now created the new function, splice the body of the old</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// function right into the new function, leaving the old rotting hulk of the</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// function empty.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>().<a class="code" href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(NF-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), Fn.<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>());</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// Loop over the argument list, transferring uses of the old arguments over to</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// the new arguments, also transferring over the names as well.  While we&#39;re at</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// it, remove the dead arguments from the DeadArguments list.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn.<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = Fn.<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(),</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;       I2 = NF-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++I2) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Move the name and users over to the new version.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(I2);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    I2-&gt;takeName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// Patch the pointer to LLVM function in debug info descriptor.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  FunctionDIMap::iterator DI = FunctionDIs.find(&amp;Fn);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (DI != FunctionDIs.end())</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    DI-&gt;second.replaceFunction(NF);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// Fix up any BlockAddresses that refer to the function.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  Fn.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(NF, Fn.<a class="code" href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>()));</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// Delete the bitcast that we just created, so that NF does not</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// appear to be address-taken.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Constant.html#a50d0911852017f2168de329f53d8568d">removeDeadConstantUsers</a>();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// Finally, nuke the old function.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  Fn.<a class="code" href="classllvm_1_1Function.html#a8969dec86d24dd579f8ecc963e1dc8b4">eraseFromParent</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">/// RemoveDeadArgumentsFromCallers - Checks if the given function has any </span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/// arguments that are unused, and changes the caller parameters to be undefined</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">/// instead.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DAE::RemoveDeadArgumentsFromCallers(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>() || Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a211c14a84be4519439d616f9027d86c9">mayBeOverridden</a>())</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// Functions with local linkage should already have been handled, except the</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// fragile (variadic) ones which we can improve here.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>() &amp;&amp; !Fn.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>())</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// If a function seen at compile time is not necessarily the one linked to</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="comment">// the binary being built, it is illegal to change the actual arguments</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// passed to it. These functions can be captured by isWeakForLinker().</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// *NOTE* that mayBeOverridden() is insufficient for this purpose as it</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// doesn&#39;t include linkage types like AvailableExternallyLinkage and</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// LinkOnceODRLinkage. Take link_odr* as an example, it indicates a set of</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// *EQUIVALENT* globals that can be merged at link-time. However, the</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// semantic of *EQUIVALENT*-functions includes parameters. Changing</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// parameters breaks this assumption.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1GlobalValue.html#ac291102760c543c8e045e829d57d3341">isWeakForLinker</a>())</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> UnusedArgs;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn.<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = Fn.<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); </div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Argument</a> *Arg = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (Arg-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; !Arg-&gt;<a class="code" href="classllvm_1_1Argument.html#aee2867e0d1b4332055f536ac3d521d40">hasByValAttr</a>())</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      UnusedArgs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Arg-&gt;<a class="code" href="classllvm_1_1Argument.html#ac70153649461940646eeb8b9ce50e416">getArgNo</a>());</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">if</span> (UnusedArgs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Function::use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn.<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Fn.<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); </div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (!CS || !CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a0359da073a544050d5aa25ea1d6eacb9">isCallee</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// Now go through all unused args and replace them with &quot;undef&quot;.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = UnusedArgs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordtype">unsigned</span> ArgNo = UnusedArgs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Arg = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">getArgument</a>(ArgNo);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      CS.<a class="code" href="classllvm_1_1CallSiteBase.html#addab854f674836e5497dcfafff324e27">setArgument</a>(ArgNo, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Arg-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      ++NumArgumentsReplacedWithUndef;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/// Convenience function that returns the number of return values. It returns 0</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">/// for void functions and 1 for functions not returning a struct. It returns</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">/// the number of struct elements for functions returning a struct.</span></div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">  413</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">NumRetVals</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *F) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (F-&gt;<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>())</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(F-&gt;<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>()))</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span> STy-&gt;getNumElements();</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/// MarkIfNotLive - This checks Use for liveness in LiveValues. If Use is not</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/// live, it adds Use to the MaybeLiveUses argument. Returns the determined</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">/// liveness of Use.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span>DAE::Liveness DAE::MarkIfNotLive(RetOrArg <a class="code" href="classllvm_1_1Use.html">Use</a>, UseVector &amp;MaybeLiveUses) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// We&#39;re live if our use or its Function is already marked as live.</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (LiveFunctions.count(Use.F) || LiveValues.count(Use))</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> Live;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// We&#39;re maybe live otherwise, but remember that we must become live if</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Use becomes live.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  MaybeLiveUses.push_back(Use);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">return</span> MaybeLive;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">/// SurveyUse - This looks at a single use of an argument or return value</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">/// and determines if it should be alive or not. Adds this use to MaybeLiveUses</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">/// if it causes the used value to become MaybeLive.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">/// RetValNum is the return value number to use when this use is used in a</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">/// return instruction. This is used in the recursion, you should always leave</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/// it at 0.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span>DAE::Liveness DAE::SurveyUse(<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> U,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                             UseVector &amp;MaybeLiveUses, <span class="keywordtype">unsigned</span> RetValNum) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *V = *U;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = dyn_cast&lt;ReturnInst&gt;(V)) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="comment">// The value is returned from a function. It&#39;s only live when the</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// function&#39;s return value is live. We use RetValNum here, for the case</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="comment">// that U is really a use of an insertvalue instruction that uses the</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="comment">// original Use.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      RetOrArg Use = CreateRet(RI-&gt;getParent()-&gt;getParent(), RetValNum);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">// We might be live, depending on the liveness of Use.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> MarkIfNotLive(Use, MaybeLiveUses);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1InsertValueInst.html">InsertValueInst</a> *IV = dyn_cast&lt;InsertValueInst&gt;(V)) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (U.<a class="code" href="classllvm_1_1value__use__iterator.html#a63957f9b09cf3a322d42be336980ec35">getOperandNo</a>() != <a class="code" href="classllvm_1_1InsertValueInst.html#a3bf1a0496b2ea77618b25d8286e10a27">InsertValueInst::getAggregateOperandIndex</a>()</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          &amp;&amp; IV-&gt;hasIndices())</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">// The use we are examining is inserted into an aggregate. Our liveness</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// depends on all uses of that aggregate, but if it is used as a return</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// value, only index at which we were inserted counts.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        RetValNum = *IV-&gt;idx_begin();</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="comment">// Note that if we are used as the aggregate operand to the insertvalue,</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// we don&#39;t change RetValNum, but do survey all our uses.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      Liveness Result = MaybeLive;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IV-&gt;use_begin(),</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;           E = V-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        Result = SurveyUse(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MaybeLiveUses, RetValNum);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> (Result == Live)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ImmutableCallSite.html">ImmutableCallSite</a> CS = V) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *F = CS.getCalledFunction();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">if</span> (F) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// Used in a direct call.</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">// Find the argument number. We know for sure that this use is an</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// argument, since if it was the function argument this would be an</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// indirect call and the we know can&#39;t be looking at a value of the</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// label type (for the invoke instruction).</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordtype">unsigned</span> ArgNo = CS.getArgumentNo(U);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">if</span> (ArgNo &gt;= F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">getNumParams</a>())</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;          <span class="comment">// The value is passed in through a vararg! Must be live.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="keywordflow">return</span> Live;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        assert(CS.getArgument(ArgNo)</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;               == CS-&gt;getOperand(U.<a class="code" href="classllvm_1_1value__use__iterator.html#a63957f9b09cf3a322d42be336980ec35">getOperandNo</a>())</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;               &amp;&amp; <span class="stringliteral">&quot;Argument is not where we expected it&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// Value passed to a normal call. It&#39;s only live when the corresponding</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="comment">// argument to the called function turns out live.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        RetOrArg Use = CreateArg(F, ArgNo);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span> MarkIfNotLive(Use, MaybeLiveUses);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Used in any other way? Value must be live.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">return</span> Live;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/// SurveyUses - This looks at all the uses of the given value</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">/// Returns the Liveness deduced from the uses of this value.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">/// Adds all uses that cause the result to be MaybeLive to MaybeLiveRetUses. If</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">/// the result is Live, MaybeLiveUses might be modified but its content should</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/// be ignored (since it might not be complete).</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span>DAE::Liveness DAE::SurveyUses(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V, UseVector &amp;MaybeLiveUses) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Assume it&#39;s dead (which will only hold if there are no uses at all..).</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  Liveness Result = MaybeLive;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// Check each use.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = V-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;       E = V-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    Result = SurveyUse(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MaybeLiveUses);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (Result == Live)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">// SurveyFunction - This performs the initial survey of the specified function,</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">// checking out whether or not it uses any of its incoming arguments or whether</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">// any callers use the return value.  This fills in the LiveValues set and Uses</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">// map.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">// We consider arguments of non-internal functions to be intrinsically alive as</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">// well as arguments to functions which have their &quot;address taken&quot;.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="keywordtype">void</span> DAE::SurveyFunction(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordtype">unsigned</span> RetCount = <a class="code" href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">NumRetVals</a>(&amp;F);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// Assume all return values are dead</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Liveness, 5&gt;</a> RetVals;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  RetVals RetValLiveness(RetCount, MaybeLive);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;UseVector, 5&gt;</a> RetUses;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// These vectors map each return value to the uses that make it MaybeLive, so</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// we can add those to the Uses map if the return value really turns out to be</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// MaybeLive. Initialized to a list of RetCount empty lists.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  RetUses MaybeLiveRetUses(RetCount);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::const_iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = dyn_cast&lt;ReturnInst&gt;(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">if</span> (RI-&gt;getNumOperands() != 0 &amp;&amp; RI-&gt;getOperand(0)-&gt;getType()</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          != F.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>()) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">// We don&#39;t support old style multiple return values.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        MarkLive(F);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (!F.<a class="code" href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">hasLocalLinkage</a>() &amp;&amp; (!ShouldHackArguments() || F.<a class="code" href="classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">isIntrinsic</a>())) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    MarkLive(F);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Inspecting callers for fn: &quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// Keep track of the number of live retvals, so we can skip checks once all</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// of them turn out to be live.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordtype">unsigned</span> NumLiveRetVals = 0;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *STy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1StructType.html">StructType</a>&gt;(F.<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>());</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// Loop all uses of the function.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F.<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = F.<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// If the function is PASSED IN as an argument, its address has been</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// taken.</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classllvm_1_1ImmutableCallSite.html">ImmutableCallSite</a> CS(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (!CS || !CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a0359da073a544050d5aa25ea1d6eacb9">isCallee</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      MarkLive(F);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// If this use is anything other than a call site, the function is alive.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TheCall = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>();</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (!TheCall) {   <span class="comment">// Not a direct call site?</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      MarkLive(F);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// If we end up here, we are looking at a direct call to our function.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// Now, check how our return value(s) is/are used in this caller. Don&#39;t</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// bother checking return values if all of them are live already.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (NumLiveRetVals != RetCount) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">if</span> (STy) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">// Check all uses of the return value.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TheCall-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;             E = TheCall-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">Ext</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a>&gt;(*I);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          <span class="keywordflow">if</span> (Ext &amp;&amp; Ext-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#a44c87e8da8c79e2fdb74e4feef0b9ad6">hasIndices</a>()) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="comment">// This use uses a part of our return value, survey the uses of</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">// that part and store the results for this index only.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordtype">unsigned</span> Idx = *Ext-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> (RetValLiveness[Idx] != Live) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;              RetValLiveness[Idx] = SurveyUses(Ext, MaybeLiveRetUses[Idx]);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;              <span class="keywordflow">if</span> (RetValLiveness[Idx] == Live)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                NumLiveRetVals++;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="comment">// Used by something else than extractvalue. Mark all return</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">// values as live.</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != RetCount; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> )</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;              RetValLiveness[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Live;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            NumLiveRetVals = RetCount;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="comment">// Single return value</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        RetValLiveness[0] = SurveyUses(TheCall, MaybeLiveRetUses[0]);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (RetValLiveness[0] == Live)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          NumLiveRetVals = RetCount;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// Now we&#39;ve inspected all callers, record the liveness of our return values.</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != RetCount; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    MarkValue(CreateRet(&amp;F, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), RetValLiveness[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], MaybeLiveRetUses[i]);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Inspecting args for fn: &quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// Now, check all of our arguments.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordtype">unsigned</span> i = 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  UseVector MaybeLiveArgUses;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::const_arg_iterator</a> AI = F.<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(),</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;       E = F.<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); AI != E; ++AI, ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    Liveness Result;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>()) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">// Variadic functions will already have a va_arg function expanded inside</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="comment">// them, making them potentially very sensitive to ABI changes resulting</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="comment">// from removing arguments entirely, so don&#39;t. For example AArch64 handles</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// register and stack HFAs very differently, and this is reflected in the</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">// IR which has already been generated.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      Result = Live;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">// See what the effect of this use is (recording any uses that cause</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="comment">// MaybeLive in MaybeLiveArgUses). </span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      Result = SurveyUses(AI, MaybeLiveArgUses);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// Mark the result.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    MarkValue(CreateArg(&amp;F, i), Result, MaybeLiveArgUses);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// Clear the vector again for the next iteration.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    MaybeLiveArgUses.clear();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/// MarkValue - This function marks the liveness of RA depending on L. If L is</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/// MaybeLive, it also takes all uses in MaybeLiveUses and records them in Uses,</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/// such that RA will be marked live if any use in MaybeLiveUses gets marked</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/// live later on.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAE::MarkValue(<span class="keyword">const</span> RetOrArg &amp;RA, Liveness L,</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                    <span class="keyword">const</span> UseVector &amp;MaybeLiveUses) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">switch</span> (L) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">case</span> Live: MarkLive(RA); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">case</span> MaybeLive:</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="comment">// Note any uses of this value, so this return value can be</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="comment">// marked live whenever one of the uses becomes live.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">for</span> (UseVector::const_iterator UI = MaybeLiveUses.begin(),</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;           UE = MaybeLiveUses.end(); UI != UE; ++UI)</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        Uses.insert(std::make_pair(*UI, RA));</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;}</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">/// MarkLive - Mark the given Function as alive, meaning that it cannot be</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// changed in any way. Additionally,</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/// mark any values that are used as this function&#39;s parameters or by its return</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/// values (according to Uses) live as well.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAE::MarkLive(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Intrinsically live fn: &quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// Mark the function as live.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  LiveFunctions.insert(&amp;F);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// Mark all arguments as live.</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = F.<a class="code" href="classllvm_1_1Function.html#aef89c402976e04c0abe4b10a963d35e3">arg_size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    PropagateLiveness(CreateArg(&amp;F, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// Mark all return values as live.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">NumRetVals</a>(&amp;F); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    PropagateLiveness(CreateRet(&amp;F, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// MarkLive - Mark the given return value or argument as live. Additionally,</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// mark any values that are used by this value (according to Uses) live as</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">/// well.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAE::MarkLive(<span class="keyword">const</span> RetOrArg &amp;RA) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span> (LiveFunctions.count(RA.F))</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// Function was already marked Live.</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (!LiveValues.insert(RA).second)</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">// We were already marked Live.</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Marking &quot;</span> &lt;&lt; RA.getDescription() &lt;&lt; <span class="stringliteral">&quot; live\n&quot;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  PropagateLiveness(RA);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">/// PropagateLiveness - Given that RA is a live value, propagate it&#39;s liveness</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">/// to any other values it uses (according to Uses).</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DAE::PropagateLiveness(<span class="keyword">const</span> RetOrArg &amp;RA) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// We don&#39;t use upper_bound (or equal_range) here, because our recursive call</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// to ourselves is likely to cause the upper_bound (which is the first value</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// not belonging to RA) to become erased and the iterator invalidated.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  UseMap::iterator Begin = Uses.lower_bound(RA);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  UseMap::iterator E = Uses.end();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  UseMap::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">for</span> (I = Begin; I != E &amp;&amp; I-&gt;first == RA; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    MarkLive(I-&gt;second);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// Erase RA from the Uses map (from the lower bound to wherever we ended up</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// after the loop).</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  Uses.erase(Begin, I);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">// RemoveDeadStuffFromFunction - Remove any arguments and return values from F</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">// that are not in LiveValues. Transform the function and all of the callees of</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">// the function to not have these arguments and return values.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="keywordtype">bool</span> DAE::RemoveDeadStuffFromFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> *F) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Don&#39;t modify fully live functions</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (LiveFunctions.count(F))</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Start by computing a new prototype for the function, which is the same as</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// the old function, but has fewer arguments and a different return type.</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  std::vector&lt;Type*&gt; Params;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// Keep track of if we have a live &#39;returned&#39; argument</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordtype">bool</span> HasLiveReturnedArg = <span class="keyword">false</span>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// Set up to build a new list of parameter attributes.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 8&gt;</a> AttributesVec;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;PAL = F-&gt;<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>();</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">// Remember which arguments are still alive.</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;bool, 10&gt;</a> ArgAlive(FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">getNumParams</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// Construct the new parameter list from non-dead arguments. Also construct</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// a new set of parameter attributes to correspond. Skip the first parameter</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">// attribute, since that belongs to the return value.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>();</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    RetOrArg Arg = CreateArg(F, i);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (LiveValues.erase(Arg)) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      Params.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType());</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      ArgAlive[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="comment">// Get the original parameter attributes (skipping the first one, that is</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="comment">// for the return value.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">if</span> (PAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(i + 1)) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(PAL, i + 1);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">if</span> (B.<a class="code" href="classllvm_1_1AttrBuilder.html#abdbec56994354ddc1ef59de935f52563">contains</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabc4928980b8d9acf4c07002166130918">Attribute::Returned</a>))</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;          HasLiveReturnedArg = <span class="keyword">true</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        AttributesVec.</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Params.size(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      ++NumArgumentsEliminated;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Removing argument &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName()</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;) from &quot;</span> &lt;&lt; F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// Find out the new return value.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>();</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NRetTy = NULL;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordtype">unsigned</span> RetCount = <a class="code" href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">NumRetVals</a>(F);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// -1 means unused, other numbers are the new index</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 5&gt;</a> NewRetIdxs(RetCount, -1);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  std::vector&lt;Type*&gt; RetTypes;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// If there is a function with a live &#39;returned&#39; argument but a dead return</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// value, then there are two possible actions:</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">// 1) Eliminate the return value and take off the &#39;returned&#39; attribute on the</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="comment">//    argument.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// 2) Retain the &#39;returned&#39; attribute and treat the return value (but not the</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">//    entire function) as live so that it is not eliminated.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// </span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// It&#39;s not clear in the general case which option is more profitable because,</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// even in the absence of explicit uses of the return value, code generation</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// is free to use the &#39;returned&#39; attribute to do things like eliding</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// save/restores of registers across calls. Whether or not this happens is</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// target and ABI-specific as well as depending on the amount of register</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// pressure, so there&#39;s no good way for an IR-level pass to figure this out.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// Fortunately, the only places where &#39;returned&#39; is currently generated by</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// the FE are places where &#39;returned&#39; is basically free and almost always a</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// performance win, so the second option can just be used always for now.</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// This should be revisited if &#39;returned&#39; is ever applied more liberally.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">if</span> (RetTy-&gt;isVoidTy() || HasLiveReturnedArg) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    NRetTy = RetTy;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1StructType.html">StructType</a>&gt;(RetTy);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (STy)</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="comment">// Look at each of the original return values individually.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != RetCount; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        RetOrArg <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> = CreateRet(F, i);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">if</span> (LiveValues.erase(Ret)) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;          RetTypes.push_back(STy-&gt;<a class="code" href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(i));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;          NewRetIdxs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = RetTypes.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() - 1;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          ++NumRetValsEliminated;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Removing return value &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                &lt;&lt; F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="comment">// We used to return a single value.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">if</span> (LiveValues.erase(CreateRet(F, 0))) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        RetTypes.push_back(RetTy);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        NewRetIdxs[0] = 0;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Removing return value from &quot;</span> &lt;&lt; F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        ++NumRetValsEliminated;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">if</span> (RetTypes.size() &gt; 1)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="comment">// More than one return type? Return a struct with them. Also, if we used</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="comment">// to return a struct and didn&#39;t change the number of return values,</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">// return a struct again. This prevents changing {something} into</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="comment">// something and {} into void.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="comment">// Make the new struct packed if we used to return a packed struct</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="comment">// already.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      NRetTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(STy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), RetTypes, STy-&gt;<a class="code" href="classllvm_1_1StructType.html#a883dd52cca7097874337641ca44473a0">isPacked</a>());</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RetTypes.size() == 1)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="comment">// One return type? Just a simple value then, but only if we didn&#39;t use to</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="comment">// return a struct with that simple value before.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      NRetTy = RetTypes.front();</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RetTypes.size() == 0)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">// No return types? Make it void, but only if we didn&#39;t use to return {}.</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      NRetTy = <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>());</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  assert(NRetTy &amp;&amp; <span class="stringliteral">&quot;No new return type found?&quot;</span>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// The existing function return attributes.</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> RAttrs = PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">getRetAttributes</a>();</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// Remove any incompatible attributes, but only if we removed all return</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// values. Otherwise, ensure that we don&#39;t have any conflicting attributes</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// here. Currently, this should not be possible, but special handling might be</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// required when new return value attributes are added.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (NRetTy-&gt;<a class="code" href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>())</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    RAttrs =</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      AttributeSet::get(NRetTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), AttributeSet::ReturnIndex,</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(RAttrs, AttributeSet::ReturnIndex).</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         removeAttributes(AttributeFuncs::</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                          <a class="code" href="namespacellvm_1_1AttributeFuncs.html#ac5d9401b2abed804b1c4eb7cd18c60c2">typeIncompatible</a>(NRetTy, AttributeSet::ReturnIndex),</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                          AttributeSet::ReturnIndex));</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    assert(!<a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(RAttrs, AttributeSet::ReturnIndex).</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;             hasAttributes(AttributeFuncs::</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                           <a class="code" href="namespacellvm_1_1AttributeFuncs.html#ac5d9401b2abed804b1c4eb7cd18c60c2">typeIncompatible</a>(NRetTy, AttributeSet::ReturnIndex),</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                           AttributeSet::ReturnIndex) &amp;&amp;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;           <span class="stringliteral">&quot;Return attributes no longer compatible?&quot;</span>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (RAttrs.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::ReturnIndex))</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(NRetTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), RAttrs));</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">if</span> (PAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::FunctionIndex))</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                              PAL.<a class="code" href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">getFnAttributes</a>()));</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Reconstruct the AttributesList based on the vector we constructed.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> NewPAL = AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), AttributesVec);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// Create the new function type based on the recomputed parameters.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *NFTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(NRetTy, Params, FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>());</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// No change?</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">if</span> (NFTy == FTy)</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">// Create the new function body and insert it into the module...</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NF = <a class="code" href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">Function::Create</a>(NFTy, F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>());</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#a05e6f4dd6bc551b79995792404af490b">copyAttributesFrom</a>(F);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#ad1efd93bf021addd8ac8a48a0c5fa3dd">setAttributes</a>(NewPAL);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// Insert the new function before the old function, so we won&#39;t be processing</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// it again.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">getFunctionList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(F, NF);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(F);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Loop over all of the callers of the function, transforming the call sites</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// to pass in a smaller number of arguments into the new function.</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  std::vector&lt;Value*&gt; Args;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">while</span> (!F-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(F-&gt;<a class="code" href="classllvm_1_1Value.html#ad9a329f9f85bc896a726a628aa3f4e9d">use_back</a>());</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = CS.getInstruction();</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    AttributesVec.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;CallPAL = CS.getAttributes();</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// The call return attributes.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> RAttrs = CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">getRetAttributes</a>();</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// Adjust in case the function was changed to return void.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    RAttrs =</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      AttributeSet::get(NF-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), AttributeSet::ReturnIndex,</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(RAttrs, AttributeSet::ReturnIndex).</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        removeAttributes(AttributeFuncs::</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                         <a class="code" href="namespacellvm_1_1AttributeFuncs.html#ac5d9401b2abed804b1c4eb7cd18c60c2">typeIncompatible</a>(NF-&gt;<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>(),</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                          AttributeSet::ReturnIndex),</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                         AttributeSet::ReturnIndex));</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (RAttrs.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::ReturnIndex))</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(NF-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), RAttrs));</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// Declare these outside of the loops, so we can reuse them for the second</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// loop, which loops the varargs.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">CallSite::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CS.arg_begin();</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordtype">unsigned</span> i = 0;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// Loop over those operands, corresponding to the normal arguments to the</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// original function, and add those that are still alive.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> e = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">getNumParams</a>(); i != e; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">if</span> (ArgAlive[i]) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        Args.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*I);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="comment">// Get original parameter attributes, but skip return attributes.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(i + 1)) {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;          <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(CallPAL, i + 1);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;          <span class="comment">// If the return type has changed, then get rid of &#39;returned&#39; on the</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          <span class="comment">// call site. The alternative is to make all &#39;returned&#39; attributes on</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;          <span class="comment">// call sites keep the return value alive just like &#39;returned&#39;</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          <span class="comment">// attributes on function declaration but it&#39;s less clearly a win</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          <span class="comment">// and this is not an expected case anyway</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          <span class="keywordflow">if</span> (NRetTy != RetTy &amp;&amp; B.<a class="code" href="classllvm_1_1AttrBuilder.html#abdbec56994354ddc1ef59de935f52563">contains</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabc4928980b8d9acf4c07002166130918">Attribute::Returned</a>))</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            B.<a class="code" href="classllvm_1_1AttrBuilder.html#aa63e528eeff5082f6920b10244143920">removeAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabc4928980b8d9acf4c07002166130918">Attribute::Returned</a>);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          AttributesVec.</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Args.size(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// Push any varargs arguments on the list. Don&#39;t forget their attributes.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">CallSite::arg_iterator</a> E = CS.arg_end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      Args.push_back(*I);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(i + 1)) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>(CallPAL, i + 1);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        AttributesVec.</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          push_back(AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), Args.size(), <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">hasAttributes</a>(AttributeSet::FunctionIndex))</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      AttributesVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AttributeSet::get(Call-&gt;getContext(),</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                                CallPAL.<a class="code" href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">getFnAttributes</a>()));</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// Reconstruct the AttributesList based on the vector we constructed.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> NewCallPAL = AttributeSet::get(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), AttributesVec);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(Call)) {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      New = <a class="code" href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">InvokeInst::Create</a>(NF, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                               Args, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setCallingConv(CS.getCallingConv());</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      cast&lt;InvokeInst&gt;(New)-&gt;setAttributes(NewCallPAL);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      New = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(NF, Args, <span class="stringliteral">&quot;&quot;</span>, Call);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setCallingConv(CS.getCallingConv());</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      cast&lt;CallInst&gt;(New)-&gt;setAttributes(NewCallPAL);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">if</span> (cast&lt;CallInst&gt;(Call)-&gt;isTailCall())</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        cast&lt;CallInst&gt;(New)-&gt;setTailCall();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    New-&gt;setDebugLoc(Call-&gt;getDebugLoc());</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    Args.clear();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (!Call-&gt;use_empty()) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">if</span> (New-&gt;getType() == Call-&gt;getType()) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="comment">// Return type not changed? Just replace users then.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        Call-&gt;replaceAllUsesWith(New);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        New-&gt;takeName(Call);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (New-&gt;getType()-&gt;isVoidTy()) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="comment">// Our return value has uses, but they will get removed later on.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">// Replace by null for now.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">if</span> (!Call-&gt;getType()-&gt;isX86_MMXTy())</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;          Call-&gt;replaceAllUsesWith(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Call-&gt;getType()));</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        assert(RetTy-&gt;isStructTy() &amp;&amp;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;               <span class="stringliteral">&quot;Return type changed, but not into a void. The old return type&quot;</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;               <span class="stringliteral">&quot; must have been a struct!&quot;</span>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt = <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(Call)) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;          <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP = II-&gt;getNormalDest()-&gt;begin();</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;          <span class="keywordflow">while</span> (isa&lt;PHINode&gt;(IP)) ++IP;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          InsertPt = IP;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="comment">// We used to return a struct. Instead of doing smart stuff with all the</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="comment">// uses of this struct, we will just rebuild it using</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="comment">// extract/insertvalue chaining and let instcombine clean that up.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="comment">// Start out building up our return value from undef</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RetVal = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(RetTy);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != RetCount; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;          <span class="keywordflow">if</span> (NewRetIdxs[i] != -1) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *V;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keywordflow">if</span> (RetTypes.size() &gt; 1)</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;              <span class="comment">// We are still returning a struct, so extract the value from our</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;              <span class="comment">// return value</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;              V = <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(New, NewRetIdxs[i], <span class="stringliteral">&quot;newret&quot;</span>,</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                           InsertPt);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;              <span class="comment">// We are now returning a single element, so just insert that</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;              V = New;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="comment">// Insert the value at the old position</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            RetVal = <a class="code" href="classllvm_1_1InsertValueInst.html#a6df8a5db1907e4cfed3029c0c786a40b">InsertValueInst::Create</a>(RetVal, V, i, <span class="stringliteral">&quot;oldret&quot;</span>, InsertPt);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;          }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="comment">// Now, replace all uses of the old call instruction with the return</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="comment">// struct we built</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        Call-&gt;replaceAllUsesWith(RetVal);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        New-&gt;takeName(Call);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">// Finally, remove the old call from the program, reducing the use-count of</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// F.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    Call-&gt;eraseFromParent();</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// Since we have now created the new function, splice the body of the old</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// function right into the new function, leaving the old rotting hulk of the</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="comment">// function empty.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  NF-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>().<a class="code" href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(NF-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>());</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="comment">// Loop over the argument list, transferring uses of the old arguments over to</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="comment">// the new arguments, also transferring over the names as well.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  i = 0;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(),</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;       I2 = NF-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span> (ArgAlive[i]) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <span class="comment">// If this is a live argument, move the name and users over to the new</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="comment">// version.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(I2);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      I2-&gt;takeName(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      ++I2;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="comment">// If this argument is dead, replace any uses of it with null constants</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="comment">// (these are guaranteed to become unused later on).</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isX86_MMXTy())</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()));</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// If we change the return value of the function we must rewrite any return</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// instructions.  Check this now.</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">if</span> (F-&gt;<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>() != NF-&gt;<a class="code" href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">getReturnType</a>())</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = NF-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = NF-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = dyn_cast&lt;ReturnInst&gt;(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator())) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RetVal;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="keywordflow">if</span> (NFTy-&gt;getReturnType()-&gt;isVoidTy()) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;          RetVal = 0;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;          assert (RetTy-&gt;isStructTy());</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;          <span class="comment">// The original return value was a struct, insert</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;          <span class="comment">// extractvalue/insertvalue chains to extract only the values we need</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;          <span class="comment">// to return and insert them into our new result.</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;          <span class="comment">// This does generate messy code, but we&#39;ll let it to instcombine to</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          <span class="comment">// clean that up.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *OldRet = RI-&gt;getOperand(0);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;          <span class="comment">// Start out building up our return value from undef</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          RetVal = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(NRetTy);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != RetCount; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <span class="keywordflow">if</span> (NewRetIdxs[i] != -1) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;              <a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> *EV = <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(OldRet, i,</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                                              <span class="stringliteral">&quot;oldret&quot;</span>, RI);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;              <span class="keywordflow">if</span> (RetTypes.size() &gt; 1) {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <span class="comment">// We&#39;re still returning a struct, so reinsert the value into</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                <span class="comment">// our new return value at the new index</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                RetVal = <a class="code" href="classllvm_1_1InsertValueInst.html#a6df8a5db1907e4cfed3029c0c786a40b">InsertValueInst::Create</a>(RetVal, EV, NewRetIdxs[i],</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                                                 <span class="stringliteral">&quot;newret&quot;</span>, RI);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;              } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="comment">// We are now only returning a simple value, so just return the</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="comment">// extracted value.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                RetVal = EV;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;              }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="comment">// Replace the return instruction with one returning the new return</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="comment">// value (possibly 0 if we became void).</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="classllvm_1_1ReturnInst.html#ace9225fc27f77c5078f56027ed5421a6">ReturnInst::Create</a>(F-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), RetVal, RI);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getInstList().erase(RI);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">// Patch the pointer to LLVM function in debug info descriptor.</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  FunctionDIMap::iterator DI = FunctionDIs.find(F);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">if</span> (DI != FunctionDIs.end())</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    DI-&gt;second.replaceFunction(NF);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// Now that the old function is dead, delete it.</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  F-&gt;<a class="code" href="classllvm_1_1Function.html#a8969dec86d24dd579f8ecc963e1dc8b4">eraseFromParent</a>();</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;}</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="keywordtype">bool</span> DAE::runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// Collect debug info descriptors for functions.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  CollectFunctionDIs(M);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// First pass: Do a simple check to see if any functions can have their &quot;...&quot;</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// removed.  We can do this if they never call va_start.  This loop cannot be</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// fused with the next loop, because deleting a function invalidates</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// information computed while surveying other functions.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Deleting dead varargs\n&quot;</span>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M.<a class="code" href="classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = M.<a class="code" href="classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>()-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>())</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      Changed |= DeleteDeadVarargs(F);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// Second phase:loop through the module, determining which arguments are live.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// We assume all arguments are dead unless proven otherwise (allowing us to</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// determine that dead arguments passed into recursive functions are dead).</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DAE - Determining liveness\n&quot;</span>);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M.<a class="code" href="classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = M.<a class="code" href="classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    SurveyFunction(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// Now, remove all dead arguments and return values from each function in</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="comment">// turn.</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M.<a class="code" href="classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = M.<a class="code" href="classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// Increment now, because the function will probably get removed (ie.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// replaced by a new one).</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *F = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    Changed |= RemoveDeadStuffFromFunction(F);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  }</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// Finally, look for any unused parameters in functions with non-local</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// linkage and replace the passed in parameters with undef.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Module::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = M.<a class="code" href="classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">begin</a>(), E = M.<a class="code" href="classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a>&amp; F = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    Changed |= RemoveDeadArgumentsFromCallers(F);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02279">Instructions.h:2279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a38ea691c2eeaf3facd74d5cfb0c725b0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00218">GlobalValue.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a0359da073a544050d5aa25ea1d6eacb9"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a0359da073a544050d5aa25ea1d6eacb9">llvm::CallSiteBase::isCallee</a></div><div class="ttdeci">bool isCallee(value_use_iterator&lt; UserTy &gt; UI) const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00107">CallSite.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1DIDescriptor_html"><div class="ttname"><a href="classllvm_1_1DIDescriptor.html">llvm::DIDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8h_source.html#l00060">DebugInfo.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html">llvm::ExtractValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00167">Function.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a4e7c7828319bc9db0f49c3c6d8f56ac7"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a4e7c7828319bc9db0f49c3c6d8f56ac7">llvm::CallSiteBase::getAttributes</a></div><div class="ttdeci">const AttributeSet &amp; getAttributes() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00179">CallSite.h:179</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">LLVM Argument representation. </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00035">Argument.h:35</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a97cf043af111c14bb4d03a99cf42af03"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a97cf043af111c14bb4d03a99cf42af03">llvm::FunctionType::getNumParams</a></div><div class="ttdeci">unsigned getNumParams() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00133">DerivedTypes.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="CallingConv_8h_html"><div class="ttname"><a href="CallingConv_8h.html">CallingConv.h</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">llvm::MipsISD::Ext</a></div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00104">MipsISelLowering.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4b37898a6d26b0d5fcee66548f2621d3"><div class="ttname"><a href="classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">llvm::Function::isIntrinsic</a></div><div class="ttdeci">bool isIntrinsic() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00156">Function.h:156</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_ab52eefaf4892829072b70e0e2e3d88bf"><div class="ttname"><a href="classllvm_1_1Module.html#ab52eefaf4892829072b70e0e2e3d88bf">llvm::Module::named_metadata_end</a></div><div class="ttdeci">named_metadata_iterator named_metadata_end()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00559">Module.h:559</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c469a194119a14e5a018ebb9b847cf0"><div class="ttname"><a href="namespacellvm.html#a7c469a194119a14e5a018ebb9b847cf0">llvm::operator&lt;</a></div><div class="ttdeci">void operator&lt;(const Optional&lt; T &gt; &amp;X, const Optional&lt; U &gt; &amp;Y)</div><div class="ttdoc">Poison comparison between two Optional objects. Clients needs to explicitly compare the underlying va...</div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_addab854f674836e5497dcfafff324e27"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#addab854f674836e5497dcfafff324e27">llvm::CallSiteBase::setArgument</a></div><div class="ttdeci">void setArgument(unsigned ArgNo, Value *newVal)</div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00116">CallSite.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_ab02cb6f4884b5c788efb97b6741dccaf"><div class="ttname"><a href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">llvm::StringRef::str</a></div><div class="ttdeci">std::string str() const </div><div class="ttdoc">str - Get the contents as an std::string. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00181">StringRef.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a26ccf11b81c01a45cb40137c775f7cad"><div class="ttname"><a href="classllvm_1_1Function.html#a26ccf11b81c01a45cb40137c775f7cad">llvm::Function::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00179">Function.cpp:179</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00418">Function.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a8e7f8107cfcd8c4f169185e70a3d64ff"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">llvm::ExtractValueInst::Create</a></div><div class="ttdeci">static ExtractValueInst * Create(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01766">Instructions.h:1766</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="DeadArgumentElimination_8cpp_html_a44735b3025ed4789ba2518cad2f1d600"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#a44735b3025ed4789ba2518cad2f1d600">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumArgumentsEliminated,&quot;Number of unread args removed&quot;)</div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html_abdbec56994354ddc1ef59de935f52563"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#abdbec56994354ddc1ef59de935f52563">llvm::AttrBuilder::contains</a></div><div class="ttdeci">bool contains(Attribute::AttrKind A) const </div><div class="ttdoc">Return true if the builder has the specified attribute. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00434">Attributes.h:434</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a65a550af73bd99c96abea847916aa4e9"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">llvm::CallSiteBase::getArgument</a></div><div class="ttdeci">ValTy * getArgument(unsigned ArgNo) const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00111">CallSite.h:111</a></div></div>
<div class="ttc" id="CallSite_8h_html"><div class="ttname"><a href="CallSite_8h.html">CallSite.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_aef89c402976e04c0abe4b10a963d35e3"><div class="ttname"><a href="classllvm_1_1Function.html#aef89c402976e04c0abe4b10a963d35e3">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00248">Function.cpp:248</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a799ffb6d2bab62ea523b0c13f748d080"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a799ffb6d2bab62ea523b0c13f748d080">llvm::AttributeSet::getRetAttributes</a></div><div class="ttdeci">AttributeSet getRetAttributes() const </div><div class="ttdoc">The attributes for the ret value are returned. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00800">Attributes.cpp:800</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a44c87e8da8c79e2fdb74e4feef0b9ad6"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a44c87e8da8c79e2fdb74e4feef0b9ad6">llvm::ExtractValueInst::hasIndices</a></div><div class="ttdeci">bool hasIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01808">Instructions.h:1808</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1DIArray_html"><div class="ttname"><a href="classllvm_1_1DIArray.html">llvm::DIArray</a></div><div class="ttdoc">DIArray - This descriptor holds an array of descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8h_source.html#l00167">DebugInfo.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a883dd52cca7097874337641ca44473a0"><div class="ttname"><a href="classllvm_1_1StructType.html#a883dd52cca7097874337641ca44473a0">llvm::StructType::isPacked</a></div><div class="ttdeci">bool isPacked() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00241">DerivedTypes.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html">llvm::NamedMDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00195">Metadata.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html"><div class="ttname"><a href="classllvm_1_1AttributeSet.html">llvm::AttributeSet</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00202">Attributes.h:202</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="namespacellvm_html_ae6cc56f0b4b54792d6733188c7c49e92"><div class="ttname"><a href="namespacellvm.html#ae6cc56f0b4b54792d6733188c7c49e92">llvm::createDeadArgHackingPass</a></div><div class="ttdeci">ModulePass * createDeadArgHackingPass()</div><div class="ttdef"><b>Definition:</b> <a href="DeadArgumentElimination_8cpp_source.html#l00194">DeadArgumentElimination.cpp:194</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_afd679fbb50dac6b114f8df0e0f2876f3"><div class="ttname"><a href="classllvm_1_1FunctionType.html#afd679fbb50dac6b114f8df0e0f2876f3">llvm::FunctionType::param_end</a></div><div class="ttdeci">param_iterator param_end() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00125">DerivedTypes.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a05e6f4dd6bc551b79995792404af490b"><div class="ttname"><a href="classllvm_1_1Function.html#a05e6f4dd6bc551b79995792404af490b">llvm::Function::copyAttributesFrom</a></div><div class="ttdeci">void copyAttributesFrom(const GlobalValue *Src)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00347">Function.cpp:347</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="namespacellvm_1_1AttributeFuncs_html_ac5d9401b2abed804b1c4eb7cd18c60c2"><div class="ttname"><a href="namespacellvm_1_1AttributeFuncs.html#ac5d9401b2abed804b1c4eb7cd18c60c2">llvm::AttributeFuncs::typeIncompatible</a></div><div class="ttdeci">AttributeSet typeIncompatible(Type *Ty, uint64_t Index)</div><div class="ttdoc">Which attributes cannot be applied to a type. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01161">Attributes.cpp:1161</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1DISubprogram_html"><div class="ttname"><a href="classllvm_1_1DISubprogram.html">llvm::DISubprogram</a></div><div class="ttdoc">DISubprogram - This is a wrapper for a subprogram (e.g. a function). </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8h_source.html#l00429">DebugInfo.h:429</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="DebugInfo_8h_html"><div class="ttname"><a href="DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ac651192f7bb4de8e675b000f406d6489"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ac651192f7bb4de8e675b000f406d6489">llvm::CallSiteBase::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00170">CallSite.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00361">Type.cpp:361</a></div></div>
<div class="ttc" id="namespacellvm_html_ae094b310153c30b08dcec1b40459d385"><div class="ttname"><a href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">llvm::utostr</a></div><div class="ttdeci">static std::string utostr(uint64_t X, bool isNeg=false)</div><div class="ttdef"><b>Definition:</b> <a href="StringExtras_8h_source.html#l00088">StringExtras.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="namespaceCU_html"><div class="ttname"><a href="namespaceCU.html">CU</a></div><div class="ttdef"><b>Definition:</b> <a href="X86AsmBackend_8cpp_source.html#l00394">X86AsmBackend.cpp:394</a></div></div>
<div class="ttc" id="Transforms_2IPO_8h_html"><div class="ttname"><a href="Transforms_2IPO_8h.html">IPO.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_aafc2232f97cd2d2fae9b4f5bda77a363"><div class="ttname"><a href="classllvm_1_1Function.html#aafc2232f97cd2d2fae9b4f5bda77a363">llvm::Function::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken(const User **=0) const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00698">Function.cpp:698</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ac291102760c543c8e045e829d57d3341"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ac291102760c543c8e045e829d57d3341">llvm::GlobalValue::isWeakForLinker</a></div><div class="ttdeci">static bool isWeakForLinker(LinkageTypes Linkage)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00183">GlobalValue.h:183</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a9c293af587813d72fdc976697dd07f23"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">llvm::CallSiteBase&lt; Function, Value, User, Instruction, CallInst, InvokeInst, User::op_iterator &gt;::arg_iterator</a></div><div class="ttdeci">User::op_iterator arg_iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00133">CallSite.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a048066a2eb851073ae71cf3dc7a2bfe7"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a048066a2eb851073ae71cf3dc7a2bfe7">llvm::AttributeSet::getNumSlots</a></div><div class="ttdeci">unsigned getNumSlots() const </div><div class="ttdoc">Return the number of slots used in this attribute list. This is the number of arguments that have an ...</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00906">Attributes.cpp:906</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a3bf1a0496b2ea77618b25d8286e10a27"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a3bf1a0496b2ea77618b25d8286e10a27">llvm::InsertValueInst::getAggregateOperandIndex</a></div><div class="ttdeci">static unsigned getAggregateOperandIndex()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01907">Instructions.h:1907</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ae4c67f835911559821939fb23a2e7aff"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">llvm::CallSiteBase::getInstruction</a></div><div class="ttdeci">InstrTy * getInstruction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00079">CallSite.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a211c14a84be4519439d616f9027d86c9"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a211c14a84be4519439d616f9027d86c9">llvm::GlobalValue::mayBeOverridden</a></div><div class="ttdeci">static bool mayBeOverridden(LinkageTypes Linkage)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00171">GlobalValue.h:171</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a43d638279385ef1f48cb3e4990482e4c"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a43d638279385ef1f48cb3e4990482e4c">llvm::AttributeSet::getSlotAttributes</a></div><div class="ttdeci">AttributeSet getSlotAttributes(unsigned Slot) const </div><div class="ttdoc">Return the attributes at the given slot. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00916">Attributes.cpp:916</a></div></div>
<div class="ttc" id="classllvm_1_1DIArray_html_a22a66d1d4f5e1a339d3a6d8ee7fa2dab"><div class="ttname"><a href="classllvm_1_1DIArray.html#a22a66d1d4f5e1a339d3a6d8ee7fa2dab">llvm::DIArray::getElement</a></div><div class="ttdeci">DIDescriptor getElement(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8h_source.html#l00172">DebugInfo.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00390">Attributes.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a073e1c928b17a9c950d06dd368e40ab1"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a073e1c928b17a9c950d06dd368e40ab1">llvm::Intrinsic::vastart</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02451">Intrinsics.h:2451</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_ae80a20e450d3c835ba9d2422b7ff5d24"><div class="ttname"><a href="classllvm_1_1FunctionType.html#ae80a20e450d3c835ba9d2422b7ff5d24">llvm::FunctionType::param_begin</a></div><div class="ttdeci">param_iterator param_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00124">DerivedTypes.h:124</a></div></div>
<div class="ttc" id="namespacellvm_html_aa2dd61067e690ea927b852fa7e0b4317"><div class="ttname"><a href="namespacellvm.html#aa2dd61067e690ea927b852fa7e0b4317">llvm::createDeadArgEliminationPass</a></div><div class="ttdeci">ModulePass * createDeadArgEliminationPass()</div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html_a03007b982a936464f7116e3c47df89ee"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">llvm::InvokeInst::Create</a></div><div class="ttdeci">static InvokeInst * Create(Value *Func, BasicBlock *IfNormal, BasicBlock *IfException, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02863">Instructions.h:2863</a></div></div>
<div class="ttc" id="namespacellvm_html_acba49a9fdebd32e2613c2a3da9e7d5d2"><div class="ttname"><a href="namespacellvm.html#acba49a9fdebd32e2613c2a3da9e7d5d2">llvm::initializeDAEPass</a></div><div class="ttdeci">void initializeDAEPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eabc4928980b8d9acf4c07002166130918"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabc4928980b8d9acf4c07002166130918">llvm::Attribute::Returned</a></div><div class="ttdoc">Return value is always equal to this argument. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00095">Attributes.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00227">Type.cpp:227</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html_acf77b1de56fc46b8a5118ff95fae1403"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#acf77b1de56fc46b8a5118ff95fae1403">llvm::NamedMDNode::getOperand</a></div><div class="ttdeci">MDNode * getOperand(unsigned i) const </div><div class="ttdoc">getOperand - Return specified operand. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00545">Metadata.cpp:545</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00410">Function.h:410</a></div></div>
<div class="ttc" id="classllvm_1_1DIArray_html_a1682be4e8828c033e2f2b4e2bd5ac95c"><div class="ttname"><a href="classllvm_1_1DIArray.html#a1682be4e8828c033e2f2b4e2bd5ac95c">llvm::DIArray::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00328">DebugInfo.cpp:328</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html_a63957f9b09cf3a322d42be336980ec35"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html#a63957f9b09cf3a322d42be336980ec35">llvm::value_use_iterator::getOperandNo</a></div><div class="ttdeci">unsigned getOperandNo() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00199">User.h:199</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a861226dd056dd2438da26760b8e7a9a0"><div class="ttname"><a href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01187">Instructions.h:1187</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html_aee2867e0d1b4332055f536ac3d521d40"><div class="ttname"><a href="classllvm_1_1Argument.html#aee2867e0d1b4332055f536ac3d521d40">llvm::Argument::hasByValAttr</a></div><div class="ttdeci">bool hasByValAttr() const </div><div class="ttdoc">Return true if this argument has the byval attribute on it in its containing function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00081">Function.cpp:81</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a020ed4dc4297b07bdad741f18cf369ae"><div class="ttname"><a href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">llvm::Module::getFunctionList</a></div><div class="ttdeci">const FunctionListType &amp; getFunctionList() const </div><div class="ttdoc">Get the Module&amp;#39;s list of functions (constant). </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00492">Module.h:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aba93ec4079f8d709a1d5b4745310782e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01672">Constants.cpp:1672</a></div></div>
<div class="ttc" id="DeadArgumentElimination_8cpp_html_af58bcf4638a758d6a487fb9211e4cfca"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#af58bcf4638a758d6a487fb9211e4cfca">NumRetVals</a></div><div class="ttdeci">static unsigned NumRetVals(const Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="DeadArgumentElimination_8cpp_source.html#l00413">DeadArgumentElimination.cpp:413</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4d34a40b2667246539b80589adf2028e"><div class="ttname"><a href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">llvm::Function::getBasicBlockList</a></div><div class="ttdeci">const BasicBlockListType &amp; getBasicBlockList() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00374">Function.h:374</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a18fc4545474c6ebb6f7c547f64f4fb31"><div class="ttname"><a href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">llvm::StructType::get</a></div><div class="ttdeci">static StructType * get(LLVMContext &amp;Context, ArrayRef&lt; Type * &gt; Elements, bool isPacked=false)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00405">Type.cpp:405</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html_aa63e528eeff5082f6920b10244143920"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#aa63e528eeff5082f6920b10244143920">llvm::AttrBuilder::removeAttribute</a></div><div class="ttdeci">AttrBuilder &amp; removeAttribute(Attribute::AttrKind Val)</div><div class="ttdoc">Remove an attribute from the builder. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00997">Attributes.cpp:997</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="DeadArgumentElimination_8cpp_html_a6be32cfa10efb9f5de6e980582f8e088"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#a6be32cfa10efb9f5de6e980582f8e088">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(DAH,&quot;deadarghaX0r&quot;,&quot;Dead Argument Hacking (BUGPOINT USE ONLY; DO NOT USE)&quot;, false, false) ModulePass *llvm</div><div class="ttdef"><b>Definition:</b> <a href="DeadArgumentElimination_8cpp_source.html#l00186">DeadArgumentElimination.cpp:186</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a6df8a5db1907e4cfed3029c0c786a40b"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a6df8a5db1907e4cfed3029c0c786a40b">llvm::InsertValueInst::Create</a></div><div class="ttdeci">static InsertValueInst * Create(Value *Agg, Value *Val, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01881">Instructions.h:1881</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="StringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">getType - Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00107">GlobalValue.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_aa608a2d900dd6c15c18f4236b6548496"><div class="ttname"><a href="classllvm_1_1Module.html#aa608a2d900dd6c15c18f4236b6548496">llvm::Module::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00533">Module.h:533</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a4640d98233102674ddb6d6efaf2b7f97"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const </div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00066">Globals.cpp:66</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a564314dce5264ab0cfe6ae3d9f3f9c12"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a564314dce5264ab0cfe6ae3d9f3f9c12">llvm::AttributeSet::getSlotIndex</a></div><div class="ttdeci">unsigned getSlotIndex(unsigned Slot) const </div><div class="ttdoc">Return the index for the given slot. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00910">Attributes.cpp:910</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad9a329f9f85bc896a726a628aa3f4e9d"><div class="ttname"><a href="classllvm_1_1Value.html#ad9a329f9f85bc896a726a628aa3f4e9d">llvm::Value::use_back</a></div><div class="ttdeci">User * use_back()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00154">Value.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_ac1dc3fd2de69fea5cda5bca3974ec719"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#ac1dc3fd2de69fea5cda5bca3974ec719">llvm::AttributeSet::hasAttributes</a></div><div class="ttdeci">bool hasAttributes(unsigned Index) const </div><div class="ttdoc">Return true if attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00828">Attributes.cpp:828</a></div></div>
<div class="ttc" id="classllvm_1_1ImmutableCallSite_html"><div class="ttname"><a href="classllvm_1_1ImmutableCallSite.html">llvm::ImmutableCallSite</a></div><div class="ttdoc">ImmutableCallSite - establish a view to a call site for examination. </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00318">CallSite.h:318</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_adf66d58e85fb4e46e9c1ae55186a6930"><div class="ttname"><a href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00171">Function.cpp:171</a></div></div>
<div class="ttc" id="classllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00235">Pass.h:235</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a279174d137c1ef32aa5b627f5e06620f"><div class="ttname"><a href="classllvm_1_1Module.html#a279174d137c1ef32aa5b627f5e06620f">llvm::Module::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00531">Module.h:531</a></div></div>
<div class="ttc" id="DIBuilder_8h_html"><div class="ttname"><a href="DIBuilder_8h.html">DIBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8969dec86d24dd579f8ecc963e1dc8b4"><div class="ttname"><a href="classllvm_1_1Function.html#a8969dec86d24dd579f8ecc963e1dc8b4">llvm::Function::eraseFromParent</a></div><div class="ttdeci">virtual void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00187">Function.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_affa0f3ae92ab8696fccd107c0addf5a2"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">llvm::CallSiteBase::arg_begin</a></div><div class="ttdeci">IterTy arg_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00137">CallSite.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_ace9225fc27f77c5078f56027ed5421a6"><div class="ttname"><a href="classllvm_1_1ReturnInst.html#ace9225fc27f77c5078f56027ed5421a6">llvm::ReturnInst::Create</a></div><div class="ttdeci">static ReturnInst * Create(LLVMContext &amp;C, Value *retVal=0, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02301">Instructions.h:2301</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ad1efd93bf021addd8ac8a48a0c5fa3dd"><div class="ttname"><a href="classllvm_1_1Function.html#ad1efd93bf021addd8ac8a48a0c5fa3dd">llvm::Function::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeSet attrs)</div><div class="ttdoc">Set the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00173">Function.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_abefc2d8baa67d6f9e49c95912cfde480"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#abefc2d8baa67d6f9e49c95912cfde480">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00211">GlobalValue.h:211</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_ab9b67f93a2231970abb3d95636660ffc"><div class="ttname"><a href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">llvm::FunctionType::isVarArg</a></div><div class="ttdeci">bool isVarArg() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00120">DerivedTypes.h:120</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a06dca74a66b3e9cae0cc8035aa42167f"><div class="ttname"><a href="classllvm_1_1Module.html#a06dca74a66b3e9cae0cc8035aa42167f">llvm::Module::named_metadata_iterator</a></div><div class="ttdeci">NamedMDListType::iterator named_metadata_iterator</div><div class="ttdoc">The named metadata iterators. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00141">Module.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a9eda832d6e80bc19b98f22f4ec714e3f"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">llvm::FunctionType::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00121">DerivedTypes.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a50d0911852017f2168de329f53d8568d"><div class="ttname"><a href="classllvm_1_1Constant.html#a50d0911852017f2168de329f53d8568d">llvm::Constant::removeDeadConstantUsers</a></div><div class="ttdeci">void removeDeadConstantUsers() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00395">Constants.cpp:395</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="Constant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html_ac70153649461940646eeb8b9ce50e416"><div class="ttname"><a href="classllvm_1_1Argument.html#ac70153649461940646eeb8b9ce50e416">llvm::Argument::getArgNo</a></div><div class="ttdeci">unsigned getArgNo() const </div><div class="ttdoc">Return the index of this formal argument in its containing function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00067">Function.cpp:67</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html_a24a3512f374b3f29b573a223dfd13f2a"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#a24a3512f374b3f29b573a223dfd13f2a">llvm::NamedMDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">getNumOperands - Return the number of NamedMDNode operands. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00540">Metadata.cpp:540</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02841">Instructions.h:2841</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1DICompileUnit_html_a3c6854ffdc6a80751b1c263b632113e2"><div class="ttname"><a href="classllvm_1_1DICompileUnit.html#a3c6854ffdc6a80751b1c263b632113e2">llvm::DICompileUnit::getSubprograms</a></div><div class="ttdeci">DIArray getSubprograms() const </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00799">DebugInfo.cpp:799</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a7f9b7f9abcc0d7c98df4c00dc2ae6e7e"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">llvm::ExtractValueInst::idx_begin</a></div><div class="ttdeci">idx_iterator idx_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01787">Instructions.h:1787</a></div></div>
<div class="ttc" id="namespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01684">APInt.h:1684</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1DICompileUnit_html"><div class="ttname"><a href="classllvm_1_1DICompileUnit.html">llvm::DICompileUnit</a></div><div class="ttdoc">DICompileUnit - A wrapper for a compile unit. </div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8h_source.html#l00402">DebugInfo.h:402</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a93514af69d7c446e721c1023af2b78ec"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a93514af69d7c446e721c1023af2b78ec">llvm::AttributeSet::isEmpty</a></div><div class="ttdeci">bool isEmpty() const </div><div class="ttdoc">Return true if there are no attributes. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00345">Attributes.h:345</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a5d052342d8cb7a6952a4c123b5385f90"><div class="ttname"><a href="classllvm_1_1Module.html#a5d052342d8cb7a6952a4c123b5385f90">llvm::Module::named_metadata_begin</a></div><div class="ttdeci">named_metadata_iterator named_metadata_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00554">Module.h:554</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a162a63c89ac118c8ffef75b3a892efa0"><div class="ttname"><a href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, const Twine &amp;N=&quot;&quot;, Module *M=0)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00128">Function.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af5c7041df3ad5edffe5da17b5264c1fc"><div class="ttname"><a href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const </div><div class="ttdoc">isVoidTy - Return true if this is &amp;#39;void&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html">llvm::InsertValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01846">Instructions.h:1846</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a1c8b14cc527bd65daa7418deb83cbedc"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a1c8b14cc527bd65daa7418deb83cbedc">llvm::AttributeSet::getFnAttributes</a></div><div class="ttdeci">AttributeSet getFnAttributes() const </div><div class="ttdoc">The function attributes are returned. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00809">Attributes.cpp:809</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:27 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
