<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: Path.inc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Windows_2Path_8inc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Windows/Path.inc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Windows_2Path_8inc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- llvm/Support/Windows/Path.inc - Windows Path Impl --------*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the Windows specific implementation of the Path API.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//=== WARNING: Implementation here must contain only generic Windows code that</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//===          is guaranteed to work on *all* Windows variants.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Windows_8h.html">Windows.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;io.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#undef max</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// MinGW doesn&#39;t define this.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifndef _ERRNO_T_DEFINED</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define _ERRNO_T_DEFINED</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> errno_t;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor"># pragma comment(lib, &quot;advapi32.lib&quot;)  // This provides CryptAcquireContextW.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">using</span> <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">llvm::sys::windows::UTF8ToUTF16</a>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using</span> <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">llvm::sys::windows::UTF16ToUTF8</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keyword">typedef</span> BOOLEAN (WINAPI *PtrCreateSymbolicLinkW)(</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">/*__in*/</span> LPCWSTR lpSymlinkFileName,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">/*__in*/</span> LPCWSTR lpTargetFileName,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">/*__in*/</span> DWORD dwFlags);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  PtrCreateSymbolicLinkW create_symbolic_link_api =</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      PtrCreateSymbolicLinkW(::GetProcAddress(</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;          ::GetModuleHandleW(L<span class="stringliteral">&quot;Kernel32.dll&quot;</span>), <span class="stringliteral">&quot;CreateSymbolicLinkW&quot;</span>));</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> TempDir(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;wchar_t&gt;</a> &amp;<a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a>) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  retry_temp_dir:</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    DWORD len = ::GetTempPathW(result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>(), result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (len &gt; result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>()) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="keywordflow">goto</span> retry_temp_dir;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(len);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1path.html#a09dde3e6e89e6e85e2d06f7afe4d2714">is_separator</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> value) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">switch</span> (value) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">case</span> L<span class="charliteral">&#39;\\&#39;</span>:</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">case</span> L<span class="charliteral">&#39;/&#39;</span>:</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// FIXME: mode should be used here and default to user r/w only,</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// it currently comes in as a UNIX mode.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="Path_8cpp.html#a093374bcc0be5e6dca09e80884355674">createUniqueEntity</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="README-SSE_8txt.html#a22e7866be85852a21786d1c32d5999a6">model</a>, <span class="keywordtype">int</span> &amp;result_fd,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;result_path,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                     <span class="keywordtype">bool</span> makeAbsolute, <span class="keywordtype">unsigned</span> <a class="code" href="README-Thumb_8txt.html#ad7bf7cc723b97ab4a518502c217ddbd7">mode</a>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                     <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708">FSEntity</a> <a class="code" href="classllvm_1_1Type.html">Type</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// Use result_path as temp storage.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  result_path.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(0);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> m = model.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(result_path);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> model_utf16;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(m, model_utf16)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (makeAbsolute) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// Make model absolute by prepending a temp directory if it&#39;s not already.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">bool</span> absolute = <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa810d4410de405f514454936632c5551">sys::path::is_absolute</a>(m);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (!absolute) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 64&gt;</a> temp_dir;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = TempDir(temp_dir)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">// Handle c: by removing it.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">if</span> (model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &gt; 2 &amp;&amp; model_utf16[1] == L<span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        model_utf16.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + 2);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      model_utf16.<a class="code" href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a>(model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), temp_dir.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), temp_dir.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// Replace &#39;%&#39; with random chars. From here on, DO NOT modify model. It may be</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// needed if the randomly chosen path already exists.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> random_path_utf16;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Get a Crypto Provider for CryptGenRandom.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  HCRYPTPROV HCPC;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (!::CryptAcquireContextW(&amp;HCPC,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                              NULL,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                              NULL,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                              PROV_RSA_FULL,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                              CRYPT_VERIFYCONTEXT))</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classScopedHandle.html">ScopedCryptContext</a> CryptoProvider(HCPC);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;retry_random_path:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(0);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;wchar_t&gt;::const_iterator</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                                e = model_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == L<span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      BYTE <a class="code" href="Target_2SystemZ_2README_8txt.html#a5f380c569497eab93980e5994c60df31">val</a> = 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">if</span> (!::CryptGenRandom(CryptoProvider, 1, &amp;val))</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(L<span class="stringliteral">&quot;0123456789abcdef&quot;</span>[val &amp; 15]);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// Make random_path_utf16 null terminated.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(0);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  HANDLE TempFileHandle = INVALID_HANDLE_VALUE;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">switch</span> (Type) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84">FS_File</a>: {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Try to create + open the path.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    TempFileHandle =</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        ::CreateFileW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), GENERIC_READ | GENERIC_WRITE,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                      FILE_SHARE_READ, NULL,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                      <span class="comment">// Return ERROR_FILE_EXISTS if the file</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                      <span class="comment">// already exists.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                      CREATE_NEW, FILE_ATTRIBUTE_TEMPORARY, NULL);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (TempFileHandle == INVALID_HANDLE_VALUE) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">// If the file existed, try again, otherwise, error.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (ec == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba2210518c1a68b3be675bfca1e6ca936a">windows_error::file_exists</a>)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Convert the Windows API file handle into a C-runtime handle.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">int</span> fd = ::_open_osfhandle(<a class="code" href="classintptr__t.html">intptr_t</a>(TempFileHandle), 0);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (fd == -1) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      ::CloseHandle(TempFileHandle);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      ::DeleteFileW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="comment">// MSDN doesn&#39;t say anything about _open_osfhandle setting errno or</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="comment">// GetLastError(), so just return invalid_handle.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bad69ba1841b41bb82f88d488d56579a3b">windows_error::invalid_handle</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    result_fd = fd;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c">FS_Name</a>: {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    DWORD <a class="code" href="FunctionAttrs_8cpp.html#a07522de877d8a6f09f42438dab01a434">attributes</a> = ::GetFileAttributesW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (attributes != INVALID_FILE_ATTRIBUTES)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError()));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (EC != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a> &amp;&amp;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        EC != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218">windows_error::path_not_found</a>)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b">FS_Dir</a>:</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (!::CreateDirectoryW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NULL)) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (EC != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba99dde533a88c4281e3eca0a8a2b947fb">windows_error::already_exists</a>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Set result_path to the utf-8 representation of the path.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                  random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(), result_path)) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">switch</span> (Type) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84">FS_File</a>:</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      ::CloseHandle(TempFileHandle);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      ::DeleteFileW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c">FS_Name</a>:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b">FS_Dir</a>:</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      ::RemoveDirectoryW(random_path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keyword">namespace </span>sys  {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keyword">namespace </span>fs {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;std::string <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a057a733b2dfa2f0531ceb335cf3b1d03">getMainExecutable</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *argv0, <span class="keywordtype">void</span> *MainExecAddr) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, MAX_PATH&gt;</a> PathName;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  DWORD Size = ::GetModuleFileNameW(NULL, PathName.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), PathName.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>());</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// A zero return value indicates a failure other than insufficient space.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (Size == 0)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// Insufficient space is determined by a return value equal to the size of</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// the buffer passed in.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (Size == PathName.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>())</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// On success, GetModuleFileNameW returns the number of characters written to</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// the buffer not including the NULL terminator.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  PathName.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(Size);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Convert the result from UTF-16 to UTF-8.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;char, MAX_PATH&gt;</a> PathNameUTF8;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(PathName.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), PathName.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(), PathNameUTF8))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">return</span> std::string(PathNameUTF8.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;UniqueID <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a59dbae5839ae3372684e418c5925c557">file_status::getUniqueID</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// The file is uniquely identified by the volume serial number along</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// with the 64-bit file identifier.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  uint64_t FileID = (<span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(FileIndexHigh) &lt;&lt; 32ULL) |</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(FileIndexLow);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">return</span> UniqueID(VolumeSerialNumber, FileID);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;TimeValue file_status::getLastModificationTime()<span class="keyword"> const </span>{</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  ULARGE_INTEGER UI;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  UI.LowPart = LastWriteTimeLow;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  UI.HighPart = LastWriteTimeHigh;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  TimeValue <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  Ret.fromWin32Time(UI.QuadPart);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ac7b1d477269428b188cef6585fe6fdf5">current_path</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;result) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, MAX_PATH&gt;</a> cur_path;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  DWORD len = MAX_PATH;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    cur_path.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    len = ::GetCurrentDirectoryW(cur_path.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>(), cur_path.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>());</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// A zero return value indicates a failure other than insufficient space.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// If there&#39;s insufficient space, the len returned is larger than the len</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// given.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  } <span class="keywordflow">while</span> (len &gt; cur_path.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>());</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// On success, GetCurrentDirectoryW returns the number of characters not</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// including the null-terminator.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  cur_path.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(len);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(cur_path.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), cur_path.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(), <a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a33cdf6e66707db20ff903c3ee378aa13">create_directory</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;existed) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage),</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">if</span> (!::CreateDirectoryW(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NULL)) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (ec == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba99dde533a88c4281e3eca0a8a2b947fb">windows_error::already_exists</a>)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      existed = <span class="keyword">true</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ad7c66c756855933e28aa2b05591935ea">create_hard_link</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a> = from.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(from_storage);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a> = to.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(to_storage);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// Convert to utf-16.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_from;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_to;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(f, wide_from)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(t, wide_to)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">if</span> (!::CreateHardLinkW(wide_from.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), wide_to.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NULL))</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a013687bf3f70a7062e65ec3c066a5d92">create_symlink</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;to, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Only do it if the function is available at runtime.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (!create_symbolic_link_api)</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4af5fb40ac03f36d0a5f37d64d770ecf9f">errc::function_not_supported</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> f = from.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(from_storage);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> t = to.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(to_storage);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// Convert to utf-16.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_from;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_to;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(f, wide_from)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(t, wide_to)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (!create_symbolic_link_api(wide_from.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), wide_to.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), 0))</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <span class="keyword">remove</span>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;existed) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  file_status st;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(path, st);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (EC) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (EC == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a> ||</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        EC == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218">windows_error::path_not_found</a>) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.toStringRef(path_storage),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (st.type() == file_type::directory_file) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (!::RemoveDirectoryW(<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>(path_utf16))) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (ec != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a>)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      existed = <span class="keyword">true</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (!::DeleteFileW(<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>(path_utf16))) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">if</span> (ec != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a>)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      existed = <span class="keyword">true</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511">rename</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;to) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> f = from.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(from_storage);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> t = to.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(to_storage);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// Convert to utf-16.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_from;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> wide_to;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(f, wide_from)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(t, wide_to)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2000; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (::MoveFileExW(wide_from.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), wide_to.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                      MOVEFILE_COPY_ALLOWED | MOVEFILE_REPLACE_EXISTING))</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (ec != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba913a35de5671198b72f722c1b410d948">windows_error::access_denied</a>)</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Retry MoveFile() at ACCESS_DENIED.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// System scanners (eg. indexer) might open the source file when</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// It is written and closed.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    ::Sleep(1);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a1fbb8d07077c6bf19b425d9b91f93f85">resize_file</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, uint64_t <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage),</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordtype">int</span> fd = ::_wopen(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), O_BINARY | _O_RDWR, S_IWRITE);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">if</span> (fd == -1)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1d8dc6cc5af15804cc75a8b5736b8d3e">generic_category</a>());</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#ifdef HAVE__CHSIZE_S</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  errno_t error = ::_chsize_s(fd, size);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  errno_t error = ::_chsize(fd, size);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  ::close(fd);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(error, <a class="code" href="namespacellvm.html#a1d8dc6cc5af15804cc75a8b5736b8d3e">generic_category</a>());</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">exists</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;result) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage),</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  DWORD attributes = ::GetFileAttributesW(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (attributes == INVALID_FILE_ATTRIBUTES) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// See if the file didn&#39;t actually exist.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError()));</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (ec != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a> &amp;&amp;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        ec != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218">windows_error::path_not_found</a>)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    result = <span class="keyword">false</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    result = <span class="keyword">true</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a359f175df4ccf031c3333715942119e8">can_write</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Path) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// FIXME: take security attributes into account.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> PathUtf16;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(Path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(PathStorage), PathUtf16))</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  DWORD Attr = ::GetFileAttributesW(PathUtf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">return</span> (Attr != INVALID_FILE_ATTRIBUTES) &amp;&amp; !(Attr &amp; FILE_ATTRIBUTE_READONLY);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ad3a7c62e8f9554d7f8e7fdb989f1c68e">can_execute</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Path) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> PathUtf16;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(Path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(PathStorage), PathUtf16))</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  DWORD Attr = ::GetFileAttributesW(PathUtf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> Attr != INVALID_FILE_ATTRIBUTES;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(file_status <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, file_status <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  assert(<a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">status_known</a>(A) &amp;&amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">status_known</a>(B));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">return</span> A.FileIndexHigh      == B.FileIndexHigh &amp;&amp;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         A.FileIndexLow       == B.FileIndexLow &amp;&amp;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         A.FileSizeHigh       == B.FileSizeHigh &amp;&amp;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;         A.FileSizeLow        == B.FileSizeLow &amp;&amp;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         A.LastWriteTimeHigh  == B.LastWriteTimeHigh &amp;&amp;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         A.LastWriteTimeLow   == B.LastWriteTimeLow &amp;&amp;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         A.VolumeSerialNumber == B.VolumeSerialNumber;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;A, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;B, <span class="keywordtype">bool</span> &amp;result) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  file_status fsA, fsB;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(A, fsA)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(B, fsB)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  result = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(fsA, fsB);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> isReservedName(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> path) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// This list of reserved names comes from MSDN, at:</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// http://msdn.microsoft.com/en-us/library/aa365247%28v=vs.85%29.aspx</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *sReservedNames[] = { <span class="stringliteral">&quot;nul&quot;</span>, <span class="stringliteral">&quot;con&quot;</span>, <span class="stringliteral">&quot;prn&quot;</span>, <span class="stringliteral">&quot;aux&quot;</span>,</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                              <span class="stringliteral">&quot;com1&quot;</span>, <span class="stringliteral">&quot;com2&quot;</span>, <span class="stringliteral">&quot;com3&quot;</span>, <span class="stringliteral">&quot;com4&quot;</span>, <span class="stringliteral">&quot;com5&quot;</span>, <span class="stringliteral">&quot;com6&quot;</span>,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                              <span class="stringliteral">&quot;com7&quot;</span>, <span class="stringliteral">&quot;com8&quot;</span>, <span class="stringliteral">&quot;com9&quot;</span>, <span class="stringliteral">&quot;lpt1&quot;</span>, <span class="stringliteral">&quot;lpt2&quot;</span>, <span class="stringliteral">&quot;lpt3&quot;</span>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                              <span class="stringliteral">&quot;lpt4&quot;</span>, <span class="stringliteral">&quot;lpt5&quot;</span>, <span class="stringliteral">&quot;lpt6&quot;</span>, <span class="stringliteral">&quot;lpt7&quot;</span>, <span class="stringliteral">&quot;lpt8&quot;</span>, <span class="stringliteral">&quot;lpt9&quot;</span> };</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// First, check to see if this is a device namespace, which always</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// starts with \\.\, since device namespaces are not legal file paths.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">if</span> (path.<a class="code" href="classllvm_1_1StringRef.html#a1a7bc4930b0396a67c30081f7cb30542">startswith</a>(<span class="stringliteral">&quot;\\\\.\\&quot;</span>))</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Then compare against the list of ancient reserved names</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">array_lengthof</a>(sReservedNames); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (path.<a class="code" href="classllvm_1_1StringRef.html#ab91ec0c78e03404aedf982aefd69fff5">equals_lower</a>(sReservedNames[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// The path isn&#39;t what we consider reserved.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> getStatus(HANDLE FileHandle, file_status &amp;Result) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (FileHandle == INVALID_HANDLE_VALUE)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">goto</span> handle_status_error;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">switch</span> (::GetFileType(FileHandle)) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Don&#39;t know anything about this file type&quot;</span>);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">case</span> FILE_TYPE_UNKNOWN: {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    DWORD Err = ::GetLastError();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (Err != NO_ERROR)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(Err);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    Result = file_status(file_type::type_unknown);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">case</span> FILE_TYPE_DISK:</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">case</span> FILE_TYPE_CHAR:</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    Result = file_status(file_type::character_file);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">case</span> FILE_TYPE_PIPE:</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    Result = file_status(file_type::fifo_file);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  BY_HANDLE_FILE_INFORMATION Info;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (!::GetFileInformationByHandle(FileHandle, &amp;Info))</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">goto</span> handle_status_error;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    file_type Type = (Info.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                         ? file_type::directory_file</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                         : file_type::regular_file;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    Result =</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        file_status(Type, Info.ftLastWriteTime.dwHighDateTime,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    Info.ftLastWriteTime.dwLowDateTime,</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    Info.dwVolumeSerialNumber, Info.nFileSizeHigh,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    Info.nFileSizeLow, Info.nFileIndexHigh, Info.nFileIndexLow);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;handle_status_error:</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">if</span> (EC == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">windows_error::file_not_found</a> ||</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      EC == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218">windows_error::path_not_found</a>)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    Result = file_status(file_type::file_not_found);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (EC == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba84cd1f68f7e2ac033d4caad35a88e6f5">windows_error::sharing_violation</a>)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    Result = file_status(file_type::type_unknown);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    Result = file_status(file_type::status_error);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, file_status &amp;result) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> path8 = path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">if</span> (isReservedName(path8)) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    result = file_status(file_type::character_file);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path8, path_utf16))</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  DWORD attr = ::GetFileAttributesW(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>());</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (attr == INVALID_FILE_ATTRIBUTES)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> getStatus(INVALID_HANDLE_VALUE, result);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// Handle reparse points.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (attr &amp; FILE_ATTRIBUTE_REPARSE_POINT) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="classScopedHandle.html">ScopedFileHandle</a> <a class="code" href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a>(</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      ::CreateFileW(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    0, <span class="comment">// Attributes only.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                    FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    NULL,</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    OPEN_EXISTING,</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                    FILE_FLAG_BACKUP_SEMANTICS,</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    0));</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a>)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">return</span> getStatus(INVALID_HANDLE_VALUE, result);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="classScopedHandle.html">ScopedFileHandle</a> <a class="code" href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a>(</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      ::CreateFileW(path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), 0, <span class="comment">// Attributes only.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, 0));</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a>)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">return</span> getStatus(INVALID_HANDLE_VALUE, result);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">return</span> getStatus(<a class="code" href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a>, result);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(<span class="keywordtype">int</span> FD, file_status &amp;Result) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  HANDLE FileHandle = <span class="keyword">reinterpret_cast&lt;</span>HANDLE<span class="keyword">&gt;</span>(_get_osfhandle(FD));</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">return</span> getStatus(FileHandle, Result);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a4689132529705999463e4270d4c71fde">setLastModificationAndAccessTime</a>(<span class="keywordtype">int</span> FD, TimeValue Time) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  ULARGE_INTEGER UI;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  UI.QuadPart = Time.toWin32Time();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  FILETIME FT;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  FT.dwLowDateTime = UI.LowPart;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  FT.dwHighDateTime = UI.HighPart;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  HANDLE FileHandle = <span class="keyword">reinterpret_cast&lt;</span>HANDLE<span class="keyword">&gt;</span>(_get_osfhandle(FD));</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">if</span> (!SetFileTime(FileHandle, NULL, &amp;FT, &amp;FT))</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a8b69cf051c3c0539de9a05998d60c162">get_magic</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, uint32_t len,</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;result) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(0);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// Convert path to UTF-16.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage),</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// Open file.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  HANDLE file = ::CreateFileW(<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>(path_utf16),</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                              GENERIC_READ,</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                              FILE_SHARE_READ,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                              NULL,</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                              OPEN_EXISTING,</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                              FILE_ATTRIBUTE_READONLY,</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                              NULL);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (file == INVALID_HANDLE_VALUE)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// Allocate buffer.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// Get magic!</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  DWORD bytes_read = 0;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="X86DisassemblerDecoder_8h.html#ad2f8ed01c1733d4eab0932d970abaa4c">BOOL</a> read_success = ::ReadFile(file, result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), len, &amp;bytes_read, NULL);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  ::CloseHandle(file);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">if</span> (!read_success || (bytes_read != len)) {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// Set result size to the number of bytes read if it&#39;s valid.</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (bytes_read &lt;= len)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(bytes_read);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// ERROR_HANDLE_EOF is mapped to errc::value_too_large.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(len);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">mapped_file_region::init</a>(<span class="keywordtype">int</span> FD, <span class="keywordtype">bool</span> CloseFD, uint64_t Offset) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  FileDescriptor = FD;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// Make sure that the requested size fits within SIZE_T.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (Size &gt; std::numeric_limits&lt;SIZE_T&gt;::max()) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (FileDescriptor) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">if</span> (CloseFD)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        _close(FileDescriptor);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    } else</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      ::CloseHandle(FileHandle);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403">errc::invalid_argument</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  DWORD flprotect;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">switch</span> (Mode) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a>:  flprotect = PAGE_READONLY; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">case</span> readwrite: flprotect = PAGE_READWRITE; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">case</span> priv:      flprotect = PAGE_WRITECOPY; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  FileMappingHandle =</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      ::CreateFileMappingW(FileHandle, 0, flprotect,</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                           (Offset + Size) &gt;&gt; 32,</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                           (Offset + Size) &amp; 0xffffffff,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                           0);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">if</span> (FileMappingHandle == NULL) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(GetLastError());</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> (FileDescriptor) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">if</span> (CloseFD)</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        _close(FileDescriptor);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    } else</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      ::CloseHandle(FileHandle);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  DWORD dwDesiredAccess;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">switch</span> (Mode) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a>:  dwDesiredAccess = FILE_MAP_READ; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">case</span> readwrite: dwDesiredAccess = FILE_MAP_WRITE; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">case</span> priv:      dwDesiredAccess = FILE_MAP_COPY; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  Mapping = ::MapViewOfFile(FileMappingHandle,</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                            dwDesiredAccess,</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                            Offset &gt;&gt; 32,</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                            Offset &amp; 0xffffffff,</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                            Size);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">if</span> (Mapping == NULL) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(GetLastError());</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    ::CloseHandle(FileMappingHandle);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> (FileDescriptor) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">if</span> (CloseFD)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        _close(FileDescriptor);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    } else</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      ::CloseHandle(FileHandle);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">if</span> (Size == 0) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    MEMORY_BASIC_INFORMATION mbi;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    SIZE_T Result = VirtualQuery(Mapping, &amp;mbi, <span class="keyword">sizeof</span>(mbi));</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (Result == 0) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(GetLastError());</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      ::UnmapViewOfFile(Mapping);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      ::CloseHandle(FileMappingHandle);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">if</span> (FileDescriptor) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">if</span> (CloseFD)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;          _close(FileDescriptor);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      } else</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        ::CloseHandle(FileHandle);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    Size = mbi.RegionSize;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// Close all the handles except for the view. It will keep the other handles</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// alive.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  ::CloseHandle(FileMappingHandle);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">if</span> (FileDescriptor) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (CloseFD)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      _close(FileDescriptor); <span class="comment">// Also closes FileHandle.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  } else</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    ::CloseHandle(FileHandle);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;mapped_file_region::mapped_file_region(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path,</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                       mapmode mode,</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                       uint64_t length,</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                       uint64_t offset,</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                       <a class="code" href="classllvm_1_1error__code.html">error_code</a> &amp;ec)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  : Mode(mode)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  , Size(length)</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  , Mapping()</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  , FileDescriptor()</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  , FileHandle(INVALID_HANDLE_VALUE)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  , FileMappingHandle() {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// Convert path to UTF-16.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">if</span> ((ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(path_storage), path_utf16)))</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// Get file handle for creating a file mapping.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  FileHandle = ::CreateFileW(<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>(path_utf16),</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                             Mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> ? GENERIC_READ</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                              : GENERIC_READ | GENERIC_WRITE,</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                             Mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> ? FILE_SHARE_READ</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                              : 0,</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                             0,</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                             Mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> ? OPEN_EXISTING</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                              : OPEN_ALWAYS,</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                             Mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> ? FILE_ATTRIBUTE_READONLY</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                              : FILE_ATTRIBUTE_NORMAL,</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                             0);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (FileHandle == INVALID_HANDLE_VALUE) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  FileDescriptor = 0;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  ec = <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(FileDescriptor, <span class="keyword">true</span>, offset);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">if</span> (ec) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    Mapping = FileMappingHandle = 0;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    FileHandle = INVALID_HANDLE_VALUE;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    FileDescriptor = 0;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;mapped_file_region::mapped_file_region(<span class="keywordtype">int</span> fd,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                       <span class="keywordtype">bool</span> closefd,</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                       mapmode mode,</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                       uint64_t length,</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                       uint64_t offset,</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                                       <a class="code" href="classllvm_1_1error__code.html">error_code</a> &amp;ec)</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  : Mode(mode)</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  , Size(length)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  , Mapping()</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  , FileDescriptor(fd)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  , FileHandle(INVALID_HANDLE_VALUE)</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  , FileMappingHandle() {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  FileHandle = <span class="keyword">reinterpret_cast&lt;</span>HANDLE<span class="keyword">&gt;</span>(_get_osfhandle(fd));</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">if</span> (FileHandle == INVALID_HANDLE_VALUE) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (closefd)</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      _close(FileDescriptor);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    FileDescriptor = 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    ec = <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4ab1213017e815509b8f80de3f068d1905">errc::bad_file_descriptor</a>);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  ec = <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(FileDescriptor, closefd, offset);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">if</span> (ec) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    Mapping = FileMappingHandle = 0;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    FileHandle = INVALID_HANDLE_VALUE;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    FileDescriptor = 0;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;mapped_file_region::~mapped_file_region() {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">if</span> (Mapping)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    ::UnmapViewOfFile(Mapping);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="preprocessor">#if LLVM_HAS_RVALUE_REFERENCES</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;mapped_file_region::mapped_file_region(mapped_file_region &amp;&amp;other)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  : Mode(other.Mode)</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  , Size(other.Size)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  , Mapping(other.Mapping)</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  , FileDescriptor(other.FileDescriptor)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  , FileHandle(other.FileHandle)</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  , FileMappingHandle(other.FileMappingHandle) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  other.Mapping = other.FileMappingHandle = 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  other.FileHandle = INVALID_HANDLE_VALUE;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  other.FileDescriptor = 0;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;mapped_file_region::mapmode mapped_file_region::flags()<span class="keyword"> const </span>{</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">return</span> Mode;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;uint64_t <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">mapped_file_region::size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">return</span> Size;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="keywordtype">char</span> *mapped_file_region::data()<span class="keyword"> const </span>{</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  assert(Mode != <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> &amp;&amp; <span class="stringliteral">&quot;Cannot get non const data for readonly mapping!&quot;</span>);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(Mapping);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *mapped_file_region::const_data()<span class="keyword"> const </span>{</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(Mapping);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;}</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="keywordtype">int</span> mapped_file_region::alignment() {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  SYSTEM_INFO SysInfo;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  ::GetSystemInfo(&amp;SysInfo);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">return</span> SysInfo.dwAllocationGranularity;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;}</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a3a54daa16fedfeb5746b4a44a7e2b3f5">detail::directory_iterator_construct</a>(detail::DirIterState &amp;<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>,</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> path){</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> path_utf16;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(path,</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                                  path_utf16))</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// Convert path to the format that Windows is happy with.</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">if</span> (path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &gt; 0 &amp;&amp;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      !<a class="code" href="namespacellvm_1_1sys_1_1path.html#a09dde3e6e89e6e85e2d06f7afe4d2714">is_separator</a>(path_utf16[path.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>() - 1]) &amp;&amp;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      path_utf16[path.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>() - 1] != L<span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(L<span class="charliteral">&#39;\\&#39;</span>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(L<span class="charliteral">&#39;*&#39;</span>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    path_utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(L<span class="charliteral">&#39;*&#39;</span>);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">//  Get the first directory entry.</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  WIN32_FIND_DATAW FirstFind;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <a class="code" href="classScopedHandle.html">ScopedFindHandle</a> FindHandle(::FindFirstFileW(<a class="code" href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">c_str</a>(path_utf16), &amp;FirstFind));</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span> (!FindHandle)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordtype">size_t</span> FilenameLen = ::wcslen(FirstFind.cFileName);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">while</span> ((FilenameLen == 1 &amp;&amp; FirstFind.cFileName[0] == L<span class="charliteral">&#39;.&#39;</span>) ||</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;         (FilenameLen == 2 &amp;&amp; FirstFind.cFileName[0] == L<span class="charliteral">&#39;.&#39;</span> &amp;&amp;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                              FirstFind.cFileName[1] == L<span class="charliteral">&#39;.&#39;</span>))</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!::FindNextFileW(FindHandle, &amp;FirstFind)) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="comment">// Check for end.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">if</span> (ec == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bac666dafd446cd0793a5a3624e6e7eb73">windows_error::no_more_files</a>)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">detail::directory_iterator_destruct</a>(it);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      FilenameLen = ::wcslen(FirstFind.cFileName);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// Construct the current directory entry.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> directory_entry_name_utf8;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(FirstFind.cFileName,</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                                  ::wcslen(FirstFind.cFileName),</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                  directory_entry_name_utf8))</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  it.IterationHandle = <a class="code" href="classintptr__t.html">intptr_t</a>(FindHandle.take());</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> directory_entry_path(path);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">path::append</a>(directory_entry_path, directory_entry_name_utf8.<a class="code" href="classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a>());</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  it.CurrentEntry = directory_entry(directory_entry_path.str());</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">detail::directory_iterator_destruct</a>(detail::DirIterState &amp;it) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">if</span> (it.IterationHandle != 0)</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// Closes the handle if it&#39;s valid.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="classScopedHandle.html">ScopedFindHandle</a> close(HANDLE(it.IterationHandle));</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  it.IterationHandle = 0;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  it.CurrentEntry = directory_entry();</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">detail::directory_iterator_increment</a>(detail::DirIterState &amp;it) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  WIN32_FIND_DATAW FindData;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">if</span> (!::FindNextFileW(HANDLE(it.IterationHandle), &amp;FindData)) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="comment">// Check for end.</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (ec == <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bac666dafd446cd0793a5a3624e6e7eb73">windows_error::no_more_files</a>)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">detail::directory_iterator_destruct</a>(it);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordtype">size_t</span> FilenameLen = ::wcslen(FindData.cFileName);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> ((FilenameLen == 1 &amp;&amp; FindData.cFileName[0] == L<span class="charliteral">&#39;.&#39;</span>) ||</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      (FilenameLen == 2 &amp;&amp; FindData.cFileName[0] == L<span class="charliteral">&#39;.&#39;</span> &amp;&amp;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                           FindData.cFileName[1] == L<span class="charliteral">&#39;.&#39;</span>))</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">directory_iterator_increment</a>(it);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> directory_entry_path_utf8;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(FindData.cFileName,</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                  ::wcslen(FindData.cFileName),</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                                  directory_entry_path_utf8))</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  it.CurrentEntry.replace_filename(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(directory_entry_path_utf8));</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae9ba393efb533dd0b0bbf78f32f3b454">map_file_pages</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, off_t file_offset, <span class="keywordtype">size_t</span> size,</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                            <span class="keywordtype">bool</span> map_writable, <span class="keywordtype">void</span> *&amp;result) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  assert(0 &amp;&amp; <span class="stringliteral">&quot;NOT IMPLEMENTED&quot;</span>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bacc129023b8df8b86c296fc696f61ef2b">windows_error::invalid_function</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a0303002348798f0b153f93db54a769ea">unmap_file_pages</a>(<span class="keywordtype">void</span> *<a class="code" href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a>, <span class="keywordtype">size_t</span> size) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  assert(0 &amp;&amp; <span class="stringliteral">&quot;NOT IMPLEMENTED&quot;</span>);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bacc129023b8df8b86c296fc696f61ef2b">windows_error::invalid_function</a>;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a32c096f2801f2fab551b820b734b656f">openFileForRead</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>, <span class="keywordtype">int</span> &amp;ResultFD) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> PathUTF16;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(Name.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(PathStorage),</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                  PathUTF16))</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  HANDLE <a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a> = ::CreateFileW(PathUTF16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), GENERIC_READ,</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                           FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                           OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">if</span> (H == INVALID_HANDLE_VALUE) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">// Provide a better error message when trying to open directories.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// This only runs if we failed to open the file, so there is probably</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">// no performances issues.</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (EC != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba913a35de5671198b72f722c1b410d948">windows_error::access_denied</a>)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1fs.html#a21b17863169ccf42cb3c25f3d609dc24">is_directory</a>(Name))</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4ac2266874f2afaf3ab312d62baf7af54e">errc::is_a_directory</a>, <a class="code" href="namespacellvm.html#a2b441dda75966c19e35e7a78e735e5d4">posix_category</a>());</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">int</span> FD = ::_open_osfhandle(<a class="code" href="classintptr__t.html">intptr_t</a>(H), 0);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (FD == -1) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    ::CloseHandle(H);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bad69ba1841b41bb82f88d488d56579a3b">windows_error::invalid_handle</a>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  ResultFD = FD;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;}</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a914475eeb87fd78e1f38e84b924bf5ca">openFileForWrite</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name, <span class="keywordtype">int</span> &amp;ResultFD,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                            <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">sys::fs::OpenFlags</a> <a class="code" href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a>, <span class="keywordtype">unsigned</span> Mode) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// Verify that we don&#39;t have both &quot;append&quot; and &quot;excl&quot;.</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  assert((!(Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">sys::fs::F_Excl</a>) || !(Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">sys::fs::F_Append</a>)) &amp;&amp;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;         <span class="stringliteral">&quot;Cannot specify both &#39;excl&#39; and &#39;append&#39; file creation flags!&quot;</span>);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;wchar_t, 128&gt;</a> PathUTF16;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(Name.<a class="code" href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">toStringRef</a>(PathStorage),</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                  PathUTF16))</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  DWORD CreationDisposition;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">F_Excl</a>)</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    CreationDisposition = CREATE_NEW;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">F_Append</a>)</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    CreationDisposition = OPEN_ALWAYS;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    CreationDisposition = CREATE_ALWAYS;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  HANDLE H = ::CreateFileW(PathUTF16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), GENERIC_WRITE,</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                           FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                           CreationDisposition, FILE_ATTRIBUTE_NORMAL, NULL);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">if</span> (H == INVALID_HANDLE_VALUE) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="structllvm_1_1windows__error.html">windows_error</a>(::GetLastError());</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// Provide a better error message when trying to open directories.</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// This only runs if we failed to open the file, so there is probably</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// no performances issues.</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (EC != <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba913a35de5671198b72f722c1b410d948">windows_error::access_denied</a>)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1fs.html#a21b17863169ccf42cb3c25f3d609dc24">is_directory</a>(Name))</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4ac2266874f2afaf3ab312d62baf7af54e">errc::is_a_directory</a>, <a class="code" href="namespacellvm.html#a2b441dda75966c19e35e7a78e735e5d4">posix_category</a>());</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">OpenFlags</a> = 0;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; F_Append)</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    OpenFlags |= _O_APPEND;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">if</span> (!(Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a270cda703057ef0e31b72acc72a59470">F_Binary</a>))</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    OpenFlags |= _O_TEXT;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordtype">int</span> FD = ::_open_osfhandle(<a class="code" href="classintptr__t.html">intptr_t</a>(H), OpenFlags);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> (FD == -1) {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    ::CloseHandle(H);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bad69ba1841b41bb82f88d488d56579a3b">windows_error::invalid_handle</a>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  ResultFD = FD;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;} <span class="comment">// end namespace fs</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="keyword">namespace </span>windows {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<a class="code" href="classllvm_1_1error__code.html">llvm::error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">UTF8ToUTF16</a>(<a class="code" href="classllvm_1_1StringRef.html">llvm::StringRef</a> utf8,</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt;wchar_t&gt;</a> &amp;utf16) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordtype">int</span> len = ::MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                                  utf8.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), utf8.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>(),</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                                  utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), 0);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">llvm::windows_error</a>(::GetLastError());</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  utf16.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len + 1);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  utf16.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(len);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  len = ::MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                              utf8.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), utf8.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>(),</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                              utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">llvm::windows_error</a>(::GetLastError());</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// Make utf16 null terminated.</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(0);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  utf16.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">llvm::error_code::success</a>();</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<a class="code" href="classllvm_1_1error__code.html">llvm::error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">UTF16ToUTF8</a>(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> *utf16, <span class="keywordtype">size_t</span> utf16_len,</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt;char&gt;</a> &amp;utf8) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// Get length.</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordtype">int</span> len = ::WideCharToMultiByte(CP_UTF8, 0,</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                  utf16, utf16_len,</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                  utf8.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), 0,</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                  NULL, NULL);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">llvm::windows_error</a>(::GetLastError());</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  utf8.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  utf8.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(len);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// Now do the actual conversion.</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  len = ::WideCharToMultiByte(CP_UTF8, 0,</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                              utf16, utf16_len,</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                              utf8.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), utf8.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(),</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                              NULL, NULL);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1windows__error.html">llvm::windows_error</a>(::GetLastError());</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Make utf8 null terminated.</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  utf8.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(0);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  utf8.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">llvm::error_code::success</a>();</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;} <span class="comment">// end namespace windows</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;} <span class="comment">// end namespace sys</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="namespaceSIInstrFlags_html_a607b4b0952924970b77a9c6b42898b54"><div class="ttname"><a href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">SIInstrFlags::Flags</a></div><div class="ttdeci">Flags</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00140">SIInstrInfo.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a45bab6d91cf74da99624723b65bd0e5b"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">llvm::SmallVectorImpl::set_size</a></div><div class="ttdeci">void set_size(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00702">SmallVector.h:702</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4ab1213017e815509b8f80de3f068d1905"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4ab1213017e815509b8f80de3f068d1905">llvm::errc::bad_file_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00497">system_error.h:497</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ad3a7c62e8f9554d7f8e7fdb989f1c68e"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ad3a7c62e8f9554d7f8e7fdb989f1c68e">llvm::sys::fs::can_execute</a></div><div class="ttdeci">bool can_execute(const Twine &amp;Path)</div><div class="ttdoc">Can we execute this file? </div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00425">SmallVector.h:425</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4ac2266874f2afaf3ab312d62baf7af54e"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4ac2266874f2afaf3ab312d62baf7af54e">llvm::errc::is_a_directory</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00525">system_error.h:525</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a294dbd0dcb369349e07f9bd78330b672"><div class="ttname"><a href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from where P can be anything The alignment inference code cannot handle loads from globals in static non mode because it doesn t look through the extra dyld stub load If you try vec_align ll without relocation you ll see what I mean We should lower which eliminates a constant pool load For float z nounwind readonly</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00451">README-SSE.txt:451</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931bacc129023b8df8b86c296fc696f61ef2b"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bacc129023b8df8b86c296fc696f61ef2b">llvm::windows_error::invalid_function</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00835">system_error.h:835</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_aceb0c1adaa2d557aed404315d858380a"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">llvm::SmallVectorTemplateCommon&lt; T &gt;::capacity</a></div><div class="ttdeci">size_t capacity() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00132">SmallVector.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_af68d5ebdb576d7481ea2766151b875d4"><div class="ttname"><a href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">llvm::StringRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the string size. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00113">StringRef.h:113</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a3a54daa16fedfeb5746b4a44a7e2b3f5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a3a54daa16fedfeb5746b4a44a7e2b3f5">llvm::sys::fs::detail::directory_iterator_construct</a></div><div class="ttdeci">error_code directory_iterator_construct(DirIterState &amp;, StringRef)</div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00204">Target/README.txt:204</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a914475eeb87fd78e1f38e84b924bf5ca"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a914475eeb87fd78e1f38e84b924bf5ca">llvm::sys::fs::openFileForWrite</a></div><div class="ttdeci">error_code openFileForWrite(const Twine &amp;Name, int &amp;ResultFD, OpenFlags Flags, unsigned Mode=0666)</div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a1fbb8d07077c6bf19b425d9b91f93f85"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a1fbb8d07077c6bf19b425d9b91f93f85">llvm::sys::fs::resize_file</a></div><div class="ttdeci">error_code resize_file(const Twine &amp;path, uint64_t size)</div><div class="ttdoc">Resize path to size. File is resized as if by POSIX truncate(). </div></div>
<div class="ttc" id="README-SSE_8txt_html_a22e7866be85852a21786d1c32d5999a6"><div class="ttname"><a href="README-SSE_8txt.html#a22e7866be85852a21786d1c32d5999a6">model</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from where P can be anything The alignment inference code cannot handle loads from globals in static non mode because it doesn t look through the extra dyld stub load If you try vec_align ll without relocation model</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00444">README-SSE.txt:444</a></div></div>
<div class="ttc" id="Target_2SystemZ_2README_8txt_html_aab103049890481bd3a194048b45f5fce"><div class="ttname"><a href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a></div><div class="ttdeci">therefore end up llgh r3 lr r0 br r14 but truncating the load would lh r3 br r14 Functions ret i64 and ought to be implemented ngr r0 br r14 but two address optimisations reverse the order of the AND and ngr r2 lgr r0 br r14 CodeGen SystemZ and ll has several examples of this Out of range displacements are usually handled by loading the full address into a register In many cases it would be better to create an anchor point instead E g i64 base</div><div class="ttdef"><b>Definition:</b> <a href="Target_2SystemZ_2README_8txt_source.html#l00147">Target/SystemZ/README.txt:147</a></div></div>
<div class="ttc" id="classintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a4689132529705999463e4270d4c71fde"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a4689132529705999463e4270d4c71fde">llvm::sys::fs::setLastModificationAndAccessTime</a></div><div class="ttdeci">error_code setLastModificationAndAccessTime(int FD, TimeValue Time)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_af622128e353515efebccad40eae495cb"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00537">SmallVector.h:537</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ac7b1d477269428b188cef6585fe6fdf5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ac7b1d477269428b188cef6585fe6fdf5">llvm::sys::fs::current_path</a></div><div class="ttdeci">error_code current_path(SmallVectorImpl&lt; char &gt; &amp;result)</div><div class="ttdoc">Get the current path. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a0303002348798f0b153f93db54a769ea"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a0303002348798f0b153f93db54a769ea">llvm::sys::fs::unmap_file_pages</a></div><div class="ttdeci">error_code unmap_file_pages(void *base, size_t size)</div><div class="ttdoc">Memory unmaps the contents of a file. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a32c096f2801f2fab551b820b734b656f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a32c096f2801f2fab551b820b734b656f">llvm::sys::fs::openFileForRead</a></div><div class="ttdeci">error_code openFileForRead(const Twine &amp;Name, int &amp;ResultFD)</div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bafd4a6a492006a56923360ebbd1aee56f">llvm::windows_error::file_not_found</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00836">system_error.h:836</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b">FS_Dir</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00158">Path.cpp:158</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ae5f268fb9c53c179a4e38edc638919f8"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">llvm::sys::fs::status_known</a></div><div class="ttdeci">bool status_known(file_status s)</div><div class="ttdoc">Is status available? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00772">Path.cpp:772</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931bad69ba1841b41bb82f88d488d56579a3b"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bad69ba1841b41bb82f88d488d56579a3b">llvm::windows_error::invalid_handle</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00840">system_error.h:840</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_aae67c508d4f0716516f5c412c5592556"><div class="ttname"><a href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a></div><div class="ttdeci">then result</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00393">Target/README.txt:393</a></div></div>
<div class="ttc" id="namespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00044">GraphWriter.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_acb80894344c78dacf8d5ff8c23be697d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a></div><div class="ttdeci">void append(SmallVectorImpl&lt; char &gt; &amp;path, const Twine &amp;a, const Twine &amp;b=&quot;&quot;, const Twine &amp;c=&quot;&quot;, const Twine &amp;d=&quot;&quot;)</div><div class="ttdoc">Append to path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00372">Path.cpp:372</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1windows_html_a751801bb8e3ab55d7881da84689b400f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1windows.html#a751801bb8e3ab55d7881da84689b400f">llvm::sys::windows::UTF16ToUTF8</a></div><div class="ttdeci">error_code UTF16ToUTF8(const wchar_t *utf16, size_t utf16_len, SmallVectorImpl&lt; char &gt; &amp;utf8)</div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1windows_html_a14b2604e394de1a79276ed2fe86ed512"><div class="ttname"><a href="namespacellvm_1_1sys_1_1windows.html#a14b2604e394de1a79276ed2fe86ed512">llvm::sys::windows::UTF8ToUTF16</a></div><div class="ttdeci">error_code UTF8ToUTF16(StringRef utf8, SmallVectorImpl&lt; wchar_t &gt; &amp;utf16)</div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403">llvm::errc::invalid_argument</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00522">system_error.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classScopedHandle_html"><div class="ttname"><a href="classScopedHandle.html">ScopedHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="Windows_8h_source.html#l00055">Windows.h:55</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">llvm::sys::fs::F_Append</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00622">FileSystem.h:622</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a91f4469a9d29e354421494afd4ba466d"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a></div><div class="ttdeci">Should compile to</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00449">Target/ARM/README.txt:449</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931ba913a35de5671198b72f722c1b410d948"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba913a35de5671198b72f722c1b410d948">llvm::windows_error::access_denied</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00839">system_error.h:839</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_aa810d4410de405f514454936632c5551"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#aa810d4410de405f514454936632c5551">llvm::sys::path::is_absolute</a></div><div class="ttdeci">bool is_absolute(const Twine &amp;path)</div><div class="ttdoc">Is path absolute? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00614">Path.cpp:614</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a621c22ddea1e7a9f515778263847a18f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">llvm::sys::fs::detail::directory_iterator_destruct</a></div><div class="ttdeci">error_code directory_iterator_destruct(DirIterState &amp;)</div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ae9ba393efb533dd0b0bbf78f32f3b454"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ae9ba393efb533dd0b0bbf78f32f3b454">llvm::sys::fs::map_file_pages</a></div><div class="ttdeci">error_code map_file_pages(const Twine &amp;path, off_t file_offset, size_t size, bool map_writable, void *&amp;result)</div><div class="ttdoc">Memory maps the contents of a file. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a359f175df4ccf031c3333715942119e8"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a359f175df4ccf031c3333715942119e8">llvm::sys::fs::can_write</a></div><div class="ttdeci">bool can_write(const Twine &amp;Path)</div><div class="ttdoc">Can we write this file? </div></div>
<div class="ttc" id="namespacellvm_html_a2b441dda75966c19e35e7a78e735e5d4"><div class="ttname"><a href="namespacellvm.html#a2b441dda75966c19e35e7a78e735e5d4">llvm::posix_category</a></div><div class="ttdeci">const error_category &amp; posix_category()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8cpp_source.html#l00100">system_error.cpp:100</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a74f0e1904bab81ea8c9dabcba6a34791"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">llvm::sys::fs::detail::directory_iterator_increment</a></div><div class="ttdeci">error_code directory_iterator_increment(DirIterState &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_a370ed0e0f2bb66d17cd13f84be54e867"><div class="ttname"><a href="namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">llvm::array_lengthof</a></div><div class="ttdeci">size_t array_lengthof(T(&amp;)[N])</div><div class="ttdoc">Find the length of an array. </div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00250">STLExtras.h:250</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a09dde3e6e89e6e85e2d06f7afe4d2714"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a09dde3e6e89e6e85e2d06f7afe4d2714">llvm::sys::path::is_separator</a></div><div class="ttdeci">bool is_separator(char value)</div><div class="ttdoc">Check whether the given char is a path separator on the host OS. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00497">Path.cpp:497</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ad7c66c756855933e28aa2b05591935ea"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ad7c66c756855933e28aa2b05591935ea">llvm::sys::fs::create_hard_link</a></div><div class="ttdeci">error_code create_hard_link(const Twine &amp;to, const Twine &amp;from)</div><div class="ttdoc">Create a hard link from from to to. </div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511">llvm::LibFunc::rename</a></div><div class="ttdoc">int rename(const char *old, const char *new); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00468">TargetLibraryInfo.h:468</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4af5fb40ac03f36d0a5f37d64d770ecf9f"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4af5fb40ac03f36d0a5f37d64d770ecf9f">llvm::errc::function_not_supported</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00516">system_error.h:516</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a59dbae5839ae3372684e418c5925c557"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a59dbae5839ae3372684e418c5925c557">llvm::sys::fs::getUniqueID</a></div><div class="ttdeci">error_code getUniqueID(const Twine Path, UniqueID &amp;Result)</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00636">Path.cpp:636</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a4a0abf8eb4fa5989df63172649cba99f"><div class="ttname"><a href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">llvm::StringRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00097">StringRef.h:97</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a057a733b2dfa2f0531ceb335cf3b1d03"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a057a733b2dfa2f0531ceb335cf3b1d03">llvm::sys::fs::getMainExecutable</a></div><div class="ttdeci">std::string getMainExecutable(const char *argv0, void *MainExecAddr)</div></div>
<div class="ttc" id="Path_8cpp_html_a093374bcc0be5e6dca09e80884355674"><div class="ttname"><a href="Path_8cpp.html#a093374bcc0be5e6dca09e80884355674">createUniqueEntity</a></div><div class="ttdeci">static llvm::error_code createUniqueEntity(const llvm::Twine &amp;Model, int &amp;ResultFD, llvm::SmallVectorImpl&lt; char &gt; &amp;ResultPath, bool MakeAbsolute, unsigned Mode, FSEntity Type)</div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931ba84cd1f68f7e2ac033d4caad35a88e6f5"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba84cd1f68f7e2ac033d4caad35a88e6f5">llvm::windows_error::sharing_violation</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00865">system_error.h:865</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931baf489a51bc64bc3a8b19b2701a1bac218">llvm::windows_error::path_not_found</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00837">system_error.h:837</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a65c5fe2953375fe7c8c64bb7481c54a4"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">llvm::sys::fs::status</a></div><div class="ttdeci">error_code status(const Twine &amp;path, file_status &amp;result)</div><div class="ttdoc">Get file status as if by POSIX stat(). </div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931ba99dde533a88c4281e3eca0a8a2b947fb"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba99dde533a88c4281e3eca0a8a2b947fb">llvm::windows_error::already_exists</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00885">system_error.h:885</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_ad7bf7cc723b97ab4a518502c217ddbd7"><div class="ttname"><a href="README-Thumb_8txt.html#ad7bf7cc723b97ab4a518502c217ddbd7">mode</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb mode</div><div class="ttdef"><b>Definition:</b> <a href="README-Thumb_8txt_source.html#l00005">README-Thumb.txt:5</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84">FS_File</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00159">Path.cpp:159</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_ad2f8ed01c1733d4eab0932d970abaa4c"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#ad2f8ed01c1733d4eab0932d970abaa4c">BOOL</a></div><div class="ttdeci">uint8_t BOOL</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00483">X86DisassemblerDecoder.h:483</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ae42219072d798876e6b08e6b78614ff6"><div class="ttname"><a href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a></div><div class="ttdeci">#define H(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00053">MD5.cpp:53</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html"><div class="ttname"><a href="classllvm_1_1error__code.html">llvm::error_code</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00726">system_error.h:726</a></div></div>
<div class="ttc" id="Target_2SystemZ_2README_8txt_html_a5f380c569497eab93980e5994c60df31"><div class="ttname"><a href="Target_2SystemZ_2README_8txt.html#a5f380c569497eab93980e5994c60df31">val</a></div><div class="ttdeci">it doesn t get to see the original constraint This means that it must conservatively treat all asm constraints as the most restricted R If an asm ties an i32 r result to an i64 the input will be treated as an leaving the upper bits uninitialised For i64 store i32 val</div><div class="ttdef"><b>Definition:</b> <a href="Target_2SystemZ_2README_8txt_source.html#l00022">Target/SystemZ/README.txt:22</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ab3b846f25e9b54e59ff1ee80f8f019d6"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ab3b846f25e9b54e59ff1ee80f8f019d6">h</a></div><div class="ttdeci">It appears gcc place string data with linkonce linkage in section coalesced instead of section coalesced Take a look at darwin h</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00343">Target/X86/README.txt:343</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931ba2210518c1a68b3be675bfca1e6ca936a"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931ba2210518c1a68b3be675bfca1e6ca936a">llvm::windows_error::file_exists</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00875">system_error.h:875</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_afb354c8aea0150628f8aa06c7f4a4168"><div class="ttname"><a href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a></div><div class="ttdeci">vector float f(vector float a, vector float b)</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00205">README_ALTIVEC.txt:205</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00478">SmallVector.h:478</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a21b17863169ccf42cb3c25f3d609dc24"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a21b17863169ccf42cb3c25f3d609dc24">llvm::sys::fs::is_directory</a></div><div class="ttdeci">bool is_directory(file_status status)</div><div class="ttdoc">Does status represent a directory? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00776">Path.cpp:776</a></div></div>
<div class="ttc" id="Windows_8h_html"><div class="ttname"><a href="Windows_8h.html">Windows.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">llvm::sys::fs::OpenFlags</a></div><div class="ttdeci">OpenFlags</div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00612">FileSystem.h:612</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a544ce2b7de50b042a2d052c3d2831598"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a></div><div class="ttdeci">We currently generate a but we really shouldn t</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01384">Target/X86/README.txt:1384</a></div></div>
<div class="ttc" id="namespacellvm_html_af11d71816b6dc7c266e71fcff02be291"><div class="ttname"><a href="namespacellvm.html#af11d71816b6dc7c266e71fcff02be291">llvm::c_str</a></div><div class="ttdeci">SmallVectorImpl&lt; T &gt;::const_pointer c_str(SmallVectorImpl&lt; T &gt; &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="Windows_8h_source.html#l00154">Windows.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a1a7bc4930b0396a67c30081f7cb30542"><div class="ttname"><a href="classllvm_1_1StringRef.html#a1a7bc4930b0396a67c30081f7cb30542">llvm::StringRef::startswith</a></div><div class="ttdeci">bool startswith(StringRef Prefix) const </div><div class="ttdoc">Check if this string starts with the given Prefix. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00208">StringRef.h:208</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html_a18f124b21b2bdbb55ea51d708c1d931bac666dafd446cd0793a5a3624e6e7eb73"><div class="ttname"><a href="structllvm_1_1windows__error.html#a18f124b21b2bdbb55ea51d708c1d931bac666dafd446cd0793a5a3624e6e7eb73">llvm::windows_error::no_more_files</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00851">system_error.h:851</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html_a32758623588707ade41dea6f96e5c28f"><div class="ttname"><a href="classllvm_1_1Twine.html#a32758623588707ade41dea6f96e5c28f">llvm::Twine::toStringRef</a></div><div class="ttdeci">StringRef toStringRef(SmallVectorImpl&lt; char &gt; &amp;Out) const </div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00031">Twine.cpp:31</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html_a9926a62dd0ca26ed856052335091a54d"><div class="ttname"><a href="classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">llvm::SmallString::str</a></div><div class="ttdeci">StringRef str() const </div><div class="ttdoc">Explicit conversion to StringRef. </div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00270">SmallString.h:270</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a7b68be12c974b6b70bc86062f221a344"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">llvm::SmallVectorTemplateCommon&lt; T &gt;::data</a></div><div class="ttdeci">pointer data()</div><div class="ttdoc">data - Return a pointer to the vector&amp;#39;s buffer, even if empty(). </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00135">SmallVector.h:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a33cdf6e66707db20ff903c3ee378aa13"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a33cdf6e66707db20ff903c3ee378aa13">llvm::sys::fs::create_directory</a></div><div class="ttdeci">error_code create_directory(const Twine &amp;path, bool &amp;existed)</div><div class="ttdoc">Create the directory in path. </div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_ab91ec0c78e03404aedf982aefd69fff5"><div class="ttname"><a href="classllvm_1_1StringRef.html#ab91ec0c78e03404aedf982aefd69fff5">llvm::StringRef::equals_lower</a></div><div class="ttdeci">bool equals_lower(StringRef RHS) const </div><div class="ttdoc">equals_lower - Check for string equality, ignoring case. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00135">StringRef.h:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a013687bf3f70a7062e65ec3c066a5d92"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a013687bf3f70a7062e65ec3c066a5d92">llvm::sys::fs::create_symlink</a></div><div class="ttdeci">error_code create_symlink(const Twine &amp;to, const Twine &amp;from)</div><div class="ttdoc">Create a symbolic link from from to to. </div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c">FS_Name</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00160">Path.cpp:160</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html_ab1dc74db82ce9421e6c5f5f4df574aa8"><div class="ttname"><a href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">llvm::error_code::success</a></div><div class="ttdeci">static error_code success()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00732">system_error.h:732</a></div></div>
<div class="ttc" id="FunctionAttrs_8cpp_html_a07522de877d8a6f09f42438dab01a434"><div class="ttname"><a href="FunctionAttrs_8cpp.html#a07522de877d8a6f09f42438dab01a434">attributes</a></div><div class="ttdeci">Deduce function attributes</div><div class="ttdef"><b>Definition:</b> <a href="FunctionAttrs_8cpp_source.html#l00142">FunctionAttrs.cpp:142</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="namespacellvm_html_a1d8dc6cc5af15804cc75a8b5736b8d3e"><div class="ttname"><a href="namespacellvm.html#a1d8dc6cc5af15804cc75a8b5736b8d3e">llvm::generic_category</a></div><div class="ttdeci">const error_category &amp; generic_category()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8cpp_source.html#l00070">system_error.cpp:70</a></div></div>
<div class="ttc" id="structllvm_1_1windows__error_html"><div class="ttname"><a href="structllvm_1_1windows__error.html">llvm::windows_error</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00829">system_error.h:829</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a142386357a8879fc0b5041dc2e275bf5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">llvm::sys::fs::equivalent</a></div><div class="ttdeci">bool equivalent(file_status A, file_status B)</div><div class="ttdoc">Do file_status&amp;#39;s represent the same thing? </div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a3c372fc890b5f0997eda4f5d8a59c384"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">llvm::sys::fs::exists</a></div><div class="ttdeci">bool exists(file_status status)</div><div class="ttdoc">Does file exist? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00768">Path.cpp:768</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a8b69cf051c3c0539de9a05998d60c162"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a8b69cf051c3c0539de9a05998d60c162">llvm::sys::fs::get_magic</a></div><div class="ttdeci">error_code get_magic(const Twine &amp;path, uint32_t len, SmallVectorImpl&lt; char &gt; &amp;result)</div><div class="ttdoc">Get path&amp;#39;s first len bytes. </div></div>
<div class="ttc" id="namespacellvm_html_a205a949fd99dd4c03d2227e5bd21041c"><div class="ttname"><a href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">llvm::make_error_code</a></div><div class="ttdeci">error_code make_error_code(errc _e)</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00782">system_error.h:782</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_abb4ce3bc3096a12d4b93460bf78bcf95"><div class="ttname"><a href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in it</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00053">README-SSE.txt:53</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708">FSEntity</a></div><div class="ttdeci">FSEntity</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00157">Path.cpp:157</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">llvm::sys::fs::F_Excl</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00617">FileSystem.h:617</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210a270cda703057ef0e31b72acc72a59470"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a270cda703057ef0e31b72acc72a59470">llvm::sys::fs::F_Binary</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00626">FileSystem.h:626</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:40 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
