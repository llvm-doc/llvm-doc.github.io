<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: MachineLICM.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MachineLICM_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MachineLICM.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MachineLICM_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- MachineLICM.cpp - Machine Loop Invariant Code Motion Pass ---------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass performs loop invariant code motion on machine instructions. We</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// attempt to remove as much code from the body of a loop as possible.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// This pass does not attempt to throttle itself to limit register pressure.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// The register allocation phases are expected to perform rematerialization</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// to recover when register pressure is high.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// This pass is not intended to be a replacement or a complete alternative</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// for the LLVM-IR-level LICM pass. It is only designed to hoist simple</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// constructs that are not exposed before lowering and instruction selection.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   23</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;machine-licm&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineMemOperand_8h.html">llvm/CodeGen/MachineMemOperand.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PseudoSourceValue_8h.html">llvm/CodeGen/PseudoSourceValue.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCInstrItineraries_8h.html">llvm/MC/MCInstrItineraries.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLowering_8h.html">llvm/Target/TargetLowering.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a330f2a9738da6c37a754f204519c6351">AvoidSpeculation</a>(<span class="stringliteral">&quot;avoid-speculation&quot;</span>,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;MachineLICM should avoid speculation&quot;</span>),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                 <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a>(NumHoisted,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;          <span class="stringliteral">&quot;Number of machine instructions hoisted out of loops&quot;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a>(NumLowRP,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;          <span class="stringliteral">&quot;Number of instructions hoisted in low reg pressure situation&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a>(NumHighLatency,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;          <span class="stringliteral">&quot;Number of high latency instructions hoisted&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a>(NumCSEed,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;          <span class="stringliteral">&quot;Number of hoisted machine instructions CSEed&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a>(NumPostRAHoisted,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;          <span class="stringliteral">&quot;Number of machine instructions hoisted out of loops post regalloc&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">class </span>MachineLICM : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a>   *<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html">TargetLoweringBase</a> *TLI;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstrItineraryData.html">InstrItineraryData</a> *InstrItins;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">bool</span> PreRegAlloc;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// Various analyses that we use...</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>        *AA;      <span class="comment">// Alias analysis info.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>      *MLI;     <span class="comment">// Current MachineLoopInfo</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a> *DT;      <span class="comment">// Machine dominator tree for the cur loop</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// State that is updated as we process loops</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">bool</span>         Changed;          <span class="comment">// True if a loop is changed.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">bool</span>         FirstInLoop;      <span class="comment">// True if it&#39;s the first LICM in the loop.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *CurLoop;          <span class="comment">// The current loop we are working on.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CurPreheader; <span class="comment">// The preheader for CurLoop.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// Exit blocks for CurLoop.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 8&gt;</a> ExitBlocks;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="LCSSA_8cpp.html#a07f138d2a84576c85e238a26969e5ff9">isExitBlock</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">return</span> std::find(ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), MBB) !=</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Track &#39;estimated&#39; register pressure.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 32&gt;</a> RegSeen;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea5b5fba18a61456ef5858005d9f7b153e">RegPressure</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// Register pressure &quot;limit&quot; per register class. If the pressure</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// is higher than the limit, then it&#39;s considered high.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> RegLimit;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// Register pressure on path leading from loop preheader to current BB.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;unsigned, 8&gt;</a>, 16&gt; BackTrace;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// For each opcode, keep a list of potential CSE instructions.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, std::vector&lt;const MachineInstr*&gt;</a> &gt; CSEMap;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">enum</span> {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      SpeculateFalse   = 0,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      SpeculateTrue    = 1,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      SpeculateUnknown = 2</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    };</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// If a MBB does not dominate loop exiting blocks then it may not safe</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// to hoist loads from this block.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Tri-state: 0 - false, 1 - true, 2 - unknown</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">unsigned</span> SpeculationState;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    MachineLICM() :</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID), PreRegAlloc(<a class="code" href="namespacetrue.html">true</a>) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="namespacellvm.html#a94452f68adbacd71414af478f55df784">initializeMachineLICMPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">explicit</span> MachineLICM(<span class="keywordtype">bool</span> PreRA) :</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID), PreRegAlloc(PreRA) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="namespacellvm.html#a94452f68adbacd71414af478f55df784">initializeMachineLICMPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseMemory() {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      RegSeen.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      RegPressure.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      RegLimit.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      BackTrace.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keywordtype">unsigned</span>,std::vector&lt;const MachineInstr*&gt; &gt;::iterator</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;             CI = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), CE = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); CI != CE; ++CI)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        CI-&gt;second.clear();</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">    /// CandidateInfo - Keep track of information about hoisting candidates.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>CandidateInfo {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordtype">unsigned</span>      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordtype">int</span>           FI;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      CandidateInfo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *mi, <span class="keywordtype">unsigned</span> def, <span class="keywordtype">int</span> fi)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        : MI(mi), Def(def), FI(fi) {}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    };</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">    /// HoistRegionPostRA - Walk the specified region of the CFG and hoist loop</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">    /// invariants out to the preheader.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> HoistRegionPostRA();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    /// HoistPostRA - When an instruction is found to only use loop invariant</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">    /// operands that is safe to hoist, this instruction is called to do the</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    /// dirty work.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> HoistPostRA(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    /// ProcessMI - Examine the instruction for potentai LICM candidate. Also</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    /// gather register def and frame object update information.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> ProcessMI(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                   <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;PhysRegDefs,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                   <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;PhysRegClobbers,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                   <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;int, 32&gt;</a> &amp;StoredFIs,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                   <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;CandidateInfo&gt;</a> &amp;Candidates);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">    /// AddToLiveIns - Add register &#39;Reg&#39; to the livein sets of BBs in the</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">    /// current loop.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> AddToLiveIns(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">    /// IsLICMCandidate - Returns true if the instruction may be a suitable</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    /// candidate for LICM. e.g. If the instruction is a call, then it&#39;s</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    /// obviously not safe to hoist it.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> IsLICMCandidate(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">    /// IsLoopInvariantInst - Returns true if the instruction is loop</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">    /// invariant. I.e., all virtual register operands are defined outside of</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    /// the loop, physical registers aren&#39;t accessed (explicitly or implicitly),</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    /// and the instruction is hoistable.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> IsLoopInvariantInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">    /// HasLoopPHIUse - Return true if the specified instruction is used by any</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">    /// phi node in the current loop.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> HasLoopPHIUse(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    /// HasHighOperandLatency - Compute operand latency between a def of &#39;Reg&#39;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    /// and an use in the current loop, return true if the target considered</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">    /// it &#39;high&#39;.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> HasHighOperandLatency(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> DefIdx,</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                               <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">bool</span> IsCheapInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    /// CanCauseHighRegPressure - Visit BBs from header to current BB,</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">    /// check if hoisting an instruction of the given cost matrix can cause high</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">    /// register pressure.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> CanCauseHighRegPressure(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;</a> &amp;Cost, <span class="keywordtype">bool</span> Cheap);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    /// UpdateBackTraceRegPressure - Traverse the back trace from header to</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">    /// the current block and update their register pressures to reflect the</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">    /// effect of hoisting MI from the current block to the preheader.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> UpdateBackTraceRegPressure(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">    /// IsProfitableToHoist - Return true if it is potentially profitable to</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">    /// hoist the given loop invariant.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> IsProfitableToHoist(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">    /// IsGuaranteedToExecute - Check if this mbb is guaranteed to execute.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">    /// If not then a load from this mbb may not be safe to hoist.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> IsGuaranteedToExecute(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">void</span> EnterScope(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">void</span> ExitScope(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">    /// ExitScopeIfDone - Destroy scope for the MBB that corresponds to given</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">    /// dominator tree node if its a leaf or all of its children are done. Walk</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">    /// up the dominator tree to destroy ancestors which are now done.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> ExitScopeIfDone(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Node,</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, unsigned&gt;</a> &amp;OpenChildren,</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, MachineDomTreeNode*&gt;</a> &amp;ParentMap);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">    /// HoistOutOfLoop - Walk the specified loop in the CFG (defined by all</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">    /// blocks dominated by the specified header block, and that are in the</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">    /// current loop) in depth first order w.r.t the DominatorTree. This allows</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">    /// us to visit definitions before uses, allowing us to hoist a loop body in</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">    /// one pass without iteration.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> HoistOutOfLoop(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *LoopHeaderNode);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">void</span> HoistRegion(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <span class="keywordtype">bool</span> IsHeader);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    /// getRegisterClassIDAndCost - For a given MI, register, and the operand</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">    /// index, return the ID and cost of its representative register class by</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">    /// reference.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> getRegisterClassIDAndCost(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                   <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, <span class="keywordtype">unsigned</span> OpIdx,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                   <span class="keywordtype">unsigned</span> &amp;RCId, <span class="keywordtype">unsigned</span> &amp;RCCost) <span class="keyword">const</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    /// InitRegPressure - Find all virtual register references that are liveout</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    /// of the preheader to initialize the starting &quot;register pressure&quot;. Note</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    /// this does not count live through (livein but not used) registers.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> InitRegPressure(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">    /// UpdateRegPressure - Update estimate of register pressure after the</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">    /// specified instruction.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> UpdateRegPressure(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    /// ExtractHoistableLoad - Unfold a load from the given machineinstr if</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    /// the load itself could be hoisted. Return the unfolded and hoistable</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">    /// load, or null if the load couldn&#39;t be unfolded or if it wouldn&#39;t</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">    /// be hoistable.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *ExtractHoistableLoad(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    /// LookForDuplicate - Find an instruction amount PrevMIs that is a</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    /// duplicate of MI. Return this instruction if it&#39;s found.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LookForDuplicate(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                     std::vector&lt;const MachineInstr*&gt; &amp;PrevMIs);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    /// EliminateCSE - Given a LICM&#39;ed instruction, look for an instruction on</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">    /// the preheader that compute the same value. If it&#39;s found, do a RAU on</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    /// with the definition of the existing instruction rather than hoisting</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">    /// the instruction to the preheader.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> EliminateCSE(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;           <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keywordtype">unsigned</span>, std::vector&lt;const MachineInstr*&gt; &gt;::iterator &amp;CI);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    /// MayCSE - Return true if the given instruction will be CSE&#39;d if it&#39;s</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    /// hoisted out of the loop.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> MayCSE(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    /// Hoist - When an instruction is found to only use loop invariant operands</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    /// that is safe to hoist, this instruction is called to do the dirty work.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    /// It returns true if the instruction is hoisted.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> Hoist(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">    /// InitCSEMap - Initialize the CSE map with instructions that are in the</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    /// current loop preheader that may become duplicates of instructions that</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    /// are hoisted out of the loop.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> InitCSEMap(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">    /// getCurPreheader - Get the preheader for the current loop, splitting</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">    /// a critical edge if needed.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *getCurPreheader();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  };</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineLICM::ID</a> = 0;</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="namespacellvm.html#aec913d7a94874651981c1017ac8ef6e0">  298</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#aec913d7a94874651981c1017ac8ef6e0">llvm::MachineLICMID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineLICM::ID</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<a class="code" href="MachineLICM_8cpp.html#a5e88a1c76fcf428da5bdda0bc7ccb938">INITIALIZE_PASS_BEGIN</a>(MachineLICM, <span class="stringliteral">&quot;machinelicm&quot;</span>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="stringliteral">&quot;Machine Loop Invariant Code Motion&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#adb278d56cfd897fb0c3eea6508fed1c4">  304</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(MachineLICM, &quot;<a class="code" href="MachineLICM_8cpp.html#a67fba080ac198ef02581a992c85d532a">machinelicm</a>&quot;,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                &quot;<a class="code" href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a> <a class="code" href="classllvm_1_1Loop.html">Loop</a> Invariant <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> <a class="code" href="MachineLICM_8cpp.html#adb278d56cfd897fb0c3eea6508fed1c4">Motion</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// LoopIsOuterMostWithPredecessor - Test if the given loop is the outer-most</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">/// loop that has a unique predecessor.</span></div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#abbbf9ad51415e03f77597a5dedce3f99">  309</a></span>&#160;<span class="comment"></span>static <span class="keywordtype">bool</span> <a class="code" href="MachineLICM_8cpp.html#abbbf9ad51415e03f77597a5dedce3f99">LoopIsOuterMostWithPredecessor</a>(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *CurLoop) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// Check whether this loop even has a unique predecessor.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (!CurLoop-&gt;getLoopPredecessor())</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Ok, now check to see if any of its outer loops do.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>(); L; L = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>())</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (L-&gt;getLoopPredecessor())</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// None of them did, so this is the outermost with a unique predecessor.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keywordtype">bool</span> MachineLICM::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  Changed = FirstInLoop = <span class="keyword">false</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  TM = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  TII = TM-&gt;<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  TLI = TM-&gt;<a class="code" href="classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">getTargetLowering</a>();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  TRI = TM-&gt;<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4ad4295a88187ea1ae12ecfcfa18a70f">getFrameInfo</a>();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  MRI = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  InstrItins = TM-&gt;<a class="code" href="classllvm_1_1TargetMachine.html#a69d6715752707a83ec4cbecff60b5359">getInstrItineraryData</a>();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  PreRegAlloc = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a506447dd6402590e58fe1492fa824c01">isSSA</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;******** Pre-regalloc Machine LICM: &quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;******** Post-regalloc Machine LICM: &quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">getName</a>() &lt;&lt; <span class="stringliteral">&quot; ********\n&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (PreRegAlloc) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Estimate register pressure during pre-regalloc pass.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">unsigned</span> NumRC = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a31a901f12fea3fdd4fb7cdffbe494842">getNumRegClasses</a>();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    RegPressure.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(NumRC);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    std::fill(RegPressure.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), RegPressure.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), 0);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    RegLimit.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(NumRC);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a5f3578b3db9bb49d5d3ac5d282b35034">TargetRegisterInfo::regclass_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a1e727502aaf54bbd6564e06f6c38f132">regclass_begin</a>(),</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;           E = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a773f00b289b2eef69a1b26c350d32332">regclass_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      RegLimit[(*I)-&gt;getID()] = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#afe970f60219cf069303ba0a1bf66919f">getRegPressureLimit</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MF);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Get our Loop information...</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  MLI = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  DT  = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  AA  = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineLoop *, 8&gt;</a> Worklist(MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#ad174ba1c760b290b7de9772c30a252d9">begin</a>(), MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#abd835122c5c416057b14378e92a72298">end</a>());</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    CurLoop = Worklist.pop_back_val();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    CurPreheader = 0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// If this is done before regalloc, only visit outer-most preheader-sporting</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// loops.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (PreRegAlloc &amp;&amp; !<a class="code" href="MachineLICM_8cpp.html#abbbf9ad51415e03f77597a5dedce3f99">LoopIsOuterMostWithPredecessor</a>(CurLoop)) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      Worklist.append(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">begin</a>(), CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">end</a>());</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a420d7b5cd4eebceaf8bc16326e07af9c">getExitBlocks</a>(ExitBlocks);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (!PreRegAlloc)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      HoistRegionPostRA();</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// CSEMap is initialized for loop header when the first instruction is</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// being hoisted.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = DT-&gt;getNode(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>());</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      FirstInLoop = <span class="keyword">true</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      HoistOutOfLoop(N);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/// InstructionStoresToFI - Return true if instruction stores to the</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// specified frame.</span></div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#ab291fb9293f91eda708874e0e75e815e">  387</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineLICM_8cpp.html#ab291fb9293f91eda708874e0e75e815e">InstructionStoresToFI</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">int</span> FI) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineMemOperand.html">MachineInstr::mmo_iterator</a> o = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#abb87c1c9d9046e29211e9875e27ceef9">memoperands_begin</a>(),</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         oe = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a8d6268ac5d00f510ade10bd1865d9829">memoperands_end</a>(); o != oe; ++o) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (!(*o)-&gt;isStore() || !(*o)-&gt;getValue())</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1FixedStackPseudoSourceValue.html">FixedStackPseudoSourceValue</a> *<a class="code" href="classllvm_1_1Value.html">Value</a> =</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        dyn_cast&lt;const FixedStackPseudoSourceValue&gt;((*o)-&gt;getValue())) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a>-&gt;getFrameIndex() == FI)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// ProcessMI - Examine the instruction for potentai LICM candidate. Also</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">/// gather register def and frame object update information.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::ProcessMI(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                            <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;PhysRegDefs,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                            <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;PhysRegClobbers,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                            <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;int, 32&gt;</a> &amp;StoredFIs,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;CandidateInfo&gt;</a> &amp;Candidates) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">bool</span> RuledOut = <span class="keyword">false</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">bool</span> HasNonInvariantUse = <span class="keyword">false</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = 0;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab0d5ec413fa43a1e470dafb6cafda9b5">isFI</a>()) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">// Remember if the instruction stores to the frame index.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordtype">int</span> FI = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>();</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (!StoredFIs.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(FI) &amp;&amp;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;          MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a77c4b8800aaa188948bb253a9631c8f2">isSpillSlotObjectIndex</a>(FI) &amp;&amp;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;          <a class="code" href="MachineLICM_8cpp.html#ab291fb9293f91eda708874e0e75e815e">InstructionStoresToFI</a>(MI, FI))</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        StoredFIs.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(FI);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      HasNonInvariantUse = <span class="keyword">true</span>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// We can&#39;t hoist an instruction defining a physreg that is clobbered in</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// the loop.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">isRegMask</a>()) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a8ed8d6c8b5f2e6f8afbabdcfaf40d6ff">setBitsNotInMask</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#a5192a9fe4d860e2b97d4457fe4b1a036">getRegMask</a>());</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (!Reg)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;           <span class="stringliteral">&quot;Not expecting virtual register!&quot;</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (Reg &amp;&amp; (PhysRegDefs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg) || PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg)))</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// If it&#39;s using a non-loop-invariant register, then it&#39;s obviously not</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// safe to hoist.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        HasNonInvariantUse = <span class="keyword">true</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>()) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, TRI, <span class="keyword">true</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*AI);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>())</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// Non-dead implicit def? This cannot be hoisted.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        RuledOut = <span class="keyword">true</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">// No need to check if a dead implicit def is also defined by</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="comment">// another instruction.</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// FIXME: For now, avoid instructions with multiple defs, unless</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// it&#39;s a dead implicit def.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (Def)</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      RuledOut = <span class="keyword">true</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      Def = <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// If we have already seen another instruction that defines the same</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// register, then this is not safe.  Two defs is indicated by setting a</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// PhysRegClobbers bit.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AS(Reg, TRI, <span class="keyword">true</span>); AS.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AS) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (PhysRegDefs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(*AS))</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*AS);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      PhysRegDefs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*AS);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg))</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="comment">// MI defined register is seen defined by another instruction in</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment">// the loop, it cannot be a LICM candidate.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      RuledOut = <span class="keyword">true</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// Only consider reloads for now and remats which do not have register</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// operands. FIXME: Consider unfold load folding instructions.</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">if</span> (Def &amp;&amp; !RuledOut) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">int</span> FI = INT_MIN;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> ((!HasNonInvariantUse &amp;&amp; IsLICMCandidate(*MI)) ||</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">isLoadFromStackSlot</a>(MI, FI) &amp;&amp; MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a77c4b8800aaa188948bb253a9631c8f2">isSpillSlotObjectIndex</a>(FI)))</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      Candidates.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CandidateInfo(MI, Def, FI));</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">/// HoistRegionPostRA - Walk the specified region of the CFG and hoist loop</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/// invariants out to the preheader.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::HoistRegionPostRA() {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = getCurPreheader();</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordtype">unsigned</span> NumRegs = TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> PhysRegDefs(NumRegs); <span class="comment">// Regs defined once in the loop.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> PhysRegClobbers(NumRegs); <span class="comment">// Regs defined more than once.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CandidateInfo, 32&gt;</a> Candidates;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;int, 32&gt;</a> StoredFIs;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// Walk the entire region, count number of defs for each register, and</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// collect potential LICM candidates.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">const</span> std::vector&lt;MachineBasicBlock *&gt; &amp;Blocks = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>();</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Blocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Blocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// If the header of the loop containing this basic block is a landing pad,</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// then don&#39;t try to hoist instructions out of this loop.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *ML = MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">getLoopFor</a>(BB);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (ML &amp;&amp; ML-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// Conservatively treat live-in&#39;s as an external def.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// FIXME: That means a reload that&#39;re reused in successor block(s) will not</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// be LICM&#39;ed.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">MachineBasicBlock::livein_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">livein_begin</a>(),</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;           E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa314325c7062fd067a3c0b9339aa8ea6">livein_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, TRI, <span class="keyword">true</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI)</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        PhysRegDefs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*AI);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    SpeculationState = SpeculateUnknown;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;           <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != E; ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      ProcessMI(MI, PhysRegDefs, PhysRegClobbers, StoredFIs, Candidates);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// Gather the registers read / clobbered by the terminator.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> TermRegs(NumRegs);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> TI = Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (TI != Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TI-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = TI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (!Reg)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, TRI, <span class="keyword">true</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        TermRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*AI);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// Now evaluate whether the potential candidates qualify.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// 1. Check if the candidate defined register is defined by another</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">//    instruction in the loop.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// 2. If the candidate is a load from stack slot (always true for now),</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">//    check if the slot is stored anywhere in the loop.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// 3. Make sure candidate def should not clobber</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">//    registers read by the terminator. Similarly its def should not be</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">//    clobbered by the terminator.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Candidates.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (Candidates[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].FI != INT_MIN &amp;&amp;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        StoredFIs.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(Candidates[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].FI))</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = Candidates[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].Def;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (!PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Def) &amp;&amp; !TermRegs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Def)) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordtype">bool</span> Safe = <span class="keyword">true</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = Candidates[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].MI;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0, ee = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != ee; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>())</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (PhysRegDefs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg) ||</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            PhysRegClobbers.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg)) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          <span class="comment">// If it&#39;s using a non-loop-invariant register, then it&#39;s obviously</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="comment">// not safe to hoist.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          Safe = <span class="keyword">false</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (Safe)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        HoistPostRA(MI, Candidates[i].Def);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/// AddToLiveIns - Add register &#39;Reg&#39; to the livein sets of BBs in the current</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/// loop, and make sure it is not killed by any instructions in the loop.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::AddToLiveIns(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keyword">const</span> std::vector&lt;MachineBasicBlock *&gt; &amp;Blocks = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>();</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Blocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Blocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (!BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a183fc29cc1ccec18f5e9e4122a4aab1c">isLiveIn</a>(Reg))</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">addLiveIn</a>(Reg);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;           <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != E; ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == Reg || TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ab473cdc9fb7554bc7375f20d76561e8e">isSuperRegister</a>(Reg, MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()))</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// HoistPostRA - When an instruction is found to only use loop invariant</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/// operands that is safe to hoist, this instruction is called to do the</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/// dirty work.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::HoistPostRA(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = getCurPreheader();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Now move the instructions to the predecessor, inserting it before any</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// terminator instructions.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Hoisting to BB#&quot;</span> &lt;&lt; Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot; from BB#&quot;</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;               &lt;&lt; MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// Splice the instruction to the preheader.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(), MBB, <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// Add register to livein list to all the BBs in the current loop since a</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// loop invariant must be kept live throughout the whole loop. This is</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// important to ensure later passes do not scavenge the def register.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  AddToLiveIns(Def);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  ++NumPostRAHoisted;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">// IsGuaranteedToExecute - Check if this mbb is guaranteed to execute.</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">// If not then a load from this mbb may not be safe to hoist.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="keywordtype">bool</span> MachineLICM::IsGuaranteedToExecute(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">if</span> (SpeculationState != SpeculateUnknown)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> SpeculationState == SpeculateFalse;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">if</span> (BB != CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// Check loop exiting blocks.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 8&gt;</a> CurrentLoopExitingBlocks;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aa6bdb226fb3dac1f051547ce01b76fd2">getExitingBlocks</a>(CurrentLoopExitingBlocks);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = CurrentLoopExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(BB, CurrentLoopExitingBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        SpeculationState = SpeculateTrue;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  SpeculationState = SpeculateFalse;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="keywordtype">void</span> MachineLICM::EnterScope(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Entering: &quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a454838c989e99a86bd804e056c367bd9">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// Remember livein register pressure.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  BackTrace.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(RegPressure);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="keywordtype">void</span> MachineLICM::ExitScope(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exiting: &quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a454838c989e99a86bd804e056c367bd9">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  BackTrace.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/// ExitScopeIfDone - Destroy scope for the MBB that corresponds to the given</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">/// dominator tree node if its a leaf or all of its children are done. Walk</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">/// up the dominator tree to destroy ancestors which are now done.</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::ExitScopeIfDone(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Node,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, unsigned&gt;</a> &amp;OpenChildren,</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, MachineDomTreeNode*&gt;</a> &amp;ParentMap) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> (OpenChildren[Node])</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// Pop scope.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  ExitScope(Node-&gt;getBlock());</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// Now traverse upwards to pop ancestors whose offsprings are all done.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Parent = ParentMap[Node]) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordtype">unsigned</span> Left = --OpenChildren[Parent];</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (Left != 0)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    ExitScope(Parent-&gt;getBlock());</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    Node = Parent;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">/// HoistOutOfLoop - Walk the specified loop in the CFG (defined by all</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">/// blocks dominated by the specified header block, and that are in the</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// current loop) in depth first order w.r.t the DominatorTree. This allows</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// us to visit definitions before uses, allowing us to hoist a loop body in</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// one pass without iteration.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::HoistOutOfLoop(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *HeaderN) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineDomTreeNode*, 32&gt;</a> Scopes;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineDomTreeNode*, 8&gt;</a> WorkList;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, MachineDomTreeNode*&gt;</a> ParentMap;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineDomTreeNode*, unsigned&gt;</a> OpenChildren;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// Perform a DFS walk to determine the order of visit.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(HeaderN);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Node = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    assert(Node != 0 &amp;&amp; <span class="stringliteral">&quot;Null dominator tree node?&quot;</span>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">getBlock</a>();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// If the header of the loop containing this basic block is a landing pad,</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// then don&#39;t try to hoist instructions out of this loop.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *ML = MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">getLoopFor</a>(BB);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (ML &amp;&amp; ML-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a>())</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">// If this subregion is not in the top level loop at all, exit.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (!CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(BB))</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    Scopes.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Node);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keyword">const</span> std::vector&lt;MachineDomTreeNode*&gt; &amp;Children = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">getChildren</a>();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordtype">unsigned</span> NumChildren = Children.size();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Don&#39;t hoist things out of a large switch statement.  This often causes</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// code to be hoisted that wasn&#39;t going to be executed, and increases</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// register pressure in a situation where it&#39;s likely to matter.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() &gt;= 25)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      NumChildren = 0;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    OpenChildren[Node] = NumChildren;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// Add children in reverse order as then the next popped worklist node is</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// the first child of this node.  This means we ultimately traverse the</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// DOM tree in exactly the same order as if we&#39;d recursed.</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = (<span class="keywordtype">int</span>)NumChildren-1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Child = Children[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      ParentMap[Child] = Node;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Child);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (Scopes.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() != 0) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = getCurPreheader();</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// Compute registers which are livein into the loop headers.</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    RegSeen.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    BackTrace.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    InitRegPressure(Preheader);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Now perform LICM.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Scopes.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Node = Scopes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">getBlock</a>();</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = getCurPreheader();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    EnterScope(MBB);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// Process the block</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    SpeculationState = SpeculateUnknown;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != E; ) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> NextMII = <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>; ++NextMII;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">if</span> (!Hoist(MI, Preheader))</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        UpdateRegPressure(MI);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = NextMII;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// If it&#39;s a leaf node, it&#39;s done. Traverse upwards to pop ancestors.</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    ExitScopeIfDone(Node, OpenChildren, ParentMap);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">  772</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *MRI) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">return</span> MO.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>() || MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">hasOneNonDBGUse</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">/// getRegisterClassIDAndCost - For a given MI, register, and the operand</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">/// index, return the ID and cost of its representative register class.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"></span><span class="keywordtype">void</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;MachineLICM::getRegisterClassIDAndCost(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                       <span class="keywordtype">unsigned</span> Reg, <span class="keywordtype">unsigned</span> OpIdx,</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                       <span class="keywordtype">unsigned</span> &amp;RCId, <span class="keywordtype">unsigned</span> &amp;RCCost)<span class="keyword"> const </span>{</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(Reg);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = *RC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#af2ed3490fe47d88ef2d7f3edce4bf113">vt_begin</a>();</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (VT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca707dc1fd6a4179316ffa6ca2516e18dc">MVT::Untyped</a>) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    RCId = RC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">getID</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    RCCost = 1;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    RCId = TLI-&gt;<a class="code" href="classllvm_1_1TargetLoweringBase.html#abfe348b051b61449a611f0194761fccf">getRepRegClassFor</a>(VT)-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">getID</a>();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    RCCost = TLI-&gt;<a class="code" href="classllvm_1_1TargetLoweringBase.html#a962592f9d8e8db865060de86d1cd9630">getRepRegClassCostFor</a>(VT);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/// InitRegPressure - Find all virtual register references that are liveout of</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">/// the preheader to initialize the starting &quot;register pressure&quot;. Note this</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">/// does not count live through (livein but not used) registers.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::InitRegPressure(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  std::fill(RegPressure.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), RegPressure.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), 0);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// If the preheader has only a single predecessor and it ends with a</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// fallthrough or an unconditional branch, then scan its predecessor for live</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// defs as well. This happens whenever the preheader is created by splitting</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// the critical edge from the loop predecessor to the loop header.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">if</span> (BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() == 1) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB = 0, *FBB = 0;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*BB, TBB, FBB, Cond, <span class="keyword">false</span>) &amp;&amp; Cond.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      InitRegPressure(*BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>());</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;       <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != E; ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordtype">bool</span> isNew = RegSeen.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(Reg);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keywordtype">unsigned</span> RCId, RCCost;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      getRegisterClassIDAndCost(MI, Reg, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, RCId, RCCost);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        RegPressure[RCId] += RCCost;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordtype">bool</span> isKill = <a class="code" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a>(MO, MRI);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">if</span> (isNew &amp;&amp; !isKill)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <span class="comment">// Haven&#39;t seen this, it must be a livein.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;          RegPressure[RCId] += RCCost;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isNew &amp;&amp; isKill)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          RegPressure[RCId] -= RCCost;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">/// UpdateRegPressure - Update estimate of register pressure after the</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">/// specified instruction.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::UpdateRegPressure(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">isImplicitDef</a>())</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> Defs;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordtype">bool</span> isNew = RegSeen.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(Reg);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isNew &amp;&amp; <a class="code" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a>(MO, MRI)) {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordtype">unsigned</span> RCId, RCCost;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      getRegisterClassIDAndCost(MI, Reg, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, RCId, RCCost);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">if</span> (RCCost &gt; RegPressure[RCId])</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        RegPressure[RCId] = 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        RegPressure[RCId] -= RCCost;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">while</span> (!Defs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordtype">unsigned</span> Reg = Defs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordtype">unsigned</span> RCId, RCCost;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    getRegisterClassIDAndCost(MI, Reg, Idx, RCId, RCCost);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    RegPressure[RCId] += RCCost;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    ++Idx;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">/// isLoadFromGOTOrConstantPool - Return true if this machine instruction</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">/// loads from global offset table or constant pool.</span></div><div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="MachineLICM_8cpp.html#a27155066ff11c6a72e3dd16c774d4655">  878</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineLICM_8cpp.html#a27155066ff11c6a72e3dd16c774d4655">isLoadFromGOTOrConstantPool</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  assert (MI.<a class="code" href="classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">mayLoad</a>() &amp;&amp; <span class="stringliteral">&quot;Expected MI that loads!&quot;</span>);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineMemOperand.html">MachineInstr::mmo_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MI.<a class="code" href="classllvm_1_1MachineInstr.html#abb87c1c9d9046e29211e9875e27ceef9">memoperands_begin</a>(),</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         E = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a8d6268ac5d00f510ade10bd1865d9829">memoperands_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V = (*I)-&gt;getValue()) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PseudoSourceValue.html">PseudoSourceValue</a> *PSV = dyn_cast&lt;PseudoSourceValue&gt;(V))</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">if</span> (PSV == PSV-&gt;getGOT() || PSV == PSV-&gt;getConstantPool())</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/// IsLICMCandidate - Returns true if the instruction may be a suitable</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/// candidate for LICM. e.g. If the instruction is a call, then it&#39;s obviously</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">/// not safe to hoist it.</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::IsLICMCandidate(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Check if it&#39;s safe to move the instruction.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordtype">bool</span> DontMoveAcrossStore = <span class="keyword">true</span>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">if</span> (!I.<a class="code" href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">isSafeToMove</a>(TII, AA, DontMoveAcrossStore))</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// If it is load then check if it is guaranteed to execute by making sure that</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// it dominates all exiting blocks. If it doesn&#39;t, then there is a path out of</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// the loop which does not execute this load, so we can&#39;t hoist it. Loads</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// from constant memory are not safe to speculate all the time, for example</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// indexed load from a jump table.</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Stores and side effects are already checked by isSafeToMove.</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">mayLoad</a>() &amp;&amp; !<a class="code" href="MachineLICM_8cpp.html#a27155066ff11c6a72e3dd16c774d4655">isLoadFromGOTOrConstantPool</a>(I) &amp;&amp;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      !IsGuaranteedToExecute(I.<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()))</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">/// IsLoopInvariantInst - Returns true if the instruction is loop</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">/// invariant. I.e., all virtual register operands are defined outside of the</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// loop, physical registers aren&#39;t accessed explicitly, and there are no side</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/// effects that aren&#39;t captured by the operands or other flags.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::IsLoopInvariantInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;I) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">if</span> (!IsLICMCandidate(I))</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// The instruction is loop invariant if all of its operands are.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = I.<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = I.<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// Don&#39;t hoist an instruction that uses or defines a physical register.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg)) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="comment">// If the physreg has no defs anywhere, it&#39;s just an ambient register</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="comment">// and we can freely move its uses. Alternatively, if it&#39;s allocatable,</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="comment">// it could get allocated to something with a def during allocation.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span> (!MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9d7134fb4c7b07bd2fab941063bea585">isConstantPhysReg</a>(Reg, *I.<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>()))</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// Otherwise it&#39;s safe to move.</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>()) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="comment">// A def that isn&#39;t dead. We can&#39;t move it.</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a183fc29cc1ccec18f5e9e4122a4aab1c">isLiveIn</a>(Reg)) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">// If the reg is live into the loop, we can&#39;t hoist an instruction</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="comment">// which would clobber it.</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>())</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    assert(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;           <span class="stringliteral">&quot;Machine instr not mapped for this vreg?!&quot;</span>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">// If the loop contains the definition of an operand, then the instruction</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// isn&#39;t loop invariant.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(Reg)))</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// If we got this far, the instruction is loop invariant!</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">/// HasLoopPHIUse - Return true if the specified instruction is used by a</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">/// phi node and hoisting it could cause a copy to be inserted.</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::HasLoopPHIUse(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineInstr*, 8&gt;</a> Work(1, MI);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    MI = Work.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIOperands.html">ConstMIOperands</a> MO(MI); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">if</span> (!MO-&gt;isReg() || !MO-&gt;isDef())</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO-&gt;getReg();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_iterator</a> UI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a2f9819f230628888e3e68de292ecd602">use_begin</a>(Reg),</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;           UE = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ac8347c6938efe4d9a4426b92ef57851e">use_end</a>(); UI != UE; ++UI) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = &amp;*UI;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="comment">// A PHI may cause a copy to be inserted.</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>()) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          <span class="comment">// A PHI inside the loop causes a copy because the live range of Reg is</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          <span class="comment">// extended across the PHI.</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;          <span class="keywordflow">if</span> (CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(UseMI))</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          <span class="comment">// A PHI in an exit block can cause a copy to be inserted if the PHI</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;          <span class="comment">// has multiple predecessors in the loop with different values.</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <span class="comment">// For now, approximate by rejecting all exit blocks.</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="LCSSA_8cpp.html#a07f138d2a84576c85e238a26969e5ff9">isExitBlock</a>(UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()))</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="comment">// Look past copies as well.</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordflow">if</span> (UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>() &amp;&amp; CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(UseMI))</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;          Work.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(UseMI);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  } <span class="keywordflow">while</span> (!Work.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;}</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">/// HasHighOperandLatency - Compute operand latency between a def of &#39;Reg&#39;</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">/// and an use in the current loop, return true if the target considered</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/// it &#39;high&#39;.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::HasHighOperandLatency(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                        <span class="keywordtype">unsigned</span> DefIdx, <span class="keywordtype">unsigned</span> Reg)<span class="keyword"> const </span>{</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (!InstrItins || InstrItins-&gt;<a class="code" href="classllvm_1_1InstrItineraryData.html#a714827e35583b7e5e55f8bcce441c2cb">isEmpty</a>() || MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">use_nodbg_empty</a>(Reg))</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a> I = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg),</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         E = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a100d59f6313d76435a54425d3d11bf99">isCopyLike</a>())</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">if</span> (!CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()))</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>())</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordtype">unsigned</span> MOReg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">if</span> (MOReg != Reg)</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#af29fd25c7daf875691c8f4f97d6b4822">hasHighOperandLatency</a>(InstrItins, MRI, &amp;MI, DefIdx, UseMI, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="comment">// Only look at the first in loop use.</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">/// IsCheapInstruction - Return true if the instruction is marked &quot;cheap&quot; or</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">/// the operand latency between its def and a use is one or less.</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::IsCheapInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI)<span class="keyword"> const </span>{</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">if</span> (MI.<a class="code" href="classllvm_1_1MachineInstr.html#ac2d31549cd95bf8c917744e997bf73f7">isAsCheapAsAMove</a>() || MI.<a class="code" href="classllvm_1_1MachineInstr.html#a100d59f6313d76435a54425d3d11bf99">isCopyLike</a>())</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (!InstrItins || InstrItins-&gt;<a class="code" href="classllvm_1_1InstrItineraryData.html#a714827e35583b7e5e55f8bcce441c2cb">isEmpty</a>())</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordtype">bool</span> isCheap = <span class="keyword">false</span>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordtype">unsigned</span> NumDefs = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a9d472a8ee447cef18a71beb229d4d252">getNumDefs</a>();</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); NumDefs &amp;&amp; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;DefMO = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (!DefMO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !DefMO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    --NumDefs;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordtype">unsigned</span> Reg = DefMO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a90706ef4d02ab24360d2cda5dc432584">hasLowDefLatency</a>(InstrItins, &amp;MI, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    isCheap = <span class="keyword">true</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="keywordflow">return</span> isCheap;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">/// CanCauseHighRegPressure - Visit BBs from header to current BB, check</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">/// if hoisting an instruction of the given cost matrix can cause high</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">/// register pressure.</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::CanCauseHighRegPressure(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;</a> &amp;Cost,</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                                          <span class="keywordtype">bool</span> CheapInstr) {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;::iterator</a> CI = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), CE = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;       CI != CE; ++CI) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;second &lt;= 0)</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">unsigned</span> RCId = CI-&gt;first;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordtype">unsigned</span> Limit = RegLimit[RCId];</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">int</span> Cost = CI-&gt;second;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// Don&#39;t hoist cheap instructions if they would increase register pressure,</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// even if we&#39;re under the limit.</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (CheapInstr)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = BackTrace.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != 0; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fa8b204d090788e956d6011920f4916191">RP</a> = BackTrace[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1];</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">if</span> (RP[RCId] + Cost &gt;= Limit)</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;}</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">/// UpdateBackTraceRegPressure - Traverse the back trace from header to the</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">/// current block and update their register pressures to reflect the effect</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">/// of hoisting MI from the current block to the preheader.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineLICM::UpdateBackTraceRegPressure(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">isImplicitDef</a>())</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// First compute the &#39;cost&#39; of the instruction, i.e. its contribution</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// to register pressure.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;</a> Cost;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">unsigned</span> RCId, RCCost;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    getRegisterClassIDAndCost(MI, Reg, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, RCId, RCCost);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;::iterator</a> CI = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(RCId);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">if</span> (CI != Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        CI-&gt;second += RCCost;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(RCId, RCCost));</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a>(MO, MRI)) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;::iterator</a> CI = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(RCId);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">if</span> (CI != Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        CI-&gt;second -= RCCost;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(RCId, -RCCost));</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// Update register pressure of blocks from loop header to current block.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BackTrace.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fa8b204d090788e956d6011920f4916191">RP</a> = BackTrace[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;::iterator</a> CI = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), CE = Cost.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;         CI != CE; ++CI) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordtype">unsigned</span> RCId = CI-&gt;first;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      RP[RCId] += CI-&gt;second;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;}</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">/// IsProfitableToHoist - Return true if it is potentially profitable to hoist</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">/// the given loop invariant.</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::IsProfitableToHoist(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;MI) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">if</span> (MI.<a class="code" href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">isImplicitDef</a>())</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// Besides removing computation from the loop, hoisting an instruction has</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// these effects:</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// - The value defined by the instruction becomes live across the entire</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">//   loop. This increases register pressure in the loop.</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// - If the value is used by a PHI in the loop, a copy will be required for</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">//   lowering the PHI after extending the live range.</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// - When hoisting the last use of a value in the loop, that value no longer</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">//   needs to be live in the loop. This lowers register pressure in the loop.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordtype">bool</span> CheapInstr = IsCheapInstruction(MI);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordtype">bool</span> CreatesCopy = HasLoopPHIUse(&amp;MI);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Don&#39;t hoist a cheap instruction if it would create a copy in the loop.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordflow">if</span> (CheapInstr &amp;&amp; CreatesCopy) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Won&#39;t hoist cheap instr with loop PHI use: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// Rematerializable instructions should always be hoisted since the register</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// allocator can just pull them down again when needed.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fdd9266343e4bfba10c1f8ab7fc4e0a">isTriviallyReMaterializable</a>(&amp;MI, AA))</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">// Estimate register pressure to determine whether to LICM the instruction.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// In low register pressure situation, we can be more aggressive about</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// hoisting. Also, favors hoisting long latency instructions even in</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// moderately high pressure situation.</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// Cheap instructions will only be hoisted if they don&#39;t increase register</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// pressure at all.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// FIXME: If there are long latency loop-invariant instructions inside the</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// loop at this point, why didn&#39;t the optimizer&#39;s LICM hoist them?</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, int&gt;</a> Cost;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI.<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordtype">unsigned</span> RCId, RCCost;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    getRegisterClassIDAndCost(&amp;MI, Reg, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, RCId, RCCost);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="keywordflow">if</span> (HasHighOperandLatency(MI, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, Reg)) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Hoist High Latency: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        ++NumHighLatency;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      Cost[RCId] += RCCost;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a>(MO, MRI)) {</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="comment">// Is a virtual register use is a kill, hoisting it out of the loop</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="comment">// may actually reduce register pressure or be register pressure</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="comment">// neutral.</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      Cost[RCId] -= RCCost;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// Visit BBs from header to current BB, if hoisting this doesn&#39;t cause</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">// high register pressure, then it&#39;s safe to proceed.</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (!CanCauseHighRegPressure(Cost, CheapInstr)) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Hoist non-reg-pressure: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    ++NumLowRP;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// Don&#39;t risk increasing register pressure if it would create copies.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span> (CreatesCopy) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Won&#39;t hoist instr with loop PHI use: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// Do not &quot;speculate&quot; in high register pressure situation. If an</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// instruction is not guaranteed to be executed in the loop, it&#39;s best to be</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="comment">// conservative.</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineLICM_8cpp.html#a330f2a9738da6c37a754f204519c6351">AvoidSpeculation</a> &amp;&amp;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      (!IsGuaranteedToExecute(MI.<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()) &amp;&amp; !MayCSE(&amp;MI))) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Won&#39;t speculate: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// High register pressure situation, only hoist if the instruction is going</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// to be remat&#39;ed.</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fdd9266343e4bfba10c1f8ab7fc4e0a">isTriviallyReMaterializable</a>(&amp;MI, AA) &amp;&amp;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      !MI.<a class="code" href="classllvm_1_1MachineInstr.html#a3293892e5078a238db5b0f388aca5fa5">isInvariantLoad</a>(AA)) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t remat / high reg-pressure: &quot;</span> &lt;&lt; MI);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;}</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MachineLICM::ExtractHoistableLoad(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// Don&#39;t unfold simple loads.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a6ea66ea696ee423ada504c8d21786451">canFoldAsLoad</a>())</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// If not, we may be able to unfold a load and hoist that.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// First test whether the instruction is loading from an amenable</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// memory location.</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3293892e5078a238db5b0f388aca5fa5">isInvariantLoad</a>(AA))</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Next determine the register class for a temporary register.</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordtype">unsigned</span> LoadRegIndex;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordtype">unsigned</span> NewOpc =</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#ab356e0f1832c4388bb849509af19b78a">getOpcodeAfterMemoryUnfold</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>(),</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                                    <span class="comment">/*UnfoldLoad=*/</span><span class="keyword">true</span>,</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                                    <span class="comment">/*UnfoldStore=*/</span><span class="keyword">false</span>,</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                    &amp;LoadRegIndex);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (NewOpc == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;MID = TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">get</a>(NewOpc);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span> (MID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a9d472a8ee447cef18a71beb229d4d252">getNumDefs</a>() != 1) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aabf764b704ed905ec6841a8872815bff">getRegClass</a>(MID, LoadRegIndex, TRI, MF);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// Ok, we&#39;re unfolding. Create a temporary register and do the unfold.</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordtype">unsigned</span> Reg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(RC);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 2&gt;</a> NewMIs;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordtype">bool</span> Success =</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a292c515febc84943f6998b38184ac13a">unfoldMemoryOperand</a>(MF, MI, Reg,</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                             <span class="comment">/*UnfoldLoad=*/</span><span class="keyword">true</span>, <span class="comment">/*UnfoldStore=*/</span><span class="keyword">false</span>,</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                             NewMIs);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  (void)Success;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  assert(Success &amp;&amp;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         <span class="stringliteral">&quot;unfoldMemoryOperand failed when getOpcodeAfterMemoryUnfold &quot;</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         <span class="stringliteral">&quot;succeeded!&quot;</span>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  assert(NewMIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 2 &amp;&amp;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;         <span class="stringliteral">&quot;Unfolded a load into multiple instructions!&quot;</span>);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> Pos = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  MBB-&gt;insert(Pos, NewMIs[0]);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  MBB-&gt;insert(Pos, NewMIs[1]);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="comment">// If unfolding produced a load that wasn&#39;t loop-invariant or profitable to</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// hoist, discard the new instructions and bail.</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">if</span> (!IsLoopInvariantInst(*NewMIs[0]) || !IsProfitableToHoist(*NewMIs[0])) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    NewMIs[0]-&gt;eraseFromParent();</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    NewMIs[1]-&gt;eraseFromParent();</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="comment">// Update register pressure for the unfolded instruction.</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  UpdateRegPressure(NewMIs[1]);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// Otherwise we successfully unfolded a load that we can hoist.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">return</span> NewMIs[0];</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;}</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="keywordtype">void</span> MachineLICM::InitCSEMap(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> I = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(),E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordtype">unsigned</span> Opcode = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, std::vector&lt;const MachineInstr*&gt;</a> &gt;::iterator</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      CI = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Opcode);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span> (CI != CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      CI-&gt;second.push_back(MI);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      std::vector&lt;const MachineInstr*&gt; CSEMIs;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      CSEMIs.push_back(MI);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(Opcode, CSEMIs));</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    }</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>*</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;MachineLICM::LookForDuplicate(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                              std::vector&lt;const MachineInstr*&gt; &amp;PrevMIs) {</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PrevMIs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PrevMI = PrevMIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a3ea770249f2cc62c0317639a0bd1839c">produceSameValue</a>(MI, PrevMI, (PreRegAlloc ? MRI : 0)))</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="keywordflow">return</span> PrevMI;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;}</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="keywordtype">bool</span> MachineLICM::EliminateCSE(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<span class="keywordtype">unsigned</span>, std::vector&lt;const MachineInstr*&gt; &gt;::iterator &amp;CI) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Do not CSE implicit_def so ProcessImplicitDefs can properly propagate</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// the undef property onto uses.</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (CI == CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">isImplicitDef</a>())</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Dup = LookForDuplicate(MI, CI-&gt;second)) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CSEing &quot;</span> &lt;&lt; *MI &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; *Dup);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// Replace virtual registers defined by MI by their counterparts defined</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// by Dup.</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 2&gt;</a> Defs;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="comment">// Physical registers may not differ here.</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      assert((!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == 0 ||</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;              !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()) ||</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;              MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == Dup-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg()) &amp;&amp;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;             <span class="stringliteral">&quot;Instructions with different phys regs are not identical!&quot;</span>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;          !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()))</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const TargetRegisterClass*, 2&gt;</a> OrigRCs;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordtype">unsigned</span> Idx = Defs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(Idx).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordtype">unsigned</span> DupReg = Dup-&gt;getOperand(Idx).getReg();</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      OrigRCs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(DupReg));</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="keywordflow">if</span> (!MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">constrainRegClass</a>(DupReg, MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(Reg))) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="comment">// Restore old RCs if more than one defs.</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;          MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abc2f27ea446a79159a27f3fb39840847">setRegClass</a>(Dup-&gt;getOperand(Defs[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]).getReg(), OrigRCs[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="keywordtype">unsigned</span> Idx = Defs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(Idx).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="keywordtype">unsigned</span> DupReg = Dup-&gt;getOperand(Idx).getReg();</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a0eb653bae4f5a11b4b19a6247fd0021c">replaceRegWith</a>(Reg, DupReg);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a94d3a48b807d71fd89867d73988b08fb">clearKillFlags</a>(DupReg);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    ++NumCSEed;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">/// MayCSE - Return true if the given instruction will be CSE&#39;d if it&#39;s</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">/// hoisted out of the loop.</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::MayCSE(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, std::vector&lt;const MachineInstr*&gt;</a> &gt;::iterator</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    CI = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Opcode);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="comment">// Do not CSE implicit_def so ProcessImplicitDefs can properly propagate</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// the undef property onto uses.</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">if</span> (CI == CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">isImplicitDef</a>())</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordflow">return</span> LookForDuplicate(MI, CI-&gt;second) != 0;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">/// Hoist - When an instruction is found to use only loop invariant operands</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">/// that are safe to hoist, this instruction is called to do the dirty work.</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineLICM::Hoist(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader) {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// First check whether we should hoist this instruction.</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> (!IsLoopInvariantInst(*MI) || !IsProfitableToHoist(*MI)) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">// If not, try unfolding a hoistable load.</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    MI = ExtractHoistableLoad(MI);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">if</span> (!MI) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// Now move the instructions to the predecessor, inserting it before any</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// terminator instructions.</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Hoisting &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keywordflow">if</span> (Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>())</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; to MachineBasicBlock &quot;</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;               &lt;&lt; Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a454838c989e99a86bd804e056c367bd9">getName</a>();</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>())</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; from MachineBasicBlock &quot;</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;               &lt;&lt; MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a454838c989e99a86bd804e056c367bd9">getName</a>();</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    });</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// If this is the first instruction being hoisted to the preheader,</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// initialize the CSE map with potential common expressions.</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> (FirstInLoop) {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    InitCSEMap(Preheader);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    FirstInLoop = <span class="keyword">false</span>;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Look for opportunity to CSE the hoisted instruction.</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, std::vector&lt;const MachineInstr*&gt;</a> &gt;::iterator</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    CI = CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Opcode);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="keywordflow">if</span> (!EliminateCSE(MI, CI)) {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// Otherwise, splice the instruction to the preheader.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(),MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>(),<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="comment">// Update register pressure for BBs from header to this block.</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    UpdateBackTraceRegPressure(MI);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="comment">// Clear the kill flags of any register this instruction defines,</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="comment">// since they may need to be live throughout the entire loop</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="comment">// rather than just live for part of it.</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp; !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>())</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a94d3a48b807d71fd89867d73988b08fb">clearKillFlags</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="comment">// Add to the CSE map.</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span> (CI != CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      CI-&gt;second.push_back(MI);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      std::vector&lt;const MachineInstr*&gt; CSEMIs;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      CSEMIs.push_back(MI);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      CSEMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(Opcode, CSEMIs));</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  ++NumHoisted;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MachineLICM::getCurPreheader() {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// Determine the block to which to hoist instructions. If we can&#39;t find a</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">// suitable loop predecessor, we can&#39;t do any hoisting.</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// If we&#39;ve tried to get a preheader and failed, don&#39;t try again.</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">if</span> (CurPreheader == reinterpret_cast&lt;MachineBasicBlock *&gt;(-1))</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordflow">if</span> (!CurPreheader) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    CurPreheader = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordflow">if</span> (!CurPreheader) {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Pred = CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a02a06d6c159b20080dda392b96c98b40">getLoopPredecessor</a>();</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">if</span> (!Pred) {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        CurPreheader = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      CurPreheader = Pred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af93cadf3685e509daac270c8cfd2b52f">SplitCriticalEdge</a>(CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>(), <span class="keyword">this</span>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <span class="keywordflow">if</span> (!CurPreheader) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        CurPreheader = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordflow">return</span> CurPreheader;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div><div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a9d7134fb4c7b07bd2fab941063bea585"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a9d7134fb4c7b07bd2fab941063bea585">llvm::MachineRegisterInfo::isConstantPhysReg</a></div><div class="ttdeci">bool isConstantPhysReg(unsigned PhysReg, const MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00413">MachineRegisterInfo.cpp:413</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a40a5d6e03f5bfd15839355a7c39ab3a0"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">llvm::MachineOperand::isImplicit</a></div><div class="ttdeci">bool isImplicit() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00279">MachineOperand.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9ac05913a143322136efcad10ed7548c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="MachineMemOperand_8h_html"><div class="ttname"><a href="MachineMemOperand_8h.html">MachineMemOperand.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00236">BitVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac962b1af600c2e418625a5fecc5e0f95"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">llvm::TargetMachine::getTargetLowering</a></div><div class="ttdeci">virtual const TargetLowering * getTargetLowering() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00121">Target/TargetMachine.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a5a3b8a8269ba0c61102f71a2a3bd42cd"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">llvm::LoopBase::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00131">LoopInfo.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html_a9d472a8ee447cef18a71beb229d4d252"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a9d472a8ee447cef18a71beb229d4d252">llvm::MCInstrDesc::getNumDefs</a></div><div class="ttdeci">unsigned getNumDefs() const </div><div class="ttdoc">Return the number of MachineOperands that are register definitions. Register definitions always occur...</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00198">MCInstrDesc.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a76c3c7e3d4f11b4cfad37fc0449c9635"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">unsigned createVirtualRegister(const TargetRegisterClass *RegClass)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00104">MachineRegisterInfo.cpp:104</a></div></div>
<div class="ttc" id="namespacellvm_html_aec913d7a94874651981c1017ac8ef6e0"><div class="ttname"><a href="namespacellvm.html#aec913d7a94874651981c1017ac8ef6e0">llvm::MachineLICMID</a></div><div class="ttdeci">char &amp; MachineLICMID</div><div class="ttdoc">MachineLICM - This pass performs LICM on machine instructions. </div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00298">MachineLICM.cpp:298</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7bab64c02d740522f94f5f45959a22fc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">llvm::MachineBasicBlock::livein_iterator</a></div><div class="ttdeci">std::vector&lt; unsigned &gt;::const_iterator livein_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00314">MachineBasicBlock.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00172">MachineBasicBlock.cpp:172</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00137">MCInstrDesc.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00284">MachineOperand.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00287">TargetInstrInfo.h:287</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a5e88a1c76fcf428da5bdda0bc7ccb938"><div class="ttname"><a href="MachineLICM_8cpp.html#a5e88a1c76fcf428da5bdda0bc7ccb938">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(MachineLICM,&quot;machinelicm&quot;,&quot;Machine Loop Invariant Code Motion&quot;, false, false) INITIALIZE_PASS_END(MachineLICM</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae26efdb76d5c56388c65dc5b02a2ae6f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ae26efdb76d5c56388c65dc5b02a2ae6f">llvm::MachineBasicBlock::addLiveIn</a></div><div class="ttdeci">void addLiveIn(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00297">MachineBasicBlock.h:297</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ac02c0424a7e7a4021fd9efc0a71d7473"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">llvm::MachineRegisterInfo::use_nodbg_empty</a></div><div class="ttdeci">bool use_nodbg_empty(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00285">MachineRegisterInfo.h:285</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html_a25f9ba8e78af92ca34f9c1bba7881601"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">llvm::TargetRegisterClass::getID</a></div><div class="ttdeci">unsigned getID() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00053">TargetRegisterInfo.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a8ed8d6c8b5f2e6f8afbabdcfaf40d6ff"><div class="ttname"><a href="classllvm_1_1BitVector.html#a8ed8d6c8b5f2e6f8afbabdcfaf40d6ff">llvm::BitVector::setBitsNotInMask</a></div><div class="ttdeci">void setBitsNotInMask(const uint32_t *Mask, unsigned MaskWords=~0u)</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00509">BitVector.h:509</a></div></div>
<div class="ttc" id="MCInstrItineraries_8h_html"><div class="ttname"><a href="MCInstrItineraries_8h.html">MCInstrItineraries.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_ab356e0f1832c4388bb849509af19b78a"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#ab356e0f1832c4388bb849509af19b78a">llvm::TargetInstrInfo::getOpcodeAfterMemoryUnfold</a></div><div class="ttdeci">virtual unsigned getOpcodeAfterMemoryUnfold(unsigned Opc, bool UnfoldLoad, bool UnfoldStore, unsigned *LoadRegIndex=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00598">TargetInstrInfo.h:598</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a773f00b289b2eef69a1b26c350d32332"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a773f00b289b2eef69a1b26c350d32332">llvm::TargetRegisterInfo::regclass_end</a></div><div class="ttdeci">regclass_iterator regclass_end() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00551">TargetRegisterInfo.h:551</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a803a7424877fd049679b9aa2f07597b5"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">llvm::MachineInstr::getDesc</a></div><div class="ttdeci">const MCInstrDesc &amp; getDesc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00257">MachineInstr.h:257</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a5f440ca7f5a9bc1a0e43538f8b49e5ec"><div class="ttname"><a href="MachineLICM_8cpp.html#a5f440ca7f5a9bc1a0e43538f8b49e5ec">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumHoisted,&quot;Number of machine instructions hoisted out of loops&quot;)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a6ea66ea696ee423ada504c8d21786451"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a6ea66ea696ee423ada504c8d21786451">llvm::MachineInstr::canFoldAsLoad</a></div><div class="ttdeci">bool canFoldAsLoad(QueryType Type=IgnoreBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00454">MachineInstr.h:454</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a355ba266da19094cc0948311c431768e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">llvm::MachineRegisterInfo::use_nodbg_end</a></div><div class="ttdeci">static use_nodbg_iterator use_nodbg_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00281">MachineRegisterInfo.h:281</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_abfe348b051b61449a611f0194761fccf"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#abfe348b051b61449a611f0194761fccf">llvm::TargetLoweringBase::getRepRegClassFor</a></div><div class="ttdeci">virtual const TargetRegisterClass * getRepRegClassFor(MVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00271">TargetLowering.h:271</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_af29fd25c7daf875691c8f4f97d6b4822"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#af29fd25c7daf875691c8f4f97d6b4822">llvm::TargetInstrInfo::hasHighOperandLatency</a></div><div class="ttdeci">virtual bool hasHighOperandLatency(const InstrItineraryData *ItinData, const MachineRegisterInfo *MRI, const MachineInstr *DefMI, unsigned DefIdx, const MachineInstr *UseMI, unsigned UseIdx) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00865">TargetInstrInfo.h:865</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6833d4f80b7e44f505b2184b04ea2693"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">llvm::MachineBasicBlock::livein_begin</a></div><div class="ttdeci">livein_iterator livein_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00315">MachineBasicBlock.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00082">MachineMemOperand.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ac8347c6938efe4d9a4426b92ef57851e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ac8347c6938efe4d9a4426b92ef57851e">llvm::MachineRegisterInfo::use_end</a></div><div class="ttdeci">static use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00260">MachineRegisterInfo.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a31a901f12fea3fdd4fb7cdffbe494842"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a31a901f12fea3fdd4fb7cdffbe494842">llvm::TargetRegisterInfo::getNumRegClasses</a></div><div class="ttdeci">unsigned getNumRegClasses() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00553">TargetRegisterInfo.h:553</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ad70025709baab4e42d5d9d83023bc402"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">llvm::MachineInstr::isPHI</a></div><div class="ttdeci">bool isPHI() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00648">MachineInstr.h:648</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a3b6f8318fa97ea96ea30725e31e85fea"><div class="ttname"><a href="MachineLICM_8cpp.html#a3b6f8318fa97ea96ea30725e31e85fea">isOperandKill</a></div><div class="ttdeci">static bool isOperandKill(const MachineOperand &amp;MO, MachineRegisterInfo *MRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00772">MachineLICM.cpp:772</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_ad174ba1c760b290b7de9772c30a252d9"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#ad174ba1c760b290b7de9772c30a252d9">llvm::MachineLoopInfo::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00092">MachineLoopInfo.h:92</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00846">MachineInstr.cpp:846</a></div></div>
<div class="ttc" id="MachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a2b48451e9cc8433ed5f8ee30462cc96e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">llvm::MachineInstr::mayLoad</a></div><div class="ttdeci">bool mayLoad(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00465">MachineInstr.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_aa6bdb226fb3dac1f051547ce01b76fd2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#aa6bdb226fb3dac1f051547ce01b76fd2">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00033">LoopInfoImpl.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af93cadf3685e509daac270c8cfd2b52f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af93cadf3685e509daac270c8cfd2b52f">llvm::MachineBasicBlock::SplitCriticalEdge</a></div><div class="ttdeci">MachineBasicBlock * SplitCriticalEdge(MachineBasicBlock *Succ, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00671">MachineBasicBlock.cpp:671</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a22b3e904c08bd922efd707282aed89d9"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">llvm::LoopBase::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00130">LoopInfo.h:130</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">Abstract Stack Frame Information. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00080">MachineFrameInfo.h:80</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html_abf2eadac3ea84e2e2739444c40421eac"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">llvm::MCRegAliasIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00580">MCRegisterInfo.h:580</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a69d6715752707a83ec4cbecff60b5359"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a69d6715752707a83ec4cbecff60b5359">llvm::TargetMachine::getInstrItineraryData</a></div><div class="ttdeci">virtual const InstrItineraryData * getInstrItineraryData() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00155">Target/TargetMachine.h:155</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a330f2a9738da6c37a754f204519c6351"><div class="ttname"><a href="MachineLICM_8cpp.html#a330f2a9738da6c37a754f204519c6351">AvoidSpeculation</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AvoidSpeculation(&quot;avoid-speculation&quot;, cl::desc(&quot;MachineLICM should avoid speculation&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a420d7b5cd4eebceaf8bc16326e07af9c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a420d7b5cd4eebceaf8bc16326e07af9c">llvm::LoopBase::getExitBlocks</a></div><div class="ttdeci">void getExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00062">LoopInfoImpl.h:62</a></div></div>
<div class="ttc" id="PseudoSourceValue_8h_html"><div class="ttname"><a href="PseudoSourceValue_8h.html">PseudoSourceValue.h</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_a56e9a625f708912164f16c178ceb97d7"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">llvm::MCRegisterInfo::getNumRegs</a></div><div class="ttdeci">unsigned getNumRegs() const </div><div class="ttdoc">Return the number of registers this target has (useful for sizing arrays holding per register informa...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00359">MCRegisterInfo.h:359</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aa21b508be8c212bdb0b28d734ab0ddb8"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">llvm::MachineOperand::isKill</a></div><div class="ttdeci">bool isKill() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a76b3fc7c102561fb5210d5151531e409"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">llvm::SmallSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00097">SmallSet.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab0d5ec413fa43a1e470dafb6cafda9b5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab0d5ec413fa43a1e470dafb6cafda9b5">llvm::MachineOperand::isFI</a></div><div class="ttdeci">bool isFI() const </div><div class="ttdoc">isFI - Tests if this is a MO_FrameIndex operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00234">MachineOperand.h:234</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00064">Dominators.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a100d59f6313d76435a54425d3d11bf99"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a100d59f6313d76435a54425d3d11bf99">llvm::MachineInstr::isCopyLike</a></div><div class="ttdeci">bool isCopyLike() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00678">MachineInstr.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoop_html"><div class="ttname"><a href="classllvm_1_1MachineLoop.html">llvm::MachineLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00044">MachineLoopInfo.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1InstrItineraryData_html"><div class="ttname"><a href="classllvm_1_1InstrItineraryData.html">llvm::InstrItineraryData</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrItineraries_8h_source.html#l00111">MCInstrItineraries.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="COFFYAML_8cpp_html_a9dbc9c66cf3908e866b252feca6395a4"><div class="ttname"><a href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a></div><div class="ttdeci">COFF::MachineTypes Machine</div><div class="ttdef"><b>Definition:</b> <a href="COFFYAML_8cpp_source.html#l00211">COFFYAML.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a96fd2f0087c41942dd2618ff6e1b8640"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00082">Dominators.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a4312b4757ac75bf9be905acfeefd6838"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">llvm::MachineRegisterInfo::constrainRegClass</a></div><div class="ttdeci">const TargetRegisterClass * constrainRegClass(unsigned Reg, const TargetRegisterClass *RC, unsigned MinNumRegs=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00052">MachineRegisterInfo.cpp:52</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a27155066ff11c6a72e3dd16c774d4655"><div class="ttname"><a href="MachineLICM_8cpp.html#a27155066ff11c6a72e3dd16c774d4655">isLoadFromGOTOrConstantPool</a></div><div class="ttdeci">static bool isLoadFromGOTOrConstantPool(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00878">MachineLICM.cpp:878</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a2961c31b29db17a4f2964899c8569a64"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">llvm::MachineBasicBlock::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00117">MachineBasicBlock.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_a77c4b8800aaa188948bb253a9631c8f2"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a77c4b8800aaa188948bb253a9631c8f2">llvm::MachineFrameInfo::isSpillSlotObjectIndex</a></div><div class="ttdeci">bool isSpillSlotObjectIndex(int ObjectIdx) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00486">MachineFrameInfo.h:486</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a0e15c0325463fc62bd16ccd9ec2b9ec5"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0e15c0325463fc62bd16ccd9ec2b9ec5">llvm::MachineInstr::isImplicitDef</a></div><div class="ttdeci">bool isImplicitDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00650">MachineInstr.h:650</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a8d6268ac5d00f510ade10bd1865d9829"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a8d6268ac5d00f510ade10bd1865d9829">llvm::MachineInstr::memoperands_end</a></div><div class="ttdeci">mmo_iterator memoperands_end() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00292">MachineInstr.h:292</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a6fd27da145ca5d0d4b72b763092f3aed"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">llvm::MachineLoopInfo::getLoopFor</a></div><div class="ttdeci">MachineLoop * getLoopFor(const MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00099">MachineLoopInfo.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a90706ef4d02ab24360d2cda5dc432584"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a90706ef4d02ab24360d2cda5dc432584">llvm::TargetInstrInfo::hasLowDefLatency</a></div><div class="ttdeci">virtual bool hasLowDefLatency(const InstrItineraryData *ItinData, const MachineInstr *DefMI, unsigned DefIdx) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00691">TargetInstrInfo.cpp:691</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a1e727502aaf54bbd6564e06f6c38f132"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a1e727502aaf54bbd6564e06f6c38f132">llvm::TargetRegisterInfo::regclass_begin</a></div><div class="ttdeci">regclass_iterator regclass_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00550">TargetRegisterInfo.h:550</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html"><div class="ttname"><a href="classllvm_1_1MVT.html">llvm::MVT</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00033">ValueTypes.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a3ea770249f2cc62c0317639a0bd1839c"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a3ea770249f2cc62c0317639a0bd1839c">llvm::TargetInstrInfo::produceSameValue</a></div><div class="ttdeci">virtual bool produceSameValue(const MachineInstr *MI0, const MachineInstr *MI1, const MachineRegisterInfo *MRI=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00322">TargetInstrInfo.cpp:322</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2d31549cd95bf8c917744e997bf73f7"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2d31549cd95bf8c917744e997bf73f7">llvm::MachineInstr::isAsCheapAsAMove</a></div><div class="ttdeci">bool isAsCheapAsAMove(QueryType Type=AllInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00560">MachineInstr.h:560</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa314325c7062fd067a3c0b9339aa8ea6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa314325c7062fd067a3c0b9339aa8ea6">llvm::MachineBasicBlock::livein_end</a></div><div class="ttdeci">livein_iterator livein_end() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00316">MachineBasicBlock.h:316</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5cdd6ae6b245e832e7cc5e4edf035cb2"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a></div><div class="ttdeci">const MCInstrInfo &amp; MII</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00055">MCModuleYAML.cpp:55</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae0ac5973cd95f76e3365e67aaad69de6"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00669">MachineInstr.h:669</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a292c515febc84943f6998b38184ac13a"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a292c515febc84943f6998b38184ac13a">llvm::TargetInstrInfo::unfoldMemoryOperand</a></div><div class="ttdeci">virtual bool unfoldMemoryOperand(MachineFunction &amp;MF, MachineInstr *MI, unsigned Reg, bool UnfoldLoad, bool UnfoldStore, SmallVectorImpl&lt; MachineInstr * &gt; &amp;NewMIs) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00581">TargetInstrInfo.h:581</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html">llvm::MCRegAliasIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00555">MCRegisterInfo.h:555</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_ab291fb9293f91eda708874e0e75e815e"><div class="ttname"><a href="MachineLICM_8cpp.html#ab291fb9293f91eda708874e0e75e815e">InstructionStoresToFI</a></div><div class="ttdeci">static bool InstructionStoresToFI(const MachineInstr *MI, int FI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00387">MachineLICM.cpp:387</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a3293892e5078a238db5b0f388aca5fa5"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3293892e5078a238db5b0f388aca5fa5">llvm::MachineInstr::isInvariantLoad</a></div><div class="ttdeci">bool isInvariantLoad(AliasAnalysis *AA) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01289">MachineInstr.cpp:1289</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrInfo_html_ab16f5a81fccfe4b7f645ba5a74ffad02"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">llvm::MCInstrInfo::get</a></div><div class="ttdeci">const MCInstrDesc &amp; get(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00048">MCInstrInfo.h:48</a></div></div>
<div class="ttc" id="namespacellvm_html_a94452f68adbacd71414af478f55df784"><div class="ttname"><a href="namespacellvm.html#a94452f68adbacd71414af478f55df784">llvm::initializeMachineLICMPass</a></div><div class="ttdeci">void initializeMachineLICMPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00367">MachineOperand.h:367</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html">llvm::TargetLoweringBase</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00073">TargetLowering.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2c5eddfba64e7a44deba1b5a0d45a017"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">llvm::MachineOperand::isRegMask</a></div><div class="ttdeci">bool isRegMask() const </div><div class="ttdoc">isRegMask - Tests if this is a MO_RegisterMask operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00248">MachineOperand.h:248</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_afada34cd832fdc73959f84d4769ab837"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">llvm::DomTreeNodeBase::getChildren</a></div><div class="ttdeci">const std::vector&lt; DomTreeNodeBase&lt; NodeT &gt; * &gt; &amp; getChildren() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00084">Dominators.h:84</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">llvm::tgtok::Code</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a5192a9fe4d860e2b97d4457fe4b1a036"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a5192a9fe4d860e2b97d4457fe4b1a036">llvm::MachineOperand::getRegMask</a></div><div class="ttdeci">const uint32_t * getRegMask() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00474">MachineOperand.h:474</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1431766de798501f107d9031821f311e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00096">LoopInfo.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a4ad4295a88187ea1ae12ecfcfa18a70f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4ad4295a88187ea1ae12ecfcfa18a70f">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo * getFrameInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00174">MachineFunction.h:174</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a454838c989e99a86bd804e056c367bd9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a454838c989e99a86bd804e056c367bd9">llvm::MachineBasicBlock::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00245">MachineBasicBlock.cpp:245</a></div></div>
<div class="ttc" id="classllvm_1_1ConstMIOperands_html"><div class="ttname"><a href="classllvm_1_1ConstMIOperands.html">llvm::ConstMIOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00221">MachineInstrBundle.h:221</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1PseudoSourceValue_html"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html">llvm::PseudoSourceValue</a></div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00027">PseudoSourceValue.h:27</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_abbbf9ad51415e03f77597a5dedce3f99"><div class="ttname"><a href="MachineLICM_8cpp.html#abbbf9ad51415e03f77597a5dedce3f99">LoopIsOuterMostWithPredecessor</a></div><div class="ttdeci">Machine Loop Invariant Code static false bool LoopIsOuterMostWithPredecessor(MachineLoop *CurLoop)</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00309">MachineLICM.cpp:309</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00053">DenseMap.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a55f1c19ebb9fce7a442816eeb154174f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">llvm::MachineInstr::isSafeToMove</a></div><div class="ttdeci">bool isSafeToMove(const TargetInstrInfo *TII, AliasAnalysis *AA, bool &amp;SawStore) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01228">MachineInstr.cpp:1228</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a0eb653bae4f5a11b4b19a6247fd0021c"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a0eb653bae4f5a11b4b19a6247fd0021c">llvm::MachineRegisterInfo::replaceRegWith</a></div><div class="ttdeci">void replaceRegWith(unsigned FromReg, unsigned ToReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00293">MachineRegisterInfo.cpp:293</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_ab28aa342862f6d16361be514fd98c22e"><div class="ttname"><a href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">llvm::SmallSet::count</a></div><div class="ttdeci">bool count(const T &amp;V) const </div><div class="ttdoc">count - Return true if the element is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00048">SmallSet.h:48</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_ab473cdc9fb7554bc7375f20d76561e8e"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#ab473cdc9fb7554bc7375f20d76561e8e">llvm::MCRegisterInfo::isSuperRegister</a></div><div class="ttdeci">bool isSuperRegister(unsigned RegA, unsigned RegB) const </div><div class="ttdoc">Returns true if RegB is a super-register of RegA. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00468">MCRegisterInfo.h:468</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a506447dd6402590e58fe1492fa824c01"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a506447dd6402590e58fe1492fa824c01">llvm::MachineRegisterInfo::isSSA</a></div><div class="ttdeci">bool isSSA() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00159">MachineRegisterInfo.h:159</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3f522ae33859d693fb5781efe690e9e6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">llvm::MachineBasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00331">MachineBasicBlock.h:331</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ac9485ae7d6fedd71ad4460f72c799c98"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">llvm::MachineOperand::getIndex</a></div><div class="ttdeci">int getIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00422">MachineOperand.h:422</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00539">MachineBasicBlock.h:539</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a183fc29cc1ccec18f5e9e4122a4aab1c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a183fc29cc1ccec18f5e9e4122a4aab1c">llvm::MachineBasicBlock::isLiveIn</a></div><div class="ttdeci">bool isLiveIn(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00340">MachineBasicBlock.cpp:340</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1939dbb59960462878c408efb21a2c75"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">const std::vector&lt; BlockT * &gt; &amp; getBlocks() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00138">LoopInfo.h:138</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXCvtMode_html_ad81eb7557182862503894d8bc5e8328fa8b204d090788e956d6011920f4916191"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fa8b204d090788e956d6011920f4916191">llvm::NVPTX::PTXCvtMode::RP</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00143">NVPTX.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a2f9819f230628888e3e68de292ecd602"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a2f9819f230628888e3e68de292ecd602">llvm::MachineRegisterInfo::use_begin</a></div><div class="ttdeci">use_iterator use_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00257">MachineRegisterInfo.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a9fcdc96a6712deb1a8a3d2e18af6db3f"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">llvm::TargetInstrInfo::isLoadFromStackSlot</a></div><div class="ttdeci">virtual unsigned isLoadFromStackSlot(const MachineInstr *MI, int &amp;FrameIndex) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00124">TargetInstrInfo.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a8be4959abd44b6fbd158dba0d7c315bc"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00327">MachineRegisterInfo.cpp:327</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a94d3a48b807d71fd89867d73988b08fb"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a94d3a48b807d71fd89867d73988b08fb">llvm::MachineRegisterInfo::clearKillFlags</a></div><div class="ttdeci">void clearKillFlags(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00338">MachineRegisterInfo.cpp:338</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a02a06d6c159b20080dda392b96c98b40"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a02a06d6c159b20080dda392b96c98b40">llvm::LoopBase::getLoopPredecessor</a></div><div class="ttdeci">BlockT * getLoopPredecessor() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00128">LoopInfoImpl.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="namespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea5b5fba18a61456ef5858005d9f7b153e"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea5b5fba18a61456ef5858005d9f7b153e">llvm::Sched::RegPressure</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00064">TargetLowering.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abf69f92f1977440a4e443a26baeb73c0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00308">MachineRegisterInfo.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a9fdd9266343e4bfba10c1f8ab7fc4e0a"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a9fdd9266343e4bfba10c1f8ab7fc4e0a">llvm::TargetInstrInfo::isTriviallyReMaterializable</a></div><div class="ttdeci">bool isTriviallyReMaterializable(const MachineInstr *MI, AliasAnalysis *AA=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00068">TargetInstrInfo.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca707dc1fd6a4179316ffa6ca2516e18dc"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca707dc1fd6a4179316ffa6ca2516e18dc">llvm::MVT::Untyped</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00122">ValueTypes.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_afe970f60219cf069303ba0a1bf66919f"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#afe970f60219cf069303ba0a1bf66919f">llvm::TargetRegisterInfo::getRegPressureLimit</a></div><div class="ttdeci">virtual unsigned getRegPressureLimit(const TargetRegisterClass *RC, MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00605">TargetRegisterInfo.h:605</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_a67fba080ac198ef02581a992c85d532a"><div class="ttname"><a href="MachineLICM_8cpp.html#a67fba080ac198ef02581a992c85d532a">machinelicm</a></div><div class="ttdeci">machinelicm</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00304">MachineLICM.cpp:304</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="MachineLICM_8cpp_html_adb278d56cfd897fb0c3eea6508fed1c4"><div class="ttname"><a href="MachineLICM_8cpp.html#adb278d56cfd897fb0c3eea6508fed1c4">Motion</a></div><div class="ttdeci">Machine Loop Invariant Code Motion</div><div class="ttdef"><b>Definition:</b> <a href="MachineLICM_8cpp_source.html#l00304">MachineLICM.cpp:304</a></div></div>
<div class="ttc" id="namespacetrue_html"><div class="ttname"><a href="namespacetrue.html">true</a></div><div class="ttdef"><b>Definition:</b> <a href="DominanceFrontier_8cpp_source.html#l00024">DominanceFrontier.cpp:24</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html_a55194ec3a1e49d04eab64e993e614246"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">llvm::MCInstrDesc::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">Return the number of declared MachineOperands for this MachineInstruction. Note that variadic (isVari...</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00190">MCInstrDesc.h:190</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a962592f9d8e8db865060de86d1cd9630"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a962592f9d8e8db865060de86d1cd9630">llvm::TargetLoweringBase::getRepRegClassCostFor</a></div><div class="ttdeci">virtual uint8_t getRepRegClassCostFor(MVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00278">TargetLowering.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="LCSSA_8cpp_html_a07f138d2a84576c85e238a26969e5ff9"><div class="ttname"><a href="LCSSA_8cpp.html#a07f138d2a84576c85e238a26969e5ff9">isExitBlock</a></div><div class="ttdeci">static bool isExitBlock(BasicBlock *BB, const SmallVectorImpl&lt; BasicBlock * &gt; &amp;ExitBlocks)</div><div class="ttdoc">isExitBlock - Return true if the specified block is in the list. </div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00166">LCSSA.cpp:166</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abc2f27ea446a79159a27f3fb39840847"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abc2f27ea446a79159a27f3fb39840847">llvm::MachineRegisterInfo::setRegClass</a></div><div class="ttdeci">void setRegClass(unsigned Reg, const TargetRegisterClass *RC)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00046">MachineRegisterInfo.cpp:46</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html_af2ed3490fe47d88ef2d7f3edce4bf113"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#af2ed3490fe47d88ef2d7f3edce4bf113">llvm::TargetRegisterClass::vt_begin</a></div><div class="ttdeci">vt_iterator vt_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00113">TargetRegisterInfo.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aabf764b704ed905ec6841a8872815bff"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#aabf764b704ed905ec6841a8872815bff">llvm::TargetInstrInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(const MCInstrDesc &amp;TID, unsigned OpNum, const TargetRegisterInfo *TRI, const MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00040">TargetInstrInfo.cpp:40</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="classllvm_1_1FixedStackPseudoSourceValue_html"><div class="ttname"><a href="classllvm_1_1FixedStackPseudoSourceValue.html">llvm::FixedStackPseudoSourceValue</a></div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00083">PseudoSourceValue.h:83</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_abd835122c5c416057b14378e92a72298"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#abd835122c5c416057b14378e92a72298">llvm::MachineLoopInfo::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00093">MachineLoopInfo.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ae215c5c2aecd18c4e68a94187d9cdbf1"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a22bd7da7d9fa4793cb214e659c198ff6"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">llvm::MachineDominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const MachineDomTreeNode *A, const MachineDomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00071">MachineDominators.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a6467bd6bb128c8b69a478548fc17351c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00078">DenseMap.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1InstrItineraryData_html_a714827e35583b7e5e55f8bcce441c2cb"><div class="ttname"><a href="classllvm_1_1InstrItineraryData.html#a714827e35583b7e5e55f8bcce441c2cb">llvm::InstrItineraryData::isEmpty</a></div><div class="ttdeci">bool isEmpty() const </div><div class="ttdef"><b>Definition:</b> <a href="MCInstrItineraries_8h_source.html#l00132">MCInstrItineraries.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a5f3578b3db9bb49d5d3ac5d282b35034"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a5f3578b3db9bb49d5d3ac5d282b35034">llvm::TargetRegisterInfo::regclass_iterator</a></div><div class="ttdeci">const TargetRegisterClass *const * regclass_iterator</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00221">TargetRegisterInfo.h:221</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aad684f050965249161650dcdf5a58fa4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">llvm::MachineRegisterInfo::use_nodbg_begin</a></div><div class="ttdeci">use_nodbg_iterator use_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00278">MachineRegisterInfo.h:278</a></div></div>
<div class="ttc" id="TargetLowering_8h_html"><div class="ttname"><a href="TargetLowering_8h.html">TargetLowering.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_abb87c1c9d9046e29211e9875e27ceef9"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#abb87c1c9d9046e29211e9875e27ceef9">llvm::MachineInstr::memoperands_begin</a></div><div class="ttdeci">mmo_iterator memoperands_begin() const </div><div class="ttdoc">Access to memory operands of the instruction. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00291">MachineInstr.h:291</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:51 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
