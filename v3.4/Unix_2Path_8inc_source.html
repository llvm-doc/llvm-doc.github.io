<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: Path.inc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Unix_2Path_8inc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Unix/Path.inc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Unix_2Path_8inc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- llvm/Support/Unix/Path.inc - Unix Path Implementation ----*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the Unix specific implementation of the Path API.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//=== WARNING: Implementation here must contain only generic UNIX code that</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//===          is guaranteed to work on *all* UNIX variants.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Unix_8h.html">Unix.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Process_8h.html">llvm/Support/Process.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#if HAVE_SYS_STAT_H</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#if HAVE_FCNTL_H</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifdef HAVE_SYS_MMAN_H</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if HAVE_DIRENT_H</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor"># include &lt;dirent.h&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor"># define NAMLEN(dirent) strlen((dirent)-&gt;d_name)</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor"># define dirent direct</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor"># define NAMLEN(dirent) (dirent)-&gt;d_namlen</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor"># if HAVE_SYS_NDIR_H</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#  include &lt;sys/ndir.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor"># if HAVE_SYS_DIR_H</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#  include &lt;sys/dir.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor"># if HAVE_NDIR_H</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#  include &lt;ndir.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;mach-o/dyld.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// Both stdio.h and cstdio are included via different pathes and</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// stdcxx&#39;s cstdio doesn&#39;t include stdio.h, so it doesn&#39;t #undef the macros</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// either.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#undef ferror</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#undef feof</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// For GNU Hurd</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#if defined(__GNU__) &amp;&amp; !defined(PATH_MAX)</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"># define PATH_MAX 4096</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  /// This class automatically closes the given file descriptor when it goes out</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// of scope. You can take back explicit ownership of the file descriptor by</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  /// calling take(). The destructor does not verify that close was successful.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  /// Therefore, never allow this class to call close on a file descriptor that</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">  /// has been read from or written to.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>AutoFD {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">int</span> FileDescriptor;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    AutoFD(<span class="keywordtype">int</span> fd) : FileDescriptor(fd) {}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    ~AutoFD() {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">if</span> (FileDescriptor &gt;= 0)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        ::close(FileDescriptor);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">int</span> take() {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a> = FileDescriptor;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      FileDescriptor = -1;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">operator</span> <a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> FileDescriptor;}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  };</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1error__code.html">error_code</a> TempDir(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;<a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a>) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// FIXME: Don&#39;t use TMPDIR if program is SUID or SGID enabled.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *dir = 0;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    (dir = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">std::getenv</a>(<span class="stringliteral">&quot;TMPDIR&quot;</span> )) ||</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    (dir = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">std::getenv</a>(<span class="stringliteral">&quot;TMP&quot;</span>    )) ||</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    (dir = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">std::getenv</a>(<span class="stringliteral">&quot;TEMP&quot;</span>   )) ||</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    (dir = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">std::getenv</a>(<span class="stringliteral">&quot;TEMPDIR&quot;</span>)) ||</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;#ifdef P_tmpdir</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    (dir = P_tmpdir) ||</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    (dir = <span class="stringliteral">&quot;/tmp&quot;</span>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>(dir);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>.begin(), <a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>.end());</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="Path_8cpp.html#a093374bcc0be5e6dca09e80884355674">createUniqueEntity</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">Model</a>, <span class="keywordtype">int</span> &amp;ResultFD,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;ResultPath,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                     <span class="keywordtype">bool</span> MakeAbsolute, <span class="keywordtype">unsigned</span> Mode,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                     <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708">FSEntity</a> <a class="code" href="classllvm_1_1Type.html">Type</a>) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> ModelStorage;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  Model.<a class="code" href="classllvm_1_1Twine.html#a9fe2d882764d8dc5b12df7a77233ae2e">toVector</a>(ModelStorage);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (MakeAbsolute) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Make model absolute by prepending a temp directory if it&#39;s not already.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">bool</span> absolute = <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa810d4410de405f514454936632c5551">sys::path::is_absolute</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(ModelStorage));</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (!absolute) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> TDir;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = TempDir(TDir)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">sys::path::append</a>(TDir, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(ModelStorage));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      ModelStorage.<a class="code" href="classllvm_1_1SmallVectorImpl.html#abd962b7b01f49ce61ea41ee10c49e313">swap</a>(TDir);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// From here on, DO NOT modify model. It may be needed if the randomly chosen</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// path already exists.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  ResultPath = ModelStorage;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// Null terminate.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  ResultPath.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(0);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  ResultPath.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;retry_random_path:</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// Replace &#39;%&#39; with random chars.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ModelStorage.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (ModelStorage[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] == <span class="charliteral">&#39;%&#39;</span>)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      ResultPath[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>[<a class="code" href="classllvm_1_1sys_1_1Process.html#a92b058c34d04f6d0adf6eac3060343c6">sys::Process::GetRandomNumber</a>() &amp; 15];</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// Try to open + create the file.</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">switch</span> (Type) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84">FS_File</a>: {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">int</span> RandomFD = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">::open</a>(ResultPath.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), O_RDWR | O_CREAT | O_EXCL, Mode);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (RandomFD == -1) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordtype">int</span> SavedErrno = errno;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="comment">// If the file existed, try again, otherwise, error.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (SavedErrno == <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a1bb285b9917fde9652bbc223742fd1e4">errc::file_exists</a>)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(SavedErrno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    ResultFD = RandomFD;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c">FS_Name</a>: {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">bool</span> Exists;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">sys::fs::exists</a>(ResultPath.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Exists);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> (EC)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (Exists)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b">FS_Dir</a>: {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">bool</span> Existed;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> EC = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a33cdf6e66707db20ff903c3ee378aa13">sys::fs::create_directory</a>(ResultPath.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Existed);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (EC)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> EC;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (Existed)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">goto</span> retry_random_path;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid Type&quot;</span>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">namespace </span>sys  {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">namespace </span>fs {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#if defined(__FreeBSD__) || defined (__NetBSD__) || defined(__Bitrig__) || \</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">    defined(__OpenBSD__) || defined(__minix) || defined(__FreeBSD_kernel__) || \</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">    defined(__linux__) || defined(__CYGWIN__) || defined(__DragonFly__)</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;test_dir(<span class="keywordtype">char</span> buf[PATH_MAX], <span class="keywordtype">char</span> <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>[PATH_MAX],</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *dir, <span class="keyword">const</span> <span class="keywordtype">char</span> *bin)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> sb;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa70d1673fa624884eeb577a2458738b63">snprintf</a>(buf, PATH_MAX, <span class="stringliteral">&quot;%s/%s&quot;</span>, dir, bin);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fad834cfd8e646b2d7ef5baed3683b06d6">realpath</a>(buf, <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>) == NULL)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a>(buf, &amp;sb) != 0)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">return</span> (0);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;getprogpath(<span class="keywordtype">char</span> <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>[PATH_MAX], <span class="keyword">const</span> <span class="keywordtype">char</span> *bin)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">char</span> *pv, *<a class="code" href="Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a>, *<a class="code" href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a>, buf[PATH_MAX];</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">/* First approach: absolute path. */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">if</span> (bin[0] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (test_dir(buf, <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>, <span class="stringliteral">&quot;/&quot;</span>, bin) == 0)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">/* Second approach: relative path. */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fade48d0dc69a747ba01fc3c12f01653cd">strchr</a>(bin, <span class="charliteral">&#39;/&#39;</span>) != NULL) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (getcwd(buf, PATH_MAX) == NULL)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (test_dir(buf, <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>, buf, bin) == 0)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">/* Third approach: $PATH */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> ((pv = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">getenv</a>(<span class="stringliteral">&quot;PATH&quot;</span>)) == NULL)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  s = pv = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa53d8e382cd48b9a80e743f44d982bb81">strdup</a>(pv);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (pv == NULL)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">while</span> ((t = strsep(&amp;s, <span class="stringliteral">&quot;:&quot;</span>)) != NULL) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (test_dir(buf, <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>, t, bin) == 0) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c">free</a>(pv);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c">free</a>(pv);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> (NULL);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif // __FreeBSD__ || __NetBSD__ || __FreeBSD_kernel__</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/// GetMainExecutable - Return the path to the main executable, given the</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/// value of argv[0] from program startup.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"></span>std::string <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a057a733b2dfa2f0531ceb335cf3b1d03">getMainExecutable</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *argv0, <span class="keywordtype">void</span> *MainAddr) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#if defined(__APPLE__)</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// On OS X the executable path is saved to the stack by dyld. Reading it</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// from there is much faster than calling dladdr, especially for large</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// binaries with symbols.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">char</span> exe_path[MAXPATHLEN];</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  uint32_t <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a> = <span class="keyword">sizeof</span>(exe_path);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (_NSGetExecutablePath(exe_path, &amp;size) == 0) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">char</span> link_path[MAXPATHLEN];</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fad834cfd8e646b2d7ef5baed3683b06d6">realpath</a>(exe_path, link_path))</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span> link_path;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#elif defined(__FreeBSD__) || defined (__NetBSD__) || defined(__Bitrig__) || \</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">      defined(__OpenBSD__) || defined(__minix) || defined(__DragonFly__) || \</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">      defined(__FreeBSD_kernel__)</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">char</span> exe_path[PATH_MAX];</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (getprogpath(exe_path, argv0) != NULL)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> exe_path;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#elif defined(__linux__) || defined(__CYGWIN__)</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">char</span> exe_path[MAXPATHLEN];</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> aPath(<span class="stringliteral">&quot;/proc/self/exe&quot;</span>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">sys::fs::exists</a>(aPath)) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="comment">// /proc is not always mounted under Linux (chroot for example).</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      ssize_t len = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae9e7d9413620f00ee37b3d6589b4f384">readlink</a>(aPath.str().c_str(), exe_path, <span class="keyword">sizeof</span>(exe_path));</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (len &gt;= 0)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(exe_path, len);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// Fall back to the classical detection.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span> (getprogpath(exe_path, argv0) != NULL)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="keywordflow">return</span> exe_path;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#elif defined(HAVE_DLFCN_H)</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// Use dladdr to get executable path if available.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  Dl_info DLInfo;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordtype">int</span> err = dladdr(MainAddr, &amp;DLInfo);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (err == 0)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// If the filename is a symlink, we need to resolve and return the location of</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// the actual executable.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">char</span> link_path[MAXPATHLEN];</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fad834cfd8e646b2d7ef5baed3683b06d6">realpath</a>(DLInfo.dli_fname, link_path))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> link_path;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#error GetMainExecutable is not implemented on this host yet.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;TimeValue file_status::getLastModificationTime()<span class="keyword"> const </span>{</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  TimeValue <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  Ret.fromEpochTime(fs_st_mtime);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;UniqueID <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a59dbae5839ae3372684e418c5925c557">file_status::getUniqueID</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> UniqueID(fs_st_dev, fs_st_ino);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ac7b1d477269428b188cef6585fe6fdf5">current_path</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;result) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *pwd = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">::getenv</a>(<span class="stringliteral">&quot;PWD&quot;</span>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1fs_1_1file__status.html">llvm::sys::fs::file_status</a> PWDStatus, DotStatus;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (pwd &amp;&amp; <a class="code" href="namespacellvm_1_1sys_1_1path.html#aa810d4410de405f514454936632c5551">llvm::sys::path::is_absolute</a>(pwd) &amp;&amp;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      !<a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">llvm::sys::fs::status</a>(pwd, PWDStatus) &amp;&amp;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      !<a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">llvm::sys::fs::status</a>(<span class="stringliteral">&quot;.&quot;</span>, DotStatus) &amp;&amp;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      PWDStatus.<a class="code" href="classllvm_1_1sys_1_1fs_1_1file__status.html#a47f1d71041593292fe2e4864b8828523">getUniqueID</a>() == DotStatus.<a class="code" href="classllvm_1_1sys_1_1fs_1_1file__status.html#a47f1d71041593292fe2e4864b8828523">getUniqueID</a>()) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(pwd, pwd + <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">strlen</a>(pwd));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#ifdef MAXPATHLEN</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(MAXPATHLEN);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// For GNU Hurd</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(1024);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (::getcwd(result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>()) == 0) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">// See if there was a real error.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">if</span> (errno != <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a6048183a0720d8c487dcb3c47bb84cf9">errc::not_enough_memory</a>)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">// Otherwise there just wasn&#39;t enough space.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">capacity</a>() * 2);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">strlen</a>(result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>()));</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a33cdf6e66707db20ff903c3ee378aa13">create_directory</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;existed) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a> = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(path_storage);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (::<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9b542ec36793b6ea0957d4c4c8ac3950">mkdir</a>(p.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), S_IRWXU | S_IRWXG) == -1) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (errno != <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a1bb285b9917fde9652bbc223742fd1e4">errc::file_exists</a>)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    existed = <span class="keyword">true</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ad7c66c756855933e28aa2b05591935ea">create_hard_link</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a> = from.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(from_storage);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> t = to.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(to_storage);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (::link(t.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), f.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>()) == -1)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a013687bf3f70a7062e65ec3c066a5d92">create_symlink</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;to, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> f = from.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(from_storage);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> t = to.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(to_storage);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (::symlink(t.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), f.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>()) == -1)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <span class="keyword">remove</span>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;existed) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> p = path.toNullTerminatedStringRef(path_storage);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> buf;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a>(p.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), &amp;buf) != 0) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (errno != <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35">errc::no_such_file_or_directory</a>)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// Note: this check catches strange situations. In all cases, LLVM should</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// only be involved in the creation and deletion of regular files.  This</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// check ensures that what we&#39;re trying to erase is a regular file. It</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// effectively prevents LLVM from erasing things like /dev/null, any block</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// special file, or other things that aren&#39;t &quot;regular&quot; files.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (!S_ISREG(buf.st_mode) &amp;&amp; !S_ISDIR(buf.st_mode))</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a79868428683b6e619144e13a551ad61e">errc::operation_not_permitted</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (::<span class="keyword">remove</span>(p.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>()) == -1) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (errno != <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35">errc::no_such_file_or_directory</a>)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    existed = <span class="keyword">false</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    existed = <span class="keyword">true</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511">rename</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;from, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;to) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// Get arguments.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> from_storage;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> to_storage;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> f = from.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(from_storage);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> t = to.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(to_storage);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (::<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511">rename</a>(f.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), t.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>()) == -1)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a1fbb8d07077c6bf19b425d9b91f93f85">resize_file</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, uint64_t size) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> p = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(path_storage);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> (::truncate(p.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>) == -1)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">exists</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, <span class="keywordtype">bool</span> &amp;result) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> p = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(path_storage);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (::<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4b1d0f66acfc37f76d8e4e42dfdd22b2">access</a>(p.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), F_OK) == -1) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (errno != <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35">errc::no_such_file_or_directory</a>)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    result = <span class="keyword">false</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    result = <span class="keyword">true</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a359f175df4ccf031c3333715942119e8">can_write</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Path) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(PathStorage);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> 0 == <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4b1d0f66acfc37f76d8e4e42dfdd22b2">access</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), W_OK);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ad3a7c62e8f9554d7f8e7fdb989f1c68e">can_execute</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Path) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> P = Path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(PathStorage);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">if</span> (0 != <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4b1d0f66acfc37f76d8e4e42dfdd22b2">access</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), R_OK | X_OK))</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> buf;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (0 != <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), &amp;buf))</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (!S_ISREG(buf.st_mode))</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(file_status <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, file_status <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  assert(<a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">status_known</a>(A) &amp;&amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">status_known</a>(B));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">return</span> A.fs_st_dev == B.fs_st_dev &amp;&amp;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         A.fs_st_ino == B.fs_st_ino;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;A, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;B, <span class="keywordtype">bool</span> &amp;result) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  file_status fsA, fsB;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(A, fsA)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1error__code.html">error_code</a> ec = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(B, fsB)) <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  result = <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">equivalent</a>(fsA, fsB);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> fillStatus(<span class="keywordtype">int</span> StatRet, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> &amp;<a class="code" href="namespacellvm_1_1zlib.html#ae682ea6618e32d6e5365418a2e07424d">Status</a>,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                             file_status &amp;Result) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">if</span> (StatRet != 0) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="classllvm_1_1error__code.html">error_code</a> ec(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (ec == <a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35">errc::no_such_file_or_directory</a>)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      Result = file_status(file_type::file_not_found);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      Result = file_status(file_type::status_error);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">return</span> ec;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  file_type Type = file_type::type_unknown;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (S_ISDIR(Status.st_mode))</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    Type = file_type::directory_file;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISREG(Status.st_mode))</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    Type = file_type::regular_file;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISBLK(Status.st_mode))</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    Type = file_type::block_file;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISCHR(Status.st_mode))</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    Type = file_type::character_file;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISFIFO(Status.st_mode))</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    Type = file_type::fifo_file;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISSOCK(Status.st_mode))</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    Type = file_type::socket_file;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ac56b6ec1078927bdd9b65f7ba8fbda82">perms</a> Perms = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacellvm_1_1sys_1_1fs.html#ac56b6ec1078927bdd9b65f7ba8fbda82">perms</a><span class="keyword">&gt;</span>(Status.st_mode);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  Result =</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      file_status(Type, Perms, Status.st_dev, Status.st_ino, Status.st_mtime,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                  Status.st_uid, Status.st_gid, Status.st_size);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Path, file_status &amp;Result) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> P = Path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(PathStorage);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> Status;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordtype">int</span> StatRet = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">::stat</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), &amp;<a class="code" href="namespacellvm_1_1zlib.html#ae682ea6618e32d6e5365418a2e07424d">Status</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">return</span> fillStatus(StatRet, Status, Result);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">status</a>(<span class="keywordtype">int</span> FD, file_status &amp;Result) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> Status;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">int</span> StatRet = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78">::fstat</a>(FD, &amp;Status);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">return</span> fillStatus(StatRet, Status, Result);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;}</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a4689132529705999463e4270d4c71fde">setLastModificationAndAccessTime</a>(<span class="keywordtype">int</span> FD, TimeValue Time) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#if defined(HAVE_FUTIMENS)</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  timespec Times[2];</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  Times[0].tv_sec = Time.toPosixTime();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  Times[0].tv_nsec = 0;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  Times[1] = Times[0];</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> (::futimens(FD, Times))</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">#elif defined(HAVE_FUTIMES)</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  timeval Times[2];</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  Times[0].tv_sec = Time.toPosixTime();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  Times[0].tv_usec = 0;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  Times[1] = Times[0];</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordflow">if</span> (::futimes(FD, Times))</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="preprocessor">#error Missing futimes() and futimens()</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">mapped_file_region::init</a>(<span class="keywordtype">int</span> FD, <span class="keywordtype">bool</span> CloseFD, uint64_t Offset) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  AutoFD ScopedFD(FD);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (!CloseFD)</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    ScopedFD.take();</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// Figure out how large the file is.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keyword">struct </span><a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a> <a class="code" href="classllvm_1_1FileInfo.html">FileInfo</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78">fstat</a>(FD, &amp;<a class="code" href="classllvm_1_1FileInfo.html">FileInfo</a>) == -1)</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  uint64_t FileSize = <a class="code" href="classllvm_1_1FileInfo.html">FileInfo</a>.st_size;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">if</span> (Size == 0)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    Size = FileSize;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FileSize &lt; Size) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// We need to grow the file.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (ftruncate(FD, Size) == -1)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordtype">int</span> flags = (Mode == readwrite) ? MAP_SHARED : MAP_PRIVATE;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordtype">int</span> prot = (Mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a>) ? PROT_READ : (PROT_READ | PROT_WRITE);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">#ifdef MAP_FILE</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  flags |= MAP_FILE;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  Mapping = ::mmap(0, Size, prot, flags, FD, Offset);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (Mapping == MAP_FAILED)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;mapped_file_region::mapped_file_region(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                       mapmode <a class="code" href="README-Thumb_8txt.html#ad7bf7cc723b97ab4a518502c217ddbd7">mode</a>,</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                       uint64_t length,</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                       uint64_t offset,</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                       <a class="code" href="classllvm_1_1error__code.html">error_code</a> &amp;ec)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  : Mode(mode)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  , Size(length)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  , Mapping() {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// Make sure that the requested size fits within SIZE_T.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (length &gt; std::numeric_limits&lt;size_t&gt;::max()) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    ec = <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403">errc::invalid_argument</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> name = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(path_storage);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordtype">int</span> oflags = (mode == <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a>) ? O_RDONLY : O_RDWR;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordtype">int</span> ofd = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">::open</a>(name.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), oflags);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (ofd == -1) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    ec = <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  ec = <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(ofd, <span class="keyword">true</span>, offset);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> (ec)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    Mapping = 0;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;mapped_file_region::mapped_file_region(<span class="keywordtype">int</span> fd,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                       <span class="keywordtype">bool</span> closefd,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                       mapmode mode,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                       uint64_t length,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                       uint64_t offset,</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                       <a class="code" href="classllvm_1_1error__code.html">error_code</a> &amp;ec)</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  : Mode(mode)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  , Size(length)</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  , Mapping() {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// Make sure that the requested size fits within SIZE_T.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (length &gt; std::numeric_limits&lt;size_t&gt;::max()) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    ec = <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403">errc::invalid_argument</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  ec = <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(fd, closefd, offset);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> (ec)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    Mapping = 0;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;mapped_file_region::~mapped_file_region() {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> (Mapping)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    ::munmap(Mapping, Size);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="preprocessor">#if LLVM_HAS_RVALUE_REFERENCES</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;mapped_file_region::mapped_file_region(mapped_file_region &amp;&amp;other)</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  : Mode(other.Mode), Size(other.Size), Mapping(other.Mapping) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  other.Mapping = 0;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;mapped_file_region::mapmode mapped_file_region::flags()<span class="keyword"> const </span>{</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">return</span> Mode;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;uint64_t <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">mapped_file_region::size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">return</span> Size;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="keywordtype">char</span> *mapped_file_region::data()<span class="keyword"> const </span>{</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  assert(Mode != <a class="code" href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a> &amp;&amp; <span class="stringliteral">&quot;Cannot get non const data for readonly mapping!&quot;</span>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(Mapping);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *mapped_file_region::const_data()<span class="keyword"> const </span>{</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  assert(Mapping &amp;&amp; <span class="stringliteral">&quot;Mapping failed but used anyway!&quot;</span>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(Mapping);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="keywordtype">int</span> mapped_file_region::alignment() {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1sys_1_1process.html#a72dcfa7b896849652afa39bc08934548">process::get_self</a>()-&gt;<a class="code" href="classllvm_1_1sys_1_1self__process.html#a5d9a1d2260e60329f307ebf719365ce1">page_size</a>();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a3a54daa16fedfeb5746b4a44a7e2b3f5">detail::directory_iterator_construct</a>(detail::DirIterState &amp;<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>,</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> path){</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_null(path);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  DIR *directory = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa7e06e290a845d1c73580306c850000a3">::opendir</a>(path_null.c_str());</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (directory == 0)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  it.IterationHandle = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classintptr__t.html">intptr_t</a><span class="keyword">&gt;</span>(directory);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// Add something for replace_filename to replace.</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">path::append</a>(path_null, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  it.CurrentEntry = directory_entry(path_null.str());</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">directory_iterator_increment</a>(it);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">detail::directory_iterator_destruct</a>(detail::DirIterState &amp;it) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (it.IterationHandle)</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9e799cdfabaa4fc2b4ca00ba0669bdd6">::closedir</a>(reinterpret_cast&lt;DIR *&gt;(it.IterationHandle));</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  it.IterationHandle = 0;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  it.CurrentEntry = directory_entry();</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">detail::directory_iterator_increment</a>(detail::DirIterState &amp;it) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  errno = 0;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  dirent *cur_dir = ::readdir(reinterpret_cast&lt;DIR *&gt;(it.IterationHandle));</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span> (cur_dir == 0 &amp;&amp; errno != 0) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur_dir != 0) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> name(cur_dir-&gt;d_name, NAMLEN(cur_dir));</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span> ((name.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>() == 1 &amp;&amp; name[0] == <span class="charliteral">&#39;.&#39;</span>) ||</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        (name.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>() == 2 &amp;&amp; name[0] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; name[1] == <span class="charliteral">&#39;.&#39;</span>))</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">directory_iterator_increment</a>(it);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    it.CurrentEntry.replace_filename(name);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">directory_iterator_destruct</a>(it);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a8b69cf051c3c0539de9a05998d60c162">get_magic</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, uint32_t len,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;result) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> PathStorage;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Path = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(PathStorage);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(0);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Open path.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  std::FILE *file = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa77037a6f2e7714a198ad428fd06a9c24">std::fopen</a>(Path.<a class="code" href="classllvm_1_1StringRef.html#a7d9b88d042ae1da8afd5509875c90a04">data</a>(), <span class="stringliteral">&quot;rb&quot;</span>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (file == 0)</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// Reserve storage.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(len);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// Read magic!</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordtype">size_t</span> size = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa6efa9bf9d5fdcd5da9d93d5f8982e017">std::fread</a>(result.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), 1, len, file);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa99d536e22d142122e576f2a1dc4ba7f2">std::ferror</a>(file) != 0) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fabfb31dee0c9fd92ee15fe21e6b35b544">std::fclose</a>(file);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size != len) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa866ac86bc31bc176d92f0cf77bc70d3a">std::feof</a>(file) != 0) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fabfb31dee0c9fd92ee15fe21e6b35b544">std::fclose</a>(file);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(size);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">make_error_code</a>(<a class="code" href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4acbcdd40211f19d1369c8418ac3fffac6">errc::value_too_large</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fabfb31dee0c9fd92ee15fe21e6b35b544">std::fclose</a>(file);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  result.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">set_size</a>(size);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#ae9ba393efb533dd0b0bbf78f32f3b454">map_file_pages</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;path, off_t file_offset, <span class="keywordtype">size_t</span> size,  </div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                            <span class="keywordtype">bool</span> map_writable, <span class="keywordtype">void</span> *&amp;result) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> path_storage;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> name = path.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(path_storage);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordtype">int</span> oflags = map_writable ? O_RDWR : O_RDONLY;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordtype">int</span> ofd = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">::open</a>(name.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), oflags);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">if</span> ( ofd == -1 )</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  AutoFD fd(ofd);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordtype">int</span> flags = map_writable ? MAP_SHARED : MAP_PRIVATE;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordtype">int</span> prot = map_writable ? (PROT_READ|PROT_WRITE) : PROT_READ;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">#ifdef MAP_FILE</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  flags |= MAP_FILE;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  result = ::mmap(0, size, prot, flags, fd, file_offset);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (result == MAP_FAILED) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  </div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;}</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a0303002348798f0b153f93db54a769ea">unmap_file_pages</a>(<span class="keywordtype">void</span> *<a class="code" href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a>, <span class="keywordtype">size_t</span> size) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">if</span> ( ::munmap(base, size) == -1 )</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   </div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a32c096f2801f2fab551b820b734b656f">openFileForRead</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>, <span class="keywordtype">int</span> &amp;ResultFD) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Storage;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> P = Name.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(Storage);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">while</span> ((ResultFD = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">open</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), O_RDONLY)) &lt; 0) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">if</span> (errno != EINTR)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<a class="code" href="classllvm_1_1error__code.html">error_code</a> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a914475eeb87fd78e1f38e84b924bf5ca">openFileForWrite</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name, <span class="keywordtype">int</span> &amp;ResultFD,</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                            <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">sys::fs::OpenFlags</a> <a class="code" href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a>, <span class="keywordtype">unsigned</span> Mode) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// Verify that we don&#39;t have both &quot;append&quot; and &quot;excl&quot;.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  assert((!(Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">sys::fs::F_Excl</a>) || !(Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">sys::fs::F_Append</a>)) &amp;&amp;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;         <span class="stringliteral">&quot;Cannot specify both &#39;excl&#39; and &#39;append&#39; file creation flags!&quot;</span>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">OpenFlags</a> = O_WRONLY | O_CREAT;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">F_Append</a>)</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    OpenFlags |= O_APPEND;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    OpenFlags |= O_TRUNC;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">F_Excl</a>)</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    OpenFlags |= O_EXCL;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Storage;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> P = Name.<a class="code" href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">toNullTerminatedStringRef</a>(Storage);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">while</span> ((ResultFD = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">open</a>(P.<a class="code" href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">begin</a>(), <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">OpenFlags</a>, Mode)) &lt; 0) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (errno != EINTR)</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a>(errno, <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;} <span class="comment">// end namespace fs</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;} <span class="comment">// end namespace sys</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="ttc" id="classllvm_1_1Twine_html_a9fe2d882764d8dc5b12df7a77233ae2e"><div class="ttname"><a href="classllvm_1_1Twine.html#a9fe2d882764d8dc5b12df7a77233ae2e">llvm::Twine::toVector</a></div><div class="ttdeci">void toVector(SmallVectorImpl&lt; char &gt; &amp;Out) const </div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00026">Twine.cpp:26</a></div></div>
<div class="ttc" id="namespaceSIInstrFlags_html_a607b4b0952924970b77a9c6b42898b54"><div class="ttname"><a href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">SIInstrFlags::Flags</a></div><div class="ttdeci">Flags</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00140">SIInstrInfo.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a45bab6d91cf74da99624723b65bd0e5b"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a45bab6d91cf74da99624723b65bd0e5b">llvm::SmallVectorImpl::set_size</a></div><div class="ttdeci">void set_size(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00702">SmallVector.h:702</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ad3a7c62e8f9554d7f8e7fdb989f1c68e"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ad3a7c62e8f9554d7f8e7fdb989f1c68e">llvm::sys::fs::can_execute</a></div><div class="ttdeci">bool can_execute(const Twine &amp;Path)</div><div class="ttdoc">Can we execute this file? </div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa6efa9bf9d5fdcd5da9d93d5f8982e017"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa6efa9bf9d5fdcd5da9d93d5f8982e017">llvm::LibFunc::fread</a></div><div class="ttdoc">size_t fread(void *ptr, size_t size, size_t nitems, FILE *stream); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00271">TargetLibraryInfo.h:271</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00425">SmallVector.h:425</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a294dbd0dcb369349e07f9bd78330b672"><div class="ttname"><a href="README-SSE_8txt.html#a294dbd0dcb369349e07f9bd78330b672">readonly</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from where P can be anything The alignment inference code cannot handle loads from globals in static non mode because it doesn t look through the extra dyld stub load If you try vec_align ll without relocation you ll see what I mean We should lower which eliminates a constant pool load For float z nounwind readonly</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00451">README-SSE.txt:451</a></div></div>
<div class="ttc" id="namespacellvm_html_a1e6576716f1c75095457eff6bca7239a"><div class="ttname"><a href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">llvm::system_category</a></div><div class="ttdeci">const error_category &amp; system_category()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8cpp_source.html#l00094">system_error.cpp:94</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_aceb0c1adaa2d557aed404315d858380a"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#aceb0c1adaa2d557aed404315d858380a">llvm::SmallVectorTemplateCommon::capacity</a></div><div class="ttdeci">size_t capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00132">SmallVector.h:132</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a5a6a05b7d9e9efb3f7b098c20fa0088a"><div class="ttname"><a href="Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a></div><div class="ttdeci">multiplies can be turned into SHL s</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00408">Target/README.txt:408</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_af68d5ebdb576d7481ea2766151b875d4"><div class="ttname"><a href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">llvm::StringRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the string size. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00113">StringRef.h:113</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a3a54daa16fedfeb5746b4a44a7e2b3f5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a3a54daa16fedfeb5746b4a44a7e2b3f5">llvm::sys::fs::detail::directory_iterator_construct</a></div><div class="ttdeci">error_code directory_iterator_construct(DirIterState &amp;, StringRef)</div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78">llvm::LibFunc::fstat</a></div><div class="ttdoc">int fstat(int fildes, struct stat *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00291">TargetLibraryInfo.h:291</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00204">Target/README.txt:204</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a914475eeb87fd78e1f38e84b924bf5ca"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a914475eeb87fd78e1f38e84b924bf5ca">llvm::sys::fs::openFileForWrite</a></div><div class="ttdeci">error_code openFileForWrite(const Twine &amp;Name, int &amp;ResultFD, OpenFlags Flags, unsigned Mode=0666)</div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a1fbb8d07077c6bf19b425d9b91f93f85"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a1fbb8d07077c6bf19b425d9b91f93f85">llvm::sys::fs::resize_file</a></div><div class="ttdeci">error_code resize_file(const Twine &amp;path, uint64_t size)</div><div class="ttdoc">Resize path to size. File is resized as if by POSIX truncate(). </div></div>
<div class="ttc" id="Target_2SystemZ_2README_8txt_html_aab103049890481bd3a194048b45f5fce"><div class="ttname"><a href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a></div><div class="ttdeci">therefore end up llgh r3 lr r0 br r14 but truncating the load would lh r3 br r14 Functions ret i64 and ought to be implemented ngr r0 br r14 but two address optimisations reverse the order of the AND and ngr r2 lgr r0 br r14 CodeGen SystemZ and ll has several examples of this Out of range displacements are usually handled by loading the full address into a register In many cases it would be better to create an anchor point instead E g i64 base</div><div class="ttdef"><b>Definition:</b> <a href="Target_2SystemZ_2README_8txt_source.html#l00147">Target/SystemZ/README.txt:147</a></div></div>
<div class="ttc" id="classintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="namespacellvm_1_1Reloc_html_af59f6dc86e80aaf56f1afd155eebf568"><div class="ttname"><a href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">llvm::Reloc::Model</a></div><div class="ttdeci">Model</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00025">CodeGen.h:25</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa56b7e0e656e8939f510d2448576406b6">llvm::LibFunc::open</a></div><div class="ttdoc">int open(const char *path, int oflag, ... ); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00420">TargetLibraryInfo.h:420</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a4689132529705999463e4270d4c71fde"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a4689132529705999463e4270d4c71fde">llvm::sys::fs::setLastModificationAndAccessTime</a></div><div class="ttdeci">error_code setLastModificationAndAccessTime(int FD, TimeValue Time)</div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa7e06e290a845d1c73580306c850000a3"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa7e06e290a845d1c73580306c850000a3">llvm::LibFunc::opendir</a></div><div class="ttdoc">DIR *opendir(const char *dirname);. </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00424">TargetLibraryInfo.h:424</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1fs_1_1file__status_html_a47f1d71041593292fe2e4864b8828523"><div class="ttname"><a href="classllvm_1_1sys_1_1fs_1_1file__status.html#a47f1d71041593292fe2e4864b8828523">llvm::sys::fs::file_status::getUniqueID</a></div><div class="ttdeci">UniqueID getUniqueID() const </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ac7b1d477269428b188cef6585fe6fdf5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ac7b1d477269428b188cef6585fe6fdf5">llvm::sys::fs::current_path</a></div><div class="ttdeci">error_code current_path(SmallVectorImpl&lt; char &gt; &amp;result)</div><div class="ttdoc">Get the current path. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a0303002348798f0b153f93db54a769ea"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a0303002348798f0b153f93db54a769ea">llvm::sys::fs::unmap_file_pages</a></div><div class="ttdeci">error_code unmap_file_pages(void *base, size_t size)</div><div class="ttdoc">Memory unmaps the contents of a file. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a32c096f2801f2fab551b820b734b656f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a32c096f2801f2fab551b820b734b656f">llvm::sys::fs::openFileForRead</a></div><div class="ttdeci">error_code openFileForRead(const Twine &amp;Name, int &amp;ResultFD)</div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa77037a6f2e7714a198ad428fd06a9c24"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa77037a6f2e7714a198ad428fd06a9c24">llvm::LibFunc::fopen</a></div><div class="ttdoc">FILE *fopen(const char *filename, const char *mode);. </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00261">TargetLibraryInfo.h:261</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1fs_1_1file__status_html"><div class="ttname"><a href="classllvm_1_1sys_1_1fs_1_1file__status.html">llvm::sys::fs::file_status</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00149">FileSystem.h:149</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708a78aad3eff7e12dbc239f25f4dcd9746b">FS_Dir</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00158">Path.cpp:158</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a901ce7389ca67dd79b8ab5b53c4a7da8"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int int d</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00418">Target/ARM/README.txt:418</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fabfb31dee0c9fd92ee15fe21e6b35b544"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fabfb31dee0c9fd92ee15fe21e6b35b544">llvm::LibFunc::fclose</a></div><div class="ttdoc">int fclose(FILE *stream); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00221">TargetLibraryInfo.h:221</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ae5f268fb9c53c179a4e38edc638919f8"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ae5f268fb9c53c179a4e38edc638919f8">llvm::sys::fs::status_known</a></div><div class="ttdeci">bool status_known(file_status s)</div><div class="ttdoc">Is status available? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00772">Path.cpp:772</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_aae67c508d4f0716516f5c412c5592556"><div class="ttname"><a href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a></div><div class="ttdeci">then result</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00393">Target/README.txt:393</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00549">Target/README.txt:549</a></div></div>
<div class="ttc" id="namespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00044">GraphWriter.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_acb80894344c78dacf8d5ff8c23be697d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#acb80894344c78dacf8d5ff8c23be697d">llvm::sys::path::append</a></div><div class="ttdeci">void append(SmallVectorImpl&lt; char &gt; &amp;path, const Twine &amp;a, const Twine &amp;b=&quot;&quot;, const Twine &amp;c=&quot;&quot;, const Twine &amp;d=&quot;&quot;)</div><div class="ttdoc">Append to path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00372">Path.cpp:372</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa4b1d0f66acfc37f76d8e4e42dfdd22b2"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4b1d0f66acfc37f76d8e4e42dfdd22b2">llvm::LibFunc::access</a></div><div class="ttdoc">int access(const char *path, int amode); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00091">TargetLibraryInfo.h:91</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a93b2388c9f66ff14e39d43b0b2c1c403">llvm::errc::invalid_argument</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00522">system_error.h:522</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa866ac86bc31bc176d92f0cf77bc70d3a"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa866ac86bc31bc176d92f0cf77bc70d3a">llvm::LibFunc::feof</a></div><div class="ttdoc">int feof(FILE *stream); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00225">TargetLibraryInfo.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; char &gt;</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210af1f012793521271c82805f7456fd2d83">llvm::sys::fs::F_Append</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00622">FileSystem.h:622</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a6048183a0720d8c487dcb3c47bb84cf9"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a6048183a0720d8c487dcb3c47bb84cf9">llvm::errc::not_enough_memory</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00563">system_error.h:563</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a91f4469a9d29e354421494afd4ba466d"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a91f4469a9d29e354421494afd4ba466d">to</a></div><div class="ttdeci">Should compile to</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00449">Target/ARM/README.txt:449</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa9e799cdfabaa4fc2b4ca00ba0669bdd6"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9e799cdfabaa4fc2b4ca00ba0669bdd6">llvm::LibFunc::closedir</a></div><div class="ttdoc">int closedir(DIR *dirp); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00169">TargetLibraryInfo.h:169</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_aa810d4410de405f514454936632c5551"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#aa810d4410de405f514454936632c5551">llvm::sys::path::is_absolute</a></div><div class="ttdeci">bool is_absolute(const Twine &amp;path)</div><div class="ttdoc">Is path absolute? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00614">Path.cpp:614</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fade48d0dc69a747ba01fc3c12f01653cd"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fade48d0dc69a747ba01fc3c12f01653cd">llvm::LibFunc::strchr</a></div><div class="ttdoc">char *strchr(const char *s, int c); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00537">TargetLibraryInfo.h:537</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a621c22ddea1e7a9f515778263847a18f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a621c22ddea1e7a9f515778263847a18f">llvm::sys::fs::detail::directory_iterator_destruct</a></div><div class="ttdeci">error_code directory_iterator_destruct(DirIterState &amp;)</div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ae9ba393efb533dd0b0bbf78f32f3b454"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ae9ba393efb533dd0b0bbf78f32f3b454">llvm::sys::fs::map_file_pages</a></div><div class="ttdeci">error_code map_file_pages(const Twine &amp;path, off_t file_offset, size_t size, bool map_writable, void *&amp;result)</div><div class="ttdoc">Memory maps the contents of a file. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a359f175df4ccf031c3333715942119e8"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a359f175df4ccf031c3333715942119e8">llvm::sys::fs::can_write</a></div><div class="ttdeci">bool can_write(const Twine &amp;Path)</div><div class="ttdoc">Can we write this file? </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_1_1detail_html_a74f0e1904bab81ea8c9dabcba6a34791"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs_1_1detail.html#a74f0e1904bab81ea8c9dabcba6a34791">llvm::sys::fs::detail::directory_iterator_increment</a></div><div class="ttdeci">error_code directory_iterator_increment(DirIterState &amp;)</div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fae9e7d9413620f00ee37b3d6589b4f384"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae9e7d9413620f00ee37b3d6589b4f384">llvm::LibFunc::readlink</a></div><div class="ttdoc">ssize_t readlink(const char *path, char *buf, size_t bufsize); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00458">TargetLibraryInfo.h:458</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a1bb285b9917fde9652bbc223742fd1e4"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a1bb285b9917fde9652bbc223742fd1e4">llvm::errc::file_exists</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00513">system_error.h:513</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a7d9b88d042ae1da8afd5509875c90a04"><div class="ttname"><a href="classllvm_1_1StringRef.html#a7d9b88d042ae1da8afd5509875c90a04">llvm::StringRef::data</a></div><div class="ttdeci">const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00107">StringRef.h:107</a></div></div>
<div class="ttc" id="namespacellvm_1_1zlib_html_ae682ea6618e32d6e5365418a2e07424d"><div class="ttname"><a href="namespacellvm_1_1zlib.html#ae682ea6618e32d6e5365418a2e07424d">llvm::zlib::Status</a></div><div class="ttdeci">Status</div><div class="ttdef"><b>Definition:</b> <a href="Compression_8h_source.html#l00034">Compression.h:34</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ad7c66c756855933e28aa2b05591935ea"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ad7c66c756855933e28aa2b05591935ea">llvm::sys::fs::create_hard_link</a></div><div class="ttdeci">error_code create_hard_link(const Twine &amp;to, const Twine &amp;from)</div><div class="ttdoc">Create a hard link from from to to. </div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa737d2de2cb24c150e1e7b9bd1813e511">llvm::LibFunc::rename</a></div><div class="ttdoc">int rename(const char *old, const char *new); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00468">TargetLibraryInfo.h:468</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a59dbae5839ae3372684e418c5925c557"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a59dbae5839ae3372684e418c5925c557">llvm::sys::fs::getUniqueID</a></div><div class="ttdeci">error_code getUniqueID(const Twine Path, UniqueID &amp;Result)</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00636">Path.cpp:636</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4acbcdd40211f19d1369c8418ac3fffac6"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4acbcdd40211f19d1369c8418ac3fffac6">llvm::errc::value_too_large</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00606">system_error.h:606</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a4a0abf8eb4fa5989df63172649cba99f"><div class="ttname"><a href="classllvm_1_1StringRef.html#a4a0abf8eb4fa5989df63172649cba99f">llvm::StringRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00097">StringRef.h:97</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a057a733b2dfa2f0531ceb335cf3b1d03"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a057a733b2dfa2f0531ceb335cf3b1d03">llvm::sys::fs::getMainExecutable</a></div><div class="ttdeci">std::string getMainExecutable(const char *argv0, void *MainExecAddr)</div></div>
<div class="ttc" id="Path_8cpp_html_a093374bcc0be5e6dca09e80884355674"><div class="ttname"><a href="Path_8cpp.html#a093374bcc0be5e6dca09e80884355674">createUniqueEntity</a></div><div class="ttdeci">static llvm::error_code createUniqueEntity(const llvm::Twine &amp;Model, int &amp;ResultFD, llvm::SmallVectorImpl&lt; char &gt; &amp;ResultPath, bool MakeAbsolute, unsigned Mode, FSEntity Type)</div></div>
<div class="ttc" id="classllvm_1_1FileInfo_html"><div class="ttname"><a href="classllvm_1_1FileInfo.html">llvm::FileInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="GCOV_8h_source.html#l00245">GCOV.h:245</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fad834cfd8e646b2d7ef5baed3683b06d6"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fad834cfd8e646b2d7ef5baed3683b06d6">llvm::LibFunc::realpath</a></div><div class="ttdoc">char *realpath(const char *file_name, char *resolved_name); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00464">TargetLibraryInfo.h:464</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a8ef54f27fddd11cc461b2b231fc2d23c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a></div><div class="ttdeci">to esp esp setne al movzbw ax esp setg cl movzbw cx cmove cx cl jne LBB1_2 esp ret(also really horrible code on ppc).This is due to the expand code for 64-bit compares.GCC produces multiple branches</div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a65c5fe2953375fe7c8c64bb7481c54a4"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a65c5fe2953375fe7c8c64bb7481c54a4">llvm::sys::fs::status</a></div><div class="ttdeci">error_code status(const Twine &amp;path, file_status &amp;result)</div><div class="ttdoc">Get file status as if by POSIX stat(). </div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_abd962b7b01f49ce61ea41ee10c49e313"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#abd962b7b01f49ce61ea41ee10c49e313">llvm::SmallVectorImpl::swap</a></div><div class="ttdeci">void swap(SmallVectorImpl &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00710">SmallVector.h:710</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_ad7bf7cc723b97ab4a518502c217ddbd7"><div class="ttname"><a href="README-Thumb_8txt.html#ad7bf7cc723b97ab4a518502c217ddbd7">mode</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb mode</div><div class="ttdef"><b>Definition:</b> <a href="README-Thumb_8txt_source.html#l00005">README-Thumb.txt:5</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708ada79551c1e938d96e9f7229ab55a1f84">FS_File</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00159">Path.cpp:159</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c">llvm::LibFunc::free</a></div><div class="ttdoc">void free(void *ptr); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00273">TargetLibraryInfo.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html"><div class="ttname"><a href="classllvm_1_1error__code.html">llvm::error_code</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00726">system_error.h:726</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa70d1673fa624884eeb577a2458738b63"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa70d1673fa624884eeb577a2458738b63">llvm::LibFunc::snprintf</a></div><div class="ttdoc">int snprintf(char *s, size_t n, const char *format, ...); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00509">TargetLibraryInfo.h:509</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_afb354c8aea0150628f8aa06c7f4a4168"><div class="ttname"><a href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a></div><div class="ttdeci">vector float f(vector float a, vector float b)</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00205">README_ALTIVEC.txt:205</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa9b542ec36793b6ea0957d4c4c8ac3950"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9b542ec36793b6ea0957d4c4c8ac3950">llvm::LibFunc::mkdir</a></div><div class="ttdoc">int mkdir(const char *path, mode_t mode); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00400">TargetLibraryInfo.h:400</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">llvm::LibFunc::stat</a></div><div class="ttdoc">int stat(const char *path, struct stat *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00521">TargetLibraryInfo.h:521</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa53d8e382cd48b9a80e743f44d982bb81"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa53d8e382cd48b9a80e743f44d982bb81">llvm::LibFunc::strdup</a></div><div class="ttdoc">char *strdup(const char *s1); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00547">TargetLibraryInfo.h:547</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1process_html_a72dcfa7b896849652afa39bc08934548"><div class="ttname"><a href="classllvm_1_1sys_1_1process.html#a72dcfa7b896849652afa39bc08934548">llvm::sys::process::get_self</a></div><div class="ttdeci">static self_process * get_self()</div><div class="ttdoc">Get the process object for the current process. </div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00029">Process.cpp:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210">llvm::sys::fs::OpenFlags</a></div><div class="ttdeci">OpenFlags</div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00612">FileSystem.h:612</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a544ce2b7de50b042a2d052c3d2831598"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a></div><div class="ttdeci">We currently generate a but we really shouldn t</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01384">Target/X86/README.txt:1384</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a00476cb8a6bd6fcdfa3bdc36ad41fe35">llvm::errc::no_such_file_or_directory</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00553">system_error.h:553</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">llvm::LibFunc::strlen</a></div><div class="ttdoc">size_t strlen(const char *s); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00549">TargetLibraryInfo.h:549</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Process_html_a92b058c34d04f6d0adf6eac3060343c6"><div class="ttname"><a href="classllvm_1_1sys_1_1Process.html#a92b058c34d04f6d0adf6eac3060343c6">llvm::sys::Process::GetRandomNumber</a></div><div class="ttdeci">static unsigned GetRandomNumber()</div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa99d536e22d142122e576f2a1dc4ba7f2"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa99d536e22d142122e576f2a1dc4ba7f2">llvm::LibFunc::ferror</a></div><div class="ttdoc">int ferror(FILE *stream); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00227">TargetLibraryInfo.h:227</a></div></div>
<div class="ttc" id="Process_8h_html"><div class="ttname"><a href="Process_8h.html">Process.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a7b68be12c974b6b70bc86062f221a344"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">llvm::SmallVectorTemplateCommon::data</a></div><div class="ttdeci">pointer data()</div><div class="ttdoc">data - Return a pointer to the vector&amp;#39;s buffer, even if empty(). </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00135">SmallVector.h:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a33cdf6e66707db20ff903c3ee378aa13"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a33cdf6e66707db20ff903c3ee378aa13">llvm::sys::fs::create_directory</a></div><div class="ttdeci">error_code create_directory(const Twine &amp;path, bool &amp;existed)</div><div class="ttdoc">Create the directory in path. </div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a013687bf3f70a7062e65ec3c066a5d92"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a013687bf3f70a7062e65ec3c066a5d92">llvm::sys::fs::create_symlink</a></div><div class="ttdeci">error_code create_symlink(const Twine &amp;to, const Twine &amp;from)</div><div class="ttdoc">Create a symbolic link from from to to. </div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708afaef3b894884346950bda46decc1803c">FS_Name</a></div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00160">Path.cpp:160</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a38e79c83dad9b9a5f38c9693371a8709"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a></div><div class="ttdeci">the resulting code requires compare and branches when and if * p</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html_ab1dc74db82ce9421e6c5f5f4df574aa8"><div class="ttname"><a href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">llvm::error_code::success</a></div><div class="ttdeci">static error_code success()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00732">system_error.h:732</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1self__process_html_a5d9a1d2260e60329f307ebf719365ce1"><div class="ttname"><a href="classllvm_1_1sys_1_1self__process.html#a5d9a1d2260e60329f307ebf719365ce1">llvm::sys::self_process::page_size</a></div><div class="ttdeci">size_t page_size() const </div><div class="ttdoc">Get the virtual memory page size. </div><div class="ttdef"><b>Definition:</b> <a href="Process_8h_source.html#l00124">Process.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="Unix_8h_html"><div class="ttname"><a href="Unix_8h.html">Unix.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a142386357a8879fc0b5041dc2e275bf5"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a142386357a8879fc0b5041dc2e275bf5">llvm::sys::fs::equivalent</a></div><div class="ttdeci">bool equivalent(file_status A, file_status B)</div><div class="ttdoc">Do file_status&amp;#39;s represent the same thing? </div></div>
<div class="ttc" id="classllvm_1_1Twine_html_ae1cb2376210907e0aa8a677c98cbb28a"><div class="ttname"><a href="classllvm_1_1Twine.html#ae1cb2376210907e0aa8a677c98cbb28a">llvm::Twine::toNullTerminatedStringRef</a></div><div class="ttdeci">StringRef toNullTerminatedStringRef(SmallVectorImpl&lt; char &gt; &amp;Out) const </div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00038">Twine.cpp:38</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="structllvm_1_1errc_html_adf6162b83abd715a78b475f5bdb7cfd4a79868428683b6e619144e13a551ad61e"><div class="ttname"><a href="structllvm_1_1errc.html#adf6162b83abd715a78b475f5bdb7cfd4a79868428683b6e619144e13a551ad61e">llvm::errc::operation_not_permitted</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00571">system_error.h:571</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_ac56b6ec1078927bdd9b65f7ba8fbda82"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#ac56b6ec1078927bdd9b65f7ba8fbda82">llvm::sys::fs::perms</a></div><div class="ttdeci">perms</div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00083">FileSystem.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a3c372fc890b5f0997eda4f5d8a59c384"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a3c372fc890b5f0997eda4f5d8a59c384">llvm::sys::fs::exists</a></div><div class="ttdeci">bool exists(file_status status)</div><div class="ttdoc">Does file exist? </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00768">Path.cpp:768</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa933f45acaa00c314222b4b2b46a7927c">llvm::LibFunc::getenv</a></div><div class="ttdoc">char *getenv(const char *name); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00318">TargetLibraryInfo.h:318</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a8b69cf051c3c0539de9a05998d60c162"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a8b69cf051c3c0539de9a05998d60c162">llvm::sys::fs::get_magic</a></div><div class="ttdeci">error_code get_magic(const Twine &amp;path, uint32_t len, SmallVectorImpl&lt; char &gt; &amp;result)</div><div class="ttdoc">Get path&amp;#39;s first len bytes. </div></div>
<div class="ttc" id="namespacellvm_html_a205a949fd99dd4c03d2227e5bd21041c"><div class="ttname"><a href="namespacellvm.html#a205a949fd99dd4c03d2227e5bd21041c">llvm::make_error_code</a></div><div class="ttdeci">error_code make_error_code(errc _e)</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00782">system_error.h:782</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_abb4ce3bc3096a12d4b93460bf78bcf95"><div class="ttname"><a href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in it</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00053">README-SSE.txt:53</a></div></div>
<div class="ttc" id="Path_8cpp_html_a91338f0c7a4d528f3cfcbf0a350e1708"><div class="ttname"><a href="Path_8cpp.html#a91338f0c7a4d528f3cfcbf0a350e1708">FSEntity</a></div><div class="ttdeci">FSEntity</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00157">Path.cpp:157</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1fs_html_a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a42908e186ef34d50a4ef8ac0ba808210a1801d56d9ff278540025ea44a6c9b016">llvm::sys::fs::F_Excl</a></div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00617">FileSystem.h:617</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:39 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
