<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: StackColoring.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('StackColoring_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">StackColoring.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="StackColoring_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- StackColoring.cpp -------------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass implements the stack-coloring optimization that looks for</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// lifetime markers machine instructions (LIFESTART_BEGIN and LIFESTART_END),</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// which represent the possible lifetime of stack slots. It attempts to</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// merge disjoint stack slots and reduce the used stack space.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// NOTE: This pass is not StackSlotColoring, which optimizes spill slots.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// TODO: In the future we plan to improve stack coloring in the following ways:</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// 1. Allow merging multiple small slots into a single larger slot at different</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//    offsets.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// 2. Merge this pass with StackSlotColoring and allow merging of allocas with</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//    spill slots.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="StackColoring_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   24</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;stackcoloring&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BitVector_8h.html">llvm/ADT/BitVector.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SparseSet_8h.html">llvm/ADT/SparseSet.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveInterval_8h.html">llvm/CodeGen/LiveInterval.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineMemOperand_8h.html">llvm/CodeGen/MachineMemOperand.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PseudoSourceValue_8h.html">llvm/CodeGen/PseudoSourceValue.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SlotIndexes_8h.html">llvm/CodeGen/SlotIndexes.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfo_8h.html">llvm/DebugInfo.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCInstrItineraries_8h.html">llvm/MC/MCInstrItineraries.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="StackColoring_8cpp.html#af805eef0622896af6b1badb0c3d318db">DisableColoring</a>(<span class="stringliteral">&quot;no-stack-coloring&quot;</span>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable stack coloring&quot;</span>));</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/// The user may write code that uses allocas outside of the declared lifetime</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/// zone. This can happen when the user returns a reference to a local</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// data-structure. We can detect these cases and decide not to optimize the</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// code. If this flag is enabled, we try to save the user.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="StackColoring_8cpp.html#aa7663bff85bb2689f7a122d6fd0b114d">ProtectFromEscapedAllocas</a>(<span class="stringliteral">&quot;protect-from-escaped-allocas&quot;</span>,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not optimize lifetime zones that &quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                   <span class="stringliteral">&quot;are broken&quot;</span>));</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<a class="code" href="StackColoring_8cpp.html#af4fff62af3a6837effc45d31d9121e0f">STATISTIC</a>(NumMarkerSeen,  <span class="stringliteral">&quot;Number of lifetime markers found.&quot;</span>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<a class="code" href="StackColoring_8cpp.html#af4fff62af3a6837effc45d31d9121e0f">STATISTIC</a>(StackSpaceSaved, <span class="stringliteral">&quot;Number of bytes saved due to merging slots.&quot;</span>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="StackColoring_8cpp.html#af4fff62af3a6837effc45d31d9121e0f">STATISTIC</a>(StackSlotMerged, <span class="stringliteral">&quot;Number of stack slot merged.&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<a class="code" href="StackColoring_8cpp.html#af4fff62af3a6837effc45d31d9121e0f">STATISTIC</a>(EscapedAllocas, <span class="stringliteral">&quot;Number of allocas that escaped the lifetime region&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//                           StackColoring Pass</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/// StackColoring - A machine pass for merging disjoint stack allocations,</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// marked by the LIFETIME_START and LIFETIME_END pseudo instructions.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span><span class="keyword">class </span>StackColoring : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  /// A class representing liveness information for a single basic block.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  /// Each bit in the BitVector represents the liveness property</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">  /// for a different stack slot.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>BlockLifetimeInfo {<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">    /// Which slots BEGINs in each basic block.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> Begin;<span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    /// Which slots ENDs in each basic block.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> End;<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    /// Which slots are marked as LIVE_IN, coming into each basic block.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LiveIn;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /// Which slots are marked as LIVE_OUT, coming out of each basic block.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LiveOut;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  };</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /// Maps active slots (per bit) for each basic block.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span>  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MachineBasicBlock*, BlockLifetimeInfo&gt;</a> LivenessMap;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  LivenessMap BlockLiveness;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">  /// Maps serial numbers to basic blocks.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MachineBasicBlock*, int&gt;</a> BasicBlocks;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">  /// Maps basic blocks to a serial number.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineBasicBlock*, 8&gt;</a> BasicBlockNumbering;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">  /// Maps liveness intervals for each slot.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LiveInterval*, 16&gt;</a> Intervals;<span class="comment"></span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">  /// VNInfo is used for the construction of LiveIntervals.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BumpPtrAllocator.html">VNInfo::Allocator</a> VNInfoAllocator;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /// SlotIndex analysis object.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a> *Indexes;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  /// The list of lifetime markers found. These markers are to be removed</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  /// once the coloring is done.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 8&gt;</a> Markers;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  /// SlotSizeSorter - A Sort utility for arranging stack slots according</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  /// to their size.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>SlotSizeSorter {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    SlotSizeSorter(<a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *mfi) : MFI(mfi) { }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">bool</span> operator()(<span class="keywordtype">int</span> LHS, <span class="keywordtype">int</span> RHS) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="comment">// We use -1 to denote a uninteresting slot. Place these slots at the end.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">if</span> (LHS == -1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span> (RHS == -1) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">// Sort according to size.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">return</span> MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(LHS) &gt; MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(RHS);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;};</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  StackColoring() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="namespacellvm.html#a2d6a0ca204b5044fc00e477e9ae3608e">initializeStackColoringPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">  /// Debug.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">  /// Removes all of the lifetime marker instructions from the function.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">  /// \returns true if any markers were removed.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> removeAllMarkers();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /// Scan the machine function and find all of the lifetime markers.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// Record the findings in the BEGIN and END vectors.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /// \returns the number of markers found.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> collectMarkers(<span class="keywordtype">unsigned</span> NumSlot);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">  /// Perform the dataflow calculation and calculate the lifetime for each of</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">  /// the slots, based on the BEGIN/END vectors. Set the LifetimeLIVE_IN and</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">  /// LifetimeLIVE_OUT maps that represent which stack slots are live coming</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">  /// in and out blocks.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> calculateLocalLiveness();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /// Construct the LiveIntervals for the slots.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> calculateLiveIntervals(<span class="keywordtype">unsigned</span> NumSlots);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  /// Go over the machine function and change instructions which use stack</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  /// slots to use the joint slots.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> remapInstructions(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;</a> &amp;SlotRemap);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">  /// The input program may contain instructions which are not inside lifetime</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /// markers. This can happen due to a bug in the compiler or due to a bug in</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  /// user code (for example, returning a reference to a local variable).</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">  /// This procedure checks all of the instructions in the function and</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  /// invalidates lifetime ranges which do not contain all of the instructions</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// which access that frame slot.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> removeInvalidSlotRanges();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /// Map entries which point to other entries to their destination.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">  ///   A-&gt;B-&gt;C becomes A-&gt;C.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span>   <span class="keywordtype">void</span> expungeSlotMap(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;</a> &amp;SlotRemap, <span class="keywordtype">unsigned</span> NumSlots);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;};</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">StackColoring::ID</a> = 0;</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8b2a91a3f94cb2f62a35afa1d4aade84">  188</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a8b2a91a3f94cb2f62a35afa1d4aade84">llvm::StackColoringID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">StackColoring::ID</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<a class="code" href="StackColoring_8cpp.html#a79d46ebd85ac763e70fed7f8067162f7">INITIALIZE_PASS_BEGIN</a>(StackColoring,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                   <span class="stringliteral">&quot;stack-coloring&quot;</span>, <span class="stringliteral">&quot;Merge disjoint stack slots&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(StackColoring,</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="StackColoring_8cpp.html#aba5ecd62bb84de98c097b8da7618d623">  195</a></span>&#160;                   &quot;<a class="code" href="Target_2ARM_2README_8txt.html#ac3302d36e5507ecfe3ed8ba03d5e320c">stack</a>-<a class="code" href="StackColoring_8cpp.html#ae2b9ffc65d6bbbc0623665ed57f92cb1">coloring</a>&quot;, &quot;Merge disjoint <a class="code" href="Target_2ARM_2README_8txt.html#ac3302d36e5507ecfe3ed8ba03d5e320c">stack</a> <a class="code" href="StackColoring_8cpp.html#aba5ecd62bb84de98c097b8da7618d623">slots</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keywordtype">void</span> StackColoring::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  AU.addPreserved&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">StackColoring::dump</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;MachineFunction*&gt;</a> FI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(MF), FE = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(MF);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;       FI != FE; ++FI) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Inspecting block #&quot;</span>&lt;&lt;BasicBlocks.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(*FI)&lt;&lt;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="stringliteral">&quot; [&quot;</span>&lt;&lt;FI-&gt;getName()&lt;&lt;<span class="stringliteral">&quot;]\n&quot;</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    LivenessMap::const_iterator BI = BlockLiveness.find(*FI);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    assert(BI != BlockLiveness.end() &amp;&amp; <span class="stringliteral">&quot;Block not found&quot;</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">const</span> BlockLifetimeInfo &amp;BlockInfo = BI-&gt;second;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;BEGIN  : {&quot;</span>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; BlockInfo.Begin.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;BlockInfo.Begin.test(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;}\n&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;END    : {&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; BlockInfo.End.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;BlockInfo.End.test(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;}\n&quot;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;LIVE_IN: {&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; BlockInfo.LiveIn.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;BlockInfo.LiveIn.test(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;}\n&quot;</span>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;LIVEOUT: {&quot;</span>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; BlockInfo.LiveOut.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;BlockInfo.LiveOut.test(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;}\n&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keywordtype">unsigned</span> StackColoring::collectMarkers(<span class="keywordtype">unsigned</span> NumSlot) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordtype">unsigned</span> MarkersFound = 0;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Scan the function to find all lifetime markers.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// NOTE: We use the a reverse-post-order iteration to ensure that we obtain a</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// deterministic numbering, and because we&#39;ll need a post-order iteration</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// later for solving the liveness dataflow problem.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;MachineFunction*&gt;</a> FI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(MF), FE = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(MF);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;       FI != FE; ++FI) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Assign a serial number to this basic block.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    BasicBlocks[*FI] = BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*FI);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Keep a reference to avoid repeated lookups.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    BlockLifetimeInfo &amp;BlockInfo = BlockLiveness[*FI];</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    BlockInfo.Begin.resize(NumSlot);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    BlockInfo.End.resize(NumSlot);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> BI = (*FI)-&gt;begin(), BE = (*FI)-&gt;end();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         BI != BE; ++BI) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a> &amp;&amp;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          BI-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448">TargetOpcode::LIFETIME_END</a>)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      Markers.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BI);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordtype">bool</span> IsStart = BI-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = BI-&gt;getOperand(0);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordtype">unsigned</span> Slot = MI.<a class="code" href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      MarkersFound++;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Allocation = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a7678be4df6b30943d9ea6b3863e6b2a1">getObjectAllocation</a>(Slot);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">if</span> (Allocation) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Found a lifetime marker for slot #&quot;</span>&lt;&lt;Slot&lt;&lt;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;              <span class="stringliteral">&quot; with allocation: &quot;</span>&lt;&lt; Allocation-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">if</span> (IsStart) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        BlockInfo.Begin.set(Slot);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (BlockInfo.Begin.test(Slot)) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <span class="comment">// Allocas that start and end within a single block are handled</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          <span class="comment">// specially when computing the LiveIntervals to avoid pessimizing</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          <span class="comment">// the liveness propagation.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          BlockInfo.Begin.reset(Slot);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          BlockInfo.End.set(Slot);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// Update statistics.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  NumMarkerSeen += MarkersFound;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> MarkersFound;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">void</span> StackColoring::calculateLocalLiveness() {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Perform a standard reverse dataflow computation to solve for</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// global liveness.  The BEGIN set here is equivalent to KILL in the standard</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// formulation, and END is equivalent to GEN.  The result of this computation</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// is a map from blocks to bitvectors where the bitvectors represent which</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// allocas are live in/out of that block.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const MachineBasicBlock*, 8&gt;</a> BBSet(BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                                 BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordtype">unsigned</span> NumSSMIters = 0;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordtype">bool</span> changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">while</span> (changed) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    ++NumSSMIters;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const MachineBasicBlock*, 8&gt;</a> NextBBSet;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;const MachineBasicBlock *&gt;::iterator</a></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;           PI = BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), PE = BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;           PI != PE; ++PI) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *PI;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">if</span> (!BBSet.count(BB)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment">// Use an iterator to avoid repeated lookups.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      LivenessMap::iterator BI = BlockLiveness.find(BB);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      assert(BI != BlockLiveness.end() &amp;&amp; <span class="stringliteral">&quot;Block not found&quot;</span>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      BlockLifetimeInfo &amp;BlockInfo = BI-&gt;second;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LocalLiveIn;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LocalLiveOut;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// Forward propagation from begins to ends.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">MachineBasicBlock::const_pred_iterator</a> PI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;           PE = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != PE; ++PI) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        LivenessMap::const_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BlockLiveness.find(*PI);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        assert(I != BlockLiveness.end() &amp;&amp; <span class="stringliteral">&quot;Predecessor not found&quot;</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        LocalLiveIn |= I-&gt;second.LiveOut;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      LocalLiveIn |= BlockInfo.End;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      LocalLiveIn.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(BlockInfo.Begin);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// Reverse propagation from ends to begins.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">MachineBasicBlock::const_succ_iterator</a> SI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;           SE = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); SI != SE; ++SI) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        LivenessMap::const_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BlockLiveness.find(*SI);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        assert(I != BlockLiveness.end() &amp;&amp; <span class="stringliteral">&quot;Successor not found&quot;</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        LocalLiveOut |= I-&gt;second.LiveIn;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      LocalLiveOut |= BlockInfo.Begin;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      LocalLiveOut.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(BlockInfo.End);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      LocalLiveIn |= LocalLiveOut;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      LocalLiveOut |= LocalLiveIn;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// After adopting the live bits, we need to turn-off the bits which</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">// are de-activated in this block.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      LocalLiveOut.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(BlockInfo.End);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      LocalLiveIn.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(BlockInfo.Begin);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">// If we have both BEGIN and END markers in the same basic block then</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="comment">// we know that the BEGIN marker comes after the END, because we already</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">// handle the case where the BEGIN comes before the END when collecting</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="comment">// the markers (and building the BEGIN/END vectore).</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="comment">// Want to enable the LIVE_IN and LIVE_OUT of slots that have both</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="comment">// BEGIN and END because it means that the value lives before and after</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">// this basic block.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LocalEndBegin = BlockInfo.End;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      LocalEndBegin &amp;= BlockInfo.Begin;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      LocalLiveIn |= LocalEndBegin;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      LocalLiveOut |= LocalEndBegin;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (LocalLiveIn.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(BlockInfo.LiveIn)) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        BlockInfo.LiveIn |= LocalLiveIn;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">MachineBasicBlock::const_pred_iterator</a> PI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;             PE = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != PE; ++PI)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          NextBBSet.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(*PI);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (LocalLiveOut.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(BlockInfo.LiveOut)) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        BlockInfo.LiveOut |= LocalLiveOut;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">MachineBasicBlock::const_succ_iterator</a> SI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;             SE = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); SI != SE; ++SI)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          NextBBSet.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(*SI);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    BBSet = NextBBSet;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }<span class="comment">// while changed.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="keywordtype">void</span> StackColoring::calculateLiveIntervals(<span class="keywordtype">unsigned</span> NumSlots) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SlotIndex, 16&gt;</a> Starts;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SlotIndex, 16&gt;</a> Finishes;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// For each block, find which slots are active within this block</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// and update the live intervals.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> MBB = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), MBBe = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;       MBB != MBBe; ++MBB) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    Starts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Starts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(NumSlots);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    Finishes.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    Finishes.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(NumSlots);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Create the interval for the basic blocks with lifetime markers in them.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr*&gt;::const_iterator</a> <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> = Markers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;         e = Markers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> != e; ++<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = *<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>() != MBB)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      assert((MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a> ||</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;              MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448">TargetOpcode::LIFETIME_END</a>) &amp;&amp;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;             <span class="stringliteral">&quot;Invalid Lifetime marker&quot;</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordtype">bool</span> IsStart = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Mo = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordtype">int</span> Slot = Mo.<a class="code" href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>();</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      assert(Slot &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Invalid slot&quot;</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> ThisIndex = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#ada895ec8deba28c17ee5d45cddf1882d">getInstructionIndex</a>(MI);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span> (IsStart) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (!Starts[Slot].isValid() || Starts[Slot] &gt; ThisIndex)</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;          Starts[Slot] = ThisIndex;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (!Finishes[Slot].isValid() || Finishes[Slot] &lt; ThisIndex)</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          Finishes[Slot] = ThisIndex;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Create the interval of the blocks that we previously found to be &#39;alive&#39;.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    BlockLifetimeInfo &amp;MBBLiveness = BlockLiveness[MBB];</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pos = MBBLiveness.LiveIn.find_first(); pos != -1;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         pos = MBBLiveness.LiveIn.find_next(pos)) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      Starts[pos] = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">getMBBStartIdx</a>(MBB);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pos = MBBLiveness.LiveOut.find_first(); pos != -1;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         pos = MBBLiveness.LiveOut.find_next(pos)) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      Finishes[pos] = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a42c3b0bec1a7a288f0ef0540895484a1">getMBBEndIdx</a>(MBB);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumSlots; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      assert(Starts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].isValid() == Finishes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].isValid() &amp;&amp; <span class="stringliteral">&quot;Unmatched range&quot;</span>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">if</span> (!Starts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].isValid())</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      assert(Starts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; Finishes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; <span class="stringliteral">&quot;Invalid interval&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *ValNum = Intervals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getValNumInfo(0);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = Starts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = Finishes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">if</span> (S &lt; F) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// We have a single consecutive region.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        Intervals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;addSegment(LiveInterval::Segment(S, F, ValNum));</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// We have two non consecutive regions. This happens when</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// LIFETIME_START appears after the LIFETIME_END marker.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> NewStart = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">getMBBStartIdx</a>(MBB);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> NewFin = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a42c3b0bec1a7a288f0ef0540895484a1">getMBBEndIdx</a>(MBB);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        Intervals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;addSegment(LiveInterval::Segment(NewStart, F, ValNum));</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        Intervals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;addSegment(LiveInterval::Segment(S, NewFin, ValNum));</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="keywordtype">bool</span> StackColoring::removeAllMarkers() {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordtype">unsigned</span> Count = 0;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Markers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    Markers[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;eraseFromParent();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    Count++;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  Markers.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Removed &quot;</span>&lt;&lt;Count&lt;&lt;<span class="stringliteral">&quot; markers.\n&quot;</span>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">return</span> Count;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="keywordtype">void</span> StackColoring::remapInstructions(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;</a> &amp;SlotRemap) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordtype">unsigned</span> FixedInstr = 0;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordtype">unsigned</span> FixedMemOp = 0;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordtype">unsigned</span> FixedDbg = 0;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *MMI = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#aaaa58853344cccb2ae6dcecea4ee54ad">getMMI</a>();</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// Remap debug information that refers to stack slots.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">MachineModuleInfo::VariableDbgInfoMapTy</a> &amp;VMap = MMI-&gt;<a class="code" href="classllvm_1_1MachineModuleInfo.html#a8371afeef9b34146cd0d2c055ab8b396">getVariableDbgInfo</a>();</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html#a16a72ecbc559627d140a2197d9f79445">MachineModuleInfo::VariableDbgInfoMapTy::iterator</a> VI = VMap.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;       VE = VMap.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); VI != VE; ++VI) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Var = VI-&gt;first;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (!Var) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    std::pair&lt;unsigned, DebugLoc&gt; &amp;VP = VI-&gt;second;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(VP.first)) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Remapping debug info for [&quot;</span>&lt;&lt;Var-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()&lt;&lt;<span class="stringliteral">&quot;].\n&quot;</span>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      VP.first = SlotRemap[VP.first];</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      FixedDbg++;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// Keep a list of *allocas* which need to be remapped.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const AllocaInst*, const AllocaInst*&gt;</a> Allocas;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;::const_iterator</a> <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> = SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;       e = SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> != e; ++<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *From = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a7678be4df6b30943d9ea6b3863e6b2a1">getObjectAllocation</a>(<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>-&gt;first);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *To = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a7678be4df6b30943d9ea6b3863e6b2a1">getObjectAllocation</a>(<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>-&gt;second);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    assert(To &amp;&amp; From &amp;&amp; <span class="stringliteral">&quot;Invalid allocation object&quot;</span>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    Allocas[From] = To;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// Remap all instructions to the new stack slots.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBE;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">for</span> (BB = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), BBE = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); BB != BBE; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">for</span> (I = BB-&gt;begin(), IE = BB-&gt;end(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="comment">// Skip lifetime markers. We&#39;ll remove them soon.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">if</span> (I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a> ||</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448">TargetOpcode::LIFETIME_END</a>)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="comment">// Update the MachineMemOperand to use the new alloca.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineMemOperand.html">MachineInstr::mmo_iterator</a> MM = I-&gt;memoperands_begin(),</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;           E = I-&gt;memoperands_end(); MM != E; ++MM) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = *MM;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V = MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#affe567f004a910942ac688989b3642e1">getValue</a>();</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> (!V)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1PseudoSourceValue.html">PseudoSourceValue</a> *PSV = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1PseudoSourceValue.html">PseudoSourceValue</a>&gt;(V);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (PSV &amp;&amp; PSV-&gt;<a class="code" href="classllvm_1_1PseudoSourceValue.html#a8ef283ca6cd4315b11d370428b40ddf7">isConstant</a>(MFI))</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">// Climb up and find the original alloca.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        V = <a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(V);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// If we did not find one, or if the one that we found is not in our</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="comment">// map, then move on.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> (!V || !isa&lt;AllocaInst&gt;(V)) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="comment">// Clear mem operand since we don&#39;t know for sure that it doesn&#39;t</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;          <span class="comment">// alias a merged alloca.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a606d73cbc9cc6210d626ec4b12c6c32e">setValue</a>(0);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI= cast&lt;AllocaInst&gt;(V);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (!Allocas.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(AI))</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a606d73cbc9cc6210d626ec4b12c6c32e">setValue</a>(Allocas[AI]);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        FixedMemOp++;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="comment">// Update all of the machine instruction operands.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0 ; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;  I-&gt;getNumOperands(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = I-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab0d5ec413fa43a1e470dafb6cafda9b5">isFI</a>())</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordtype">int</span> FromSlot = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// Don&#39;t touch arguments.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (FromSlot&lt;0)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">// Only look at mapped slots.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> (!SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(FromSlot))</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">// In a debug build, check that the instruction that we are modifying is</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">// inside the expected live range. If the instruction is not inside</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="comment">// the calculated range then it means that the alloca usage moved</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="comment">// outside of the lifetime markers, or that the user has a bug.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment">// NOTE: Alloca address calculations which happen outside the lifetime</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">// zone are are okay, despite the fact that we don&#39;t have a good way</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="comment">// for validating all of the usages of the calculation.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordtype">bool</span> TouchesMemory = I-&gt;mayLoad() || I-&gt;mayStore();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// If we *don&#39;t* protect the user from escaped allocas, don&#39;t bother</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">// validating the instructions.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (!I-&gt;isDebugValue() &amp;&amp; TouchesMemory &amp;&amp; <a class="code" href="StackColoring_8cpp.html#aa7663bff85bb2689f7a122d6fd0b114d">ProtectFromEscapedAllocas</a>) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Index = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#ada895ec8deba28c17ee5d45cddf1882d">getInstructionIndex</a>(I);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *<a class="code" href="classllvm_1_1Interval.html">Interval</a> = Intervals[FromSlot];</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          assert(Interval-&gt;<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(Index) != Interval-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() &amp;&amp;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                 <span class="stringliteral">&quot;Found instruction usage outside of live range.&quot;</span>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// Fix the machine instructions.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordtype">int</span> ToSlot = SlotRemap[FromSlot];</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        MO.<a class="code" href="classllvm_1_1MachineOperand.html#aebc99c3c37896879abad49e7254a2fb8">setIndex</a>(ToSlot);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        FixedInstr++;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Fixed &quot;</span>&lt;&lt;FixedMemOp&lt;&lt;<span class="stringliteral">&quot; machine memory operands.\n&quot;</span>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Fixed &quot;</span>&lt;&lt;FixedDbg&lt;&lt;<span class="stringliteral">&quot; debug locations.\n&quot;</span>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Fixed &quot;</span>&lt;&lt;FixedInstr&lt;&lt;<span class="stringliteral">&quot; machine instructions.\n&quot;</span>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="keywordtype">void</span> StackColoring::removeInvalidSlotRanges() {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">MachineFunction::const_iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBE;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span> (BB = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), BBE = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); BB != BBE; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">for</span> (I = BB-&gt;begin(), IE = BB-&gt;end(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">if</span> (I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">TargetOpcode::LIFETIME_START</a> ||</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448">TargetOpcode::LIFETIME_END</a> || I-&gt;isDebugValue())</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="comment">// Some intervals are suspicious! In some cases we find address</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">// calculations outside of the lifetime zone, but not actual memory</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">// read or write. Memory accesses outside of the lifetime zone are a clear</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// violation, but address calculations are okay. This can happen when</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="comment">// GEPs are hoisted outside of the lifetime zone.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// So, in here we only check instructions which can read or write memory.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">if</span> (!I-&gt;mayLoad() &amp;&amp; !I-&gt;mayStore())</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// Check all of the machine operands.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0 ; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;  I-&gt;getNumOperands(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = I-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab0d5ec413fa43a1e470dafb6cafda9b5">isFI</a>())</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordtype">int</span> Slot = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">getIndex</a>();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> (Slot&lt;0)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span> (Intervals[Slot]-&gt;empty())</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">// Check that the used slot is inside the calculated lifetime range.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">// If it is not, warn about it and invalidate the range.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *<a class="code" href="classllvm_1_1Interval.html">Interval</a> = Intervals[Slot];</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Index = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#ada895ec8deba28c17ee5d45cddf1882d">getInstructionIndex</a>(I);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> (Interval-&gt;<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(Index) == Interval-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>()) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;          Intervals[Slot]-&gt;<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Invalidating range #&quot;</span>&lt;&lt;Slot&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;          EscapedAllocas++;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="keywordtype">void</span> StackColoring::expungeSlotMap(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;</a> &amp;SlotRemap,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                   <span class="keywordtype">unsigned</span> NumSlots) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// Expunge slot remap map.</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumSlots; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// If we are remapping i</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="classllvm_1_1Target.html">Target</a> = SlotRemap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="comment">// As long as our target is mapped to something else, follow it.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">while</span> (SlotRemap.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(Target)) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        Target = SlotRemap[Target];</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        SlotRemap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Target;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="keywordtype">bool</span> StackColoring::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Stack Coloring **********\n&quot;</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;               &lt;&lt; ((<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a>*)Func.<a class="code" href="classllvm_1_1MachineFunction.html#ad784a6594990530bffb2018aeeed56f3">getFunction</a>())-&gt;<a class="code" href="namespacellvm_1_1Intrinsic.html#a5d4ca65de6e43d76586fbdd89bf930d2">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  MF = &amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  MFI = MF-&gt;getFrameInfo();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  Indexes = &amp;getAnalysis&lt;SlotIndexes&gt;();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  BlockLiveness.clear();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  BasicBlocks.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  BasicBlockNumbering.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  Markers.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  Intervals.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  VNInfoAllocator.<a class="code" href="classllvm_1_1BumpPtrAllocator.html#a530a74f2d8a98f36314519e7f178b434">Reset</a>();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordtype">unsigned</span> NumSlots = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ab127d56f832dc4400f58707a37ed5c6b">getObjectIndexEnd</a>();</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// If there are no stack slots then there are no markers to remove.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (!NumSlots)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> SortedSlots;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  SortedSlots.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(NumSlots);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  Intervals.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(NumSlots);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">unsigned</span> NumMarkers = collectMarkers(NumSlots);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordtype">unsigned</span> TotalSize = 0;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Found &quot;</span>&lt;&lt;NumMarkers&lt;&lt;<span class="stringliteral">&quot; markers and &quot;</span>&lt;&lt;NumSlots&lt;&lt;<span class="stringliteral">&quot; slots\n&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Slot structure:\n&quot;</span>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ab127d56f832dc4400f58707a37ed5c6b">getObjectIndexEnd</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Slot #&quot;</span>&lt;&lt;<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;&lt;<span class="stringliteral">&quot; - &quot;</span>&lt;&lt;MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)&lt;&lt;<span class="stringliteral">&quot; bytes.\n&quot;</span>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    TotalSize += MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Total Stack size: &quot;</span>&lt;&lt;TotalSize&lt;&lt;<span class="stringliteral">&quot; bytes\n\n&quot;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// Don&#39;t continue because there are not enough lifetime markers, or the</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// stack is too small, or we are told not to optimize the slots.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (NumMarkers &lt; 2 || TotalSize &lt; 16 || <a class="code" href="StackColoring_8cpp.html#af805eef0622896af6b1badb0c3d318db">DisableColoring</a>) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Will not try to merge slots.\n&quot;</span>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> removeAllMarkers();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumSlots; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    Intervals.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(LI);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">getNextValue</a>(Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#ae87b945bbb68117e870cfca419e4c845">getZeroIndex</a>(), VNInfoAllocator);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    SortedSlots.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// Calculate the liveness of each block.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  calculateLocalLiveness();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// Propagate the liveness information.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  calculateLiveIntervals(NumSlots);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Search for allocas which are used outside of the declared lifetime</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// markers.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="StackColoring_8cpp.html#aa7663bff85bb2689f7a122d6fd0b114d">ProtectFromEscapedAllocas</a>)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    removeInvalidSlotRanges();</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// Maps old slots to new slots.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;int, int&gt;</a> SlotRemap;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordtype">unsigned</span> RemovedSlots = 0;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordtype">unsigned</span> ReducedSize = 0;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Do not bother looking at empty intervals.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumSlots; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span> (Intervals[SortedSlots[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]]-&gt;empty())</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      SortedSlots[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = -1;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// This is a simple greedy algorithm for merging allocas. First, sort the</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// slots, placing the largest slots first. Next, perform an n^2 scan and look</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// for disjoint slots. When you find disjoint slots, merge the samller one</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// into the bigger one and update the live interval. Remove the small alloca</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="comment">// and continue.</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// Sort the slots according to their size. Place unused slots at the end.</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// Use stable sort to guarantee deterministic code generation.</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  std::stable_sort(SortedSlots.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), SortedSlots.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(),</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                   SlotSizeSorter(MFI));</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">while</span> (Changed) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumSlots; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> (SortedSlots[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] == -1)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J=<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>+1; J &lt; NumSlots; ++J) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">if</span> (SortedSlots[J] == -1)</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordtype">int</span> FirstSlot = SortedSlots[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordtype">int</span> SecondSlot = SortedSlots[J];</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *<a class="code" href="Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a> = Intervals[FirstSlot];</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *Second = Intervals[SecondSlot];</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        assert (!First-&gt;<a class="code" href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">empty</a>() &amp;&amp; !Second-&gt;<a class="code" href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Found an empty range&quot;</span>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="comment">// Merge disjoint slots.</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">if</span> (!First-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a1ee341130300e56248229610462773ae">overlaps</a>(*Second)) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;          First-&gt;<a class="code" href="classllvm_1_1LiveRange.html#aae51d91c7cb4dc1a4ffabbfd1b7be9a1">MergeSegmentsInAsValue</a>(*Second, First-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">getValNumInfo</a>(0));</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          SlotRemap[SecondSlot] = FirstSlot;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          SortedSlots[J] = -1;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Merging #&quot;</span>&lt;&lt;FirstSlot&lt;&lt;<span class="stringliteral">&quot; and slots #&quot;</span>&lt;&lt;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                SecondSlot&lt;&lt;<span class="stringliteral">&quot; together.\n&quot;</span>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          <span class="keywordtype">unsigned</span> MaxAlignment = std::max(MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae146d6827dae2ff77fc65b7fd319dbb8">getObjectAlignment</a>(FirstSlot),</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                           MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae146d6827dae2ff77fc65b7fd319dbb8">getObjectAlignment</a>(SecondSlot));</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          assert(MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(FirstSlot) &gt;=</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                 MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(SecondSlot) &amp;&amp;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                 <span class="stringliteral">&quot;Merging a small object into a larger one&quot;</span>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;          RemovedSlots+=1;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          ReducedSize += MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">getObjectSize</a>(SecondSlot);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a51ea0ff0ba0a43cc30affb68aae1314c">setObjectAlignment</a>(FirstSlot, MaxAlignment);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#ab356eaffcc04362671e727900a65ac52">RemoveStackObject</a>(SecondSlot);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  }<span class="comment">// While changed.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// Record statistics.</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  StackSpaceSaved += ReducedSize;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  StackSlotMerged += RemovedSlots;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()&lt;&lt;<span class="stringliteral">&quot;Merge &quot;</span>&lt;&lt;RemovedSlots&lt;&lt;<span class="stringliteral">&quot; slots. Saved &quot;</span>&lt;&lt;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        ReducedSize&lt;&lt;<span class="stringliteral">&quot; bytes\n&quot;</span>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// Scan the entire function and update all machine operands that use frame</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">// indices to use the remapped frame index.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  expungeSlotMap(SlotRemap, NumSlots);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  remapInstructions(SlotRemap);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// Release the intervals.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumSlots; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keyword">delete</span> Intervals[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">return</span> removeAllMarkers();</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a16a72ecbc559627d140a2197d9f79445"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a16a72ecbc559627d140a2197d9f79445">llvm::SmallVectorImpl&lt; std::pair&lt; TrackingVH&lt; MDNode &gt;, UnsignedDebugLocPair &gt; &gt;::iterator</a></div><div class="ttdeci">SuperClass::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00376">SmallVector.h:376</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_ae2b9ffc65d6bbbc0623665ed57f92cb1"><div class="ttname"><a href="StackColoring_8cpp.html#ae2b9ffc65d6bbbc0623665ed57f92cb1">coloring</a></div><div class="ttdeci">stack coloring</div><div class="ttdef"><b>Definition:</b> <a href="StackColoring_8cpp_source.html#l00195">StackColoring.cpp:195</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="MachineMemOperand_8h_html"><div class="ttname"><a href="MachineMemOperand_8h.html">MachineMemOperand.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00425">SmallVector.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00317">MachineFunction.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00315">MachineFunction.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1Interval_html"><div class="ttname"><a href="classllvm_1_1Interval.html">llvm::Interval</a></div><div class="ttdef"><b>Definition:</b> <a href="ImmutableIntervalMap_8h_source.html#l00021">ImmutableIntervalMap.h:21</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00528">LiveInterval.h:528</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00278">MachineBasicBlock.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="MCInstrItineraries_8h_html"><div class="ttname"><a href="MCInstrItineraries_8h.html">MCInstrItineraries.h</a></div></div>
<div class="ttc" id="classllvm_1_1df__iterator_html"><div class="ttname"><a href="classllvm_1_1df__iterator.html">llvm::df_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00065">DepthFirstIterator.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ad784a6594990530bffb2018aeeed56f3"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ad784a6594990530bffb2018aeeed56f3">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00151">MachineFunction.h:151</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html"><div class="ttname"><a href="classllvm_1_1VNInfo.html">llvm::VNInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00044">LiveInterval.h:44</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_abfed19760ab95747976edc7862a35807"><div class="ttname"><a href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">llvm::LiveRange::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00311">LiveInterval.h:311</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="namespacellvm_html_ace6c957db39858291c6ce01c38e78480"><div class="ttname"><a href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">llvm::GetUnderlyingObject</a></div><div class="ttdeci">Value * GetUnderlyingObject(Value *V, const DataLayout *TD=0, unsigned MaxLookup=6)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01899">ValueTracking.cpp:1899</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00082">MachineMemOperand.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="namespacellvm_html_a8b2a91a3f94cb2f62a35afa1d4aade84"><div class="ttname"><a href="namespacellvm.html#a8b2a91a3f94cb2f62a35afa1d4aade84">llvm::StackColoringID</a></div><div class="ttdeci">char &amp; StackColoringID</div><div class="ttdef"><b>Definition:</b> <a href="StackColoring_8cpp_source.html#l00188">StackColoring.cpp:188</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a757fd6afba0f531db70e78e057d147c6"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">llvm::LiveRange::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00193">LiveInterval.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="MachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="MachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="BitVector_8h_html"><div class="ttname"><a href="BitVector_8h.html">BitVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aebc99c3c37896879abad49e7254a2fb8"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aebc99c3c37896879abad49e7254a2fb8">llvm::MachineOperand::setIndex</a></div><div class="ttdeci">void setIndex(int Idx)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00500">MachineOperand.h:500</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">Abstract Stack Frame Information. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00080">MachineFrameInfo.h:80</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_aae51d91c7cb4dc1a4ffabbfd1b7be9a1"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aae51d91c7cb4dc1a4ffabbfd1b7be9a1">llvm::LiveRange::MergeSegmentsInAsValue</a></div><div class="ttdeci">void MergeSegmentsInAsValue(const LiveRange &amp;RHS, VNInfo *LHSValNo)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00493">LiveInterval.cpp:493</a></div></div>
<div class="ttc" id="PseudoSourceValue_8h_html"><div class="ttname"><a href="PseudoSourceValue_8h.html">PseudoSourceValue.h</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_aa7663bff85bb2689f7a122d6fd0b114d"><div class="ttname"><a href="StackColoring_8cpp.html#aa7663bff85bb2689f7a122d6fd0b114d">ProtectFromEscapedAllocas</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ProtectFromEscapedAllocas(&quot;protect-from-escaped-allocas&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Do not optimize lifetime zones that &quot;&quot;are broken&quot;))</div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html">llvm::SlotIndexes</a></div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00334">SlotIndexes.h:334</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab0d5ec413fa43a1e470dafb6cafda9b5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab0d5ec413fa43a1e470dafb6cafda9b5">llvm::MachineOperand::isFI</a></div><div class="ttdeci">bool isFI() const </div><div class="ttdoc">isFI - Tests if this is a MO_FrameIndex operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00234">MachineOperand.h:234</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="DebugInfo_8h_html"><div class="ttname"><a href="DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="SlotIndexes_8h_html"><div class="ttname"><a href="SlotIndexes_8h.html">SlotIndexes.h</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_ac3302d36e5507ecfe3ed8ba03d5e320c"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#ac3302d36e5507ecfe3ed8ba03d5e320c">stack</a></div><div class="ttdeci">S is passed via registers r2 But gcc stores them to the stack</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00189">Target/ARM/README.txt:189</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00882">SparseBitVector.h:882</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_ab356eaffcc04362671e727900a65ac52"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ab356eaffcc04362671e727900a65ac52">llvm::MachineFrameInfo::RemoveStackObject</a></div><div class="ttdeci">void RemoveStackObject(int ObjectIdx)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00514">MachineFrameInfo.h:514</a></div></div>
<div class="ttc" id="classllvm_1_1MachineModuleInfo_html_a8371afeef9b34146cd0d2c055ab8b396"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html#a8371afeef9b34146cd0d2c055ab8b396">llvm::MachineModuleInfo::getVariableDbgInfo</a></div><div class="ttdeci">VariableDbgInfoMapTy &amp; getVariableDbgInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00405">MachineModuleInfo.h:405</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab24db72f7bd10b13351812874015861b"><div class="ttname"><a href="Target_2README_8txt.html#ab24db72f7bd10b13351812874015861b">First</a></div><div class="ttdeci">into llvm powi allowing the code generator to produce balanced multiplication trees First</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00051">Target/README.txt:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a849b445fe6bce862c395ea6b97c1f658"><div class="ttname"><a href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">llvm::df_end</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_end(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00206">DepthFirstIterator.h:206</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1PseudoSourceValue_html_a8ef283ca6cd4315b11d370428b40ddf7"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html#a8ef283ca6cd4315b11d370428b40ddf7">llvm::PseudoSourceValue::isConstant</a></div><div class="ttdeci">virtual bool isConstant(const MachineFrameInfo *) const </div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8cpp_source.html#l00082">PseudoSourceValue.cpp:82</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a1ee341130300e56248229610462773ae"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a1ee341130300e56248229610462773ae">llvm::LiveRange::overlaps</a></div><div class="ttdeci">bool overlaps(const LiveRange &amp;other) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00377">LiveInterval.h:377</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00275">BitVector.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_ae87b945bbb68117e870cfca419e4c845"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#ae87b945bbb68117e870cfca419e4c845">llvm::SlotIndexes::getZeroIndex</a></div><div class="ttdeci">SlotIndex getZeroIndex()</div><div class="ttdoc">Returns the zero index for this analysis. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00397">SlotIndexes.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1BumpPtrAllocator_html_a530a74f2d8a98f36314519e7f178b434"><div class="ttname"><a href="classllvm_1_1BumpPtrAllocator.html#a530a74f2d8a98f36314519e7f178b434">llvm::BumpPtrAllocator::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="Allocator_8cpp_source.html#l00083">Allocator.cpp:83</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a4efb46d4834f6f750ae0649ed89ce44c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::count</a></div><div class="ttdeci">bool count(const KeyT &amp;Val) const</div><div class="ttdoc">count - Return true if the specified key is in the map. </div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00103">DenseMap.h:103</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">llvm::LibFunc::Func</a></div><div class="ttdeci">Func</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00020">TargetLibraryInfo.h:20</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8af10c98f2135d9b475736fb02a9cae767">llvm::TargetOpcode::LIFETIME_START</a></div><div class="ttdoc">Lifetime markers. </div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00094">TargetOpcodes.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_ada895ec8deba28c17ee5d45cddf1882d"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#ada895ec8deba28c17ee5d45cddf1882d">llvm::SlotIndexes::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr *MI) const </div><div class="ttdoc">Returns the base index for the given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00414">SlotIndexes.h:414</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a502516f71f7824d46325d30ea41f34ba"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">llvm::MachineBasicBlock::const_pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::const_iterator const_pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00248">MachineBasicBlock.h:248</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_afeb00b9049a2391c990df15692caef63"><div class="ttname"><a href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">llvm::LiveRange::find</a></div><div class="ttdeci">iterator find(SlotIndex Pos)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00034">LiveInterval.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineMemOperand_html_a606d73cbc9cc6210d626ec4b12c6c32e"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a606d73cbc9cc6210d626ec4b12c6c32e">llvm::MachineMemOperand::setValue</a></div><div class="ttdeci">void setValue(const Value *NewSV)</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00177">MachineMemOperand.h:177</a></div></div>
<div class="ttc" id="classllvm_1_1BumpPtrAllocator_html"><div class="ttname"><a href="classllvm_1_1BumpPtrAllocator.html">llvm::BumpPtrAllocator</a></div><div class="ttdef"><b>Definition:</b> <a href="Allocator_8h_source.html#l00090">Allocator.h:90</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; const MachineBasicBlock *, 8 &gt;</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_ae146d6827dae2ff77fc65b7fd319dbb8"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae146d6827dae2ff77fc65b7fd319dbb8">llvm::MachineFrameInfo::getObjectAlignment</a></div><div class="ttdeci">unsigned getObjectAlignment(int ObjectIdx) const </div><div class="ttdoc">getObjectAlignment - Return the alignment of the specified stack object. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00361">MachineFrameInfo.h:361</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_af4fff62af3a6837effc45d31d9121e0f"><div class="ttname"><a href="StackColoring_8cpp.html#af4fff62af3a6837effc45d31d9121e0f">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumMarkerSeen,&quot;Number of lifetime markers found.&quot;)</div></div>
<div class="ttc" id="namespacellvm_html_a2d6a0ca204b5044fc00e477e9ae3608e"><div class="ttname"><a href="namespacellvm.html#a2d6a0ca204b5044fc00e477e9ae3608e">llvm::initializeStackColoringPass</a></div><div class="ttdeci">void initializeStackColoringPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_a42c3b0bec1a7a288f0ef0540895484a1"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#a42c3b0bec1a7a288f0ef0540895484a1">llvm::SlotIndexes::getMBBEndIdx</a></div><div class="ttdeci">SlotIndex getMBBEndIdx(unsigned Num) const </div><div class="ttdoc">Returns the last index in the given basic block number. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00496">SlotIndexes.h:496</a></div></div>
<div class="ttc" id="namespacellvm_html_afb9c37d2aea316c81a0b2b63c6b480e7"><div class="ttname"><a href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">llvm::df_begin</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00201">DepthFirstIterator.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00078">TargetRegistry.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1MachineMemOperand_html_affe567f004a910942ac688989b3642e1"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#affe567f004a910942ac688989b3642e1">llvm::MachineMemOperand::getValue</a></div><div class="ttdeci">const Value * getValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00124">MachineMemOperand.h:124</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1PseudoSourceValue_html"><div class="ttname"><a href="classllvm_1_1PseudoSourceValue.html">llvm::PseudoSourceValue</a></div><div class="ttdef"><b>Definition:</b> <a href="PseudoSourceValue_8h_source.html#l00027">PseudoSourceValue.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00053">DenseMap.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a699598a93a78f8b0376cfb49933cbce7"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">llvm::LiveRange::getValNumInfo</a></div><div class="ttdeci">VNInfo * getValNumInfo(unsigned ValNo)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00250">LiveInterval.h:250</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a654b11787ac7c4344084d98bea7cf626"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">llvm::MachineBasicBlock::const_iterator</a></div><div class="ttdeci">bundle_iterator&lt; const MachineInstr, const_instr_iterator &gt; const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00214">MachineBasicBlock.h:214</a></div></div>
<div class="ttc" id="MachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_a79d46ebd85ac763e70fed7f8067162f7"><div class="ttname"><a href="StackColoring_8cpp.html#a79d46ebd85ac763e70fed7f8067162f7">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(StackColoring,&quot;stack-coloring&quot;,&quot;Merge disjoint stack slots&quot;, false, false) INITIALIZE_PASS_END(StackColoring</div></div>
<div class="ttc" id="SparseSet_8h_html"><div class="ttname"><a href="SparseSet_8h.html">SparseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ac9485ae7d6fedd71ad4460f72c799c98"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac9485ae7d6fedd71ad4460f72c799c98">llvm::MachineOperand::getIndex</a></div><div class="ttdeci">int getIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00422">MachineOperand.h:422</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a5d4ca65de6e43d76586fbdd89bf930d2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a5d4ca65de6e43d76586fbdd89bf930d2">llvm::Intrinsic::getName</a></div><div class="ttdeci">std::string getName(ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00400">Function.cpp:400</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="ValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_a7d9e911655267def875c265ae774cf68"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">llvm::SlotIndexes::getMBBStartIdx</a></div><div class="ttdeci">SlotIndex getMBBStartIdx(unsigned Num) const </div><div class="ttdoc">Returns the first index in the given basic block number. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00486">SlotIndexes.h:486</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_aba5ecd62bb84de98c097b8da7618d623"><div class="ttname"><a href="StackColoring_8cpp.html#aba5ecd62bb84de98c097b8da7618d623">slots</a></div><div class="ttdeci">stack Merge disjoint stack slots</div><div class="ttdef"><b>Definition:</b> <a href="StackColoring_8cpp_source.html#l00195">StackColoring.cpp:195</a></div></div>
<div class="ttc" id="MachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a69331ac1fdc66eee11c977845f2e472b"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">llvm::LiveRange::getNextValue</a></div><div class="ttdeci">VNInfo * getNextValue(SlotIndex def, VNInfo::Allocator &amp;VNInfoAllocator)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00264">LiveInterval.h:264</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4ff69108429e3c670cfa72f08ad00448">llvm::TargetOpcode::LIFETIME_END</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00095">TargetOpcodes.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6198e2abdd4f41355b1a0931affde1a6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">llvm::MachineBasicBlock::const_succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::const_iterator const_succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00250">MachineBasicBlock.h:250</a></div></div>
<div class="ttc" id="StackColoring_8cpp_html_af805eef0622896af6b1badb0c3d318db"><div class="ttname"><a href="StackColoring_8cpp.html#af805eef0622896af6b1badb0c3d318db">DisableColoring</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableColoring(&quot;no-stack-coloring&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Disable stack coloring&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00143">DenseMap.h:143</a></div></div>
<div class="ttc" id="PostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="LiveInterval_8h_html"><div class="ttname"><a href="LiveInterval_8h.html">LiveInterval.h</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_aaaa58853344cccb2ae6dcecea4ee54ad"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aaaa58853344cccb2ae6dcecea4ee54ad">llvm::MachineFunction::getMMI</a></div><div class="ttdeci">MachineModuleInfo &amp; getMMI() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00145">MachineFunction.h:145</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_ab127d56f832dc4400f58707a37ed5c6b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ab127d56f832dc4400f58707a37ed5c6b">llvm::MachineFrameInfo::getObjectIndexEnd</a></div><div class="ttdeci">int getObjectIndexEnd() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00285">MachineFrameInfo.h:285</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00092">SlotIndexes.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_a7678be4df6b30943d9ea6b3863e6b2a1"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a7678be4df6b30943d9ea6b3863e6b2a1">llvm::MachineFrameInfo::getObjectAllocation</a></div><div class="ttdeci">const AllocaInst * getObjectAllocation(int ObjectIdx) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00377">MachineFrameInfo.h:377</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a6467bd6bb128c8b69a478548fc17351c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00078">DenseMap.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_a51ea0ff0ba0a43cc30affb68aae1314c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a51ea0ff0ba0a43cc30affb68aae1314c">llvm::MachineFrameInfo::setObjectAlignment</a></div><div class="ttdeci">void setObjectAlignment(int ObjectIdx, unsigned Align)</div><div class="ttdoc">setObjectAlignment - Change the alignment of the specified stack object. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00368">MachineFrameInfo.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_a43386af65581b8de506f3b57ba6c05b0"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a43386af65581b8de506f3b57ba6c05b0">llvm::MachineFrameInfo::getObjectSize</a></div><div class="ttdeci">int64_t getObjectSize(int ObjectIdx) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00347">MachineFrameInfo.h:347</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_abb4ce3bc3096a12d4b93460bf78bcf95"><div class="ttname"><a href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in it</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00053">README-SSE.txt:53</a></div></div>
<div class="ttc" id="classllvm_1_1MachineModuleInfo_html"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html">llvm::MachineModuleInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00097">MachineModuleInfo.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:02:38 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
