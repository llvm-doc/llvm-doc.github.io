<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: Memory.inc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Windows_2Memory_8inc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Windows/Memory.inc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Windows_2Memory_8inc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- Win32/Memory.cpp - Win32 Memory Implementation -----------*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file provides the Win32 specific implementation of various Memory</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// management utilities</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/DataTypes.h&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Process_8h.html">llvm/Support/Process.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// The Windows.h header must be the last one included.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Windows_8h.html">Windows.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;DWORD getWindowsProtectionFlags(<span class="keywordtype">unsigned</span> <a class="code" href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a>) {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordflow">switch</span> (Flags) {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="comment">// Contrary to what you might expect, the Windows page protection flags</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// are not a bitwise combination of RWX values</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">llvm::sys::Memory::MF_READ</a>:</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">return</span> PAGE_READONLY;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">llvm::sys::Memory::MF_WRITE</a>:</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// Note: PAGE_WRITE is not supported by VirtualProtect</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keywordflow">return</span> PAGE_READWRITE;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">llvm::sys::Memory::MF_READ</a>|<a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">llvm::sys::Memory::MF_WRITE</a>:</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">return</span> PAGE_READWRITE;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">llvm::sys::Memory::MF_READ</a>|<a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">llvm::sys::Memory::MF_EXEC</a>:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> PAGE_EXECUTE_READ;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">llvm::sys::Memory::MF_READ</a> |</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;         <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">llvm::sys::Memory::MF_WRITE</a> |</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;         <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">llvm::sys::Memory::MF_EXEC</a>:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">return</span> PAGE_EXECUTE_READWRITE;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">llvm::sys::Memory::MF_EXEC</a>:</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">return</span> PAGE_EXECUTE;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Illegal memory protection flag specified!&quot;</span>);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// Provide a default return value as required by some compilers.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">return</span> PAGE_NOACCESS;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">size_t</span> getAllocationGranularity() {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  SYSTEM_INFO  Info;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  ::GetSystemInfo(&amp;Info);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (Info.dwPageSize &gt; Info.dwAllocationGranularity)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> Info.dwPageSize;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> Info.dwAllocationGranularity;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">namespace </span>sys {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//=== WARNING: Implementation here must contain only Win32 specific code</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//===          and must not be UNIX code</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;MemoryBlock <a class="code" href="classllvm_1_1sys_1_1Memory.html#ae349d468ba5eb1c52e8fa72877337e8a">Memory::allocateMappedMemory</a>(<span class="keywordtype">size_t</span> NumBytes,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                         <span class="keyword">const</span> MemoryBlock *<span class="keyword">const</span> NearBlock,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                         <span class="keywordtype">unsigned</span> Flags,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                         error_code &amp;EC) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  EC = <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> (NumBytes == 0)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> MemoryBlock();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// While we&#39;d be happy to allocate single pages, the Windows allocation</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// granularity may be larger than a single page (in practice, it is 64K)</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// so mapping less than that will create an unreachable fragment of memory.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> Granularity = getAllocationGranularity();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> NumBlocks = (NumBytes+Granularity-1)/Granularity;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  uintptr_t Start = NearBlock ? <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(NearBlock-&gt;base()) +</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                NearBlock-&gt;size()</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                           : 0;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// If the requested address is not aligned to the allocation granularity,</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// round up to get beyond NearBlock. VirtualAlloc would have rounded down.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (Start &amp;&amp; Start % Granularity != 0)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    Start += Granularity - Start % Granularity;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  DWORD Protect = getWindowsProtectionFlags(Flags);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">void</span> *PA = ::VirtualAlloc(reinterpret_cast&lt;void*&gt;(Start),</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                            NumBlocks*Granularity,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                            MEM_RESERVE | MEM_COMMIT, Protect);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (PA == NULL) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (NearBlock) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="comment">// Try again without the NearBlock hint</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#ae349d468ba5eb1c52e8fa72877337e8a">allocateMappedMemory</a>(NumBytes, NULL, Flags, EC);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    EC = error_code(::GetLastError(), <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> MemoryBlock();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  MemoryBlock Result;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  Result.Address = PA;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  Result.Size = NumBlocks*Granularity;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">MF_EXEC</a>)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">Memory::InvalidateInstructionCache</a>(Result.Address, Result.Size);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;error_code <a class="code" href="classllvm_1_1sys_1_1Memory.html#afd291382177a42501912689057b454e6">Memory::releaseMappedMemory</a>(MemoryBlock &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (M.Address == 0 || M.Size == 0)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (!VirtualFree(M.Address, 0, MEM_RELEASE))</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> error_code(::GetLastError(), <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  M.Address = 0;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  M.Size = 0;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;error_code <a class="code" href="classllvm_1_1sys_1_1Memory.html#a48003fdbe4bfdd8f283e7c29c82aebb1">Memory::protectMappedMemory</a>(<span class="keyword">const</span> MemoryBlock &amp;M,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                       <span class="keywordtype">unsigned</span> Flags) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (M.Address == 0 || M.Size == 0)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  DWORD Protect = getWindowsProtectionFlags(Flags);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  DWORD OldFlags;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (!VirtualProtect(M.Address, M.Size, Protect, &amp;OldFlags))</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> error_code(::GetLastError(), <a class="code" href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">system_category</a>());</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (Flags &amp; <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">MF_EXEC</a>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">Memory::InvalidateInstructionCache</a>(M.Address, M.Size);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/// InvalidateInstructionCache - Before the JIT can run a block of code</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/// that has been emitted it must invalidate the instruction cache on some</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/// platforms.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">Memory::InvalidateInstructionCache</a>(</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Len) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  FlushInstructionCache(GetCurrentProcess(), Addr, Len);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;MemoryBlock <a class="code" href="classllvm_1_1sys_1_1Memory.html#ae0f15a67f97c9432ee4170820360aab5">Memory::AllocateRWX</a>(<span class="keywordtype">size_t</span> NumBytes,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                <span class="keyword">const</span> MemoryBlock *NearBlock,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                std::string *ErrMsg) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  MemoryBlock MB;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  error_code EC;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  MB = <a class="code" href="classllvm_1_1sys_1_1Memory.html#ae349d468ba5eb1c52e8fa72877337e8a">allocateMappedMemory</a>(NumBytes, NearBlock,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                            <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">MF_READ</a>|<a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">MF_WRITE</a>|<a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">MF_EXEC</a>, EC);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> (EC != <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>() &amp;&amp; ErrMsg) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="Windows_8h.html#a981525300237361ea7940a9e4ece8d6a">MakeErrMsg</a>(ErrMsg, EC.message());</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">return</span> MB;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#ae7de707667a8c7de391ab5cab789b5eb">Memory::ReleaseRWX</a>(MemoryBlock &amp;M, std::string *ErrMsg) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  error_code EC = <a class="code" href="classllvm_1_1sys_1_1Memory.html#afd291382177a42501912689057b454e6">releaseMappedMemory</a>(M);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (EC == <a class="code" href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">error_code::success</a>())</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="Windows_8h.html#a981525300237361ea7940a9e4ece8d6a">MakeErrMsg</a>(ErrMsg, EC.message());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">static</span> DWORD getProtection(<span class="keyword">const</span> <span class="keywordtype">void</span> *addr) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  MEMORY_BASIC_INFORMATION <a class="code" href="LazyValueInfo_8cpp.html#ad7f64bcc544dcefb2e068282af1c549d">info</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(info) == ::VirtualQuery(addr, &amp;info, <span class="keyword">sizeof</span>(info))) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> info.Protect;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a9dee85d92a958b5b82049e9ed3afbd20">Memory::setWritable</a>(MemoryBlock &amp;M, std::string *ErrMsg) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1sys_1_1Memory.html#af1a0518731f5ae975e8223c404752e8d">setRangeWritable</a>(M.Address, M.Size)) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Windows_8h.html#a981525300237361ea7940a9e4ece8d6a">MakeErrMsg</a>(ErrMsg, <span class="stringliteral">&quot;Cannot set memory to writeable: &quot;</span>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#acf4d418979406a99e7230468647b4035">Memory::setExecutable</a>(MemoryBlock &amp;M, std::string *ErrMsg) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1sys_1_1Memory.html#a398a20c2c6c86b43e3982b120bb454eb">setRangeExecutable</a>(M.Address, M.Size)) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Windows_8h.html#a981525300237361ea7940a9e4ece8d6a">MakeErrMsg</a>(ErrMsg, <span class="stringliteral">&quot;Cannot set memory to executable: &quot;</span>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#af1a0518731f5ae975e8223c404752e8d">Memory::setRangeWritable</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  DWORD prot = getProtection(Addr);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (!prot)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (prot == PAGE_EXECUTE || prot == PAGE_EXECUTE_READ) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    prot = PAGE_EXECUTE_READWRITE;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prot == PAGE_NOACCESS || prot == PAGE_READONLY) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    prot = PAGE_READWRITE;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  DWORD oldProt;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">Memory::InvalidateInstructionCache</a>(Addr, Size);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  return ::VirtualProtect(const_cast&lt;LPVOID&gt;(Addr), Size, prot, &amp;oldProt)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            == <a class="code" href="X86DisassemblerDecoder_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a398a20c2c6c86b43e3982b120bb454eb">Memory::setRangeExecutable</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  DWORD prot = getProtection(Addr);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (!prot)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">if</span> (prot == PAGE_NOACCESS) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    prot = PAGE_EXECUTE;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prot == PAGE_READONLY) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    prot = PAGE_EXECUTE_READ;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prot == PAGE_READWRITE) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    prot = PAGE_EXECUTE_READWRITE;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  DWORD oldProt;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">Memory::InvalidateInstructionCache</a>(Addr, Size);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  return ::VirtualProtect(const_cast&lt;LPVOID&gt;(Addr), Size, prot, &amp;oldProt)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            == <a class="code" href="X86DisassemblerDecoder_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;} <span class="comment">// namespace sys</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;} <span class="comment">// namespace llvm</span></div><div class="ttc" id="namespaceSIInstrFlags_html_a607b4b0952924970b77a9c6b42898b54"><div class="ttname"><a href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">SIInstrFlags::Flags</a></div><div class="ttdeci">Flags</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00140">SIInstrInfo.h:140</a></div></div>
<div class="ttc" id="namespacellvm_html_a1e6576716f1c75095457eff6bca7239a"><div class="ttname"><a href="namespacellvm.html#a1e6576716f1c75095457eff6bca7239a">llvm::system_category</a></div><div class="ttdeci">const error_category &amp; system_category()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8cpp_source.html#l00094">system_error.cpp:94</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_af1a0518731f5ae975e8223c404752e8d"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#af1a0518731f5ae975e8223c404752e8d">llvm::sys::Memory::setRangeWritable</a></div><div class="ttdeci">static bool setRangeWritable(const void *Addr, size_t Size)</div></div>
<div class="ttc" id="LazyValueInfo_8cpp_html_ad7f64bcc544dcefb2e068282af1c549d"><div class="ttname"><a href="LazyValueInfo_8cpp.html#ad7f64bcc544dcefb2e068282af1c549d">info</a></div><div class="ttdeci">lazy value info</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l00041">LazyValueInfo.cpp:41</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a5cfd4d2a8227a3f9ca0667f42f05f20b"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a5cfd4d2a8227a3f9ca0667f42f05f20b">llvm::sys::Memory::InvalidateInstructionCache</a></div><div class="ttdeci">static void InvalidateInstructionCache(const void *Addr, size_t Len)</div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">llvm::sys::Memory::MF_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00049">Memory.h:49</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_ae7de707667a8c7de391ab5cab789b5eb"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#ae7de707667a8c7de391ab5cab789b5eb">llvm::sys::Memory::ReleaseRWX</a></div><div class="ttdeci">static bool ReleaseRWX(MemoryBlock &amp;block, std::string *ErrMsg=0)</div><div class="ttdoc">Release Read/Write/Execute memory. </div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_acf4d418979406a99e7230468647b4035"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#acf4d418979406a99e7230468647b4035">llvm::sys::Memory::setExecutable</a></div><div class="ttdeci">static bool setExecutable(MemoryBlock &amp;M, std::string *ErrMsg=0)</div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a48003fdbe4bfdd8f283e7c29c82aebb1"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a48003fdbe4bfdd8f283e7c29c82aebb1">llvm::sys::Memory::protectMappedMemory</a></div><div class="ttdeci">static error_code protectMappedMemory(const MemoryBlock &amp;Block, unsigned Flags)</div><div class="ttdoc">Set memory protection state. </div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a398a20c2c6c86b43e3982b120bb454eb"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a398a20c2c6c86b43e3982b120bb454eb">llvm::sys::Memory::setRangeExecutable</a></div><div class="ttdeci">static bool setRangeExecutable(const void *Addr, size_t Size)</div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">llvm::sys::Memory::MF_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00048">Memory.h:48</a></div></div>
<div class="ttc" id="Windows_8h_html"><div class="ttname"><a href="Windows_8h.html">Windows.h</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_ae0f15a67f97c9432ee4170820360aab5"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#ae0f15a67f97c9432ee4170820360aab5">llvm::sys::Memory::AllocateRWX</a></div><div class="ttdeci">static MemoryBlock AllocateRWX(size_t NumBytes, const MemoryBlock *NearBlock, std::string *ErrMsg=0)</div><div class="ttdoc">Allocate Read/Write/Execute memory. </div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a9dee85d92a958b5b82049e9ed3afbd20"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a9dee85d92a958b5b82049e9ed3afbd20">llvm::sys::Memory::setWritable</a></div><div class="ttdeci">static bool setWritable(MemoryBlock &amp;M, std::string *ErrMsg=0)</div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_ae349d468ba5eb1c52e8fa72877337e8a"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#ae349d468ba5eb1c52e8fa72877337e8a">llvm::sys::Memory::allocateMappedMemory</a></div><div class="ttdeci">static MemoryBlock allocateMappedMemory(size_t NumBytes, const MemoryBlock *const NearBlock, unsigned Flags, error_code &amp;EC)</div><div class="ttdoc">Allocate mapped memory. </div></div>
<div class="ttc" id="X86DisassemblerDecoder_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="X86DisassemblerDecoder_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8c_source.html#l00025">X86DisassemblerDecoder.c:25</a></div></div>
<div class="ttc" id="Windows_8h_html_a981525300237361ea7940a9e4ece8d6a"><div class="ttname"><a href="Windows_8h.html#a981525300237361ea7940a9e4ece8d6a">MakeErrMsg</a></div><div class="ttdeci">bool MakeErrMsg(std::string *ErrMsg, const std::string &amp;prefix)</div><div class="ttdef"><b>Definition:</b> <a href="Windows_8h_source.html#l00038">Windows.h:38</a></div></div>
<div class="ttc" id="Process_8h_html"><div class="ttname"><a href="Process_8h.html">Process.h</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html_ab1dc74db82ce9421e6c5f5f4df574aa8"><div class="ttname"><a href="classllvm_1_1error__code.html#ab1dc74db82ce9421e6c5f5f4df574aa8">llvm::error_code::success</a></div><div class="ttdeci">static error_code success()</div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00732">system_error.h:732</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">llvm::sys::Memory::MF_EXEC</a></div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00050">Memory.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_afd291382177a42501912689057b454e6"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#afd291382177a42501912689057b454e6">llvm::sys::Memory::releaseMappedMemory</a></div><div class="ttdeci">static error_code releaseMappedMemory(MemoryBlock &amp;Block)</div><div class="ttdoc">Release mapped memory. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:04 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
