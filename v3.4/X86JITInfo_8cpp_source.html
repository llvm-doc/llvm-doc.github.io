<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: X86JITInfo.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('X86JITInfo_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">X86JITInfo.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="X86JITInfo_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- X86JITInfo.cpp - Implement the JIT interfaces for the X86 target --===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the JIT interfaces for the X86 target.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   14</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;jit&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86JITInfo_8h.html">X86JITInfo.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86Relocations_8h.html">X86Relocations.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86Subtarget_8h.html">X86Subtarget.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86TargetMachine_8h.html">X86TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Valgrind_8h.html">llvm/Support/Valgrind.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// Determine the platform we&#39;re running on</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#if defined (__x86_64__) || defined (_M_AMD64) || defined (_M_X64)</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"># define X86_64_JIT</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#elif defined(__i386__) || defined(i386) || defined(_M_IX86)</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor"># define X86_32_JIT</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#ab9e2841fba0750710130df4a90ddbcae">   34</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86JITInfo.html#ab9e2841fba0750710130df4a90ddbcae">X86JITInfo::replaceMachineCodeForFunction</a>(<span class="keywordtype">void</span> *Old, <span class="keywordtype">void</span> *New) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *OldByte = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)Old;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  *OldByte++ = 0xE9;                <span class="comment">// Emit JMP opcode.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">unsigned</span> *OldWord = (<span class="keywordtype">unsigned</span> *)OldByte;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordtype">unsigned</span> NewAddr = (<a class="code" href="classintptr__t.html">intptr_t</a>)New;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">unsigned</span> OldAddr = (<a class="code" href="classintptr__t.html">intptr_t</a>)OldWord;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  *OldWord = NewAddr - OldAddr - 4; <span class="comment">// Emit PC-relative addr of New code.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// X86 doesn&#39;t need to invalidate the processor cache, so just invalidate</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// Valgrind&#39;s cache directly.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="namespacellvm_1_1sys.html#afa3960ac5c365a344036b4c068477468">sys::ValgrindDiscardTranslations</a>(Old, 5);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/// JITCompilerFunction - This contains the address of the JIT function used to</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// compile a function lazily.</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#ac33b1cf411a96c6bebaa8979def36977">   50</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1TargetJITInfo.html#acad81796e985b23da982e3aae050e224">TargetJITInfo::JITCompilerFn</a> <a class="code" href="X86JITInfo_8cpp.html#ac33b1cf411a96c6bebaa8979def36977">JITCompilerFunction</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Get the ASMPREFIX for the current host.  This is often &#39;_&#39;.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifndef __USER_LABEL_PREFIX__</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#aff6bf0ff0fa3b5cbd23a8ae1131c87a9">   54</a></span>&#160;<span class="preprocessor">#define __USER_LABEL_PREFIX__</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a963f41eb342a309605fd3b11f767b1c5">   56</a></span>&#160;<span class="preprocessor">#define GETASMPREFIX2(X) #X</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a40ce3964d0cd83a3787467742811562a">   57</a></span>&#160;<span class="preprocessor">#define GETASMPREFIX(X) GETASMPREFIX2(X)</span></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">   58</a></span>&#160;<span class="preprocessor">#define ASMPREFIX GETASMPREFIX(__USER_LABEL_PREFIX__)</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// For ELF targets, use a .size and .type directive, to let tools</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// know the extent of functions defined in assembler.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#if defined(__ELF__)</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor"># define SIZE(sym) &quot;.size &quot; #sym &quot;, . - &quot; #sym &quot;\n&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"># define TYPE_FUNCTION(sym) &quot;.type &quot; #sym &quot;, @function\n&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a00663503686aee88c9538956d2e85f5f">   66</a></span>&#160;<span class="preprocessor"># define SIZE(sym)</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#aeb5ec077ad1ac83230626a91baa6bf33">   67</a></span>&#160;<span class="preprocessor"># define TYPE_FUNCTION(sym)</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// Provide a convenient way for disabling usage of CFI directives.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// This is needed for old/broken assemblers (for example, gas on</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// Darwin is pretty old and doesn&#39;t support these directives)</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#if defined(__APPLE__)</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor"># define CFI(x)</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// FIXME: Disable this until we really want to use it. Also, we will</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//        need to add some workarounds for compilers, which support</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//        only subset of these directives.</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">   79</a></span>&#160;<span class="preprocessor"># define CFI(x)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// Provide a wrapper for LLVMX86CompilationCallback2 that saves non-traditional</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// callee saved registers, for the fastcc calling convention.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#if defined(X86_64_JIT)</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor"># ifndef _MSC_VER</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// No need to save EAX/EDX for X86-64.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">asm</span>(</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="stringliteral">&quot;.text\n&quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="stringliteral">&quot;.align 8\n&quot;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="stringliteral">&quot;.globl &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback\n&quot;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#aeb5ec077ad1ac83230626a91baa6bf33">TYPE_FUNCTION</a>(X86CompilationCallback)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback:\n&quot;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_startproc\n&quot;</span>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Save RBP</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="stringliteral">&quot;pushq   %rbp\n&quot;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_offset 16\n&quot;</span>)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_offset %rbp, -16\n&quot;</span>)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Save RSP</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="stringliteral">&quot;movq    %rsp, %rbp\n&quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register %rbp\n&quot;</span>)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Save all int arg registers</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="stringliteral">&quot;pushq   %rdi\n&quot;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %rdi, 0\n&quot;</span>)</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="stringliteral">&quot;pushq   %rsi\n&quot;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %rsi, 8\n&quot;</span>)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="stringliteral">&quot;pushq   %rdx\n&quot;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %rdx, 16\n&quot;</span>)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="stringliteral">&quot;pushq   %rcx\n&quot;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %rcx, 24\n&quot;</span>)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="stringliteral">&quot;pushq   %r8\n&quot;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %r8, 32\n&quot;</span>)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="stringliteral">&quot;pushq   %r9\n&quot;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %r9, 40\n&quot;</span>)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// Align stack on 16-byte boundary. ESP might not be properly aligned</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// (8 byte) if this is called from an indirect stub.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="stringliteral">&quot;andq    $-16, %rsp\n&quot;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Save all XMM arg registers</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="stringliteral">&quot;subq    $128, %rsp\n&quot;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm0, (%rsp)\n&quot;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm1, 16(%rsp)\n&quot;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm2, 32(%rsp)\n&quot;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm3, 48(%rsp)\n&quot;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm4, 64(%rsp)\n&quot;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm5, 80(%rsp)\n&quot;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm6, 96(%rsp)\n&quot;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm7, 112(%rsp)\n&quot;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// JIT callee</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#if defined(_WIN64) || defined(__CYGWIN__)</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="stringliteral">&quot;subq    $32, %rsp\n&quot;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="stringliteral">&quot;movq    %rbp, %rcx\n&quot;</span>    <span class="comment">// Pass prev frame and return address</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="stringliteral">&quot;movq    8(%rbp), %rdx\n&quot;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="stringliteral">&quot;call    &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;LLVMX86CompilationCallback2\n&quot;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="stringliteral">&quot;addq    $32, %rsp\n&quot;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="stringliteral">&quot;movq    %rbp, %rdi\n&quot;</span>    <span class="comment">// Pass prev frame and return address</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="stringliteral">&quot;movq    8(%rbp), %rsi\n&quot;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="stringliteral">&quot;call    &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;LLVMX86CompilationCallback2\n&quot;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// Restore all XMM arg registers</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="stringliteral">&quot;movaps  112(%rsp), %xmm7\n&quot;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="stringliteral">&quot;movaps  96(%rsp), %xmm6\n&quot;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="stringliteral">&quot;movaps  80(%rsp), %xmm5\n&quot;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="stringliteral">&quot;movaps  64(%rsp), %xmm4\n&quot;</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="stringliteral">&quot;movaps  48(%rsp), %xmm3\n&quot;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="stringliteral">&quot;movaps  32(%rsp), %xmm2\n&quot;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="stringliteral">&quot;movaps  16(%rsp), %xmm1\n&quot;</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="stringliteral">&quot;movaps  (%rsp), %xmm0\n&quot;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// Restore RSP</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="stringliteral">&quot;movq    %rbp, %rsp\n&quot;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register %rsp\n&quot;</span>)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Restore all int arg registers</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="stringliteral">&quot;subq    $48, %rsp\n&quot;</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset 48\n&quot;</span>)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="stringliteral">&quot;popq    %r9\n&quot;</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %r9\n&quot;</span>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="stringliteral">&quot;popq    %r8\n&quot;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %r8\n&quot;</span>)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="stringliteral">&quot;popq    %rcx\n&quot;</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %rcx\n&quot;</span>)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="stringliteral">&quot;popq    %rdx\n&quot;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %rdx\n&quot;</span>)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="stringliteral">&quot;popq    %rsi\n&quot;</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %rsi\n&quot;</span>)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="stringliteral">&quot;popq    %rdi\n&quot;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %rdi\n&quot;</span>)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// Restore RBP</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="stringliteral">&quot;popq    %rbp\n&quot;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -8\n&quot;</span>)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %rbp\n&quot;</span>)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="stringliteral">&quot;ret\n&quot;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_endproc\n&quot;</span>)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a00663503686aee88c9538956d2e85f5f">SIZE</a>(X86CompilationCallback)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  );</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor"># else</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// No inline assembler support on this platform. The routine is in external</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// file.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#elif defined (X86_32_JIT)</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor"># ifndef _MSC_VER</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keyword">asm</span>(</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="stringliteral">&quot;.text\n&quot;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="stringliteral">&quot;.align 8\n&quot;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="stringliteral">&quot;.globl &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback\n&quot;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#aeb5ec077ad1ac83230626a91baa6bf33">TYPE_FUNCTION</a>(X86CompilationCallback)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback:\n&quot;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_startproc\n&quot;</span>)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="stringliteral">&quot;pushl   %ebp\n&quot;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_offset 8\n&quot;</span>)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_offset %ebp, -8\n&quot;</span>)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="stringliteral">&quot;movl    %esp, %ebp\n&quot;</span>    <span class="comment">// Standard prologue</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register %ebp\n&quot;</span>)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="stringliteral">&quot;pushl   %eax\n&quot;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %eax, 0\n&quot;</span>)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="stringliteral">&quot;pushl   %edx\n&quot;</span>          <span class="comment">// Save EAX/EDX/ECX</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %edx, 4\n&quot;</span>)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="stringliteral">&quot;pushl   %ecx\n&quot;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %ecx, 8\n&quot;</span>)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#  if defined(__APPLE__)</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="stringliteral">&quot;andl    $-16, %esp\n&quot;</span>    <span class="comment">// Align ESP on 16-byte boundary</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#  endif</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="stringliteral">&quot;subl    $16, %esp\n&quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="stringliteral">&quot;movl    4(%ebp), %eax\n&quot;</span> <span class="comment">// Pass prev frame and return address</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="stringliteral">&quot;movl    %eax, 4(%esp)\n&quot;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="stringliteral">&quot;movl    %ebp, (%esp)\n&quot;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="stringliteral">&quot;call    &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;LLVMX86CompilationCallback2\n&quot;</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="stringliteral">&quot;movl    %ebp, %esp\n&quot;</span>    <span class="comment">// Restore ESP</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register %esp\n&quot;</span>)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="stringliteral">&quot;subl    $12, %esp\n&quot;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset 12\n&quot;</span>)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="stringliteral">&quot;popl    %ecx\n&quot;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %ecx\n&quot;</span>)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="stringliteral">&quot;popl    %edx\n&quot;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %edx\n&quot;</span>)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="stringliteral">&quot;popl    %eax\n&quot;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %eax\n&quot;</span>)</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="stringliteral">&quot;popl    %ebp\n&quot;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %ebp\n&quot;</span>)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="stringliteral">&quot;ret\n&quot;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_endproc\n&quot;</span>)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a00663503686aee88c9538956d2e85f5f">SIZE</a>(X86CompilationCallback)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  );</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Same as X86CompilationCallback but also saves XMM argument registers.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordtype">void</span> X86CompilationCallback_SSE(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keyword">asm</span>(</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="stringliteral">&quot;.text\n&quot;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="stringliteral">&quot;.align 8\n&quot;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="stringliteral">&quot;.globl &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback_SSE\n&quot;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#aeb5ec077ad1ac83230626a91baa6bf33">TYPE_FUNCTION</a>(X86CompilationCallback_SSE)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;X86CompilationCallback_SSE:\n&quot;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_startproc\n&quot;</span>)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="stringliteral">&quot;pushl   %ebp\n&quot;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_offset 8\n&quot;</span>)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_offset %ebp, -8\n&quot;</span>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="stringliteral">&quot;movl    %esp, %ebp\n&quot;</span>    <span class="comment">// Standard prologue</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register %ebp\n&quot;</span>)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="stringliteral">&quot;pushl   %eax\n&quot;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %eax, 0\n&quot;</span>)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="stringliteral">&quot;pushl   %edx\n&quot;</span>          <span class="comment">// Save EAX/EDX/ECX</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %edx, 4\n&quot;</span>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="stringliteral">&quot;pushl   %ecx\n&quot;</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_rel_offset %ecx, 8\n&quot;</span>)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="stringliteral">&quot;andl    $-16, %esp\n&quot;</span>    <span class="comment">// Align ESP on 16-byte boundary</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Save all XMM arg registers</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="stringliteral">&quot;subl    $64, %esp\n&quot;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// FIXME: provide frame move information for xmm registers.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// This can be tricky, because CFA register is ebp (unaligned)</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// and we need to produce offsets relative to it.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm0, (%esp)\n&quot;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm1, 16(%esp)\n&quot;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm2, 32(%esp)\n&quot;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="stringliteral">&quot;movaps  %xmm3, 48(%esp)\n&quot;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="stringliteral">&quot;subl    $16, %esp\n&quot;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="stringliteral">&quot;movl    4(%ebp), %eax\n&quot;</span> <span class="comment">// Pass prev frame and return address</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="stringliteral">&quot;movl    %eax, 4(%esp)\n&quot;</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="stringliteral">&quot;movl    %ebp, (%esp)\n&quot;</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="stringliteral">&quot;call    &quot;</span> <a class="code" href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a> <span class="stringliteral">&quot;LLVMX86CompilationCallback2\n&quot;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="stringliteral">&quot;addl    $16, %esp\n&quot;</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="stringliteral">&quot;movaps  48(%esp), %xmm3\n&quot;</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %xmm3\n&quot;</span>)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="stringliteral">&quot;movaps  32(%esp), %xmm2\n&quot;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %xmm2\n&quot;</span>)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="stringliteral">&quot;movaps  16(%esp), %xmm1\n&quot;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %xmm1\n&quot;</span>)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="stringliteral">&quot;movaps  (%esp), %xmm0\n&quot;</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %xmm0\n&quot;</span>)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="stringliteral">&quot;movl    %ebp, %esp\n&quot;</span>    <span class="comment">// Restore ESP</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_def_cfa_register esp\n&quot;</span>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="stringliteral">&quot;subl    $12, %esp\n&quot;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset 12\n&quot;</span>)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="stringliteral">&quot;popl    %ecx\n&quot;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %ecx\n&quot;</span>)</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="stringliteral">&quot;popl    %edx\n&quot;</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %edx\n&quot;</span>)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="stringliteral">&quot;popl    %eax\n&quot;</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %eax\n&quot;</span>)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="stringliteral">&quot;popl    %ebp\n&quot;</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_adjust_cfa_offset -4\n&quot;</span>)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_restore %ebp\n&quot;</span>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="stringliteral">&quot;ret\n&quot;</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a>(<span class="stringliteral">&quot;.cfi_endproc\n&quot;</span>)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="X86JITInfo_8cpp.html#a00663503686aee88c9538956d2e85f5f">SIZE</a>(X86CompilationCallback_SSE)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  );</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor"># else</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#a82a00e30a8d55a5e10eb79c0ed7d4e1b">LLVMX86CompilationCallback2</a>(<a class="code" href="classintptr__t.html">intptr_t</a> *StackPtr, <a class="code" href="classintptr__t.html">intptr_t</a> RetAddr);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  _declspec(naked) <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    __asm {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      push  <a class="code" href="Target_2X86_2README_8txt.html#a73e5518e0889fcbe7d169b940c506e71">ebp</a></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a>   <a class="code" href="Target_2X86_2README_8txt.html#a73e5518e0889fcbe7d169b940c506e71">ebp</a>, <a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      push  <a class="code" href="Target_2README_8txt.html#a7883a95866b9432ce4d83316aa287800">eax</a></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      push  <a class="code" href="Target_2X86_2README_8txt.html#aa512e506e7963d5835ab8444ba0ee506">edx</a></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      push  <a class="code" href="Target_2X86_2README_8txt.html#a112998c5cf52233b271ac576b2ca1184">ecx</a></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      and   <a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a>, -16</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="Target_2X86_2README_8txt.html#a47047da86e359f28033bcf83e4648793">sub</a>   <a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a>, 16</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a>   <a class="code" href="Target_2README_8txt.html#a7883a95866b9432ce4d83316aa287800">eax</a>, dword ptr [ebp+4]</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a>   dword ptr [esp+4], eax</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a>   dword ptr [<a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a>], ebp</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="Target_2ARM_2README_8txt.html#a09f6d95681fd43c904d1164c81a5141d">call</a>  LLVMX86CompilationCallback2</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a>   <a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a>, ebp</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <a class="code" href="Target_2X86_2README_8txt.html#a47047da86e359f28033bcf83e4648793">sub</a>   <a class="code" href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a>, 12</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      pop   <a class="code" href="Target_2X86_2README_8txt.html#a112998c5cf52233b271ac576b2ca1184">ecx</a></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      pop   <a class="code" href="Target_2X86_2README_8txt.html#aa512e506e7963d5835ab8444ba0ee506">edx</a></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      pop   eax</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      pop   ebp</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor"># endif // _MSC_VER</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#else // Not an i386 host</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">  331</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>() {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Cannot call X86CompilationCallback() on a non-x86 arch!&quot;</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// This is the target-specific function invoked by the</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// function stub when we did not know the real target of a call.  This function</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/// must locate the start of the stub or call site and pass it into the JIT</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">/// compiler function.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a> <span class="comment">// Referenced from inline asm.</span></div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#a82a00e30a8d55a5e10eb79c0ed7d4e1b">  343</a></span>&#160;<a class="code" href="Compiler_8h.html#a662e21bcce5c9c71b6cc511fa04f900f">LLVM_LIBRARY_VISIBILITY</a> <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#a82a00e30a8d55a5e10eb79c0ed7d4e1b">LLVMX86CompilationCallback2</a>(<a class="code" href="classintptr__t.html">intptr_t</a> *StackPtr,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                                         <a class="code" href="classintptr__t.html">intptr_t</a> RetAddr) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classintptr__t.html">intptr_t</a> *RetAddrLoc = &amp;StackPtr[1];</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// We are reading raw stack data here. Tell MemorySanitizer that it is</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// sufficiently initialized.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="Compiler_8h.html#a7b6ebda5fec619759c0522722503be67">__msan_unpoison</a>(RetAddrLoc, <span class="keyword">sizeof</span>(*RetAddrLoc));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  assert(*RetAddrLoc == RetAddr &amp;&amp;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <span class="stringliteral">&quot;Could not find return address on the stack!&quot;</span>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// It&#39;s a stub if there is an interrupt marker after the call.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">bool</span> isStub = ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[0] == 0xCE;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// The call instruction should have pushed the return value onto the stack...</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  RetAddr--;     <span class="comment">// Backtrack to the reference itself...</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  RetAddr -= 4;  <span class="comment">// Backtrack to the reference itself...</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;In callback! Addr=&quot;</span> &lt;&lt; (<span class="keywordtype">void</span>*)RetAddr</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; ESP=&quot;</span> &lt;&lt; (<span class="keywordtype">void</span>*)StackPtr</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;: Resolving call to function: &quot;</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;               &lt;&lt; TheVM-&gt;getFunctionReferencedName((<span class="keywordtype">void</span>*)RetAddr) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Sanity check to make sure this really is a call instruction.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  assert(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[-2] == 0x41 &amp;&amp;<span class="stringliteral">&quot;Not a call instr!&quot;</span>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  assert(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[-1] == 0xFF &amp;&amp;<span class="stringliteral">&quot;Not a call instr!&quot;</span>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  assert(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[-1] == 0xE8 &amp;&amp;<span class="stringliteral">&quot;Not a call instr!&quot;</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classintptr__t.html">intptr_t</a> NewVal = (<a class="code" href="classintptr__t.html">intptr_t</a>)<a class="code" href="X86JITInfo_8cpp.html#ac33b1cf411a96c6bebaa8979def36977">JITCompilerFunction</a>((<span class="keywordtype">void</span>*)RetAddr);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Rewrite the call target... so that we don&#39;t end up here every time we</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// execute the call.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  assert(isStub &amp;&amp;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;         <span class="stringliteral">&quot;X86-64 doesn&#39;t support rewriting non-stub lazy compilation calls:&quot;</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         <span class="stringliteral">&quot; the call instruction varies too much.&quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  *(<a class="code" href="classintptr__t.html">intptr_t</a> *)RetAddr = (<a class="code" href="classintptr__t.html">intptr_t</a>)(NewVal-RetAddr-4);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span> (isStub) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// If this is a stub, rewrite the call into an unconditional branch</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// instruction so that two return addresses are not pushed onto the stack</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// when the requested function finally gets called.  This also makes the</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// 0xCE byte (interrupt) dead, so the marker doesn&#39;t effect anything.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// If the target address is within 32-bit range of the stub, use a</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// PC-relative branch instead of loading the actual address.  (This is</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// considerably shorter than the 64-bit immediate load already there.)</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// We assume here intptr_t is 64 bits.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classintptr__t.html">intptr_t</a> diff = NewVal-RetAddr+7;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (diff &gt;= -2147483648LL &amp;&amp; diff &lt;= 2147483647LL) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      *(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)(RetAddr-0xc) = 0xE9;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      *(<a class="code" href="classintptr__t.html">intptr_t</a> *)(RetAddr-0xb) = diff &amp; 0xffffffff;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      *(<a class="code" href="classintptr__t.html">intptr_t</a> *)(RetAddr - 0xa) = NewVal;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[0] = (2 | (4 &lt;&lt; 3) | (3 &lt;&lt; 6));</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="namespacellvm_1_1sys.html#afa3960ac5c365a344036b4c068477468">sys::ValgrindDiscardTranslations</a>((<span class="keywordtype">void</span>*)(RetAddr-0xc), 0xd);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)RetAddr)[-1] = 0xE9;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="namespacellvm_1_1sys.html#afa3960ac5c365a344036b4c068477468">sys::ValgrindDiscardTranslations</a>((<span class="keywordtype">void</span>*)(RetAddr-1), 5);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// Change the return address to reexecute the call instruction...</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  *RetAddrLoc -= 0xd;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  *RetAddrLoc -= 5;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<a class="code" href="classllvm_1_1TargetJITInfo.html#a956ee0dad17644c8e2bfbfb7183ecbf1">TargetJITInfo::LazyResolverFn</a></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#a5647cc5a910b3d960a4ff5c5e1d5f32e">  424</a></span>&#160;<a class="code" href="classllvm_1_1X86JITInfo.html#a5647cc5a910b3d960a4ff5c5e1d5f32e">X86JITInfo::getLazyResolverFunction</a>(<a class="code" href="classllvm_1_1TargetJITInfo.html#acad81796e985b23da982e3aae050e224">JITCompilerFn</a> <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="Valgrind_8h.html#ae7ae7168870d6f719670bf0f47b9ade5">TsanIgnoreWritesBegin</a>();</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="X86JITInfo_8cpp.html#ac33b1cf411a96c6bebaa8979def36977">JITCompilerFunction</a> = <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="Valgrind_8h.html#a6d95fe36240cded45e8889c2491a78f5">TsanIgnoreWritesEnd</a>();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#if defined (X86_32_JIT) &amp;&amp; !defined (_MSC_VER)</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a6b13ba290b25a5a9a392c5bb6adf898b">hasSSE1</a>())</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> X86CompilationCallback_SSE;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#abffcfc890ed4f30a9ccbd036cf58ee21">  437</a></span>&#160;<a class="code" href="classllvm_1_1X86JITInfo.html#abffcfc890ed4f30a9ccbd036cf58ee21">X86JITInfo::X86JITInfo</a>(<a class="code" href="classllvm_1_1X86TargetMachine.html">X86TargetMachine</a> &amp;tm) : TM(tm) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  Subtarget = &amp;TM.<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classllvm_1_1TargetJITInfo.html#abd7ada082ff5e8e75380a44f52c89afe">useGOT</a> = 0;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  TLSOffset = 0;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#a97b44190ae24e25aa2e8ffe3727be631">  443</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1X86JITInfo.html#a97b44190ae24e25aa2e8ffe3727be631">X86JITInfo::emitGlobalValueIndirectSym</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a>* GV, <span class="keywordtype">void</span> *ptr,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                             <a class="code" href="classllvm_1_1JITCodeEmitter.html">JITCodeEmitter</a> &amp;JCE) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Alignment = 8;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  uint8_t Buffer[8];</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  uint8_t *Cur = Buffer;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="classllvm_1_1MachineCodeEmitter.html#ad2a7fdc61bde79ca7ad61241c4a66b72">MachineCodeEmitter::emitWordLEInto</a>(Cur, (<span class="keywordtype">unsigned</span>)(<a class="code" href="classintptr__t.html">intptr_t</a>)ptr);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="classllvm_1_1MachineCodeEmitter.html#ad2a7fdc61bde79ca7ad61241c4a66b72">MachineCodeEmitter::emitWordLEInto</a>(Cur, (<span class="keywordtype">unsigned</span>)(((<a class="code" href="classintptr__t.html">intptr_t</a>)ptr) &gt;&gt; 32));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Alignment = 4;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  uint8_t Buffer[4];</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  uint8_t *Cur = Buffer;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="classllvm_1_1MachineCodeEmitter.html#ad2a7fdc61bde79ca7ad61241c4a66b72">MachineCodeEmitter::emitWordLEInto</a>(Cur, (<a class="code" href="classintptr__t.html">intptr_t</a>)ptr);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">return</span> JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a8fd3d5442c997689be5ee89b5f85338e">allocIndirectGV</a>(GV, Buffer, <span class="keyword">sizeof</span>(Buffer), Alignment);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#a0e6c9e342c421f8515ccab2ae9e315a9">  460</a></span>&#160;<a class="code" href="structllvm_1_1TargetJITInfo_1_1StubLayout.html">TargetJITInfo::StubLayout</a> <a class="code" href="classllvm_1_1X86JITInfo.html#a0e6c9e342c421f8515ccab2ae9e315a9">X86JITInfo::getStubLayout</a>() {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// The 64-bit stub contains:</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">//   movabs r10 &lt;- 8-byte-target-address  # 10 bytes</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">//   call|jmp *r10  # 3 bytes</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// The 32-bit stub contains a 5-byte call|jmp.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// If the stub is a call to the compilation callback, an extra byte is added</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// to mark it as a stub.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="structllvm_1_1TargetJITInfo_1_1StubLayout.html">StubLayout</a> Result = {14, 4};</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#aa6be6d7a7ea14d0613cd94999e20fdf1">  471</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1X86JITInfo.html#aa6be6d7a7ea14d0613cd94999e20fdf1">X86JITInfo::emitFunctionStub</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a>* <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1Target.html">Target</a>,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                   <a class="code" href="classllvm_1_1JITCodeEmitter.html">JITCodeEmitter</a> &amp;JCE) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// Note, we cast to intptr_t here to silence a -pedantic warning that</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// complains about casting a function pointer to a normal pointer.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#if defined (X86_32_JIT) &amp;&amp; !defined (_MSC_VER)</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">bool</span> NotCC = (Target != (<span class="keywordtype">void</span>*)(<a class="code" href="classintptr__t.html">intptr_t</a>)<a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a> &amp;&amp;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                Target != (<span class="keywordtype">void</span>*)(<a class="code" href="classintptr__t.html">intptr_t</a>)X86CompilationCallback_SSE);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordtype">bool</span> NotCC = Target != (<span class="keywordtype">void</span>*)(<a class="code" href="classintptr__t.html">intptr_t</a>)<a class="code" href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6f1d914e2d2894ea7441b83ed2c7d3ea">emitAlignment</a>(4);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">void</span> *Result = (<span class="keywordtype">void</span>*)JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#adcefb51da1c2916952904298f8743a77">getCurrentPCValue</a>();</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (NotCC) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0x49);          <span class="comment">// REX prefix</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xB8+2);        <span class="comment">// movabsq r10</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<span class="keywordtype">unsigned</span>)(<a class="code" href="classintptr__t.html">intptr_t</a>)Target);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<span class="keywordtype">unsigned</span>)(((<a class="code" href="classintptr__t.html">intptr_t</a>)Target) &gt;&gt; 32));</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0x41);          <span class="comment">// REX prefix</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xFF);          <span class="comment">// jmpq *r10</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(2 | (4 &lt;&lt; 3) | (3 &lt;&lt; 6));</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xE9);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<a class="code" href="classintptr__t.html">intptr_t</a>)Target-JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#adcefb51da1c2916952904298f8743a77">getCurrentPCValue</a>()-4);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">#if defined (X86_64_JIT)</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0x49);          <span class="comment">// REX prefix</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xB8+2);        <span class="comment">// movabsq r10</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<span class="keywordtype">unsigned</span>)(<a class="code" href="classintptr__t.html">intptr_t</a>)Target);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<span class="keywordtype">unsigned</span>)(((<a class="code" href="classintptr__t.html">intptr_t</a>)Target) &gt;&gt; 32));</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0x41);          <span class="comment">// REX prefix</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xFF);          <span class="comment">// callq *r10</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(2 | (2 &lt;&lt; 3) | (3 &lt;&lt; 6));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xE8);   <span class="comment">// Call with 32 bit pc-rel destination...</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">emitWordLE</a>((<a class="code" href="classintptr__t.html">intptr_t</a>)Target-JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#adcefb51da1c2916952904298f8743a77">getCurrentPCValue</a>()-4);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// This used to use 0xCD, but that value is used by JITMemoryManager to</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// initialize the buffer with garbage, which means it may follow a</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// noreturn function call, confusing LLVMX86CompilationCallback2.  PR 4929.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  JCE.<a class="code" href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">emitByte</a>(0xCE);   <span class="comment">// Interrupt - Just a marker identifying the stub!</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// getPICJumpTableEntry - Returns the value of the jumptable entry for the</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/// specific basic block.</span></div><div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#aafcedd9ac99b3feabba1500c85d84c16">  522</a></span>&#160;<span class="comment"></span>uintptr_t <a class="code" href="classllvm_1_1X86JITInfo.html#aafcedd9ac99b3feabba1500c85d84c16">X86JITInfo::getPICJumpTableEntry</a>(uintptr_t <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, uintptr_t Entry) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#if defined(X86_64_JIT)</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">return</span> BB - Entry;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">return</span> BB - PICBase;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="X86JITInfo_8cpp.html#af2ae742417ff913e24e6ddcfc5992767">  530</a></span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86JITInfo_8cpp.html#af2ae742417ff913e24e6ddcfc5992767">addUnaligned</a>(<span class="keywordtype">void</span> *Pos, <a class="code" href="classT.html">T</a> Delta) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="classT.html">T</a> <a class="code" href="classllvm_1_1Value.html">Value</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">std::memcpy</a>(reinterpret_cast&lt;char*&gt;(&amp;Value), reinterpret_cast&lt;char*&gt;(Pos),</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;              <span class="keyword">sizeof</span>(<a class="code" href="classT.html">T</a>));</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  Value += Delta;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">std::memcpy</a>(reinterpret_cast&lt;char*&gt;(Pos), reinterpret_cast&lt;char*&gt;(&amp;Value),</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;              <span class="keyword">sizeof</span>(<a class="code" href="classT.html">T</a>));</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// relocate - Before the JIT can run a block of code that has been emitted,</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/// it must rewrite the code to contain the actual addresses of any</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">/// referenced global symbols.</span></div><div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#a5979c1ffead46894b5aaac7774cf4780">  542</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86JITInfo.html#a5979c1ffead46894b5aaac7774cf4780">X86JITInfo::relocate</a>(<span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1Function.html">Function</a>, <a class="code" href="classllvm_1_1MachineRelocation.html">MachineRelocation</a> *MR,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                          <span class="keywordtype">unsigned</span> NumRelocs, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* GOTBase) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumRelocs; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++MR) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">void</span> *RelocPos = (<span class="keywordtype">char</span>*)Function + MR-&gt;<a class="code" href="classllvm_1_1MachineRelocation.html#affb843bfefaf8c9beb7908c21b8cc306">getMachineCodeOffset</a>();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="classintptr__t.html">intptr_t</a> ResultPtr = (<a class="code" href="classintptr__t.html">intptr_t</a>)MR-&gt;<a class="code" href="classllvm_1_1MachineRelocation.html#a032d7f688499a02b4a61af76218de910">getResultPointer</a>();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">switch</span> ((<a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccc">X86::RelocationType</a>)MR-&gt;<a class="code" href="classllvm_1_1MachineRelocation.html#addef3b0bd2dc48b1da1182f7d2428081">getRelocationType</a>()) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9cccae26adf799b8cb61cc9eb9b9ed8de3973">X86::reloc_pcrel_word</a>: {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">// PC relative relocation, add the relocated value to the value already in</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">// memory, after we adjust it for where the PC is.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      ResultPtr = ResultPtr -(<a class="code" href="classintptr__t.html">intptr_t</a>)RelocPos - 4 - MR-&gt;<a class="code" href="classllvm_1_1MachineRelocation.html#a77dca969f6262094dc94da9fdcc00af2">getConstantVal</a>();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      addUnaligned&lt;unsigned&gt;(RelocPos, ResultPtr);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca08a4ad84af2614aeac59088085bc66ac">X86::reloc_picrel_word</a>: {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="comment">// PIC base relative relocation, add the relocated value to the value</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="comment">// already in memory, after we adjust it for where the PIC base is.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      ResultPtr = ResultPtr - ((<a class="code" href="classintptr__t.html">intptr_t</a>)Function + MR-&gt;<a class="code" href="classllvm_1_1MachineRelocation.html#a77dca969f6262094dc94da9fdcc00af2">getConstantVal</a>());</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      addUnaligned&lt;unsigned&gt;(RelocPos, ResultPtr);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca0a8a8bda44577767ad28e1807cb65317">X86::reloc_absolute_word</a>:</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca885f77129a42bafcda56fd1f668e148c">X86::reloc_absolute_word_sext</a>:</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">// Absolute relocation, just add the relocated value to the value already</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="comment">// in memory.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      addUnaligned&lt;unsigned&gt;(RelocPos, ResultPtr);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca7483a609c3adfc69d4539ca99a0d1143">X86::reloc_absolute_dword</a>:</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      addUnaligned&lt;intptr_t&gt;(RelocPos, ResultPtr);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classllvm_1_1X86JITInfo.html#a85bdb28d37ac4f3eaccac69da54ae86a">  575</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="classllvm_1_1X86JITInfo.html#a85bdb28d37ac4f3eaccac69da54ae86a">X86JITInfo::allocateThreadLocalMemory</a>(<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="preprocessor">#if defined(X86_32_JIT) &amp;&amp; !defined(__APPLE__) &amp;&amp; !defined(_MSC_VER)</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  TLSOffset -= <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">return</span> TLSOffset;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Cannot allocate thread local storage on this arch!&quot;</span>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9ccca7483a609c3adfc69d4539ca99a0d1143"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca7483a609c3adfc69d4539ca99a0d1143">llvm::X86::reloc_absolute_dword</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00047">X86Relocations.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html">llvm::JITCodeEmitter</a></div><div class="ttdef"><b>Definition:</b> <a href="JITCodeEmitter_8h_source.html#l00053">JITCodeEmitter.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html_a6f1d914e2d2894ea7441b83ed2c7d3ea"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html#a6f1d914e2d2894ea7441b83ed2c7d3ea">llvm::JITCodeEmitter::emitAlignment</a></div><div class="ttdeci">void emitAlignment(unsigned Alignment)</div><div class="ttdef"><b>Definition:</b> <a href="JITCodeEmitter_8h_source.html#l00151">JITCodeEmitter.h:151</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_af2ae742417ff913e24e6ddcfc5992767"><div class="ttname"><a href="X86JITInfo_8cpp.html#af2ae742417ff913e24e6ddcfc5992767">addUnaligned</a></div><div class="ttdeci">static void addUnaligned(void *Pos, T Delta)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00530">X86JITInfo.cpp:530</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1X86TargetMachine_html"><div class="ttname"><a href="classllvm_1_1X86TargetMachine.html">llvm::X86TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="X86TargetMachine_8h_source.html#l00032">X86TargetMachine.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9ccc"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccc">llvm::X86::RelocationType</a></div><div class="ttdeci">RelocationType</div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00026">X86Relocations.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRelocation_html_addef3b0bd2dc48b1da1182f7d2428081"><div class="ttname"><a href="classllvm_1_1MachineRelocation.html#addef3b0bd2dc48b1da1182f7d2428081">llvm::MachineRelocation::getRelocationType</a></div><div class="ttdeci">unsigned getRelocationType() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRelocation_8h_source.html#l00202">MachineRelocation.h:202</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00204">Target/README.txt:204</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_ac33b1cf411a96c6bebaa8979def36977"><div class="ttname"><a href="X86JITInfo_8cpp.html#ac33b1cf411a96c6bebaa8979def36977">JITCompilerFunction</a></div><div class="ttdeci">static TargetJITInfo::JITCompilerFn JITCompilerFunction</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00050">X86JITInfo.cpp:50</a></div></div>
<div class="ttc" id="classintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_aa6be6d7a7ea14d0613cd94999e20fdf1"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#aa6be6d7a7ea14d0613cd94999e20fdf1">llvm::X86JITInfo::emitFunctionStub</a></div><div class="ttdeci">virtual void * emitFunctionStub(const Function *F, void *Target, JITCodeEmitter &amp;JCE)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00471">X86JITInfo.cpp:471</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html_a6661a6e7fad3f68980e935dd47b0fffe"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html#a6661a6e7fad3f68980e935dd47b0fffe">llvm::JITCodeEmitter::emitByte</a></div><div class="ttdeci">void emitByte(uint8_t B)</div><div class="ttdef"><b>Definition:</b> <a href="JITCodeEmitter_8h_source.html#l00080">JITCodeEmitter.h:80</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9cccae26adf799b8cb61cc9eb9b9ed8de3973"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9cccae26adf799b8cb61cc9eb9b9ed8de3973">llvm::X86::reloc_pcrel_word</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00029">X86Relocations.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1TargetJITInfo_html_abd7ada082ff5e8e75380a44f52c89afe"><div class="ttname"><a href="classllvm_1_1TargetJITInfo.html#abd7ada082ff5e8e75380a44f52c89afe">llvm::TargetJITInfo::useGOT</a></div><div class="ttdeci">bool useGOT</div><div class="ttdef"><b>Definition:</b> <a href="TargetJITInfo_8h_source.html#l00133">TargetJITInfo.h:133</a></div></div>
<div class="ttc" id="X86Relocations_8h_html"><div class="ttname"><a href="X86Relocations_8h.html">X86Relocations.h</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a09f6d95681fd43c904d1164c81a5141d"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a09f6d95681fd43c904d1164c81a5141d">call</a></div><div class="ttdeci">S is passed via registers r2 But gcc stores them to the and then reload them to and r3 before issuing the call(r0 contains the address of the format string)</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00190">Target/ARM/README.txt:190</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">llvm::Intrinsic::memcpy</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01260">Intrinsics.h:1260</a></div></div>
<div class="ttc" id="classllvm_1_1TargetJITInfo_html_a956ee0dad17644c8e2bfbfb7183ecbf1"><div class="ttname"><a href="classllvm_1_1TargetJITInfo.html#a956ee0dad17644c8e2bfbfb7183ecbf1">llvm::TargetJITInfo::LazyResolverFn</a></div><div class="ttdeci">void(* LazyResolverFn)()</div><div class="ttdef"><b>Definition:</b> <a href="TargetJITInfo_8h_source.html#l00083">TargetJITInfo.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_html_afa3960ac5c365a344036b4c068477468"><div class="ttname"><a href="namespacellvm_1_1sys.html#afa3960ac5c365a344036b4c068477468">llvm::sys::ValgrindDiscardTranslations</a></div><div class="ttdeci">void ValgrindDiscardTranslations(const void *Addr, size_t Len)</div><div class="ttdef"><b>Definition:</b> <a href="Valgrind_8cpp_source.html#l00051">Valgrind.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRelocation_html"><div class="ttname"><a href="classllvm_1_1MachineRelocation.html">llvm::MachineRelocation</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRelocation_8h_source.html#l00038">MachineRelocation.h:38</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRelocation_html_a77dca969f6262094dc94da9fdcc00af2"><div class="ttname"><a href="classllvm_1_1MachineRelocation.html#a77dca969f6262094dc94da9fdcc00af2">llvm::MachineRelocation::getConstantVal</a></div><div class="ttdeci">intptr_t getConstantVal() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRelocation_8h_source.html#l00209">MachineRelocation.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_a97b44190ae24e25aa2e8ffe3727be631"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#a97b44190ae24e25aa2e8ffe3727be631">llvm::X86JITInfo::emitGlobalValueIndirectSym</a></div><div class="ttdeci">virtual void * emitGlobalValueIndirectSym(const GlobalValue *GV, void *ptr, JITCodeEmitter &amp;JCE)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00443">X86JITInfo.cpp:443</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_aa512e506e7963d5835ab8444ba0ee506"><div class="ttname"><a href="Target_2X86_2README_8txt.html#aa512e506e7963d5835ab8444ba0ee506">edx</a></div><div class="ttdeci">sar eax, 31) more aggressively edx</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01086">Target/X86/README.txt:1086</a></div></div>
<div class="ttc" id="X86TargetMachine_8h_html"><div class="ttname"><a href="X86TargetMachine_8h.html">X86TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_aafcedd9ac99b3feabba1500c85d84c16"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#aafcedd9ac99b3feabba1500c85d84c16">llvm::X86JITInfo::getPICJumpTableEntry</a></div><div class="ttdeci">virtual uintptr_t getPICJumpTableEntry(uintptr_t BB, uintptr_t JTBase)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00522">X86JITInfo.cpp:522</a></div></div>
<div class="ttc" id="classllvm_1_1MachineCodeEmitter_html_ad2a7fdc61bde79ca7ad61241c4a66b72"><div class="ttname"><a href="classllvm_1_1MachineCodeEmitter.html#ad2a7fdc61bde79ca7ad61241c4a66b72">llvm::MachineCodeEmitter::emitWordLEInto</a></div><div class="ttdeci">static void emitWordLEInto(uint8_t *&amp;Buf, uint32_t W)</div><div class="ttdef"><b>Definition:</b> <a href="MachineCodeEmitter_8h_source.html#l00104">MachineCodeEmitter.h:104</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a73e5518e0889fcbe7d169b940c506e71"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a73e5518e0889fcbe7d169b940c506e71">ebp</a></div><div class="ttdeci">Compiles to this loop with GCC eax eax addl incl ecx ecx jle L5 llvm gcc compiles it to the much eax ebx movl ebp imull ebp movl eax mull ecx addl ebp</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01471">Target/X86/README.txt:1471</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_ab9e2841fba0750710130df4a90ddbcae"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#ab9e2841fba0750710130df4a90ddbcae">llvm::X86JITInfo::replaceMachineCodeForFunction</a></div><div class="ttdeci">virtual void replaceMachineCodeForFunction(void *Old, void *New)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00034">X86JITInfo.cpp:34</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_a00663503686aee88c9538956d2e85f5f"><div class="ttname"><a href="X86JITInfo_8cpp.html#a00663503686aee88c9538956d2e85f5f">SIZE</a></div><div class="ttdeci">#define SIZE(sym)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00066">X86JITInfo.cpp:66</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a8ef54f27fddd11cc461b2b231fc2d23c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a></div><div class="ttdeci">to esp esp setne al movzbw ax esp setg cl movzbw cx cmove cx cl jne LBB1_2 esp ret(also really horrible code on ppc).This is due to the expand code for 64-bit compares.GCC produces multiple branches</div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9ccca0a8a8bda44577767ad28e1807cb65317"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca0a8a8bda44577767ad28e1807cb65317">llvm::X86::reloc_absolute_word</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00038">X86Relocations.h:38</a></div></div>
<div class="ttc" id="Compiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="Valgrind_8h_html"><div class="ttname"><a href="Valgrind_8h.html">Valgrind.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRelocation_html_affb843bfefaf8c9beb7908c21b8cc306"><div class="ttname"><a href="classllvm_1_1MachineRelocation.html#affb843bfefaf8c9beb7908c21b8cc306">llvm::MachineRelocation::getMachineCodeOffset</a></div><div class="ttdeci">intptr_t getMachineCodeOffset() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRelocation_8h_source.html#l00196">MachineRelocation.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html">llvm::X86Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00042">X86Subtarget.h:42</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a7883a95866b9432ce4d83316aa287800"><div class="ttname"><a href="Target_2README_8txt.html#a7883a95866b9432ce4d83316aa287800">eax</a></div><div class="ttdeci">Add support for conditional and other related patterns Instead eax eax je LBB16_2 eax edi eax movl eax</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00169">Target/README.txt:169</a></div></div>
<div class="ttc" id="Compiler_8h_html_a662e21bcce5c9c71b6cc511fa04f900f"><div class="ttname"><a href="Compiler_8h.html#a662e21bcce5c9c71b6cc511fa04f900f">LLVM_LIBRARY_VISIBILITY</a></div><div class="ttdeci">#define LLVM_LIBRARY_VISIBILITY</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00173">Compiler.h:173</a></div></div>
<div class="ttc" id="X86JITInfo_8h_html"><div class="ttname"><a href="X86JITInfo_8h.html">X86JITInfo.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_afa864f0f6145846a80b9e27066e95dd4"><div class="ttname"><a href="CodeGen_2README_8txt.html#afa864f0f6145846a80b9e27066e95dd4">mov</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and mov</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00005">CodeGen/README.txt:5</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a112998c5cf52233b271ac576b2ca1184"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a112998c5cf52233b271ac576b2ca1184">ecx</a></div><div class="ttdeci">Instead of the following for memset char edx edx edx It might be better to generate eax movl edx movl edx movw edx when we can spare a register It reduces code size Evaluate what the best way to codegen sdiv C is For we currently get ret i32 Y eax movl ecx ecx ecx addl ecx</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00165">Target/X86/README.txt:165</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="X86Subtarget_8h_html"><div class="ttname"><a href="X86Subtarget_8h.html">X86Subtarget.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRelocation_html_a032d7f688499a02b4a61af76218de910"><div class="ttname"><a href="classllvm_1_1MachineRelocation.html#a032d7f688499a02b4a61af76218de910">llvm::MachineRelocation::getResultPointer</a></div><div class="ttdeci">void * getResultPointer() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRelocation_8h_source.html#l00314">MachineRelocation.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00029">GlobalValue.h:29</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_a45571f0b66255527d7be070568a6147a"><div class="ttname"><a href="X86JITInfo_8cpp.html#a45571f0b66255527d7be070568a6147a">ASMPREFIX</a></div><div class="ttdeci">#define ASMPREFIX</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00058">X86JITInfo.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a5af2fed99951774b6a14d30ec6e73792"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">llvm::TargetMachine::getSubtarget</a></div><div class="ttdeci">const STC &amp; getSubtarget() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00132">Target/TargetMachine.h:132</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html_adcefb51da1c2916952904298f8743a77"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html#adcefb51da1c2916952904298f8743a77">llvm::JITCodeEmitter::getCurrentPCValue</a></div><div class="ttdeci">virtual uintptr_t getCurrentPCValue() const </div><div class="ttdef"><b>Definition:</b> <a href="JITCodeEmitter_8h_source.html#l00286">JITCodeEmitter.h:286</a></div></div>
<div class="ttc" id="Compiler_8h_html_a7b6ebda5fec619759c0522722503be67"><div class="ttname"><a href="Compiler_8h.html#a7b6ebda5fec619759c0522722503be67">__msan_unpoison</a></div><div class="ttdeci">#define __msan_unpoison(p, size)</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00342">Compiler.h:342</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9ccca885f77129a42bafcda56fd1f668e148c"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca885f77129a42bafcda56fd1f668e148c">llvm::X86::reloc_absolute_word_sext</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00043">X86Relocations.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_a0e6c9e342c421f8515ccab2ae9e315a9"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#a0e6c9e342c421f8515ccab2ae9e315a9">llvm::X86JITInfo::getStubLayout</a></div><div class="ttdeci">virtual StubLayout getStubLayout()</div><div class="ttdoc">Returns the maximum size and alignment for a call stub on this target. </div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00460">X86JITInfo.cpp:460</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html_a8fd3d5442c997689be5ee89b5f85338e"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html#a8fd3d5442c997689be5ee89b5f85338e">llvm::JITCodeEmitter::allocIndirectGV</a></div><div class="ttdeci">virtual void * allocIndirectGV(const GlobalValue *GV, const uint8_t *Buffer, size_t Size, unsigned Alignment)=0</div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_aab4091097866940541699c7cc05a9ccca08a4ad84af2614aeac59088085bc66ac"><div class="ttname"><a href="namespacellvm_1_1X86.html#aab4091097866940541699c7cc05a9ccca08a4ad84af2614aeac59088085bc66ac">llvm::X86::reloc_picrel_word</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Relocations_8h_source.html#l00034">X86Relocations.h:34</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00078">TargetRegistry.h:78</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_abffcfc890ed4f30a9ccbd036cf58ee21"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#abffcfc890ed4f30a9ccbd036cf58ee21">llvm::X86JITInfo::X86JITInfo</a></div><div class="ttdeci">X86JITInfo(X86TargetMachine &amp;tm)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00437">X86JITInfo.cpp:437</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_a6b13ba290b25a5a9a392c5bb6adf898b"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a6b13ba290b25a5a9a392c5bb6adf898b">llvm::X86Subtarget::hasSSE1</a></div><div class="ttdeci">bool hasSSE1() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00259">X86Subtarget.h:259</a></div></div>
<div class="ttc" id="Valgrind_8h_html_a6d95fe36240cded45e8889c2491a78f5"><div class="ttname"><a href="Valgrind_8h.html#a6d95fe36240cded45e8889c2491a78f5">TsanIgnoreWritesEnd</a></div><div class="ttdeci">#define TsanIgnoreWritesEnd()</div><div class="ttdef"><b>Definition:</b> <a href="Valgrind_8h_source.html#l00064">Valgrind.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1JITCodeEmitter_html_af429c0d6b08512baa7207a1ea3008005"><div class="ttname"><a href="classllvm_1_1JITCodeEmitter.html#af429c0d6b08512baa7207a1ea3008005">llvm::JITCodeEmitter::emitWordLE</a></div><div class="ttdeci">void emitWordLE(uint32_t W)</div><div class="ttdef"><b>Definition:</b> <a href="JITCodeEmitter_8h_source.html#l00088">JITCodeEmitter.h:88</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_aa762905c3c867e25931ef55fcd75dddb"><div class="ttname"><a href="X86JITInfo_8cpp.html#aa762905c3c867e25931ef55fcd75dddb">X86CompilationCallback</a></div><div class="ttdeci">void X86CompilationCallback()</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00331">X86JITInfo.cpp:331</a></div></div>
<div class="ttc" id="Valgrind_8h_html_ae7ae7168870d6f719670bf0f47b9ade5"><div class="ttname"><a href="Valgrind_8h.html#ae7ae7168870d6f719670bf0f47b9ade5">TsanIgnoreWritesBegin</a></div><div class="ttdeci">#define TsanIgnoreWritesBegin()</div><div class="ttdef"><b>Definition:</b> <a href="Valgrind_8h_source.html#l00060">Valgrind.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_a85bdb28d37ac4f3eaccac69da54ae86a"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#a85bdb28d37ac4f3eaccac69da54ae86a">llvm::X86JITInfo::allocateThreadLocalMemory</a></div><div class="ttdeci">virtual char * allocateThreadLocalMemory(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00575">X86JITInfo.cpp:575</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a47047da86e359f28033bcf83e4648793"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a47047da86e359f28033bcf83e4648793">sub</a></div><div class="ttdeci">we currently eax ecx subl eax ret We would use one fewer register if codegen d eax neg eax eax ret Note that this isn t beneficial if the load can be folded into the sub In this we want a sub</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00610">Target/X86/README.txt:610</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_a5647cc5a910b3d960a4ff5c5e1d5f32e"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#a5647cc5a910b3d960a4ff5c5e1d5f32e">llvm::X86JITInfo::getLazyResolverFunction</a></div><div class="ttdeci">virtual LazyResolverFn getLazyResolverFunction(JITCompilerFn)</div><div class="ttdoc">getLazyResolverFunction - Expose the lazy resolver to the JIT. </div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00424">X86JITInfo.cpp:424</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_a57ffa424627b8f80f876280bec6d30e8"><div class="ttname"><a href="X86JITInfo_8cpp.html#a57ffa424627b8f80f876280bec6d30e8">CFI</a></div><div class="ttdeci">#define CFI(x)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00079">X86JITInfo.cpp:79</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_aeb5ec077ad1ac83230626a91baa6bf33"><div class="ttname"><a href="X86JITInfo_8cpp.html#aeb5ec077ad1ac83230626a91baa6bf33">TYPE_FUNCTION</a></div><div class="ttdeci">#define TYPE_FUNCTION(sym)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00067">X86JITInfo.cpp:67</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="X86JITInfo_8cpp_html_a82a00e30a8d55a5e10eb79c0ed7d4e1b"><div class="ttname"><a href="X86JITInfo_8cpp.html#a82a00e30a8d55a5e10eb79c0ed7d4e1b">LLVMX86CompilationCallback2</a></div><div class="ttdeci">LLVM_ATTRIBUTE_USED LLVM_LIBRARY_VISIBILITY void LLVMX86CompilationCallback2(intptr_t *StackPtr, intptr_t RetAddr)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00343">X86JITInfo.cpp:343</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a7be0f11e03983f0479d6810c99eff54c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a7be0f11e03983f0479d6810c99eff54c">esp</a></div><div class="ttdeci">We currently emits esp</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00283">Target/X86/README.txt:283</a></div></div>
<div class="ttc" id="classllvm_1_1TargetJITInfo_html_acad81796e985b23da982e3aae050e224"><div class="ttname"><a href="classllvm_1_1TargetJITInfo.html#acad81796e985b23da982e3aae050e224">llvm::TargetJITInfo::JITCompilerFn</a></div><div class="ttdeci">void *(* JITCompilerFn)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="TargetJITInfo_8h_source.html#l00090">TargetJITInfo.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1X86JITInfo_html_a5979c1ffead46894b5aaac7774cf4780"><div class="ttname"><a href="classllvm_1_1X86JITInfo.html#a5979c1ffead46894b5aaac7774cf4780">llvm::X86JITInfo::relocate</a></div><div class="ttdeci">virtual void relocate(void *Function, MachineRelocation *MR, unsigned NumRelocs, unsigned char *GOTBase)</div><div class="ttdef"><b>Definition:</b> <a href="X86JITInfo_8cpp_source.html#l00542">X86JITInfo.cpp:542</a></div></div>
<div class="ttc" id="Compiler_8h_html_a6881c00738b22a600dfee25a1c32dab3"><div class="ttname"><a href="Compiler_8h.html#a6881c00738b22a600dfee25a1c32dab3">LLVM_ATTRIBUTE_USED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_USED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00179">Compiler.h:179</a></div></div>
<div class="ttc" id="structllvm_1_1TargetJITInfo_1_1StubLayout_html"><div class="ttname"><a href="structllvm_1_1TargetJITInfo_1_1StubLayout.html">llvm::TargetJITInfo::StubLayout</a></div><div class="ttdoc">Records the required size and alignment for a call stub in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="TargetJITInfo_8h_source.html#l00054">TargetJITInfo.h:54</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:03:22 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
