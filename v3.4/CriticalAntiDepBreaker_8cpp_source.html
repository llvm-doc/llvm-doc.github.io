<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: CriticalAntiDepBreaker.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('CriticalAntiDepBreaker_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CriticalAntiDepBreaker.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CriticalAntiDepBreaker_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===----- CriticalAntiDepBreaker.cpp - Anti-dep breaker -------- ---------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the CriticalAntiDepBreaker class, which</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// implements register anti-dependence breaking along a blocks</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// critical path during post-RA scheduler.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="CriticalAntiDepBreaker_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   16</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;post-RA-sched&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CriticalAntiDepBreaker_8h.html">CriticalAntiDepBreaker.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#afcfe11d8e76ce559a7a12d5b95ab1474">CriticalAntiDepBreaker::</a></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#afcfe11d8e76ce559a7a12d5b95ab1474">   30</a></span>&#160;<a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#afcfe11d8e76ce559a7a12d5b95ab1474">CriticalAntiDepBreaker</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a>&amp; MFi, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a> &amp;RCI) :</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classllvm_1_1AntiDepBreaker.html">AntiDepBreaker</a>(), MF(MFi),</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>(MF.getRegInfo()),</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(MF.getTarget().getInstrInfo()),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  TRI(MF.getTarget().getRegisterInfo()),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  RegClassInfo(RCI),</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  Classes(TRI-&gt;getNumRegs(), static_cast&lt;const <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *&gt;(0)),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  KillIndices(TRI-&gt;getNumRegs(), 0),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  DefIndices(TRI-&gt;getNumRegs(), 0),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  KeepRegs(TRI-&gt;getNumRegs(), <a class="code" href="namespacefalse.html">false</a>) {}</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#a40ff81ca1f305a69ad054a7fc52ae9e4">   41</a></span>&#160;<a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#a40ff81ca1f305a69ad054a7fc52ae9e4">CriticalAntiDepBreaker::~CriticalAntiDepBreaker</a>() {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#aded9e7fdb58a9ca5a2eca8a3360872cc">   44</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#aded9e7fdb58a9ca5a2eca8a3360872cc">CriticalAntiDepBreaker::StartBlock</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BBSize = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a15f8f9567157c31ce83e5ccfab8cb8be">size</a>();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// Clear out the register class data.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    Classes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(0);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// Initialize the indices to indicate that no registers are live.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    KillIndices[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ~0u;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    DefIndices[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = BBSize;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// Clear &quot;do not change&quot; set.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">bool</span> IsReturnBlock = (BBSize != 0 &amp;&amp; BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a>().<a class="code" href="classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">isReturn</a>());</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Examine the live-in regs of all successors.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">MachineBasicBlock::succ_iterator</a> SI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;         SE = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); SI != SE; ++SI)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">MachineBasicBlock::livein_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = (*SI)-&gt;livein_begin(),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;           E = (*SI)-&gt;livein_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TRI, <span class="keyword">true</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = *AI;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = BBSize;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = ~0u;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// Mark live-out callee-saved registers. In a return block this is</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// all callee-saved registers. In non-return this is any</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// callee-saved register that is not saved in the prolog.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4ad4295a88187ea1ae12ecfcfa18a70f">getFrameInfo</a>();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> Pristine = MFI-&gt;<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3fff4d8b50a9a2c39e792861ed1a76e3">getPristineRegs</a>(BB);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> uint16_t *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae53a385b86237b961ccc18a8701ae588">getCalleeSavedRegs</a>(&amp;MF); *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (!IsReturnBlock &amp;&amp; !Pristine.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TRI, <span class="keyword">true</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = *AI;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = BBSize;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = ~0u;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#acbc27d4dc09d7918b17ad50466fc42e9">   89</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#acbc27d4dc09d7918b17ad50466fc42e9">CriticalAntiDepBreaker::FinishBlock</a>() {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  RegRefs.clear();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#a8f3fb0ba1af5da87c846bdb47d676351">   94</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#a8f3fb0ba1af5da87c846bdb47d676351">CriticalAntiDepBreaker::Observe</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> Count,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                     <span class="keywordtype">unsigned</span> InsertPosIndex) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>())</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  assert(Count &lt; InsertPosIndex &amp;&amp; <span class="stringliteral">&quot;Instruction index out of expected range!&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = 0; <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> != TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(); ++<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] != ~0u) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">// If Reg is currently live, then mark that it can&#39;t be renamed as</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="comment">// we don&#39;t know the extent of its live-range anymore (now that it</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">// has been scheduled).</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = Count;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] &lt; InsertPosIndex &amp;&amp; DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] &gt;= Count) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// Any register which was defined within the previous scheduling region</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment">// may have been rescheduled and its lifetime may overlap with registers</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="comment">// in ways not reflected in our current liveness state. For each such</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="comment">// register, adjust the liveness state to be conservatively correct.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="comment">// Move the def index to the end of the previous region, to reflect</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// that the def could theoretically have been scheduled at the end.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = InsertPosIndex;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  PrescanInstruction(MI);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  ScanInstruction(MI, Count);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// CriticalPathStep - Return the next SUnit after SU on the bottom-up</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/// critical path.</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="CriticalAntiDepBreaker_8cpp.html#ad9d8ed7783fba22c5820f7b1100eeb0c">  126</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDep.html">SDep</a> *<a class="code" href="CriticalAntiDepBreaker_8cpp.html#ad9d8ed7783fba22c5820f7b1100eeb0c">CriticalPathStep</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDep.html">SDep</a> *Next = 0;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">unsigned</span> NextDepth = 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// Find the predecessor edge with the greatest depth.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_pred_iterator</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(), PE = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;       <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> != PE; ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *PredSU = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getSUnit();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">unsigned</span> PredLatency = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getLatency();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">unsigned</span> PredTotalLatency = PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() + PredLatency;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// In the case of a latency tie, prefer an anti-dependency edge over</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// other types of edges.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (NextDepth &lt; PredTotalLatency ||</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        (NextDepth == PredTotalLatency &amp;&amp; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getKind() == <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a>)) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      NextDepth = PredTotalLatency;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      Next = &amp;*<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> Next;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">void</span> CriticalAntiDepBreaker::PrescanInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// It&#39;s not safe to change register allocation for source operands of</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// that have special allocation requirements. Also assume all registers</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// used in a call must not be changed (ABI).</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// FIXME: The issue with predicated instruction is more complex. We are being</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// conservative here because the kill markers cannot be trusted after</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// if-conversion:</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// %R6&lt;def&gt; = LDR %SP, %reg0, 92, pred:14, pred:%reg0; mem:LD4[FixedStack14]</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// ...</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// STR %R0, %R6&lt;kill&gt;, %reg0, 0, pred:0, pred:%CPSR; mem:ST4[%395]</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// %R6&lt;def&gt; = LDR %SP, %reg0, 100, pred:0, pred:%CPSR; mem:LD4[FixedStack12]</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// STR %R0, %R6&lt;kill&gt;, %reg0, 0, pred:14, pred:%reg0; mem:ST4[%396](align=8)</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// The first R6 kill is not really a kill since it&#39;s killed by a predicated</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// instruction which may not be executed. The second R6 def may or may not</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">// re-define R6 so it&#39;s not safe to change it since the last R6 use cannot be</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// changed.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">bool</span> Special = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">isCall</a>() ||</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a88221e7c920257aa2832c82a0951234d">hasExtraSrcRegAllocReq</a>() ||</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(MI);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// Scan the register operands for this instruction and update</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Classes and RegRefs.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *NewRC = 0;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (i &lt; MI-&gt;getDesc().getNumOperands())</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      NewRC = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aabf764b704ed905ec6841a8872815bff">getRegClass</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>(), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, TRI, MF);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// For now, only allow the register to be changed if its register</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// class is consistent across all uses.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (!Classes[Reg] &amp;&amp; NewRC)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = NewRC;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!NewRC || Classes[Reg] != NewRC)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// Now check for aliases.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, TRI, <span class="keyword">false</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="comment">// If an alias of the reg is used during the live range, give up.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="comment">// Note that this allows us to skip checking if AntiDepReg</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// overlaps with any of the aliases, among other things.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordtype">unsigned</span> AliasReg = *AI;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">if</span> (Classes[AliasReg]) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        Classes[AliasReg] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// If we&#39;re still willing to consider this register, note the reference.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (Classes[Reg] != reinterpret_cast&lt;TargetRegisterClass *&gt;(-1))</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      RegRefs.insert(std::make_pair(Reg, &amp;MO));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() &amp;&amp; Special) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (!KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Reg)) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, TRI, <span class="comment">/*IncludeSelf=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;             SubRegs.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*SubRegs);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keywordtype">void</span> CriticalAntiDepBreaker::ScanInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                             <span class="keywordtype">unsigned</span> Count) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Update liveness.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// Proceeding upwards, registers that are defed but not used in this</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// instruction are now dead.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(MI)) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Predicated defs are modeled as read + write, i.e. similar to two</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// address updates.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">isRegMask</a>())</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad5bef9f5be828b62f053b3017eb9dbdb">clobbersPhysReg</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            DefIndices[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Count;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            KillIndices[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ~0u;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            Classes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            RegRefs.erase(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;          }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">// Ignore two-addr defs.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ab1d4c079cb5cd4b7c55376ce972f7e79">isRegTiedToUseOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = Count;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = ~0u;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      assert(((KillIndices[Reg] == ~0u) !=</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;              (DefIndices[Reg] == ~0u)) &amp;&amp;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;             <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for Reg!&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(Reg);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = 0;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      RegRefs.erase(Reg);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// Repeat, for all subregs.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, TRI); SubRegs.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordtype">unsigned</span> SubregReg = *SubRegs;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        DefIndices[SubregReg] = Count;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        KillIndices[SubregReg] = ~0u;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(SubregReg);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        Classes[SubregReg] = 0;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        RegRefs.erase(SubregReg);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="comment">// Conservatively mark super-registers as unusable.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSuperRegIterator.html">MCSuperRegIterator</a> SR(Reg, TRI); SR.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SR)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        Classes[*SR] = reinterpret_cast&lt;TargetRegisterClass *&gt;(-1);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *NewRC = 0;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (i &lt; MI-&gt;getDesc().getNumOperands())</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      NewRC = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aabf764b704ed905ec6841a8872815bff">getRegClass</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>(), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, TRI, MF);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// For now, only allow the register to be changed if its register</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// class is consistent across all uses.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!Classes[Reg] &amp;&amp; NewRC)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = NewRC;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!NewRC || Classes[Reg] != NewRC)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      Classes[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *<span class="keyword">&gt;</span>(-1);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    RegRefs.insert(std::make_pair(Reg, &amp;MO));</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// It wasn&#39;t previously live but now it is, this is a kill.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (KillIndices[Reg] == ~0u) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = Count;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      DefIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] = ~0u;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          assert(((KillIndices[Reg] == ~0u) !=</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                  (DefIndices[Reg] == ~0u)) &amp;&amp;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;               <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for Reg!&quot;</span>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Repeat, for all aliases.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AI(Reg, TRI, <span class="keyword">false</span>); AI.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">isValid</a>(); ++AI) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordtype">unsigned</span> AliasReg = *AI;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">if</span> (KillIndices[AliasReg] == ~0u) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        KillIndices[AliasReg] = Count;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        DefIndices[AliasReg] = ~0u;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// Check all machine operands that reference the antidependent register and must</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// be replaced by NewReg. Return true if any of their parent instructions may</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// clobber the new register.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// Note: AntiDepReg may be referenced by a two-address instruction such that</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// it&#39;s use operand is tied to a def operand. We guard against the case in which</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// the two-address instruction also defines NewReg, as may happen with</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">// pre/postincrement loads. In this case, both the use and def operands are in</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// RegRefs because the def is inserted by PrescanInstruction and not erased</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// during ScanInstruction. So checking for an instructions with definitions of</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">// both NewReg and AntiDepReg covers it.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;CriticalAntiDepBreaker::isNewRegClobberedByRefs(RegRefIter RegRefBegin,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                                RegRefIter RegRefEnd,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                <span class="keywordtype">unsigned</span> NewReg)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">for</span> (RegRefIter <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegRefBegin; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != RegRefEnd; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> ) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *RefOper = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// Don&#39;t allow the instruction defining AntiDepReg to earlyclobber its</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// operands, in case they may be assigned to NewReg. In this case antidep</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// breaking must fail, but it&#39;s too rare to bother optimizing.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (RefOper-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp; RefOper-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">isEarlyClobber</a>())</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Handle cases in which this instructions defines NewReg.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = RefOper-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;CheckOper = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">if</span> (CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">isRegMask</a>() &amp;&amp; CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#ad5bef9f5be828b62f053b3017eb9dbdb">clobbersPhysReg</a>(NewReg))</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (!CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() ||</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() != NewReg)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// Don&#39;t allow the instruction to define NewReg and AntiDepReg.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// When AntiDepReg is renamed it will be an illegal op.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">if</span> (RefOper-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// Don&#39;t allow an instruction using AntiDepReg to be earlyclobbered by</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// NewReg</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">if</span> (CheckOper.<a class="code" href="classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">isEarlyClobber</a>())</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="comment">// Don&#39;t allow inline asm to define NewReg at all. Who know what it&#39;s</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">// doing with it.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#acd9af7d3f8a155c4356edccbc0522c8e">isInlineAsm</a>())</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keywordtype">unsigned</span> CriticalAntiDepBreaker::</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;findSuitableFreeRegister(RegRefIter RegRefBegin,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                         RegRefIter RegRefEnd,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                         <span class="keywordtype">unsigned</span> AntiDepReg,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                         <span class="keywordtype">unsigned</span> LastNewReg,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;Forbid)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MCPhysReg&gt;</a> Order = RegClassInfo.<a class="code" href="classllvm_1_1RegisterClassInfo.html#a3812bd10f638bd6a46451e9e82bf1ca8">getOrder</a>(RC);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != Order.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">unsigned</span> NewReg = Order[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Don&#39;t replace a register with itself.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (NewReg == AntiDepReg) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// Don&#39;t replace a register with one that was recently used to repair</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// an anti-dependence with this AntiDepReg, because that would</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// re-introduce that anti-dependence.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (NewReg == LastNewReg) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// If any instructions that define AntiDepReg also define the NewReg, it&#39;s</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">// not suitable.  For example, Instruction with multiple definitions can</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// result in this condition.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (isNewRegClobberedByRefs(RegRefBegin, RegRefEnd, NewReg)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// If NewReg is dead and NewReg&#39;s most recent def is not before</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// AntiDepReg&#39;s kill, it&#39;s safe to replace AntiDepReg with NewReg.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    assert(((KillIndices[AntiDepReg] == ~0u) != (DefIndices[AntiDepReg] == ~0u))</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;           &amp;&amp; <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for AntiDepReg!&quot;</span>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    assert(((KillIndices[NewReg] == ~0u) != (DefIndices[NewReg] == ~0u))</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;           &amp;&amp; <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for NewReg!&quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (KillIndices[NewReg] != ~0u ||</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        Classes[NewReg] == reinterpret_cast&lt;TargetRegisterClass *&gt;(-1) ||</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        KillIndices[AntiDepReg] &gt; DefIndices[NewReg])</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// If NewReg overlaps any of the forbidden registers, we can&#39;t use it.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">bool</span> Forbidden = <span class="keyword">false</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;::iterator</a> <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> = Forbid.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;           ite = Forbid.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> != ite; ++<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">if</span> (TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">regsOverlap</a>(NewReg, *<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>)) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        Forbidden = <span class="keyword">true</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (Forbidden) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> NewReg;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// No registers are free and available!</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#ae6fcee7dea47f05718212607080d10ab">CriticalAntiDepBreaker::</a></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classllvm_1_1CriticalAntiDepBreaker.html#ae6fcee7dea47f05718212607080d10ab">  406</a></span>&#160;<a class="code" href="classllvm_1_1CriticalAntiDepBreaker.html#ae6fcee7dea47f05718212607080d10ab">BreakAntiDependencies</a>(<span class="keyword">const</span> std::vector&lt;SUnit&gt;&amp; SUnits,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                      <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> Begin,</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                      <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> End,</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                      <span class="keywordtype">unsigned</span> InsertPosIndex,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                      <a class="code" href="classllvm_1_1AntiDepBreaker.html#a6c381aabe72a248ff7d09bb0e2eac7ae">DbgValueVector</a> &amp;DbgValues) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// The code below assumes that there is at least one instruction,</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// so just duck out immediately if the block is empty.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (SUnits.empty()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// Keep a map of the MachineInstr*&#39;s back to the SUnit representing them.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// This is used for updating debug information.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// FIXME: Replace this with the existing map in ScheduleDAGInstrs::MISUnitMap</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*,const SUnit*&gt;</a> MISUnitMap;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// Find the node at the bottom of the critical path.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *Max = 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = SUnits.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = &amp;SUnits[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    MISUnitMap[SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()] = SU;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (!Max || SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() + SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a> &gt; Max-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() + Max-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>)</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      Max = SU;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Critical path has total latency &quot;</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          &lt;&lt; (Max-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() + Max-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Available regs:&quot;</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = 0; <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> &lt; TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(); ++<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">if</span> (KillIndices[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>] == ~0u)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a2546a53db9bdb717a20f9786b1c06137">getName</a>(<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>));</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Track progress along the critical path through the SUnit graph as we walk</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// the instructions.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *CriticalPathSU = Max;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CriticalPathMI = CriticalPathSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Consider this pattern:</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// There are three anti-dependencies here, and without special care,</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// we&#39;d break all of them using the same register:</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">//   B = ...</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">//   ... = B</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">//   B = ...</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">//   ... = B</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">//   B = ...</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">//   ... = B</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// because at each anti-dependence, B is the first register that</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// isn&#39;t A which is free.  This re-introduces anti-dependencies</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// at all but one of the original anti-dependencies that we were</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// trying to break.  To avoid this, keep track of the most recent</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// register that each register was replaced with, avoid</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// using it to repair an anti-dependence on the same register.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// This lets us produce this:</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">//   A = ...</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">//   ... = A</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">//   B = ...</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">//   ... = B</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">//   C = ...</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">//   ... = C</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">//   B = ...</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">//   ... = B</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// This still has an anti-dependence on B, but at least it isn&#39;t on the</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// original critical path.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="comment">// TODO: If we tracked more than one register here, we could potentially</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// fix that remaining critical edge too. This is a little more involved,</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// because unlike the most recent register, less recent registers should</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// still be considered, though only if no other registers are available.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  std::vector&lt;unsigned&gt; LastNewReg(TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">getNumRegs</a>(), 0);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// Attempt to break anti-dependence edges on the critical path. Walk the</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// instructions from the bottom up, tracking information about liveness</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// as we go to help determine which registers are available.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">unsigned</span> Broken = 0;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordtype">unsigned</span> Count = InsertPosIndex - 1;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = End, E = Begin;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; --Count) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>())</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Check if this instruction has a dependence on the critical path that</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// is an anti-dependence that we may be able to break. If it is, set</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// AntiDepReg to the non-zero register associated with the anti-dependence.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// We limit our attention to the critical path as a heuristic to avoid</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// breaking anti-dependence edges that aren&#39;t going to significantly</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// impact the overall schedule. There are a limited number of registers</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// and we want to save them for the important edges.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// TODO: Instructions with multiple defs could have multiple</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// anti-dependencies. The current code here only knows how to break one</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// edge per instruction. Note that we&#39;d have to be able to break all of</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// the anti-dependencies in an instruction in order to be effective.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">unsigned</span> AntiDepReg = 0;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (MI == CriticalPathMI) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SDep.html">SDep</a> *Edge = <a class="code" href="CriticalAntiDepBreaker_8cpp.html#ad9d8ed7783fba22c5820f7b1100eeb0c">CriticalPathStep</a>(CriticalPathSU)) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *NextSU = Edge-&gt;getSUnit();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Only consider anti-dependence edges.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (Edge-&gt;getKind() == <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a>) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          AntiDepReg = Edge-&gt;getReg();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          assert(AntiDepReg != 0 &amp;&amp; <span class="stringliteral">&quot;Anti-dependence on reg0?&quot;</span>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          <span class="keywordflow">if</span> (!MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a017c4ebe5112a2521ee37dfe1e78236c">isAllocatable</a>(AntiDepReg))</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="comment">// Don&#39;t break anti-dependencies on non-allocatable registers.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            AntiDepReg = 0;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (KeepRegs.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(AntiDepReg))</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="comment">// Don&#39;t break anti-dependencies if an use down below requires</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="comment">// this exact register.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            AntiDepReg = 0;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="comment">// If the SUnit has other dependencies on the SUnit that it</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="comment">// anti-depends on, don&#39;t bother breaking the anti-dependency</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="comment">// since those edges would prevent such units from being</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="comment">// scheduled past each other regardless.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="comment">// Also, if there are dependencies on other SUnits with the</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="comment">// same register as the anti-dependency, don&#39;t attempt to</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="comment">// break it.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_pred_iterator</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = CriticalPathSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(),</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                 PE = CriticalPathSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end(); <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> != PE; ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getSUnit() == NextSU ?</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getKind() != <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a> || <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getReg() != AntiDepReg) :</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                    (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getKind() == <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> &amp;&amp; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getReg() == AntiDepReg)) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                AntiDepReg = 0;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;              }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        CriticalPathSU = NextSU;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        CriticalPathMI = CriticalPathSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">// We&#39;ve reached the end of the critical path.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        CriticalPathSU = 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        CriticalPathMI = 0;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    PrescanInstruction(MI);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 2&gt;</a> ForbidRegs;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// If MI&#39;s defs have a special allocation requirement, don&#39;t allow</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// any def registers to be changed. Also assume all registers</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// defined in a call must not be changed (ABI).</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">isCall</a>() || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aedcf73ca30fe8fb6578df2433f12624a">hasExtraDefRegAllocReq</a>() ||</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(MI))</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// If this instruction&#39;s defs have special allocation requirement, don&#39;t</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="comment">// break this anti-dependency.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      AntiDepReg = 0;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AntiDepReg) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="comment">// If this instruction has a use of AntiDepReg, breaking it</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="comment">// is invalid.  If the instruction defines other registers,</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="comment">// save a list of them so that we don&#39;t pick a new register</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">// that overlaps any of them.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (Reg == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() &amp;&amp; TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">regsOverlap</a>(AntiDepReg, Reg)) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          AntiDepReg = 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp; Reg != AntiDepReg)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          ForbidRegs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// Determine AntiDepReg&#39;s register class, if it is live and is</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// consistently used within a single class.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = AntiDepReg != 0 ? Classes[AntiDepReg] : 0;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    assert((AntiDepReg == 0 || RC != NULL) &amp;&amp;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;           <span class="stringliteral">&quot;Register should be live if it&#39;s causing an anti-dependence!&quot;</span>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (RC == reinterpret_cast&lt;TargetRegisterClass *&gt;(-1))</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      AntiDepReg = 0;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// Look for a suitable register to use to break the anti-depenence.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// TODO: Instead of picking the first free register, consider which might</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// be the best.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (AntiDepReg != 0) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      std::pair&lt;std::multimap&lt;unsigned, MachineOperand *&gt;::iterator,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                std::multimap&lt;unsigned, MachineOperand *&gt;::iterator&gt;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        Range = RegRefs.equal_range(AntiDepReg);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> NewReg = findSuitableFreeRegister(Range.first, Range.second,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                                     AntiDepReg,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                                     LastNewReg[AntiDepReg],</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                                     RC, ForbidRegs)) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Breaking anti-dependence edge on &quot;</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;              &lt;&lt; TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a2546a53db9bdb717a20f9786b1c06137">getName</a>(AntiDepReg)</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; RegRefs.count(AntiDepReg) &lt;&lt; <span class="stringliteral">&quot; references&quot;</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; using &quot;</span> &lt;&lt; TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#a2546a53db9bdb717a20f9786b1c06137">getName</a>(NewReg) &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">// Update the references to the old register to refer to the new</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="comment">// register.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">for</span> (std::multimap&lt;unsigned, MachineOperand *&gt;::iterator</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;             Q = Range.first, QE = Range.second; Q != QE; ++Q) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          Q-&gt;second-&gt;setReg(NewReg);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          <span class="comment">// If the SU for the instruction being updated has debug information</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          <span class="comment">// related to the anti-dependency register, make sure to update that</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;          <span class="comment">// as well.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = MISUnitMap[Q-&gt;second-&gt;getParent()];</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <span class="keywordflow">if</span> (!SU) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <span class="keywordflow">for</span> (DbgValueVector::iterator DVI = DbgValues.begin(),</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                 DVE = DbgValues.end(); DVI != DVE; ++DVI)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">if</span> (DVI-&gt;second == Q-&gt;second-&gt;getParent())</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;              <a class="code" href="classllvm_1_1AntiDepBreaker.html#adfe0240f8da3d0fdf9d833e48e9fe1ea">UpdateDbgValue</a>(DVI-&gt;first, AntiDepReg, NewReg);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">// We just went back in time and modified history; the</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">// liveness information for the anti-dependence reg is now</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">// inconsistent. Set the state as if it were dead.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        Classes[NewReg] = Classes[AntiDepReg];</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        DefIndices[NewReg] = DefIndices[AntiDepReg];</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        KillIndices[NewReg] = KillIndices[AntiDepReg];</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        assert(((KillIndices[NewReg] == ~0u) !=</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                (DefIndices[NewReg] == ~0u)) &amp;&amp;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;             <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for NewReg!&quot;</span>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        Classes[AntiDepReg] = 0;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        DefIndices[AntiDepReg] = KillIndices[AntiDepReg];</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        KillIndices[AntiDepReg] = ~0u;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        assert(((KillIndices[AntiDepReg] == ~0u) !=</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                (DefIndices[AntiDepReg] == ~0u)) &amp;&amp;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;             <span class="stringliteral">&quot;Kill and Def maps aren&#39;t consistent for AntiDepReg!&quot;</span>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        RegRefs.erase(AntiDepReg);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        LastNewReg[AntiDepReg] = NewReg;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        ++Broken;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    ScanInstruction(MI, Count);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">return</span> Broken;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00236">BitVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_acad8fe90886f92eabced0c2f9bd0e6f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">llvm::MachineOperand::getParent</a></div><div class="ttdeci">MachineInstr * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00204">MachineOperand.h:204</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_a8f3fb0ba1af5da87c846bdb47d676351"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#a8f3fb0ba1af5da87c846bdb47d676351">llvm::CriticalAntiDepBreaker::Observe</a></div><div class="ttdeci">void Observe(MachineInstr *MI, unsigned Count, unsigned InsertPosIndex)</div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00094">CriticalAntiDepBreaker.cpp:94</a></div></div>
<div class="ttc" id="classllvm_1_1AntiDepBreaker_html_adfe0240f8da3d0fdf9d833e48e9fe1ea"><div class="ttname"><a href="classllvm_1_1AntiDepBreaker.html#adfe0240f8da3d0fdf9d833e48e9fe1ea">llvm::AntiDepBreaker::UpdateDbgValue</a></div><div class="ttdeci">void UpdateDbgValue(MachineInstr *MI, unsigned OldReg, unsigned NewReg)</div><div class="ttdef"><b>Definition:</b> <a href="AntiDepBreaker_8h_source.html#l00062">AntiDepBreaker.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7bab64c02d740522f94f5f45959a22fc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">llvm::MachineBasicBlock::livein_iterator</a></div><div class="ttdeci">std::vector&lt; unsigned &gt;::const_iterator livein_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00314">MachineBasicBlock.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_adb119d63d924841b0523d67dfdd1bf61"><div class="ttname"><a href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">llvm::SUnit::getInstr</a></div><div class="ttdeci">MachineInstr * getInstr() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00386">ScheduleDAG.h:386</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00278">MachineBasicBlock.h:278</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a803a7424877fd049679b9aa2f07597b5"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">llvm::MachineInstr::getDesc</a></div><div class="ttdeci">const MCInstrDesc &amp; getDesc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00257">MachineInstr.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_acbc27d4dc09d7918b17ad50466fc42e9"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#acbc27d4dc09d7918b17ad50466fc42e9">llvm::CriticalAntiDepBreaker::FinishBlock</a></div><div class="ttdeci">void FinishBlock()</div><div class="ttdoc">Finish - Finish anti-dep breaking for a basic block. </div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00089">CriticalAntiDepBreaker.cpp:89</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ace3ed0412f841777b7de55d47883890e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">llvm::MachineBasicBlock::back</a></div><div class="ttdeci">MachineInstr &amp; back()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00223">MachineBasicBlock.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ae2b43854b542de66eec6475adc48f56c"><div class="ttname"><a href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">llvm::SUnit::Preds</a></div><div class="ttdeci">SmallVector&lt; SDep, 4 &gt; Preds</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00263">ScheduleDAG.h:263</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e"><div class="ttname"><a href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">llvm::SDep::Anti</a></div><div class="ttdoc">A register anti-dependedence (aka WAR). </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00050">ScheduleDAG.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae53a385b86237b961ccc18a8701ae588"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae53a385b86237b961ccc18a8701ae588">llvm::TargetRegisterInfo::getCalleeSavedRegs</a></div><div class="ttdeci">virtual const MCPhysReg * getCalleeSavedRegs(const MachineFunction *MF=0) const =0</div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1MCSuperRegIterator_html"><div class="ttname"><a href="classllvm_1_1MCSuperRegIterator.html">llvm::MCSuperRegIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00454">MCRegisterInfo.h:454</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1AntiDepBreaker_html"><div class="ttname"><a href="classllvm_1_1AntiDepBreaker.html">llvm::AntiDepBreaker</a></div><div class="ttdef"><b>Definition:</b> <a href="AntiDepBreaker_8h_source.html#l00031">AntiDepBreaker.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26"><div class="ttname"><a href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">llvm::SDep::Data</a></div><div class="ttdoc">Regular data dependence (aka true-dependence). </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00049">ScheduleDAG.h:49</a></div></div>
<div class="ttc" id="MachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="MachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aefba5f2af370add1bc8aaceedf7878ef"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">llvm::MachineBasicBlock::succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00249">MachineBasicBlock.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">Abstract Stack Frame Information. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00080">MachineFrameInfo.h:80</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html_abf2eadac3ea84e2e2739444c40421eac"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html#abf2eadac3ea84e2e2739444c40421eac">llvm::MCRegAliasIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00580">MCRegisterInfo.h:580</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html_a3812bd10f638bd6a46451e9e82bf1ca8"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html#a3812bd10f638bd6a46451e9e82bf1ca8">llvm::RegisterClassInfo::getOrder</a></div><div class="ttdeci">ArrayRef&lt; MCPhysReg &gt; getOrder(const TargetRegisterClass *RC) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00094">RegisterClassInfo.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_aded9e7fdb58a9ca5a2eca8a3360872cc"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#aded9e7fdb58a9ca5a2eca8a3360872cc">llvm::CriticalAntiDepBreaker::StartBlock</a></div><div class="ttdeci">void StartBlock(MachineBasicBlock *BB)</div><div class="ttdoc">Start - Initialize anti-dep breaking for a new basic block. </div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00044">CriticalAntiDepBreaker.cpp:44</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_a56e9a625f708912164f16c178ceb97d7"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#a56e9a625f708912164f16c178ceb97d7">llvm::MCRegisterInfo::getNumRegs</a></div><div class="ttdeci">unsigned getNumRegs() const </div><div class="ttdoc">Return the number of registers this target has (useful for sizing arrays holding per register informa...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00359">MCRegisterInfo.h:359</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_ae6fcee7dea47f05718212607080d10ab"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#ae6fcee7dea47f05718212607080d10ab">llvm::CriticalAntiDepBreaker::BreakAntiDependencies</a></div><div class="ttdeci">unsigned BreakAntiDependencies(const std::vector&lt; SUnit &gt; &amp;SUnits, MachineBasicBlock::iterator Begin, MachineBasicBlock::iterator End, unsigned InsertPosIndex, DbgValueVector &amp;DbgValues)</div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00406">CriticalAntiDepBreaker.cpp:406</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a88221e7c920257aa2832c82a0951234d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a88221e7c920257aa2832c82a0951234d">llvm::MachineInstr::hasExtraSrcRegAllocReq</a></div><div class="ttdeci">bool hasExtraSrcRegAllocReq(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00572">MachineInstr.h:572</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; MCPhysReg &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html"><div class="ttname"><a href="classllvm_1_1SDep.html">llvm::SDep</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00045">ScheduleDAG.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a11d72231fe6da4abec10afff58dede5d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">llvm::MachineOperand::isEarlyClobber</a></div><div class="ttdeci">bool isEarlyClobber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00304">MachineOperand.h:304</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a059149938a94c2d38fc5b8796bd26cce"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">llvm::MachineInstr::isReturn</a></div><div class="ttdeci">bool isReturn(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00345">MachineInstr.h:345</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a4fac7ec2f43b802397b65018bda0040e"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">llvm::TargetRegisterInfo::regsOverlap</a></div><div class="ttdeci">bool regsOverlap(unsigned regA, unsigned regB) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00394">TargetRegisterInfo.h:394</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a72e0568b7bf0e9a97260c34264a549a0"><div class="ttname"><a href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">llvm::SUnit::Latency</a></div><div class="ttdeci">unsigned short Latency</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00280">ScheduleDAG.h:280</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegAliasIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html">llvm::MCRegAliasIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00555">MCRegisterInfo.h:555</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00275">BitVector.h:275</a></div></div>
<div class="ttc" id="CriticalAntiDepBreaker_8h_html"><div class="ttname"><a href="CriticalAntiDepBreaker_8h.html">CriticalAntiDepBreaker.h</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_afcfe11d8e76ce559a7a12d5b95ab1474"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#afcfe11d8e76ce559a7a12d5b95ab1474">llvm::CriticalAntiDepBreaker::CriticalAntiDepBreaker</a></div><div class="ttdeci">CriticalAntiDepBreaker(MachineFunction &amp;MFi, const RegisterClassInfo &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00030">CriticalAntiDepBreaker.cpp:30</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MCSubRegIterator_html"><div class="ttname"><a href="classllvm_1_1MCSubRegIterator.html">llvm::MCSubRegIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00441">MCRegisterInfo.h:441</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html">llvm::RegisterClassInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00027">RegisterClassInfo.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2c5eddfba64e7a44deba1b5a0d45a017"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">llvm::MachineOperand::isRegMask</a></div><div class="ttdeci">bool isRegMask() const </div><div class="ttdoc">isRegMask - Tests if this is a MO_RegisterMask operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00248">MachineOperand.h:248</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html_a3fff4d8b50a9a2c39e792861ed1a76e3"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3fff4d8b50a9a2c39e792861ed1a76e3">llvm::MachineFrameInfo::getPristineRegs</a></div><div class="ttdeci">BitVector getPristineRegs(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00566">MachineFunction.cpp:566</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_acd9af7d3f8a155c4356edccbc0522c8e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#acd9af7d3f8a155c4356edccbc0522c8e">llvm::MachineInstr::isInlineAsm</a></div><div class="ttdeci">bool isInlineAsm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00651">MachineInstr.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aedcf73ca30fe8fb6578df2433f12624a"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aedcf73ca30fe8fb6578df2433f12624a">llvm::MachineInstr::hasExtraDefRegAllocReq</a></div><div class="ttdeci">bool hasExtraDefRegAllocReq(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00582">MachineInstr.h:582</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a017c4ebe5112a2521ee37dfe1e78236c"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a017c4ebe5112a2521ee37dfe1e78236c">llvm::MachineRegisterInfo::isAllocatable</a></div><div class="ttdeci">bool isAllocatable(unsigned PhysReg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00510">MachineRegisterInfo.h:510</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a4ad4295a88187ea1ae12ecfcfa18a70f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4ad4295a88187ea1ae12ecfcfa18a70f">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo * getFrameInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00174">MachineFunction.h:174</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad5bef9f5be828b62f053b3017eb9dbdb"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad5bef9f5be828b62f053b3017eb9dbdb">llvm::MachineOperand::clobbersPhysReg</a></div><div class="ttdeci">static bool clobbersPhysReg(const uint32_t *RegMask, unsigned PhysReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00461">MachineOperand.h:461</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a3047721a8d33c2de8a261d2fecb340a6"><div class="ttname"><a href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">llvm::SUnit::getDepth</a></div><div class="ttdeci">unsigned getDepth() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00403">ScheduleDAG.h:403</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac4de5f228c299d7c4b7de72a4a6dd28c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">llvm::MachineInstr::isCall</a></div><div class="ttdeci">bool isCall(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00349">MachineInstr.h:349</a></div></div>
<div class="ttc" id="CriticalAntiDepBreaker_8cpp_html_ad9d8ed7783fba22c5820f7b1100eeb0c"><div class="ttname"><a href="CriticalAntiDepBreaker_8cpp.html#ad9d8ed7783fba22c5820f7b1100eeb0c">CriticalPathStep</a></div><div class="ttdeci">static const SDep * CriticalPathStep(const SUnit *SU)</div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00126">CriticalAntiDepBreaker.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1CriticalAntiDepBreaker_html_a40ff81ca1f305a69ad054a7fc52ae9e4"><div class="ttname"><a href="classllvm_1_1CriticalAntiDepBreaker.html#a40ff81ca1f305a69ad054a7fc52ae9e4">llvm::CriticalAntiDepBreaker::~CriticalAntiDepBreaker</a></div><div class="ttdeci">~CriticalAntiDepBreaker()</div><div class="ttdef"><b>Definition:</b> <a href="CriticalAntiDepBreaker_8cpp_source.html#l00041">CriticalAntiDepBreaker.cpp:41</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a15f8f9567157c31ce83e5ccfab8cb8be"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a15f8f9567157c31ce83e5ccfab8cb8be">llvm::MachineBasicBlock::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00219">MachineBasicBlock.h:219</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1AntiDepBreaker_html_a6c381aabe72a248ff7d09bb0e2eac7ae"><div class="ttname"><a href="classllvm_1_1AntiDepBreaker.html#a6c381aabe72a248ff7d09bb0e2eac7ae">llvm::AntiDepBreaker::DbgValueVector</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; MachineInstr *, MachineInstr * &gt; &gt; DbgValueVector</div><div class="ttdef"><b>Definition:</b> <a href="AntiDepBreaker_8h_source.html#l00034">AntiDepBreaker.h:34</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_a2546a53db9bdb717a20f9786b1c06137"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#a2546a53db9bdb717a20f9786b1c06137">llvm::MCRegisterInfo::getName</a></div><div class="ttdeci">const char * getName(unsigned RegNo) const </div><div class="ttdoc">Return the human-readable symbolic target-specific name for the specified physical register...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00353">MCRegisterInfo.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a2a69dd402cbc7f6282c93c32161395bc"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">llvm::TargetInstrInfo::isPredicated</a></div><div class="ttdeci">virtual bool isPredicated(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00672">TargetInstrInfo.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aabf764b704ed905ec6841a8872815bff"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#aabf764b704ed905ec6841a8872815bff">llvm::TargetInstrInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(const MCInstrDesc &amp;TID, unsigned OpNum, const TargetRegisterInfo *TRI, const MachineFunction &amp;MF) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00040">TargetInstrInfo.cpp:40</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ab1d4c079cb5cd4b7c55376ce972f7e79"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ab1d4c079cb5cd4b7c55376ce972f7e79">llvm::MachineInstr::isRegTiedToUseOperand</a></div><div class="ttdeci">bool isRegTiedToUseOperand(unsigned DefOpIdx, unsigned *UseOpIdx=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00850">MachineInstr.h:850</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_abb4ce3bc3096a12d4b93460bf78bcf95"><div class="ttname"><a href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in it</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00053">README-SSE.txt:53</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html"><div class="ttname"><a href="classllvm_1_1SUnit.html">llvm::SUnit</a></div><div class="ttdoc">SUnit - Scheduling unit. This is a node in the scheduling DAG. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00249">ScheduleDAG.h:249</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:24 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
