<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: RegAllocGreedy.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('RegAllocGreedy_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RegAllocGreedy.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RegAllocGreedy_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- RegAllocGreedy.cpp - greedy register allocator --------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file defines the RAGreedy function pass for register allocation in</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// optimized builds.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="RegAllocGreedy_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   15</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;regalloc&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AllocationOrder_8h.html">AllocationOrder.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InterferenceCache_8h.html">InterferenceCache.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveDebugVariables_8h.html">LiveDebugVariables.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegAllocBase_8h.html">RegAllocBase.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpillPlacement_8h.html">SpillPlacement.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Spiller_8h.html">Spiller.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SplitKit_8h.html">SplitKit.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CalcSpillWeights_8h.html">llvm/CodeGen/CalcSpillWeights.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EdgeBundles_8h.html">llvm/CodeGen/EdgeBundles.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervalAnalysis_8h.html">llvm/CodeGen/LiveIntervalAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveRangeEdit_8h.html">llvm/CodeGen/LiveRangeEdit.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveRegMatrix_8h.html">llvm/CodeGen/LiveRegMatrix.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveStackAnalysis_8h.html">llvm/CodeGen/LiveStackAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBlockFrequencyInfo_8h.html">llvm/CodeGen/MachineBlockFrequencyInfo.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegAllocRegistry_8h.html">llvm/CodeGen/RegAllocRegistry.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VirtRegMap_8h.html">llvm/CodeGen/VirtRegMap.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassAnalysisSupport_8h.html">llvm/PassAnalysisSupport.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Timer_8h.html">llvm/Support/Timer.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<a class="code" href="RegAllocGreedy_8cpp.html#ad32c73ff9b51db25ee08e4fcabc5ce5a">STATISTIC</a>(NumGlobalSplits, <span class="stringliteral">&quot;Number of split global live ranges&quot;</span>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="RegAllocGreedy_8cpp.html#ad32c73ff9b51db25ee08e4fcabc5ce5a">STATISTIC</a>(NumLocalSplits,  <span class="stringliteral">&quot;Number of split local live ranges&quot;</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="RegAllocGreedy_8cpp.html#ad32c73ff9b51db25ee08e4fcabc5ce5a">STATISTIC</a>(NumEvicted,      <span class="stringliteral">&quot;Number of interferences evicted&quot;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;SplitEditor::ComplementSpillMode&gt;</a></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="RegAllocGreedy_8cpp.html#a8c706b5f4a64e9a1096972670ff0b56a">SplitSpillMode</a>(<span class="stringliteral">&quot;split-spill-mode&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Spill mode for splitting live ranges&quot;</span>),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a27a0bf90e37db96939e0b5e1daffb0a6">cl::values</a>(<a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7a5cd5c6b9f5402366a8e7a28a55925720">SplitEditor::SM_Partition</a>, <span class="stringliteral">&quot;default&quot;</span>, <span class="stringliteral">&quot;Default&quot;</span>),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;             <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7ade36d2a249a7f767c968e8667190bc11">SplitEditor::SM_Size</a>,  <span class="stringliteral">&quot;size&quot;</span>,  <span class="stringliteral">&quot;Optimize for size&quot;</span>),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;             <a class="code" href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a>(<a class="code" href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7a7bfb05c8742572ff98fd4f226bb0aede">SplitEditor::SM_Speed</a>, <span class="stringliteral">&quot;speed&quot;</span>, <span class="stringliteral">&quot;Optimize for speed&quot;</span>),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;             <a class="code" href="CommandLine_8h.html#a9fa4641915b4a8690fac9768ea423584">clEnumValEnd</a>),</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<a class="code" href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7a5cd5c6b9f5402366a8e7a28a55925720">SplitEditor::SM_Partition</a>));</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1RegisterRegAlloc.html">RegisterRegAlloc</a> <a class="code" href="RegAllocGreedy_8cpp.html#a5a01c70b33dc7d9c7705170732387b84">greedyRegAlloc</a>(<span class="stringliteral">&quot;greedy&quot;</span>, <span class="stringliteral">&quot;greedy register allocator&quot;</span>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                       <a class="code" href="namespacellvm.html#a1e408e746db9cae453eb2799eedc64ce">createGreedyRegisterAllocator</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">class </span>RAGreedy : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                 <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegAllocBase.html">RegAllocBase</a>,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                 <span class="keyword">private</span> <a class="code" href="classllvm_1_1LiveRangeEdit_1_1Delegate.html">LiveRangeEdit::Delegate</a> {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// context</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// analyses</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a> *Indexes;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> *MBFI;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a> *DomTree;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classllvm_1_1EdgeBundles.html">EdgeBundles</a> *Bundles;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classllvm_1_1SpillPlacement.html">SpillPlacement</a> *SpillPlacer;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classllvm_1_1LiveDebugVariables.html">LiveDebugVariables</a> *DebugVars;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// state</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;Spiller&gt;</a> SpillerInstance;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  std::priority_queue&lt;std::pair&lt;unsigned, unsigned&gt; &gt; Queue;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">unsigned</span> NextCascade;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// Live ranges pass through a number of stages as we try to allocate them.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Some of the stages may also create new live ranges:</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// - Region splitting.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// - Per-block splitting.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// - Local splitting.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// - Spilling.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// Ranges produced by one of the stages skip the previous stages when they are</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// dequeued. This improves performance because we can skip interference checks</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// that are unlikely to give any results. It also guarantees that the live</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// range splitting algorithm terminates, something that is otherwise hard to</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// ensure.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">enum</span> LiveRangeStage {<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /// Newly created live range that has never been queued.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span>    RS_New,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    /// Only attempt assignment and eviction. Then requeue as RS_Split.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span>    RS_Assign,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    /// Attempt live range splitting if assignment is impossible.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>    RS_Split,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">    /// Attempt more aggressive live range splitting that is guaranteed to make</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    /// progress.  This is used for split products that may not be making</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    /// progress.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span>    RS_Split2,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">    /// Live range will be spilled.  No more splitting will be attempted.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span>    RS_Spill,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">    /// There is nothing more we can do to this live range.  Abort compilation</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    /// if it can&#39;t be assigned.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span>    RS_Done</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  };</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> StageName[];</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// RegInfo - Keep additional information about each live range.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keyword">struct </span>RegInfo {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    LiveRangeStage Stage;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Cascade - Eviction loop prevention. See canEvictInterference().</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">unsigned</span> Cascade;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    RegInfo() : Stage(RS_New), Cascade(0) {}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  };</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classllvm_1_1IndexedMap.html">IndexedMap&lt;RegInfo, VirtReg2IndexFunctor&gt;</a> ExtraRegInfo;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  LiveRangeStage getStage(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg)<span class="keyword"> const </span>{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Stage;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">void</span> setStage(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, LiveRangeStage Stage) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Stage = Stage;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Iterator&gt;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">void</span> setStage(Iterator Begin, Iterator End, LiveRangeStage NewStage) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">for</span> (;Begin != End; ++Begin) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = *Begin;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (ExtraRegInfo[Reg].Stage == RS_New)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        ExtraRegInfo[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>].Stage = NewStage;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  /// Cost of evicting interference.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>EvictionCost {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">unsigned</span> BrokenHints; <span class="comment">///&lt; Total number of broken hints.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> MaxWeight;      <span class="comment">///&lt; Maximum spill weight evicted.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    EvictionCost(<span class="keywordtype">unsigned</span> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0) : BrokenHints(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>), MaxWeight(0) {}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">bool</span> isMax()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> BrokenHints == ~0u; }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a7c469a194119a14e5a018ebb9b847cf0">operator&lt;</a>(<span class="keyword">const</span> EvictionCost &amp;O)<span class="keyword"> const </span>{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">if</span> (BrokenHints != O.BrokenHints)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> BrokenHints &lt; O.BrokenHints;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">return</span> MaxWeight &lt; O.MaxWeight;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  };</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// splitting state.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SplitAnalysis&gt;</a> SA;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SplitEditor&gt;</a> SE;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// Cached per-block interference maps</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InterferenceCache.html">InterferenceCache</a> IntfCache;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /// All basic blocks where the current register has uses.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SpillPlacement::BlockConstraint, 8&gt;</a> SplitConstraints;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">  /// Global live range splitting candidate info.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>GlobalSplitCandidate {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// Register intended for assignment, or 0.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">unsigned</span> PhysReg;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// SplitKit interval index for this candidate.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">unsigned</span> IntvIdx;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// Interference for PhysReg.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html">InterferenceCache::Cursor</a> Intf;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Bundles where this candidate should be live.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> LiveBundles;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> ActiveBlocks;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">void</span> reset(<a class="code" href="classllvm_1_1InterferenceCache.html">InterferenceCache</a> &amp;Cache, <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      PhysReg = <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      IntvIdx = 0;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a04d65cd676f91684c4babb8388e752f7">setPhysReg</a>(Cache, Reg);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      LiveBundles.<a class="code" href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">clear</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      ActiveBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// Set B[i] = C for every live bundle where B[i] was NoCand.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">unsigned</span> getBundles(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordtype">unsigned</span> Count = 0;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = LiveBundles.<a class="code" href="classllvm_1_1BitVector.html#a5a2d0629a1d92f7c8f351b8e89f4ce47">find_first</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;           <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = LiveBundles.<a class="code" href="classllvm_1_1BitVector.html#afd82d14c16ba1251e6853357f41e2209">find_next</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (B[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] == NoCand) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          B[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          Count++;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> Count;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  };</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">  /// Candidate info for for each PhysReg in AllocationOrder.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">  /// This vector never shrinks, but grows to the size of the largest register</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">  /// class.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;GlobalSplitCandidate, 32&gt;</a> GlobalCand;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keyword">enum</span> <a class="code" href="namespacellvm.html#a5394a63864680ef10fb99031bb94321f">LLVM_ENUM_INT_TYPE</a>(<span class="keywordtype">unsigned</span>) { NoCand = ~0u };</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">  /// Candidate map. Each edge bundle is assigned to a GlobalCand entry, or to</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">  /// NoCand which indicates the stack interval.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 32&gt;</a> BundleCand;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  RAGreedy();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">  /// Return the pass name.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Greedy Register Allocator&quot;</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">  /// RAGreedy analysis usage.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseMemory();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1Spiller.html">Spiller</a> &amp;spiller() { <span class="keywordflow">return</span> *SpillerInstance; }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> enqueue(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *dequeue();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> selectOrSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">  /// Perform register allocation.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">bool</span> LRE_CanEraseVirtReg(<span class="keywordtype">unsigned</span>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordtype">void</span> LRE_WillShrinkVirtReg(<span class="keywordtype">unsigned</span>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">void</span> LRE_DidCloneVirtReg(<span class="keywordtype">unsigned</span>, <span class="keywordtype">unsigned</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> calcSpillCost();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">bool</span> addSplitConstraints(<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html">InterferenceCache::Cursor</a>, <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a>&amp;);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">void</span> addThroughConstraints(<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html">InterferenceCache::Cursor</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">void</span> growRegion(GlobalSplitCandidate &amp;Cand);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> calcGlobalSplitCost(GlobalSplitCandidate&amp;);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">bool</span> calcCompactRegion(GlobalSplitCandidate&amp;);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">void</span> splitAroundRegion(<a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a>&amp;, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">void</span> calcGapWeights(<span class="keywordtype">unsigned</span>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;float&gt;</a>&amp;);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">unsigned</span> canReassign(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keywordtype">unsigned</span> PhysReg);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">bool</span> shouldEvict(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <span class="keywordtype">bool</span>, <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;B, <span class="keywordtype">bool</span>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">bool</span> canEvictInterference(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <span class="keywordtype">unsigned</span>, <span class="keywordtype">bool</span>, EvictionCost&amp;);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">void</span> evictInterference(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <span class="keywordtype">unsigned</span>,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordtype">unsigned</span> tryAssign(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordtype">unsigned</span> tryEvict(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;, <span class="keywordtype">unsigned</span> = ~0u);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordtype">unsigned</span> tryRegionSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">unsigned</span> tryBlockSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">unsigned</span> tryInstructionSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">unsigned</span> tryLocalSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordtype">unsigned</span> trySplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a>&amp;,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;};</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">RAGreedy::ID</a> = 0;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> RAGreedy::StageName[] = {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="stringliteral">&quot;RS_New&quot;</span>,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="stringliteral">&quot;RS_Assign&quot;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="stringliteral">&quot;RS_Split&quot;</span>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="stringliteral">&quot;RS_Split2&quot;</span>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="stringliteral">&quot;RS_Spill&quot;</span>,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="stringliteral">&quot;RS_Done&quot;</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;};</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// Hysteresis to use when comparing floats.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// This helps stabilize decisions based on float comparisons.</span></div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="RegAllocGreedy_8cpp.html#a121070ba7388da52c72cbb1929ebd594">  304</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="RegAllocGreedy_8cpp.html#a121070ba7388da52c72cbb1929ebd594">Hysteresis</a> = 0.98f;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="namespacellvm.html#a1e408e746db9cae453eb2799eedc64ce">  307</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>* <a class="code" href="namespacellvm.html#a1e408e746db9cae453eb2799eedc64ce">llvm::createGreedyRegisterAllocator</a>() {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> RAGreedy();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;RAGreedy::RAGreedy(): <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="namespacellvm.html#ab05e8fdec16361e426acc7fa7904544f">initializeLiveDebugVariablesPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="namespacellvm.html#aa68a1c0afe039658609beebc96121f39">initializeSlotIndexesPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="namespacellvm.html#aea2ef5e4ec532aa42606902e9001f712">initializeLiveIntervalsPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="namespacellvm.html#aa68a1c0afe039658609beebc96121f39">initializeSlotIndexesPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="namespacellvm.html#a238eae485eb747cb1ca649ea599b5c82">initializeRegisterCoalescerPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="namespacellvm.html#a9b59b13f97bee321b57c23f4c0cb3ac2">initializeMachineSchedulerPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="namespacellvm.html#a7aeb11cd960ff18ae0b12e678dfcae57">initializeLiveStacksPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="namespacellvm.html#aa031151c2e9cc0ea84204730cf395b0f">initializeMachineDominatorTreePass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="namespacellvm.html#ac6ce5e3d2a1edf66c1beb80be260ea0b">initializeMachineLoopInfoPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="namespacellvm.html#a49962b01687c86f2c8bcf37a9037ff85">initializeVirtRegMapPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="namespacellvm.html#aca2446f62c45521dfda784ed35f3cd44">initializeLiveRegMatrixPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="namespacellvm.html#a778bcc1dd6188bd894d03c68a3fb28e7">initializeEdgeBundlesPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="namespacellvm.html#aaf5867f5ab3833a39b9518fbd85acac5">initializeSpillPlacementPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="keywordtype">void</span> RAGreedy::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LiveDebugVariables.html">LiveDebugVariables</a>&gt;();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveDebugVariables.html">LiveDebugVariables</a>&gt;();</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LiveStacks.html">LiveStacks</a>&gt;();</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveStacks.html">LiveStacks</a>&gt;();</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1VirtRegMap.html">VirtRegMap</a>&gt;();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1VirtRegMap.html">VirtRegMap</a>&gt;();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LiveRegMatrix.html">LiveRegMatrix</a>&gt;();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveRegMatrix.html">LiveRegMatrix</a>&gt;();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1EdgeBundles.html">EdgeBundles</a>&gt;();</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1SpillPlacement.html">SpillPlacement</a>&gt;();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">//                     LiveRangeEdit delegate methods</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="keywordtype">bool</span> RAGreedy::LRE_CanEraseVirtReg(<span class="keywordtype">unsigned</span> VirtReg) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (VRM-&gt;hasPhys(VirtReg)) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;unassign(LIS-&gt;getInterval(VirtReg));</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Unassigned virtreg is probably in the priority queue.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// RegAllocBase will erase it after dequeueing.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="keywordtype">void</span> RAGreedy::LRE_WillShrinkVirtReg(<span class="keywordtype">unsigned</span> VirtReg) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">if</span> (!VRM-&gt;hasPhys(VirtReg))</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// Register is assigned, put it back on the queue for reassignment.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;getInterval(VirtReg);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;unassign(LI);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  enqueue(&amp;LI);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordtype">void</span> RAGreedy::LRE_DidCloneVirtReg(<span class="keywordtype">unsigned</span> New, <span class="keywordtype">unsigned</span> Old) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// Cloning a register we haven&#39;t even heard about yet?  Just ignore it.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (!ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a4f6616201a89f276cfb638222b8b24fa">inBounds</a>(Old))</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// LRE may clone a virtual register because dead code elimination causes it to</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// be split into connected components. The new components are much smaller</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// than the original, so they should get a new chance at being assigned.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// same stage as the parent.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  ExtraRegInfo[Old].Stage = RS_Assign;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a5e822b0690502a04b87125e63dbc8316">grow</a>(New);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  ExtraRegInfo[New] = ExtraRegInfo[Old];</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keywordtype">void</span> RAGreedy::releaseMemory() {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  SpillerInstance.<a class="code" href="classllvm_1_1OwningPtr.html#ad45fe2513c9468cbd4fa891a3685f380">reset</a>(0);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#ac835fc191baf29fc0fd54d1c41146868">clear</a>();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  GlobalCand.clear();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keywordtype">void</span> RAGreedy::enqueue(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// Prioritize live ranges by size, assigning larger ranges first.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// The queue holds (size, reg) pairs.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Size = LI-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a70543843b2191d018dd4c0c745a70ae0">getSize</a>();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Reg = LI-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         <span class="stringliteral">&quot;Can only enqueue virtual registers&quot;</span>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordtype">unsigned</span> Prio;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a5e822b0690502a04b87125e63dbc8316">grow</a>(Reg);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (ExtraRegInfo[Reg].Stage == RS_New)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    ExtraRegInfo[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>].Stage = RS_Assign;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (ExtraRegInfo[Reg].Stage == RS_Split) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Unsplit ranges that couldn&#39;t be allocated immediately are deferred until</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// everything else has been allocated.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    Prio = Size;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (ExtraRegInfo[Reg].Stage == RS_Assign &amp;&amp; !LI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">empty</a>() &amp;&amp;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        LIS-&gt;intervalIsInOneMBB(*LI)) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// Allocate original local ranges in linear instruction order. Since they</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// are singly defined, this produces optimal coloring in the absence of</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="comment">// global interference and other constraints.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      Prio = LI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">beginIndex</a>().<a class="code" href="classllvm_1_1SlotIndex.html#a743d86f999a8a7c67c230442d8890661">getInstrDistance</a>(Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a08d65216af6fc79fe34347db3b9d8e75">getLastIndex</a>());</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="comment">// Allocate global and split ranges in long-&gt;short order. Long ranges that</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">// don&#39;t fit should be spilled (or split) ASAP so they don&#39;t create</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="comment">// interference.  Mark a bit to prioritize global above local ranges.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      Prio = (1u &lt;&lt; 29) + Size;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Mark a higher bit to prioritize global and local above RS_Split.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    Prio |= (1u &lt;&lt; 31);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// Boost ranges that have a physical register hint.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (VRM-&gt;hasKnownPreference(Reg))</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      Prio |= (1u &lt;&lt; 30);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// The virtual register number is a tie breaker for same-sized ranges.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// Give lower vreg numbers higher priority to assign them first.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  Queue.push(std::make_pair(Prio, ~Reg));</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *RAGreedy::dequeue() {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (Queue.empty())</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI = &amp;LIS-&gt;getInterval(~Queue.top().second);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  Queue.pop();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">return</span> LI;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">//                            Direct Assignment</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/// tryAssign - Try to assign VirtReg to an available register.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> RAGreedy::tryAssign(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                             <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ab421e1f5c9e90bb8dd6ad25b13f35ac7">rewind</a>();</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordtype">unsigned</span> PhysReg;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">while</span> ((PhysReg = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ad2268c47b7b3a67b032d657e52911190">next</a>()))</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;checkInterference(VirtReg, PhysReg))</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">if</span> (!PhysReg || Order.<a class="code" href="classllvm_1_1AllocationOrder.html#a9ed95c56986bd2d016a56b301b7da852">isHint</a>())</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// PhysReg is available, but there may be a better choice.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// If we missed a simple hint, try to cheaply evict interference from the</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// preferred register.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> Hint = <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getSimpleHint(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>))</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (Order.<a class="code" href="classllvm_1_1AllocationOrder.html#a9ed95c56986bd2d016a56b301b7da852">isHint</a>(Hint)) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;missed hint &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Hint, TRI) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      EvictionCost MaxCost(1);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (canEvictInterference(VirtReg, Hint, <span class="keyword">true</span>, MaxCost)) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        evictInterference(VirtReg, Hint, NewVRegs);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">return</span> Hint;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// Try to evict interference from a cheaper alternative.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">unsigned</span> Cost = TRI-&gt;getCostPerUse(PhysReg);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// Most registers have 0 additional cost.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> (!Cost)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI) &lt;&lt; <span class="stringliteral">&quot; is available at cost &quot;</span> &lt;&lt; Cost</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;               &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordtype">unsigned</span> CheapReg = tryEvict(VirtReg, Order, NewVRegs, Cost);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">return</span> CheapReg ? CheapReg : PhysReg;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">//                         Interference eviction</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="keywordtype">unsigned</span> RAGreedy::canReassign(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keywordtype">unsigned</span> PrevReg) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> Order(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>, *VRM, RegClassInfo);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordtype">unsigned</span> PhysReg;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">while</span> ((PhysReg = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ad2268c47b7b3a67b032d657e52911190">next</a>())) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (PhysReg == PrevReg)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, TRI);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">for</span> (; Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">// Instantiate a &quot;subquery&quot;, not to be confused with the Queries array.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html">LiveIntervalUnion::Query</a> subQ(&amp;VirtReg, &amp;<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;getLiveUnions()[*Units]);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (subQ.checkInterference())</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// If no units have interference, break out with the current PhysReg.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (!Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>())</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (PhysReg)</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;can reassign: &quot;</span> &lt;&lt; VirtReg &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PrevReg, TRI) &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">/// shouldEvict - determine if A should evict the assigned live range B. The</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">/// eviction policy defined by this function together with the allocation order</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">/// defined by enqueue() decides which registers ultimately end up being split</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/// and spilled.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">/// Cascade numbers are used to prevent infinite loops if this function is a</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">/// cyclic relation.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// @param A          The live range to be assigned.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/// @param IsHint     True when A is about to be assigned to its preferred</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">///                   register.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/// @param B          The live range to be evicted.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/// @param BreaksHint True when B is already assigned to its preferred register.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> RAGreedy::shouldEvict(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <span class="keywordtype">bool</span> IsHint,</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                           <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <span class="keywordtype">bool</span> BreaksHint) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">bool</span> CanSplit = getStage(B) &lt; RS_Spill;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// Be fairly aggressive about following hints as long as the evictee can be</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// split.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">if</span> (CanSplit &amp;&amp; IsHint &amp;&amp; !BreaksHint)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">return</span> A.<a class="code" href="classllvm_1_1LiveInterval.html#a99eec2c4ba894baca5b197e940b095f6">weight</a> &gt; B.<a class="code" href="classllvm_1_1LiveInterval.html#a99eec2c4ba894baca5b197e940b095f6">weight</a>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">/// canEvictInterference - Return true if all interferences between VirtReg and</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">/// PhysReg can be evicted.  When OnlyCheap is set, don&#39;t do anything</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">/// @param VirtReg Live range that is about to be assigned.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">/// @param PhysReg Desired register for assignment.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">/// @param IsHint  True when PhysReg is VirtReg&#39;s preferred register.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/// @param MaxCost Only look for cheaper candidates and update with new cost</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">///                when returning true.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">/// @returns True when interference can be evicted cheaper than MaxCost.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> RAGreedy::canEvictInterference(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keywordtype">unsigned</span> PhysReg,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                    <span class="keywordtype">bool</span> IsHint, EvictionCost &amp;MaxCost) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// It is only possible to evict virtual register interference.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;checkInterference(VirtReg, PhysReg) &gt; <a class="code" href="classllvm_1_1LiveRegMatrix.html#ab317b81a1c575049207d5d9348d8635aa30186d61b40f517e8dc5d9e85076a91f">LiveRegMatrix::IK_VirtReg</a>)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordtype">bool</span> IsLocal = LIS-&gt;intervalIsInOneMBB(VirtReg);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// Find VirtReg&#39;s cascade number. This will be unassigned if VirtReg was never</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// involved in an eviction before. If a cascade number was assigned, deny</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// evicting anything with the same or a newer cascade number. This prevents</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// infinite eviction loops.</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// This works out so a register without a cascade number is allowed to evict</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// anything, and it can be evicted by anything.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">unsigned</span> Cascade = ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">if</span> (!Cascade)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    Cascade = NextCascade;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  EvictionCost Cost;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html">LiveIntervalUnion::Query</a> &amp;Q = <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;query(VirtReg, *Units);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// If there is 10 or more interferences, chances are one is heavier.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#aa64ff93c76b3a430e6533685ff9066fe">collectInterferingVRegs</a>(10) &gt;= 10)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// Check if any interfering live range is heavier than MaxWeight.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a6f98daaaac432eaa936a98e594faf212">interferingVRegs</a>().size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *Intf = Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a6f98daaaac432eaa936a98e594faf212">interferingVRegs</a>()[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>) &amp;&amp;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;             <span class="stringliteral">&quot;Only expecting virtual register interference from query&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="comment">// Never evict spill products. They cannot split or spill.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">if</span> (getStage(*Intf) == RS_Done)</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="comment">// Once a live range becomes small enough, it is urgent that we find a</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="comment">// register for it. This is indicated by an infinite spill weight. These</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="comment">// urgent live ranges get to evict almost anything.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="comment">// Also allow urgent evictions of unspillable ranges from a strictly</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="comment">// larger allocation order.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordtype">bool</span> Urgent = !VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>() &amp;&amp;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        (Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>() ||</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;         RegClassInfo.getNumAllocatableRegs(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>)) &lt;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         RegClassInfo.getNumAllocatableRegs(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>)));</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="comment">// Only evict older cascades or live ranges without a cascade.</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordtype">unsigned</span> IntfCascade = ExtraRegInfo[Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">if</span> (Cascade &lt;= IntfCascade) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> (!Urgent)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="comment">// We permit breaking cascades for urgent evictions. It should be the</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// last resort, though, so make it really expensive.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        Cost.BrokenHints += 10;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// Would this break a satisfied hint?</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordtype">bool</span> BreaksHint = VRM-&gt;hasPreferredPhys(Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// Update eviction cost.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      Cost.BrokenHints += BreaksHint;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      Cost.MaxWeight = std::max(Cost.MaxWeight, Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a99eec2c4ba894baca5b197e940b095f6">weight</a>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="comment">// Abort if this would be too expensive.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (!(Cost &lt; MaxCost))</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">if</span> (Urgent)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// If !MaxCost.isMax(), then we&#39;re just looking for a cheap register.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="comment">// Evicting another local live range in this case could lead to suboptimal</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="comment">// coloring.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">if</span> (!MaxCost.isMax() &amp;&amp; IsLocal &amp;&amp; LIS-&gt;intervalIsInOneMBB(*Intf) &amp;&amp;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          !canReassign(*Intf, PhysReg)) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="comment">// Finally, apply the eviction policy for non-urgent evictions.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (!shouldEvict(VirtReg, IsHint, *Intf, BreaksHint))</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  MaxCost = Cost;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/// evictInterference - Evict any interferring registers that prevent VirtReg</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/// from being assigned to Physreg. This assumes that canEvictInterference</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// returned true.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> RAGreedy::evictInterference(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keywordtype">unsigned</span> PhysReg,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Make sure that VirtReg has a cascade number, and assign that cascade</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// number to every evicted register. These live ranges than then only be</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// evicted by a newer cascade, preventing infinite loops.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordtype">unsigned</span> Cascade = ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">if</span> (!Cascade)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    Cascade = ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade = NextCascade++;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;evicting &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; interference: Cascade &quot;</span> &lt;&lt; Cascade &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// Collect all interfering virtregs first.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LiveInterval*, 8&gt;</a> Intfs;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html">LiveIntervalUnion::Query</a> &amp;Q = <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;query(VirtReg, *Units);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    assert(Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#ab1c4ae2dbb96352d0c821ab3613a70f9">seenAllInterferences</a>() &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t check all interfererences.&quot;</span>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;LiveInterval*&gt;</a> IVR = Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a6f98daaaac432eaa936a98e594faf212">interferingVRegs</a>();</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    Intfs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(IVR.begin(), IVR.end());</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// Evict them second. This will invalidate the queries.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Intfs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *Intf = Intfs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// The same VirtReg may be present in multiple RegUnits. Skip duplicates.</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (!VRM-&gt;hasPhys(Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>))</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;unassign(*Intf);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    assert((ExtraRegInfo[Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade &lt; Cascade ||</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>() &lt; Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>()) &amp;&amp;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;           <span class="stringliteral">&quot;Cannot decrease cascade number, illegal eviction&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    ExtraRegInfo[Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade = Cascade;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    ++NumEvicted;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    NewVRegs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Intf-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">/// tryEvict - Try to evict all interferences for a physreg.</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">/// @param  VirtReg Currently unassigned virtual register.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// @param  Order   Physregs to try.</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/// @return         Physreg to assign VirtReg, or 0.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> RAGreedy::tryEvict(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg,</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                            <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs,</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                            <span class="keywordtype">unsigned</span> CostPerUseLimit) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="structllvm_1_1NamedRegionTimer.html">NamedRegionTimer</a> <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>(<span class="stringliteral">&quot;Evict&quot;</span>, TimerGroupName, <a class="code" href="namespacellvm.html#a44e2fc6ce783a1ca396d473139a0ae76">TimePassesIsEnabled</a>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">// Keep track of the cheapest interference seen so far.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  EvictionCost BestCost(~0u);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordtype">unsigned</span> BestPhys = 0;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordtype">unsigned</span> OrderLimit = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#acbcdeefe182a8c7139d4137a168f7b96">getOrder</a>().<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>();</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// When we are just looking for a reduced cost per use, don&#39;t break any</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// hints, and only evict smaller spill weights.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (CostPerUseLimit &lt; ~0u) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    BestCost.BrokenHints = 0;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    BestCost.MaxWeight = VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a99eec2c4ba894baca5b197e940b095f6">weight</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="comment">// Check of any registers in RC are below CostPerUseLimit.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">unsigned</span> MinCost = RegClassInfo.getMinCost(RC);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> (MinCost &gt;= CostPerUseLimit) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; RC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#ac32182f5dd8487a052696a63cf950aab">getName</a>() &lt;&lt; <span class="stringliteral">&quot; minimum cost = &quot;</span> &lt;&lt; MinCost</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;, no cheaper registers to be found.\n&quot;</span>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// It is normal for register classes to have a long tail of registers with</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// the same cost. We don&#39;t need to look at them if they&#39;re too expensive.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (TRI-&gt;getCostPerUse(Order.<a class="code" href="classllvm_1_1AllocationOrder.html#acbcdeefe182a8c7139d4137a168f7b96">getOrder</a>().<a class="code" href="classllvm_1_1ArrayRef.html#ad863a11c0d0943aad3d7a51d02711c4e">back</a>()) &gt;= CostPerUseLimit) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      OrderLimit = RegClassInfo.getLastCostChange(RC);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Only trying the first &quot;</span> &lt;&lt; OrderLimit &lt;&lt; <span class="stringliteral">&quot; regs.\n&quot;</span>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ab421e1f5c9e90bb8dd6ad25b13f35ac7">rewind</a>();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">while</span> (<span class="keywordtype">unsigned</span> PhysReg = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#adf8c36f17d2ef4cb1f731499318b5fad">nextWithDups</a>(OrderLimit)) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (TRI-&gt;getCostPerUse(PhysReg) &gt;= CostPerUseLimit)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// The first use of a callee-saved register in a function has cost 1.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// Don&#39;t start using a CSR when the CostPerUseLimit is low.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (CostPerUseLimit == 1)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;     <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> CSR = RegClassInfo.getLastCalleeSavedAlias(PhysReg))</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;       <span class="keywordflow">if</span> (!<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;isPhysRegUsed(CSR)) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI) &lt;&lt; <span class="stringliteral">&quot; would clobber CSR &quot;</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(CSR, TRI) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;       }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (!canEvictInterference(VirtReg, PhysReg, <span class="keyword">false</span>, BestCost))</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// Best so far.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    BestPhys = PhysReg;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// Stop if the hint can be used.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (Order.<a class="code" href="classllvm_1_1AllocationOrder.html#a9ed95c56986bd2d016a56b301b7da852">isHint</a>())</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span> (!BestPhys)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  evictInterference(VirtReg, BestPhys, NewVRegs);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">return</span> BestPhys;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">//                              Region Splitting</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/// addSplitConstraints - Fill out the SplitConstraints vector based on the</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">/// interference pattern in Physreg and its aliases. Add the constraints to</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/// SpillPlacement and return the static cost of this split in Cost, assuming</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">/// that all preferences in SplitConstraints are met.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">/// Return false if there are no bundles with positive bias.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> RAGreedy::addSplitConstraints(<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html">InterferenceCache::Cursor</a> Intf,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                   <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> &amp;Cost) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SplitAnalysis::BlockInfo&gt;</a> UseBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>();</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="comment">// Reset interference dependent info.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  SplitConstraints.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>());</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> StaticCost = 0;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = UseBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">SpillPlacement::BlockConstraint</a> &amp;BC = SplitConstraints[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a> = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a6d25ab70a5fda1310dad85ddb8ecaa22">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a9983769d5d0bcab7fb0385864fc52621">moveToBlock</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a> = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">LiveIn</a> ? <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">SpillPlacement::PrefReg</a> : <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">SpillPlacement::DontCare</a>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a> = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">LiveOut</a> ? <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">SpillPlacement::PrefReg</a> : <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">SpillPlacement::DontCare</a>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aa94bff6fdd53de69a5ca85f8ff69a37c">ChangesValue</a> = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a2ef80e68e8ebc6f8e778d811cc48f67f">FirstDef</a>.<a class="code" href="classllvm_1_1SlotIndex.html#a5f68411df61b8b1f37a872966b5d2a3b">isValid</a>();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (!Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a898f7966b7db810dc1487ac6ca267fd2">hasInterference</a>())</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// Number of spill code instructions to insert.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363">Ins</a> = 0;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// Interference for the live-in value.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">LiveIn</a>) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">if</span> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a00dd59b7037ee092a891c2ef1cd9e782">first</a>() &lt;= Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">getMBBStartIdx</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>))</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">SpillPlacement::MustSpill</a>, ++Ins;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">else</span> <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a00dd59b7037ee092a891c2ef1cd9e782">first</a>() &lt; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#afc1d576ff2321f8f3a604808be1b6f5b">FirstInstr</a>)</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">SpillPlacement::PrefSpill</a>, ++Ins;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">else</span> <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a00dd59b7037ee092a891c2ef1cd9e782">first</a>() &lt; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#abaae5e7f00635019260dd4d2506e2b58">LastInstr</a>)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        ++Ins;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// Interference for the live-out value.</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">LiveOut</a>) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a0166e26fb57071dbbb9f99570865616b">last</a>() &gt;= SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a723a443c171be9909a0f101c7b84333e">getLastSplitPoint</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>))</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">SpillPlacement::MustSpill</a>, ++Ins;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">else</span> <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a0166e26fb57071dbbb9f99570865616b">last</a>() &gt; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#abaae5e7f00635019260dd4d2506e2b58">LastInstr</a>)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">SpillPlacement::PrefSpill</a>, ++Ins;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">else</span> <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a0166e26fb57071dbbb9f99570865616b">last</a>() &gt; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#afc1d576ff2321f8f3a604808be1b6f5b">FirstInstr</a>)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        ++Ins;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Accumulate the total frequency of inserted spill code.</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">while</span> (Ins--)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      StaticCost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  Cost = StaticCost;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// Add constraints for use-blocks. Note that these are the only constraints</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// that may add a positive bias, it is downhill from here.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">addConstraints</a>(SplitConstraints);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">return</span> SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a435b043e417bb3f4fc9ac0f6e0c6ebc8">scanActiveBundles</a>();</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">/// addThroughConstraints - Add constraints and links to SpillPlacer from the</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">/// live-through blocks in Blocks.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> RAGreedy::addThroughConstraints(<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html">InterferenceCache::Cursor</a> Intf,</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Blocks) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> GroupSize = 8;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">SpillPlacement::BlockConstraint</a> BCS[GroupSize];</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordtype">unsigned</span> TBS[GroupSize];</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordtype">unsigned</span> B = 0, <a class="code" href="classT.html">T</a> = 0;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != Blocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordtype">unsigned</span> Number = Blocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a9983769d5d0bcab7fb0385864fc52621">moveToBlock</a>(Number);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> (!Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a898f7966b7db810dc1487ac6ca267fd2">hasInterference</a>()) {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      assert(<a class="code" href="classT.html">T</a> &lt; GroupSize &amp;&amp; <span class="stringliteral">&quot;Array overflow&quot;</span>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      TBS[<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>] = Number;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">if</span> (++<a class="code" href="classT.html">T</a> == GroupSize) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">addLinks</a>(<a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(TBS, <a class="code" href="classT.html">T</a>));</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="classT.html">T</a> = 0;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    assert(B &lt; GroupSize &amp;&amp; <span class="stringliteral">&quot;Array overflow&quot;</span>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    BCS[<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>].<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a> = Number;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// Interference for the live-in value.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a00dd59b7037ee092a891c2ef1cd9e782">first</a>() &lt;= Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">getMBBStartIdx</a>(Number))</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      BCS[B].Entry = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">SpillPlacement::MustSpill</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      BCS[<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>].<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">SpillPlacement::PrefSpill</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="comment">// Interference for the live-out value.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (Intf.<a class="code" href="classllvm_1_1InterferenceCache_1_1Cursor.html#a0166e26fb57071dbbb9f99570865616b">last</a>() &gt;= SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a723a443c171be9909a0f101c7b84333e">getLastSplitPoint</a>(Number))</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      BCS[B].Exit = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">SpillPlacement::MustSpill</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      BCS[<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>].<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a> = <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">SpillPlacement::PrefSpill</a>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (++B == GroupSize) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SpillPlacement::BlockConstraint&gt;</a> Array(BCS, B);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">addConstraints</a>(Array);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      B = 0;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SpillPlacement::BlockConstraint&gt;</a> Array(BCS, B);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">addConstraints</a>(Array);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">addLinks</a>(<a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(TBS, <a class="code" href="classT.html">T</a>));</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;}</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="keywordtype">void</span> RAGreedy::growRegion(GlobalSplitCandidate &amp;Cand) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// Keep track of through blocks that have not been added to SpillPlacer.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> Todo = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#af0994364d28de4bfa71923586d86b5f1">getThroughBlocks</a>();</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;ActiveBlocks = Cand.ActiveBlocks;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordtype">unsigned</span> AddedTo = 0;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordtype">unsigned</span> Visited = 0;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> NewBundles = SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a50035f4bfc897ff48d96e913022a0c74">getRecentPositive</a>();</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// Find new through blocks in the periphery of PrefRegBundles.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewBundles.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordtype">unsigned</span> Bundle = NewBundles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="comment">// Look at all blocks connected to Bundle in the full graph.</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Blocks = Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a6e378038141dd28e505f2b9fd5abb048">getBlocks</a>(Bundle);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Attribute.html">ArrayRef&lt;unsigned&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Blocks.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), E = Blocks.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordtype">unsigned</span> Block = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span> (!Todo.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Block))</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        Todo.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(Block);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// This is a new through block. Add it to SpillPlacer later.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        ActiveBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Block);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        ++Visited;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// Any new blocks to add?</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (ActiveBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == AddedTo)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">// Compute through constraints from the interference, or assume that all</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">// through blocks prefer spilling when forming compact regions.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> NewBlocks = <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(ActiveBlocks).slice(AddedTo);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (Cand.PhysReg)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      addThroughConstraints(Cand.Intf, NewBlocks);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="comment">// Provide a strong negative bias on through blocks to prevent unwanted</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="comment">// liveness on loop backedges.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a2bd552babf3d34952ed159b653515b5e">addPrefSpill</a>(NewBlocks, <span class="comment">/* Strong= */</span> <span class="keyword">true</span>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    AddedTo = ActiveBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// Perhaps iterating can enable more bundles?</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a8d70270c78d36ddb40a8b782e141b63a">iterate</a>();</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, v=&quot;</span> &lt;&lt; Visited);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">/// calcCompactRegion - Compute the set of edge bundles that should be live</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">/// when splitting the current live range into compact regions.  Compact</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// regions can be computed without looking at interference.  They are the</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/// regions formed by removing all the live-through blocks from the live range.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">/// Returns false if the current live range is already compact, or if the</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">/// compact regions would form single block regions anyway.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> RAGreedy::calcCompactRegion(GlobalSplitCandidate &amp;Cand) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// Without any through blocks, the live range is already compact.</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">if</span> (!SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#af4642b7a911820bc0543b16d887fd38e">getNumThroughBlocks</a>())</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// Compact regions don&#39;t correspond to any physreg.</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  Cand.reset(IntfCache, 0);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Compact region bundles&quot;</span>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Use the spill placer to determine the live bundles. GrowRegion pretends</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// that all the through blocks have interference when PhysReg is unset.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">prepare</a>(Cand.LiveBundles);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// The static split cost will be zero since Cand.Intf reports no interference.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Cost;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">if</span> (!addSplitConstraints(Cand.Intf, Cost)) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, none.\n&quot;</span>);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  growRegion(Cand);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">finish</a>();</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keywordflow">if</span> (!Cand.LiveBundles.any()) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, none.\n&quot;</span>);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Cand.LiveBundles.find_first(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>&gt;=0;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Cand.LiveBundles.find_next(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; EB#&quot;</span> &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  });</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// calcSpillCost - Compute how expensive it would be to split the live range in</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// SA around all use blocks instead of forming bundle regions.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> RAGreedy::calcSpillCost() {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Cost = 0;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SplitAnalysis::BlockInfo&gt;</a> UseBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = UseBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordtype">unsigned</span> Number = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a6d25ab70a5fda1310dad85ddb8ecaa22">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="comment">// We normally only need one spill instruction - a load or a store.</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    Cost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(Number);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// Unless the value is redefined in the block.</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">LiveIn</a> &amp;&amp; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">LiveOut</a> &amp;&amp; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a2ef80e68e8ebc6f8e778d811cc48f67f">FirstDef</a>)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      Cost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(Number);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">return</span> Cost;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">/// calcGlobalSplitCost - Return the global split cost of following the split</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/// pattern in LiveBundles. This cost should be added to the local cost of the</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">/// interference pattern in SplitConstraints.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> RAGreedy::calcGlobalSplitCost(GlobalSplitCandidate &amp;Cand) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> GlobalCost = 0;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;LiveBundles = Cand.LiveBundles;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SplitAnalysis::BlockInfo&gt;</a> UseBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>();</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = UseBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">SpillPlacement::BlockConstraint</a> &amp;BC = SplitConstraints[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">bool</span> RegIn  = LiveBundles[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>, 0)];</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">bool</span> RegOut = LiveBundles[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>, 1)];</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363">Ins</a> = 0;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">LiveIn</a>)</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      Ins += RegIn != (BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">Entry</a> == <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">SpillPlacement::PrefReg</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">LiveOut</a>)</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      Ins += RegOut != (BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">Exit</a> == <a class="code" href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">SpillPlacement::PrefReg</a>);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">while</span> (Ins--)</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      GlobalCost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(BC.<a class="code" href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">Number</a>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Cand.ActiveBlocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordtype">unsigned</span> Number = Cand.ActiveBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordtype">bool</span> RegIn  = LiveBundles[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 0)];</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordtype">bool</span> RegOut = LiveBundles[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 1)];</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (!RegIn &amp;&amp; !RegOut)</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (RegIn &amp;&amp; RegOut) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="comment">// We need double spill code if this block has interference.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      Cand.Intf.moveToBlock(Number);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">if</span> (Cand.Intf.hasInterference()) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        GlobalCost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(Number);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        GlobalCost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(Number);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// live-in / stack-out or stack-in live-out.</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    GlobalCost += SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(Number);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">return</span> GlobalCost;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">/// splitAroundRegion - Split the current live range around the regions</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/// determined by BundleCand and GlobalCand.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">/// Before calling this function, GlobalCand and BundleCand must be initialized</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">/// so each bundle is assigned to a valid candidate, or NoCand for the</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/// stack-bound bundles.  The shared SA/SE SplitAnalysis and SplitEditor</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">/// objects must be initialized for the current live range, and intervals</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">/// created for the used candidates.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">/// @param LREdit    The LiveRangeEdit object handling the current split.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/// @param UsedCands List of used GlobalCand entries. Every BundleCand value</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">///                  must appear in this list.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> RAGreedy::splitAroundRegion(<a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> &amp;LREdit,</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                                 <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> UsedCands) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// These are the intervals created for new global ranges. We may create more</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// intervals for local ranges.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumGlobalIntvs = LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a669ed09ac4693c64ba499289545addff">size</a>();</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;splitAroundRegion with &quot;</span> &lt;&lt; NumGlobalIntvs &lt;&lt; <span class="stringliteral">&quot; globals.\n&quot;</span>);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  assert(NumGlobalIntvs &amp;&amp; <span class="stringliteral">&quot;No global intervals configured&quot;</span>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// Isolate even single instructions when dealing with a proper sub-class.</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// That guarantees register class inflation for the stack interval because it</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// is all copies.</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordtype">unsigned</span> Reg = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a00a9b0f268432e2f8b9dd99eac50577a">getParent</a>().<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordtype">bool</span> SingleInstrs = RegClassInfo.isProperSubClass(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(Reg));</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="comment">// First handle all the blocks with uses.</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SplitAnalysis::BlockInfo&gt;</a> UseBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>();</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = UseBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordtype">unsigned</span> Number = BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a6d25ab70a5fda1310dad85ddb8ecaa22">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordtype">unsigned</span> IntvIn = 0, IntvOut = 0;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> IntfIn, IntfOut;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">LiveIn</a>) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordtype">unsigned</span> CandIn = BundleCand[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 0)];</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">if</span> (CandIn != NoCand) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        GlobalSplitCandidate &amp;Cand = GlobalCand[CandIn];</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        IntvIn = Cand.IntvIdx;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        Cand.Intf.moveToBlock(Number);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        IntfIn = Cand.Intf.first();</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">LiveOut</a>) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordtype">unsigned</span> CandOut = BundleCand[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 1)];</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordflow">if</span> (CandOut != NoCand) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        GlobalSplitCandidate &amp;Cand = GlobalCand[CandOut];</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        IntvOut = Cand.IntvIdx;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        Cand.Intf.moveToBlock(Number);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        IntfOut = Cand.Intf.last();</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// Create separate intervals for isolated blocks with multiple uses.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> (!IntvIn &amp;&amp; !IntvOut) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; BI.<a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a6d25ab70a5fda1310dad85ddb8ecaa22">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot; isolated.\n&quot;</span>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">if</span> (SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ad56736ab976e0c49c5af1a61a8c72e87">shouldSplitSingleBlock</a>(BI, SingleInstrs))</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#ae5f72acf075c54b8f8ca8783a5683b63">splitSingleBlock</a>(BI);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (IntvIn &amp;&amp; IntvOut)</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#ab181eb57b4d30c914d782ad60b8d913f">splitLiveThroughBlock</a>(Number, IntvIn, IntfIn, IntvOut, IntfOut);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IntvIn)</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a9d2296ecca42f33ce641b7341fde67d9">splitRegInBlock</a>(BI, IntvIn, IntfIn);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a8534c37f85077c1dd9fc3468f70d4618">splitRegOutBlock</a>(BI, IntvOut, IntfOut);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">// Handle live-through blocks. The relevant live-through blocks are stored in</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// the ActiveBlocks list with each candidate. We need to filter out</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">// duplicates.</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> Todo = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#af0994364d28de4bfa71923586d86b5f1">getThroughBlocks</a>();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2ARM_2README_8txt.html#ae3e84a62e4ae19e7766bde30ee72c040">c</a> = 0; <a class="code" href="Target_2ARM_2README_8txt.html#ae3e84a62e4ae19e7766bde30ee72c040">c</a> != UsedCands.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2ARM_2README_8txt.html#ae3e84a62e4ae19e7766bde30ee72c040">c</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Blocks = GlobalCand[UsedCands[<a class="code" href="Target_2ARM_2README_8txt.html#ae3e84a62e4ae19e7766bde30ee72c040">c</a>]].ActiveBlocks;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Blocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordtype">unsigned</span> Number = Blocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">if</span> (!Todo.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(Number))</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      Todo.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(Number);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordtype">unsigned</span> IntvIn = 0, IntvOut = 0;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> IntfIn, IntfOut;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordtype">unsigned</span> CandIn = BundleCand[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 0)];</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="keywordflow">if</span> (CandIn != NoCand) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        GlobalSplitCandidate &amp;Cand = GlobalCand[CandIn];</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        IntvIn = Cand.IntvIdx;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        Cand.Intf.moveToBlock(Number);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        IntfIn = Cand.Intf.first();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordtype">unsigned</span> CandOut = BundleCand[Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">getBundle</a>(Number, 1)];</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">if</span> (CandOut != NoCand) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        GlobalSplitCandidate &amp;Cand = GlobalCand[CandOut];</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        IntvOut = Cand.IntvIdx;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        Cand.Intf.moveToBlock(Number);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        IntfOut = Cand.Intf.last();</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">if</span> (!IntvIn &amp;&amp; !IntvOut)</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#ab181eb57b4d30c914d782ad60b8d913f">splitLiveThroughBlock</a>(Number, IntvIn, IntfIn, IntvOut, IntfOut);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  ++NumGlobalSplits;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> IntvMap;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a581a49d0be1470125187429149b11b08">finish</a>(&amp;IntvMap);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  DebugVars-&gt;<a class="code" href="classllvm_1_1LiveDebugVariables.html#a3305b6b5faf0cc1ae46eba960c657560">splitRegister</a>(Reg, LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#adcdd202aafbf9a6953929d1be177312d">regs</a>(), *LIS);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordtype">unsigned</span> OrigBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a189e7a14532185ccc5f95f654d9ab326">getNumLiveBlocks</a>();</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// Sort out the new intervals created by splitting. We get four kinds:</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// - Remainder intervals should not be split again.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// - Candidate intervals can be assigned to Cand.PhysReg.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// - Block-local splits are candidates for local splitting.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// - DCE leftovers should go back on the queue.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a669ed09ac4693c64ba499289545addff">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;Reg = LIS-&gt;getInterval(LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a622489e7ba539850915e04c8bef7c040">get</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">// Ignore old intervals from DCE.</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">if</span> (getStage(Reg) != RS_New)</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// Remainder interval. Don&#39;t try splitting again, spill if it doesn&#39;t</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">// allocate.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (IntvMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] == 0) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      setStage(Reg, RS_Spill);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">// Global intervals. Allow repeated splitting as long as the number of live</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="comment">// blocks is strictly decreasing.</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (IntvMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; NumGlobalIntvs) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">if</span> (SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a7cd60187fcffd2af5b77cd6b9c867f0b">countLiveBlocks</a>(&amp;Reg) &gt;= OrigBlocks) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Main interval covers the same &quot;</span> &lt;&lt; OrigBlocks</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot; blocks as original.\n&quot;</span>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="comment">// Don&#39;t allow repeated splitting as a safe guard against looping.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        setStage(Reg, RS_Split2);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// Other intervals are treated as new. This includes local intervals created</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// for blocks with multiple uses, and anything created by DCE.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (VerifyEnabled)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#add0f152096ce3939934fb0be4558b1b0">verify</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;After splitting live range around region&quot;</span>);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="keywordtype">unsigned</span> RAGreedy::tryRegionSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                                  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordtype">unsigned</span> NumCands = 0;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordtype">unsigned</span> BestCand = NoCand;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> BestCost;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> UsedCands;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// Check if we can split this live range around a compact region.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">bool</span> HasCompact = calcCompactRegion(GlobalCand.front());</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (HasCompact) {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// Yes, keep GlobalCand[0] as the compact region candidate.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    NumCands = 1;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    BestCost = <a class="code" href="classllvm_1_1BlockFrequency.html#abfa4567a98b37bee439fc06ba54042b2">BlockFrequency::getMaxFrequency</a>();</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// No benefit from the compact region, our fallback will be per-block</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// splitting. Make sure we find a solution that is cheaper than spilling.</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    BestCost = calcSpillCost();</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cost of isolating all blocks = &quot;</span> &lt;&lt; BestCost &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ab421e1f5c9e90bb8dd6ad25b13f35ac7">rewind</a>();</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordflow">while</span> (<span class="keywordtype">unsigned</span> PhysReg = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ad2268c47b7b3a67b032d657e52911190">next</a>()) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// Discard bad candidates before we run out of interference cache cursors.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// This will only affect register classes with a lot of registers (&gt;32).</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">if</span> (NumCands == IntfCache.<a class="code" href="classllvm_1_1InterferenceCache.html#a877edd82f1d68db14d72abc7f56f518f">getMaxCursors</a>()) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordtype">unsigned</span> WorstCount = ~0u;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordtype">unsigned</span> Worst = 0;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumCands; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == BestCand || !GlobalCand[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].PhysReg)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordtype">unsigned</span> Count = GlobalCand[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].LiveBundles.count();</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">if</span> (Count &lt; WorstCount)</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;          Worst = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, WorstCount = Count;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      --NumCands;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      GlobalCand[Worst] = GlobalCand[NumCands];</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="keywordflow">if</span> (BestCand == NumCands)</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        BestCand = Worst;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (GlobalCand.size() &lt;= NumCands)</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      GlobalCand.resize(NumCands+1);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    GlobalSplitCandidate &amp;Cand = GlobalCand[NumCands];</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    Cand.reset(IntfCache, PhysReg);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">prepare</a>(Cand.LiveBundles);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Cost;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (!addSplitConstraints(Cand.Intf, Cost)) {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI) &lt;&lt; <span class="stringliteral">&quot;\tno positive bundles\n&quot;</span>);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI) &lt;&lt; <span class="stringliteral">&quot;\tstatic = &quot;</span> &lt;&lt; Cost);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (Cost &gt;= BestCost) {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">if</span> (BestCand == NoCand)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; worse than no bundles\n&quot;</span>;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; worse than &quot;</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                 &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(GlobalCand[BestCand].PhysReg, TRI) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      });</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    growRegion(Cand);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">finish</a>();</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">// No live bundles, defer to splitSingleBlocks().</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">if</span> (!Cand.LiveBundles.any()) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; no bundles.\n&quot;</span>);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    Cost += calcGlobalSplitCost(Cand);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, total = &quot;</span> &lt;&lt; Cost &lt;&lt; <span class="stringliteral">&quot; with bundles&quot;</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Cand.LiveBundles.find_first(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>&gt;=0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;           <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Cand.LiveBundles.find_next(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; EB#&quot;</span> &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    });</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordflow">if</span> (Cost &lt; BestCost) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      BestCand = NumCands;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      BestCost = Cost;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    }</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    ++NumCands;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// No solutions found, fall back to single block splitting.</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (!HasCompact &amp;&amp; BestCand == NoCand)</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">// Prepare split editor.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> LREdit(&amp;VirtReg, NewVRegs, *MF, *LIS, VRM, <span class="keyword">this</span>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a907ca723e22613a6cfa9845d69f3eda6">reset</a>(LREdit, <a class="code" href="RegAllocGreedy_8cpp.html#a8c706b5f4a64e9a1096972670ff0b56a">SplitSpillMode</a>);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="comment">// Assign all edge bundles to the preferred candidate, or NoCand.</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  BundleCand.assign(Bundles-&gt;<a class="code" href="classllvm_1_1EdgeBundles.html#a2fa4eb01f401c3513c1eca5024e1c2cc">getNumBundles</a>(), NoCand);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="comment">// Assign bundles for the best candidate region.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">if</span> (BestCand != NoCand) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    GlobalSplitCandidate &amp;Cand = GlobalCand[BestCand];</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> B = Cand.getBundles(BundleCand, BestCand)) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      UsedCands.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BestCand);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      Cand.IntvIdx = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a45631ddcb7da79035271c3e491d6dc33">openIntv</a>();</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Split for &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Cand.PhysReg, TRI) &lt;&lt; <span class="stringliteral">&quot; in &quot;</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                   &lt;&lt; B &lt;&lt; <span class="stringliteral">&quot; bundles, intv &quot;</span> &lt;&lt; Cand.IntvIdx &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      (void)B;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">// Assign bundles for the compact region.</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (HasCompact) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    GlobalSplitCandidate &amp;Cand = GlobalCand.front();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    assert(!Cand.PhysReg &amp;&amp; <span class="stringliteral">&quot;Compact region has no physreg&quot;</span>);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> B = Cand.getBundles(BundleCand, 0)) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      UsedCands.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(0);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      Cand.IntvIdx = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a45631ddcb7da79035271c3e491d6dc33">openIntv</a>();</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Split for compact region in &quot;</span> &lt;&lt; B &lt;&lt; <span class="stringliteral">&quot; bundles, intv &quot;</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                   &lt;&lt; Cand.IntvIdx &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      (void)B;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  splitAroundRegion(LREdit, UsedCands);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;}</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">//                            Per-Block Splitting</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">/// tryBlockSplit - Split a global live range around every block with uses. This</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">/// creates a lot of local live ranges, that will be split by tryLocalSplit if</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">/// they don&#39;t allocate.</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> RAGreedy::tryBlockSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  assert(&amp;SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a00a9b0f268432e2f8b9dd99eac50577a">getParent</a>() == &amp;VirtReg &amp;&amp; <span class="stringliteral">&quot;Live range wasn&#39;t analyzed&quot;</span>);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordtype">unsigned</span> Reg = VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordtype">bool</span> SingleInstrs = RegClassInfo.isProperSubClass(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(Reg));</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> LREdit(&amp;VirtReg, NewVRegs, *MF, *LIS, VRM, <span class="keyword">this</span>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a907ca723e22613a6cfa9845d69f3eda6">reset</a>(LREdit, <a class="code" href="RegAllocGreedy_8cpp.html#a8c706b5f4a64e9a1096972670ff0b56a">SplitSpillMode</a>);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SplitAnalysis::BlockInfo&gt;</a> UseBlocks = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>();</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = UseBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ad56736ab976e0c49c5af1a61a8c72e87">shouldSplitSingleBlock</a>(BI, SingleInstrs))</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#ae5f72acf075c54b8f8ca8783a5683b63">splitSingleBlock</a>(BI);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// No blocks were split.</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordflow">if</span> (LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a3c3f86f81ebb49325b8920fce2747c6e">empty</a>())</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">// We did split for some blocks.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> IntvMap;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a581a49d0be1470125187429149b11b08">finish</a>(&amp;IntvMap);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Tell LiveDebugVariables about the new ranges.</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  DebugVars-&gt;<a class="code" href="classllvm_1_1LiveDebugVariables.html#a3305b6b5faf0cc1ae46eba960c657560">splitRegister</a>(Reg, LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#adcdd202aafbf9a6953929d1be177312d">regs</a>(), *LIS);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// Sort out the new intervals created by splitting. The remainder interval</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">// goes straight to spilling, the new local ranges get to stay RS_New.</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a669ed09ac4693c64ba499289545addff">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;getInterval(LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a622489e7ba539850915e04c8bef7c040">get</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">if</span> (getStage(LI) == RS_New &amp;&amp; IntvMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] == 0)</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      setStage(LI, RS_Spill);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordflow">if</span> (VerifyEnabled)</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#add0f152096ce3939934fb0be4558b1b0">verify</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;After splitting live range around basic blocks&quot;</span>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">//                         Per-Instruction Splitting</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">/// tryInstructionSplit - Split a live range around individual instructions.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">/// This is normally not worthwhile since the spiller is doing essentially the</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">/// same thing. However, when the live range is in a constrained register</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">/// class, it may help to insert copies such that parts of the live range can</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">/// be moved to a larger register class.</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">/// This is similar to spilling to a larger register class.</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;RAGreedy::tryInstructionSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="comment">// There is no point to this if there are no larger sub-classes.</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordflow">if</span> (!RegClassInfo.isProperSubClass(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">getRegClass</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>)))</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="comment">// Always enable split spill mode, since we&#39;re effectively spilling to a</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">// register.</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> LREdit(&amp;VirtReg, NewVRegs, *MF, *LIS, VRM, <span class="keyword">this</span>);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a907ca723e22613a6cfa9845d69f3eda6">reset</a>(LREdit, <a class="code" href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7ade36d2a249a7f767c968e8667190bc11">SplitEditor::SM_Size</a>);</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SlotIndex&gt;</a> Uses = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa5c8b14335e996e2bfaa2d92c3216897">getUseSlots</a>();</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordflow">if</span> (Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &lt;= 1)</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Split around &quot;</span> &lt;&lt; Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &lt;&lt; <span class="stringliteral">&quot; individual instrs.\n&quot;</span>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// Split around every non-copy instruction.</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = Indexes-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#a80461fac9933c96d5ffbeae0fccfd916">getInstructionFromIndex</a>(Uses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>-&gt;isFullCopy()) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    skip:\t&quot;</span> &lt;&lt; Uses[i] &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a45631ddcb7da79035271c3e491d6dc33">openIntv</a>();</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SegStart = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a88924909b2d83abe8eb4ba2ac84eec6c">enterIntvBefore</a>(Uses[i]);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SegStop  = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a8ab989120222d67308b4e03b2772fb6a">leaveIntvAfter</a>(Uses[i]);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a88c7b413f0bb3edf821661f04cc6a5c7">useIntv</a>(SegStart, SegStop);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a3c3f86f81ebb49325b8920fce2747c6e">empty</a>()) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;All uses were copies.\n&quot;</span>);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> IntvMap;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a581a49d0be1470125187429149b11b08">finish</a>(&amp;IntvMap);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  DebugVars-&gt;<a class="code" href="classllvm_1_1LiveDebugVariables.html#a3305b6b5faf0cc1ae46eba960c657560">splitRegister</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>, LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#adcdd202aafbf9a6953929d1be177312d">regs</a>(), *LIS);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// Assign all new registers to RS_Spill. This was the last chance.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  setStage(LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a9928b70d0c775c29f6d287592a35ec4f">begin</a>(), LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a9e81444d081e17a080e3ba93ff39e410">end</a>(), RS_Spill);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;}</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">//                             Local Splitting</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">/// calcGapWeights - Compute the maximum spill weight that needs to be evicted</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">/// in order to use PhysReg between two entries in SA-&gt;UseSlots.</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">/// GapWeight[i] represents the gap between UseSlots[i] and UseSlots[i+1].</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> RAGreedy::calcGapWeights(<span class="keywordtype">unsigned</span> PhysReg,</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;float&gt;</a> &amp;GapWeight) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  assert(SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>().size() == 1 &amp;&amp; <span class="stringliteral">&quot;Not a local interval&quot;</span>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>().front();</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SlotIndex&gt;</a> Uses = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa5c8b14335e996e2bfaa2d92c3216897">getUseSlots</a>();</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumGaps = Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>()-1;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// Start and end points for the interference check.</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> StartIdx =</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    BI.LiveIn ? BI.FirstInstr.<a class="code" href="classllvm_1_1SlotIndex.html#ae1bbc48a5bdb10b387be69816bf67f6f">getBaseIndex</a>() : BI.FirstInstr;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> StopIdx =</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    BI.LiveOut ? BI.LastInstr.<a class="code" href="classllvm_1_1SlotIndex.html#a56a6ce04341b82594b779178265df7c3">getBoundaryIndex</a>() : BI.LastInstr;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  GapWeight.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a465f75c78f1dc551152248c9f203b88d">assign</a>(NumGaps, 0.0<a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// Add interference from each overlapping register.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;query(const_cast&lt;LiveInterval&amp;&gt;(SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#a00a9b0f268432e2f8b9dd99eac50577a">getParent</a>()), *Units)</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;          .checkInterference())</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="comment">// We know that VirtReg is a continuous interval from FirstInstr to</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// LastInstr, so we don&#39;t need InterferenceQuery.</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="comment">// Interference that overlaps an instruction is counted in both gaps</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="comment">// surrounding the instruction. The exception is interference before</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="comment">// StartIdx and after StopIdx.</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="classllvm_1_1LiveIntervalUnion.html#a3c59b3b5c9561a80be4c4cc4a403fe34">LiveIntervalUnion::SegmentIter</a> IntI =</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;getLiveUnions()[*Units] .find(StartIdx);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Gap = 0; IntI.valid() &amp;&amp; IntI.start() &lt; StopIdx; ++IntI) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="comment">// Skip the gaps before IntI.</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">while</span> (Uses[Gap+1].getBoundaryIndex() &lt; IntI.start())</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">if</span> (++Gap == NumGaps)</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="keywordflow">if</span> (Gap == NumGaps)</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="comment">// Update the gaps covered by IntI.</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> weight = IntI.value()-&gt;weight;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">for</span> (; Gap != NumGaps; ++Gap) {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        GapWeight[Gap] = std::max(GapWeight[Gap], weight);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">if</span> (Uses[Gap+1].getBaseIndex() &gt;= IntI.stop())</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="keywordflow">if</span> (Gap == NumGaps)</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// Add fixed interference.</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> &amp;LR = LIS-&gt;getRegUnit(*Units);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="classT.html">LiveRange::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LR.<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(StartIdx);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <a class="code" href="classT.html">LiveRange::const_iterator</a> E = LR.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>();</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="comment">// Same loop as above. Mark any overlapped gaps as HUGE_VALF.</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Gap = 0; I != E &amp;&amp; I-&gt;start &lt; StopIdx; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <span class="keywordflow">while</span> (Uses[Gap+1].getBoundaryIndex() &lt; I-&gt;start)</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">if</span> (++Gap == NumGaps)</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">if</span> (Gap == NumGaps)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="keywordflow">for</span> (; Gap != NumGaps; ++Gap) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        GapWeight[Gap] = <a class="code" href="namespacellvm.html#aa3bc1efc2622aa9bf1e0d05b3d9600de">llvm::huge_valf</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">if</span> (Uses[Gap+1].getBaseIndex() &gt;= I-&gt;end)</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">if</span> (Gap == NumGaps)</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;}</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">/// tryLocalSplit - Try to split VirtReg into smaller intervals inside its only</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">/// basic block.</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> RAGreedy::tryLocalSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  assert(SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>().size() == 1 &amp;&amp; <span class="stringliteral">&quot;Not a local interval&quot;</span>);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">SplitAnalysis::BlockInfo</a> &amp;BI = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">getUseBlocks</a>().front();</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="comment">// Note that it is possible to have an interval that is live-in or live-out</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="comment">// while only covering a single block - A phi-def can use undef values from</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="comment">// predecessors, and the block could be a single-block loop.</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// We don&#39;t bother doing anything clever about such a case, we simply assume</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="comment">// that the interval is continuous from FirstInstr to LastInstr. We should</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="comment">// make sure that we don&#39;t do anything illegal to such an interval, though.</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SlotIndex&gt;</a> Uses = SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa5c8b14335e996e2bfaa2d92c3216897">getUseSlots</a>();</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">if</span> (Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &lt;= 2)</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumGaps = Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>()-1;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;tryLocalSplit: &quot;</span>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Uses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; Uses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  });</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// If VirtReg is live across any register mask operands, compute a list of</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// gaps with register masks.</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> RegMaskGaps;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;checkRegMaskInterference(VirtReg)) {</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="comment">// Get regmask slots for the whole block.</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SlotIndex&gt;</a> RMS = LIS-&gt;getRegMaskSlotsInBlock(BI.MBB-&gt;getNumber());</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; RMS.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &lt;&lt; <span class="stringliteral">&quot; regmasks in block:&quot;</span>);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="comment">// Constrain to VirtReg&#39;s live range.</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordtype">unsigned</span> ri = std::lower_bound(RMS.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), RMS.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>(),</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                                   Uses.<a class="code" href="classllvm_1_1ArrayRef.html#acffda5d90e734243696448a1818c04bc">front</a>().<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>()) - RMS.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>();</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordtype">unsigned</span> re = RMS.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>();</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumGaps &amp;&amp; ri != re; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="comment">// Look for Uses[i] &lt;= RMS &lt;= Uses[i+1].</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      assert(!<a class="code" href="classllvm_1_1SlotIndex.html#a19695ead28a0fbdcea66c6253aebc44f">SlotIndex::isEarlierInstr</a>(RMS[ri], Uses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SlotIndex.html#a19695ead28a0fbdcea66c6253aebc44f">SlotIndex::isEarlierInstr</a>(Uses[i+1], RMS[ri]))</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="comment">// Skip a regmask on the same instruction as the last use. It doesn&#39;t</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="comment">// overlap the live range.</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(Uses[i+1], RMS[ri]) &amp;&amp; i+1 == NumGaps)</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; RMS[ri] &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; Uses[i] &lt;&lt; <span class="charliteral">&#39;-&#39;</span> &lt;&lt; Uses[i+1]);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      RegMaskGaps.push_back(i);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="comment">// Advance ri to the next gap. A regmask on one of the uses counts in</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <span class="comment">// both gaps.</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="keywordflow">while</span> (ri != re &amp;&amp; <a class="code" href="classllvm_1_1SlotIndex.html#a19695ead28a0fbdcea66c6253aebc44f">SlotIndex::isEarlierInstr</a>(RMS[ri], Uses[i+1]))</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        ++ri;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// Since we allow local split results to be split again, there is a risk of</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// creating infinite loops. It is tempting to require that the new live</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// ranges have less instructions than the original. That would guarantee</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// convergence, but it is too strict. A live range with 3 instructions can be</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// split 2+3 (including the COPY), and we want to allow that.</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// Instead we use these rules:</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="comment">// 1. Allow any split for ranges with getStage() &lt; RS_Split2. (Except for the</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">//    noop split, of course).</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// 2. Require progress be made for ranges with getStage() == RS_Split2. All</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">//    the new ranges must have fewer instructions than before the split.</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// 3. New ranges with the same number of instructions are marked RS_Split2,</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">//    smaller ranges are marked RS_New.</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// These rules allow a 3 -&gt; 2+3 split once, which we need. They also prevent</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// excessive splitting and infinite loops.</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keywordtype">bool</span> ProgressRequired = getStage(VirtReg) &gt;= RS_Split2;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// Best split candidate.</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordtype">unsigned</span> BestBefore = NumGaps;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="keywordtype">unsigned</span> BestAfter = 0;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="keywordtype">float</span> BestDiff = 0;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> blockFreq =</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    SpillPlacer-&gt;<a class="code" href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">getBlockFrequency</a>(BI.MBB-&gt;getNumber()).getFrequency() *</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    (1.0f / <a class="code" href="classllvm_1_1BlockFrequency.html#a8e478a163436e8244ae136bef45a4fcf">BlockFrequency::getEntryFrequency</a>());</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;float, 8&gt;</a> GapWeight;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ab421e1f5c9e90bb8dd6ad25b13f35ac7">rewind</a>();</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordflow">while</span> (<span class="keywordtype">unsigned</span> PhysReg = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ad2268c47b7b3a67b032d657e52911190">next</a>()) {</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">// Keep track of the largest spill weight that would need to be evicted in</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">// order to make use of PhysReg between UseSlots[i] and UseSlots[i+1].</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    calcGapWeights(PhysReg, GapWeight);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="comment">// Remove any gaps with regmask clobbers.</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;checkRegMaskInterference(VirtReg, PhysReg))</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegMaskGaps.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        GapWeight[RegMaskGaps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = <a class="code" href="namespacellvm.html#aa3bc1efc2622aa9bf1e0d05b3d9600de">llvm::huge_valf</a>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">// Try to find the best sequence of gaps to close.</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="comment">// The new spill weight must be larger than any gap interference.</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// We will split before Uses[SplitBefore] and after Uses[SplitAfter].</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordtype">unsigned</span> SplitBefore = 0, SplitAfter = 1;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="comment">// MaxGap should always be max(GapWeight[SplitBefore..SplitAfter-1]).</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// It is the spill weight that needs to be evicted.</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordtype">float</span> MaxGap = GapWeight[0];</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="comment">// Live before/after split?</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> LiveBefore = SplitBefore != 0 || BI.LiveIn;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> LiveAfter = SplitAfter != NumGaps || BI.LiveOut;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(PhysReg, TRI) &lt;&lt; <span class="charliteral">&#39; &#39;</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                   &lt;&lt; Uses[SplitBefore] &lt;&lt; <span class="charliteral">&#39;-&#39;</span> &lt;&lt; Uses[SplitAfter]</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; i=&quot;</span> &lt;&lt; MaxGap);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="comment">// Stop before the interval gets so big we wouldn&#39;t be making progress.</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">if</span> (!LiveBefore &amp;&amp; !LiveAfter) {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; all\n&quot;</span>);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="comment">// Should the interval be extended or shrunk?</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="comment">// How many gaps would the new range have?</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="keywordtype">unsigned</span> NewGaps = LiveBefore + SplitAfter - SplitBefore + LiveAfter;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="comment">// Legally, without causing looping?</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="keywordtype">bool</span> Legal = !ProgressRequired || NewGaps &lt; NumGaps;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (Legal &amp;&amp; MaxGap &lt; <a class="code" href="namespacellvm.html#aa3bc1efc2622aa9bf1e0d05b3d9600de">llvm::huge_valf</a>) {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="comment">// Estimate the new spill weight. Each instruction reads or writes the</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="comment">// register. Conservatively assume there are no read-modify-write</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="comment">// instructions.</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="comment">// Try to guess the size of the new interval.</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> EstWeight = <a class="code" href="namespacellvm.html#a778ad60e4d519fe298022d004f34df93">normalizeSpillWeight</a>(blockFreq * (NewGaps + 1),</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                 Uses[SplitBefore].distance(Uses[SplitAfter]) +</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                 (LiveBefore + LiveAfter)*<a class="code" href="classllvm_1_1SlotIndex.html#ad53da5107a9851a5d666109c53a96991a0d0c291488b64cffb191fda8a4e90ef0">SlotIndex::InstrDist</a>);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="comment">// Would this split be possible to allocate?</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="comment">// Never allocate all gaps, we wouldn&#39;t be making progress.</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; w=&quot;</span> &lt;&lt; EstWeight);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">if</span> (EstWeight * Hysteresis &gt;= MaxGap) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;          Shrink = <span class="keyword">false</span>;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;          <span class="keywordtype">float</span> Diff = EstWeight - MaxGap;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;          <span class="keywordflow">if</span> (Diff &gt; BestDiff) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; (best)&quot;</span>);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            BestDiff = Hysteresis * Diff;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;            BestBefore = SplitBefore;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            BestAfter = SplitAfter;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;          }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        }</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="comment">// Try to shrink.</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordflow">if</span> (Shrink) {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">if</span> (++SplitBefore &lt; SplitAfter) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; shrink\n&quot;</span>);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;          <span class="comment">// Recompute the max when necessary.</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;          <span class="keywordflow">if</span> (GapWeight[SplitBefore - 1] &gt;= MaxGap) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            MaxGap = GapWeight[SplitBefore];</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SplitBefore + 1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != SplitAfter; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;              MaxGap = std::max(MaxGap, GapWeight[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;          }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        MaxGap = 0;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="comment">// Try to extend the interval.</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">if</span> (SplitAfter &gt;= NumGaps) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; end\n&quot;</span>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; extend\n&quot;</span>);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      MaxGap = std::max(MaxGap, GapWeight[SplitAfter++]);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  }</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// Didn&#39;t find any candidates?</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="keywordflow">if</span> (BestBefore == NumGaps)</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Best local split range: &quot;</span> &lt;&lt; Uses[BestBefore]</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;               &lt;&lt; <span class="charliteral">&#39;-&#39;</span> &lt;&lt; Uses[BestAfter] &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; BestDiff</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; (BestAfter - BestBefore + 1) &lt;&lt; <span class="stringliteral">&quot; instrs\n&quot;</span>);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> LREdit(&amp;VirtReg, NewVRegs, *MF, *LIS, VRM, <span class="keyword">this</span>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a907ca723e22613a6cfa9845d69f3eda6">reset</a>(LREdit);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a45631ddcb7da79035271c3e491d6dc33">openIntv</a>();</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SegStart = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a88924909b2d83abe8eb4ba2ac84eec6c">enterIntvBefore</a>(Uses[BestBefore]);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SegStop  = SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a8ab989120222d67308b4e03b2772fb6a">leaveIntvAfter</a>(Uses[BestAfter]);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a88c7b413f0bb3edf821661f04cc6a5c7">useIntv</a>(SegStart, SegStop);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> IntvMap;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  SE-&gt;<a class="code" href="classllvm_1_1SplitEditor.html#a581a49d0be1470125187429149b11b08">finish</a>(&amp;IntvMap);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  DebugVars-&gt;<a class="code" href="classllvm_1_1LiveDebugVariables.html#a3305b6b5faf0cc1ae46eba960c657560">splitRegister</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>, LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#adcdd202aafbf9a6953929d1be177312d">regs</a>(), *LIS);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="comment">// If the new range has the same number of instructions as before, mark it as</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// RS_Split2 so the next split will be forced to make progress. Otherwise,</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">// leave the new intervals as RS_New so they can compete.</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordtype">bool</span> LiveBefore = BestBefore != 0 || BI.LiveIn;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="keywordtype">bool</span> LiveAfter = BestAfter != NumGaps || BI.LiveOut;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordtype">unsigned</span> NewGaps = LiveBefore + BestAfter - BestBefore + LiveAfter;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (NewGaps &gt;= NumGaps) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Tagging non-progress ranges: &quot;</span>);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    assert(!ProgressRequired &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t make progress when it was required.&quot;</span>);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = IntvMap.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <span class="keywordflow">if</span> (IntvMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] == 1) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        setStage(LIS-&gt;getInterval(LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a622489e7ba539850915e04c8bef7c040">get</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)), RS_Split2);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(LREdit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a622489e7ba539850915e04c8bef7c040">get</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  ++NumLocalSplits;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;}</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">//                          Live Range Splitting</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">/// trySplit - Try to split VirtReg or one of its interferences, making it</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">/// assignable.</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">/// @return Physreg when VirtReg may be assigned and/or new NewVRegs.</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> RAGreedy::trySplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a>&amp;NewVRegs) {</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// Ranges must be Split2 or less.</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordflow">if</span> (getStage(VirtReg) &gt;= RS_Spill)</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// Local intervals are handled separately.</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keywordflow">if</span> (LIS-&gt;intervalIsInOneMBB(VirtReg)) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="structllvm_1_1NamedRegionTimer.html">NamedRegionTimer</a> <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>(<span class="stringliteral">&quot;Local Splitting&quot;</span>, TimerGroupName, <a class="code" href="namespacellvm.html#a44e2fc6ce783a1ca396d473139a0ae76">TimePassesIsEnabled</a>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa1e3d133ed73597d0c21e0a5d11fa31f">analyze</a>(&amp;VirtReg);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordtype">unsigned</span> PhysReg = tryLocalSplit(VirtReg, Order, NewVRegs);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">if</span> (PhysReg || !NewVRegs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordflow">return</span> tryInstructionSplit(VirtReg, Order, NewVRegs);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <a class="code" href="structllvm_1_1NamedRegionTimer.html">NamedRegionTimer</a> <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>(<span class="stringliteral">&quot;Global Splitting&quot;</span>, TimerGroupName, <a class="code" href="namespacellvm.html#a44e2fc6ce783a1ca396d473139a0ae76">TimePassesIsEnabled</a>);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa1e3d133ed73597d0c21e0a5d11fa31f">analyze</a>(&amp;VirtReg);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// FIXME: SplitAnalysis may repair broken live ranges coming from the</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// coalescer. That may cause the range to become allocatable which means that</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="comment">// tryRegionSplit won&#39;t be making progress. This check should be replaced with</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="comment">// an assertion when the coalescer is fixed.</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="keywordflow">if</span> (SA-&gt;<a class="code" href="classllvm_1_1SplitAnalysis.html#aa4cb66debc1a10f2c6ac8d7ae7d974f6">didRepairRange</a>()) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="comment">// VirtReg has changed, so all cached queries are invalid.</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;invalidateVirtRegs();</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PhysReg = tryAssign(VirtReg, Order, NewVRegs))</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="comment">// First try to split around a region spanning multiple blocks. RS_Split2</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="comment">// ranges already made dubious progress with region splitting, so they go</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// straight to single block splitting.</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">if</span> (getStage(VirtReg) &lt; RS_Split2) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordtype">unsigned</span> PhysReg = tryRegionSplit(VirtReg, Order, NewVRegs);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keywordflow">if</span> (PhysReg || !NewVRegs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// Then isolate blocks.</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">return</span> tryBlockSplit(VirtReg, Order, NewVRegs);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;}</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">//                            Main Entry Point</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="keywordtype">unsigned</span> RAGreedy::selectOrSplit(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg,</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;NewVRegs) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">// First try assigning a free register.</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> Order(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>, *VRM, RegClassInfo);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PhysReg = tryAssign(VirtReg, Order, NewVRegs))</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  LiveRangeStage Stage = getStage(VirtReg);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; StageName[Stage]</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; Cascade &quot;</span> &lt;&lt; ExtraRegInfo[VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>].Cascade &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// Try to evict a less worthy live range, but only for ranges from the primary</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="comment">// queue. The RS_Split ranges already failed to do this, and they should not</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">// get a second chance until they have been split.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="keywordflow">if</span> (Stage != RS_Split)</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> PhysReg = tryEvict(VirtReg, Order, NewVRegs))</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  assert(NewVRegs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Cannot append to existing NewVRegs&quot;</span>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="comment">// The first time we see a live range, don&#39;t try to split or spill.</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="comment">// Wait until the second time, when all smaller ranges have been allocated.</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="comment">// This gives a better picture of the interference to split around.</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordflow">if</span> (Stage &lt; RS_Split) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    setStage(VirtReg, RS_Split);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;wait for second round\n&quot;</span>);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    NewVRegs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// If we couldn&#39;t allocate a register from spilling, there is probably some</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// invalid inline assembly. The base class wil report it.</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">if</span> (Stage &gt;= RS_Done || !VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>())</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">return</span> ~0u;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="comment">// Try splitting VirtReg or interferences.</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordtype">unsigned</span> PhysReg = trySplit(VirtReg, Order, NewVRegs);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">if</span> (PhysReg || !NewVRegs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">return</span> PhysReg;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// Finally spill VirtReg itself.</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <a class="code" href="structllvm_1_1NamedRegionTimer.html">NamedRegionTimer</a> <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>(<span class="stringliteral">&quot;Spiller&quot;</span>, TimerGroupName, <a class="code" href="namespacellvm.html#a44e2fc6ce783a1ca396d473139a0ae76">TimePassesIsEnabled</a>);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> LRE(&amp;VirtReg, NewVRegs, *MF, *LIS, VRM, <span class="keyword">this</span>);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  spiller().spill(LRE);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  setStage(NewVRegs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NewVRegs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), RS_Done);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (VerifyEnabled)</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#add0f152096ce3939934fb0be4558b1b0">verify</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;After spilling&quot;</span>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="comment">// The live virtual register requesting allocation was spilled, so tell</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="comment">// the caller not to allocate anything during this round.</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="keywordtype">bool</span> RAGreedy::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf) {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** GREEDY REGISTER ALLOCATION **********\n&quot;</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span> &lt;&lt; mf.<a class="code" href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  MF = &amp;mf;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">if</span> (VerifyEnabled)</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#add0f152096ce3939934fb0be4558b1b0">verify</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;Before greedy register allocator&quot;</span>);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <a class="code" href="classllvm_1_1RegAllocBase.html#a2e9547b9bc56b02aad18e54488c8059b">RegAllocBase::init</a>(getAnalysis&lt;VirtRegMap&gt;(),</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                     getAnalysis&lt;LiveIntervals&gt;(),</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                     getAnalysis&lt;LiveRegMatrix&gt;());</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  Indexes = &amp;getAnalysis&lt;SlotIndexes&gt;();</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  MBFI = &amp;getAnalysis&lt;MachineBlockFrequencyInfo&gt;();</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  DomTree = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  SpillerInstance.<a class="code" href="classllvm_1_1OwningPtr.html#ad45fe2513c9468cbd4fa891a3685f380">reset</a>(<a class="code" href="namespacellvm.html#abc755629d1844132f222498e5c454d9b">createInlineSpiller</a>(*<span class="keyword">this</span>, *MF, *VRM));</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  Loops = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  Bundles = &amp;getAnalysis&lt;EdgeBundles&gt;();</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  SpillPlacer = &amp;getAnalysis&lt;SpillPlacement&gt;();</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  DebugVars = &amp;getAnalysis&lt;LiveDebugVariables&gt;();</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <a class="code" href="namespacellvm.html#ae57ce04872f7f974e2f996946aedef83">calculateSpillWeightsAndHints</a>(*LIS, mf, *Loops, *MBFI);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(LIS-&gt;dump());</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  SA.<a class="code" href="classllvm_1_1OwningPtr.html#ad45fe2513c9468cbd4fa891a3685f380">reset</a>(<span class="keyword">new</span> <a class="code" href="classllvm_1_1SplitAnalysis.html">SplitAnalysis</a>(*VRM, *LIS, *Loops));</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  SE.<a class="code" href="classllvm_1_1OwningPtr.html#ad45fe2513c9468cbd4fa891a3685f380">reset</a>(<span class="keyword">new</span> <a class="code" href="classllvm_1_1SplitEditor.html">SplitEditor</a>(*SA, *LIS, *VRM, *DomTree, *MBFI));</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#ac835fc191baf29fc0fd54d1c41146868">clear</a>();</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  ExtraRegInfo.<a class="code" href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a>(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  NextCascade = 1;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  IntfCache.<a class="code" href="classllvm_1_1InterferenceCache.html#ac20d7805f5da919d14d4d207a5785670">init</a>(MF, <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;getLiveUnions(), Indexes, LIS, TRI);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  GlobalCand.resize(32);  <span class="comment">// This will grow as needed.</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  allocatePhysRegs();</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  releaseMemory();</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervalUnion_1_1Query_html_ab1c4ae2dbb96352d0c821ab3613a70f9"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html#ab1c4ae2dbb96352d0c821ab3613a70f9">llvm::LiveIntervalUnion::Query::seenAllInterferences</a></div><div class="ttdeci">bool seenAllInterferences() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00165">LiveIntervalUnion.h:165</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html_a04d65cd676f91684c4babb8388e752f7"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html#a04d65cd676f91684c4babb8388e752f7">llvm::InterferenceCache::Cursor::setPhysReg</a></div><div class="ttdeci">void setPhysReg(InterferenceCache &amp;Cache, unsigned PhysReg)</div><div class="ttdoc">setPhysReg - Point this cursor to PhysReg&amp;#39;s interference. </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00192">InterferenceCache.h:192</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a5a2d0629a1d92f7c8f351b8e89f4ce47"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5a2d0629a1d92f7c8f351b8e89f4ce47">llvm::BitVector::find_first</a></div><div class="ttdeci">int find_first() const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00159">BitVector.h:159</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a9928b70d0c775c29f6d287592a35ec4f"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a9928b70d0c775c29f6d287592a35ec4f">llvm::LiveRangeEdit::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00137">LiveRangeEdit.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_a00a9b0f268432e2f8b9dd99eac50577a"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#a00a9b0f268432e2f8b9dd99eac50577a">llvm::SplitAnalysis::getParent</a></div><div class="ttdeci">const LiveInterval &amp; getParent() const </div><div class="ttdoc">getParent - Return the last analyzed interval. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00137">SplitKit.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_a4ec9ddf8db4481c798f557e8af82693f"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">llvm::LiveInterval::reg</a></div><div class="ttdeci">const unsigned reg</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00532">LiveInterval.h:532</a></div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html_ab421e1f5c9e90bb8dd6ad25b13f35ac7"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#ab421e1f5c9e90bb8dd6ad25b13f35ac7">llvm::AllocationOrder::rewind</a></div><div class="ttdeci">void rewind()</div><div class="ttdoc">Start over from the beginning. </div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00072">AllocationOrder.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a29f23d0f2288c7d9d4b4028912d0d8dd"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a29f23d0f2288c7d9d4b4028912d0d8dd">llvm::SpillPlacement::getBlockFrequency</a></div><div class="ttdeci">BlockFrequency getBlockFrequency(unsigned Number) const </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00143">SpillPlacement.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a56a6ce04341b82594b779178265df7c3"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a56a6ce04341b82594b779178265df7c3">llvm::SlotIndex::getBoundaryIndex</a></div><div class="ttdeci">SlotIndex getBoundaryIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00251">SlotIndexes.h:251</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a743d86f999a8a7c67c230442d8890661"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a743d86f999a8a7c67c230442d8890661">llvm::SlotIndex::getInstrDistance</a></div><div class="ttdeci">int getInstrDistance(SlotIndex other) const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00223">SlotIndexes.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a907ca723e22613a6cfa9845d69f3eda6"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a907ca723e22613a6cfa9845d69f3eda6">llvm::SplitEditor::reset</a></div><div class="ttdeci">void reset(LiveRangeEdit &amp;, ComplementSpillMode=SM_Partition)</div><div class="ttdoc">reset - Prepare for a new split. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00342">SplitKit.cpp:342</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_ae1bbc48a5bdb10b387be69816bf67f6f"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ae1bbc48a5bdb10b387be69816bf67f6f">llvm::SlotIndex::getBaseIndex</a></div><div class="ttdeci">SlotIndex getBaseIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00244">SlotIndexes.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca043a091e52f465df92623f5f17477837">llvm::SpillPlacement::MustSpill</a></div><div class="ttdoc">A register is impossible, variable must be spilled. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00076">SpillPlacement.h:76</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_add0f152096ce3939934fb0be4558b1b0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#add0f152096ce3939934fb0be4558b1b0">llvm::MachineFunction::verify</a></div><div class="ttdeci">void verify(Pass *p=NULL, const char *Banner=NULL) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineVerifier_8cpp_source.html#l00270">MachineVerifier.cpp:270</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_a723a443c171be9909a0f101c7b84333e"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#a723a443c171be9909a0f101c7b84333e">llvm::SplitAnalysis::getLastSplitPoint</a></div><div class="ttdeci">SlotIndex getLastSplitPoint(unsigned Num)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00141">SplitKit.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_af0994364d28de4bfa71923586d86b5f1"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#af0994364d28de4bfa71923586d86b5f1">llvm::SplitAnalysis::getThroughBlocks</a></div><div class="ttdeci">const BitVector &amp; getThroughBlocks() const </div><div class="ttdoc">getThroughBlocks - Return the set of through blocks. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00174">SplitKit.h:174</a></div></div>
<div class="ttc" id="CommandLine_8h_html_a9fa4641915b4a8690fac9768ea423584"><div class="ttname"><a href="CommandLine_8h.html#a9fa4641915b4a8690fac9768ea423584">clEnumValEnd</a></div><div class="ttdeci">#define clEnumValEnd</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00472">CommandLine.h:472</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_acffda5d90e734243696448a1818c04bc"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#acffda5d90e734243696448a1818c04bc">llvm::ArrayRef::front</a></div><div class="ttdeci">const T &amp; front() const </div><div class="ttdoc">front - Get the first element. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00112">ArrayRef.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a581a49d0be1470125187429149b11b08"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a581a49d0be1470125187429149b11b08">llvm::SplitEditor::finish</a></div><div class="ttdeci">void finish(SmallVectorImpl&lt; unsigned &gt; *LRMap=0)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01046">SplitKit.cpp:1046</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_afd82d14c16ba1251e6853357f41e2209"><div class="ttname"><a href="classllvm_1_1BitVector.html#afd82d14c16ba1251e6853357f41e2209">llvm::BitVector::find_next</a></div><div class="ttdeci">int find_next(unsigned Prev) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00173">BitVector.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00528">LiveInterval.h:528</a></div></div>
<div class="ttc" id="namespacellvm_html_ab05e8fdec16361e426acc7fa7904544f"><div class="ttname"><a href="namespacellvm.html#ab05e8fdec16361e426acc7fa7904544f">llvm::initializeLiveDebugVariablesPass</a></div><div class="ttdeci">void initializeLiveDebugVariablesPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html_acbcdeefe182a8c7139d4137a168f7b96"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#acbcdeefe182a8c7139d4137a168f7b96">llvm::AllocationOrder::getOrder</a></div><div class="ttdeci">ArrayRef&lt; MCPhysReg &gt; getOrder() const </div><div class="ttdoc">Get the allocation order without reordered hints. </div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00043">AllocationOrder.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_ac6eb568d30c5719664c2ccfe8dab72e8"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">llvm::LiveInterval::isSpillable</a></div><div class="ttdeci">bool isSpillable() const </div><div class="ttdoc">isSpillable - Can this interval be spilled? </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00543">LiveInterval.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_ad485b75a455867847a669a3f942cbcb7a7bfb05c8742572ff98fd4f226bb0aede"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7a7bfb05c8742572ff98fd4f226bb0aede">llvm::SplitEditor::SM_Speed</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00246">SplitKit.h:246</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363">llvm::MipsISD::Ins</a></div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00105">MipsISelLowering.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1Spiller_html"><div class="ttname"><a href="classllvm_1_1Spiller.html">llvm::Spiller</a></div><div class="ttdef"><b>Definition:</b> <a href="Spiller_8h_source.html#l00024">Spiller.h:24</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_a2ef80e68e8ebc6f8e778d811cc48f67f"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a2ef80e68e8ebc6f8e778d811cc48f67f">llvm::SplitAnalysis::BlockInfo::FirstDef</a></div><div class="ttdeci">SlotIndex FirstDef</div><div class="ttdoc">First non-phi valno-&gt;def, or SlotIndex(). </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00071">SplitKit.h:71</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a27a0bf90e37db96939e0b5e1daffb0a6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a27a0bf90e37db96939e0b5e1daffb0a6">llvm::cl::values</a></div><div class="ttdeci">ValuesClass&lt; DataType &gt; END_WITH_NULL values(const char *Arg, DataType Val, const char *Desc,...)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00510">CommandLine.h:510</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c469a194119a14e5a018ebb9b847cf0"><div class="ttname"><a href="namespacellvm.html#a7c469a194119a14e5a018ebb9b847cf0">llvm::operator&lt;</a></div><div class="ttdeci">void operator&lt;(const Optional&lt; T &gt; &amp;X, const Optional&lt; U &gt; &amp;Y)</div><div class="ttdoc">Poison comparison between two Optional objects. Clients needs to explicitly compare the underlying va...</div></div>
<div class="ttc" id="classllvm_1_1MachineBlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html">llvm::MachineBlockFrequencyInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00030">MachineBlockFrequencyInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00489">MCRegisterInfo.h:489</a></div></div>
<div class="ttc" id="classllvm_1_1LiveDebugVariables_html"><div class="ttname"><a href="classllvm_1_1LiveDebugVariables.html">llvm::LiveDebugVariables</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveDebugVariables_8h_source.html#l00033">LiveDebugVariables.h:33</a></div></div>
<div class="ttc" id="namespacellvm_html_ac6ce5e3d2a1edf66c1beb80be260ea0b"><div class="ttname"><a href="namespacellvm.html#ac6ce5e3d2a1edf66c1beb80be260ea0b">llvm::initializeMachineLoopInfoPass</a></div><div class="ttdeci">void initializeMachineLoopInfoPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_ae57ce04872f7f974e2f996946aedef83"><div class="ttname"><a href="namespacellvm.html#ae57ce04872f7f974e2f996946aedef83">llvm::calculateSpillWeightsAndHints</a></div><div class="ttdeci">void calculateSpillWeightsAndHints(LiveIntervals &amp;LIS, MachineFunction &amp;MF, const MachineLoopInfo &amp;MLI, const MachineBlockFrequencyInfo &amp;MBFI, VirtRegAuxInfo::NormalizingFn norm=normalizeSpillWeight)</div><div class="ttdoc">Compute spill weights and allocation hints for all virtual register live intervals. </div><div class="ttdef"><b>Definition:</b> <a href="CalcSpillWeights_8cpp_source.html#l00025">CalcSpillWeights.cpp:25</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequency_html_a8e478a163436e8244ae136bef45a4fcf"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html#a8e478a163436e8244ae136bef45a4fcf">llvm::BlockFrequency::getEntryFrequency</a></div><div class="ttdeci">static uint64_t getEntryFrequency()</div><div class="ttdoc">Returns the frequency of the entry block of the function. </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00039">BlockFrequency.h:39</a></div></div>
<div class="ttc" id="namespacellvm_html_a778ad60e4d519fe298022d004f34df93"><div class="ttname"><a href="namespacellvm.html#a778ad60e4d519fe298022d004f34df93">llvm::normalizeSpillWeight</a></div><div class="ttdeci">static float normalizeSpillWeight(float UseDefFreq, unsigned Size)</div><div class="ttdoc">Normalize the spill weight of a live interval. </div><div class="ttdef"><b>Definition:</b> <a href="CalcSpillWeights_8h_source.html#l00034">CalcSpillWeights.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a9d2296ecca42f33ce641b7341fde67d9"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a9d2296ecca42f33ce641b7341fde67d9">llvm::SplitEditor::splitRegInBlock</a></div><div class="ttdeci">void splitRegInBlock(const SplitAnalysis::BlockInfo &amp;BI, unsigned IntvIn, SlotIndex LeaveBefore)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01286">SplitKit.cpp:1286</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_abfed19760ab95747976edc7862a35807"><div class="ttname"><a href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">llvm::LiveRange::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00311">LiveInterval.h:311</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a9e81444d081e17a080e3ba93ff39e410"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a9e81444d081e17a080e3ba93ff39e410">llvm::LiveRangeEdit::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00138">LiveRangeEdit.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_1_1Delegate_html"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit_1_1Delegate.html">llvm::LiveRangeEdit::Delegate</a></div><div class="ttdoc">Callback methods for LiveRangeEdit owners. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00039">LiveRangeEdit.h:39</a></div></div>
<div class="ttc" id="SpillPlacement_8h_html"><div class="ttname"><a href="SpillPlacement_8h.html">SpillPlacement.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="namespacellvm_html_a238eae485eb747cb1ca649ea599b5c82"><div class="ttname"><a href="namespacellvm.html#a238eae485eb747cb1ca649ea599b5c82">llvm::initializeRegisterCoalescerPass</a></div><div class="ttdeci">void initializeRegisterCoalescerPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="LiveRegMatrix_8cpp_html_a8989acb71bd355e02bcf3a930b5e54ea"><div class="ttname"><a href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a></div><div class="ttdeci">Live Register Matrix</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8cpp_source.html#l00036">LiveRegMatrix.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html"><div class="ttname"><a href="classllvm_1_1LiveRange.html">llvm::LiveRange</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00146">LiveInterval.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html_adf8c36f17d2ef4cb1f731499318b5fad"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#adf8c36f17d2ef4cb1f731499318b5fad">llvm::AllocationOrder::nextWithDups</a></div><div class="ttdeci">unsigned nextWithDups(unsigned Limit)</div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00063">AllocationOrder.h:63</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a19695ead28a0fbdcea66c6253aebc44f"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a19695ead28a0fbdcea66c6253aebc44f">llvm::SlotIndex::isEarlierInstr</a></div><div class="ttdeci">static bool isEarlierInstr(SlotIndex A, SlotIndex B)</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00212">SlotIndexes.h:212</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_a08d65216af6fc79fe34347db3b9d8e75"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#a08d65216af6fc79fe34347db3b9d8e75">llvm::SlotIndexes::getLastIndex</a></div><div class="ttdeci">SlotIndex getLastIndex()</div><div class="ttdoc">Returns the base index of the last slot in this analysis. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00403">SlotIndexes.h:403</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_aa1e3d133ed73597d0c21e0a5d11fa31f"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#aa1e3d133ed73597d0c21e0a5d11fa31f">llvm::SplitAnalysis::analyze</a></div><div class="ttdeci">void analyze(const LiveInterval *li)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00313">SplitKit.cpp:313</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00049">LiveIntervalAnalysis.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="RegAllocGreedy_8cpp_html_a121070ba7388da52c72cbb1929ebd594"><div class="ttname"><a href="RegAllocGreedy_8cpp.html#a121070ba7388da52c72cbb1929ebd594">Hysteresis</a></div><div class="ttdeci">const float Hysteresis</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocGreedy_8cpp_source.html#l00304">RegAllocGreedy.cpp:304</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a35bbc237e4a675c5332103ac6e7dcce1"><div class="ttname"><a href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">llvm::BitVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - Clear all bits. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00205">BitVector.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervalUnion_1_1Query_html"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html">llvm::LiveIntervalUnion::Query</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00105">LiveIntervalUnion.h:105</a></div></div>
<div class="ttc" id="RegAllocRegistry_8h_html"><div class="ttname"><a href="RegAllocRegistry_8h.html">RegAllocRegistry.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_ae5f72acf075c54b8f8ca8783a5683b63"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#ae5f72acf075c54b8f8ca8783a5683b63">llvm::SplitEditor::splitSingleBlock</a></div><div class="ttdeci">void splitSingleBlock(const SplitAnalysis::BlockInfo &amp;BI)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01155">SplitKit.cpp:1155</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a2bd552babf3d34952ed159b653515b5e"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a2bd552babf3d34952ed159b653515b5e">llvm::SpillPlacement::addPrefSpill</a></div><div class="ttdeci">void addPrefSpill(ArrayRef&lt; unsigned &gt; Blocks, bool Strong)</div><div class="ttdoc">addPrefSpill - Same as addConstraints(PrefSpill) </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00253">SpillPlacement.cpp:253</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html_ac32182f5dd8487a052696a63cf950aab"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#ac32182f5dd8487a052696a63cf950aab">llvm::TargetRegisterClass::getName</a></div><div class="ttdeci">const char * getName() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00057">TargetRegisterInfo.h:57</a></div></div>
<div class="ttc" id="namespacellvm_html_a0448108c43f3a226744d0a4c28c989f7"><div class="ttname"><a href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">llvm::makeArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; makeArrayRef(const T &amp;OneElt)</div><div class="ttdoc">Construct an ArrayRef from a single element. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00266">ArrayRef.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegMatrix_html"><div class="ttname"><a href="classllvm_1_1LiveRegMatrix.html">llvm::LiveRegMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8h_source.html#l00040">LiveRegMatrix.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a435b043e417bb3f4fc9ac0f6e0c6ebc8"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a435b043e417bb3f4fc9ac0f6e0c6ebc8">llvm::SpillPlacement::scanActiveBundles</a></div><div class="ttdeci">bool scanActiveBundles()</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00290">SpillPlacement.cpp:290</a></div></div>
<div class="ttc" id="structllvm_1_1NamedRegionTimer_html"><div class="ttname"><a href="structllvm_1_1NamedRegionTimer.html">llvm::NamedRegionTimer</a></div><div class="ttdef"><b>Definition:</b> <a href="Timer_8h_source.html#l00148">Timer.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a50035f4bfc897ff48d96e913022a0c74"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a50035f4bfc897ff48d96e913022a0c74">llvm::SpillPlacement::getRecentPositive</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getRecentPositive()</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00130">SpillPlacement.h:130</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a757fd6afba0f531db70e78e057d147c6"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">llvm::LiveRange::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00193">LiveInterval.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a465f75c78f1dc551152248c9f203b88d"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a465f75c78f1dc551152248c9f203b88d">llvm::SmallVectorImpl::assign</a></div><div class="ttdeci">void assign(unsigned NumElts, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00470">SmallVector.h:470</a></div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html">llvm::AllocationOrder</a></div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00028">AllocationOrder.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a5394a63864680ef10fb99031bb94321f"><div class="ttname"><a href="namespacellvm.html#a5394a63864680ef10fb99031bb94321f">llvm::LLVM_ENUM_INT_TYPE</a></div><div class="ttdeci">enum LLVMConstants LLVM_ENUM_INT_TYPE(uint32_t)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00031">Metadata.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a8d70270c78d36ddb40a8b782e141b63a"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a8d70270c78d36ddb40a8b782e141b63a">llvm::SpillPlacement::iterate</a></div><div class="ttdeci">void iterate()</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00310">SpillPlacement.cpp:310</a></div></div>
<div class="ttc" id="classllvm_1_1EdgeBundles_html_a2fa4eb01f401c3513c1eca5024e1c2cc"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#a2fa4eb01f401c3513c1eca5024e1c2cc">llvm::EdgeBundles::getNumBundles</a></div><div class="ttdeci">unsigned getNumBundles() const </div><div class="ttdoc">getNumBundles - Return the total number of bundles in the CFG. </div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00046">EdgeBundles.h:46</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_a70543843b2191d018dd4c0c745a70ae0"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a70543843b2191d018dd4c0c745a70ae0">llvm::LiveInterval::getSize</a></div><div class="ttdeci">unsigned getSize() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00573">LiveInterval.cpp:573</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_af4642b7a911820bc0543b16d887fd38e"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#af4642b7a911820bc0543b16d887fd38e">llvm::SplitAnalysis::getNumThroughBlocks</a></div><div class="ttdeci">unsigned getNumThroughBlocks() const </div><div class="ttdoc">getNumThroughBlocks - Return the number of through blocks. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00168">SplitKit.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1RegAllocBase_html"><div class="ttname"><a href="classllvm_1_1RegAllocBase.html">llvm::RegAllocBase</a></div><div class="ttdef"><b>Definition:</b> <a href="RegAllocBase_8h_source.html#l00059">RegAllocBase.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_aa4cb66debc1a10f2c6ac8d7ae7d974f6"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#aa4cb66debc1a10f2c6ac8d7ae7d974f6">llvm::SplitAnalysis::didRepairRange</a></div><div class="ttdeci">bool didRepairRange() const </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00130">SplitKit.h:130</a></div></div>
<div class="ttc" id="classllvm_1_1IndexedMap_html"><div class="ttname"><a href="classllvm_1_1IndexedMap.html">llvm::IndexedMap</a></div><div class="ttdef"><b>Definition:</b> <a href="IndexedMap_8h_source.html#l00031">IndexedMap.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a45631ddcb7da79035271c3e491d6dc33"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a45631ddcb7da79035271c3e491d6dc33">llvm::SplitEditor::openIntv</a></div><div class="ttdeci">unsigned openIntv()</div><div class="ttdoc">Create a new virtual register and live interval. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00463">SplitKit.cpp:463</a></div></div>
<div class="ttc" id="structllvm_1_1SpillPlacement_1_1BlockConstraint_html_a1e36bf5c748d62c8fa43ff7827f94684"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#a1e36bf5c748d62c8fa43ff7827f94684">llvm::SpillPlacement::BlockConstraint::Exit</a></div><div class="ttdeci">BorderConstraint Exit</div><div class="ttdoc">Constraint on block exit. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00083">SpillPlacement.h:83</a></div></div>
<div class="ttc" id="Timer_8h_html"><div class="ttname"><a href="Timer_8h.html">Timer.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_ad56736ab976e0c49c5af1a61a8c72e87"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#ad56736ab976e0c49c5af1a61a8c72e87">llvm::SplitAnalysis::shouldSplitSingleBlock</a></div><div class="ttdeci">bool shouldSplitSingleBlock(const BlockInfo &amp;BI, bool SingleInstrs) const </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01137">SplitKit.cpp:1137</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_a6d25ab70a5fda1310dad85ddb8ecaa22"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a6d25ab70a5fda1310dad85ddb8ecaa22">llvm::SplitAnalysis::BlockInfo::MBB</a></div><div class="ttdeci">MachineBasicBlock * MBB</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00068">SplitKit.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1PrintReg_html"><div class="ttname"><a href="classllvm_1_1PrintReg.html">llvm::PrintReg</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00878">TargetRegisterInfo.h:878</a></div></div>
<div class="ttc" id="PassAnalysisSupport_8h_html"><div class="ttname"><a href="PassAnalysisSupport_8h.html">PassAnalysisSupport.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a8ab989120222d67308b4e03b2772fb6a"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a8ab989120222d67308b4e03b2772fb6a">llvm::SplitEditor::leaveIntvAfter</a></div><div class="ttdeci">SlotIndex leaveIntvAfter(SlotIndex Idx)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00546">SplitKit.cpp:546</a></div></div>
<div class="ttc" id="classllvm_1_1EdgeBundles_html"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html">llvm::EdgeBundles</a></div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00026">EdgeBundles.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervalUnion_1_1Query_html_a6f98daaaac432eaa936a98e594faf212"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a6f98daaaac432eaa936a98e594faf212">llvm::LiveIntervalUnion::Query::interferingVRegs</a></div><div class="ttdeci">const SmallVectorImpl&lt; LiveInterval * &gt; &amp; interferingVRegs() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00171">LiveIntervalUnion.h:171</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html">llvm::SlotIndexes</a></div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00334">SlotIndexes.h:334</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00349">Mips16ISelLowering.cpp:349</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html"><div class="ttname"><a href="classllvm_1_1SplitEditor.html">llvm::SplitEditor</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00211">SplitKit.h:211</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_ad53da5107a9851a5d666109c53a96991a0d0c291488b64cffb191fda8a4e90ef0"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ad53da5107a9851a5d666109c53a96991a0d0c291488b64cffb191fda8a4e90ef0">llvm::SlotIndex::InstrDist</a></div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00146">SlotIndexes.h:146</a></div></div>
<div class="ttc" id="namespacellvm_html_aa3bc1efc2622aa9bf1e0d05b3d9600de"><div class="ttname"><a href="namespacellvm.html#aa3bc1efc2622aa9bf1e0d05b3d9600de">llvm::huge_valf</a></div><div class="ttdeci">const float huge_valf</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00612">MathExtras.h:612</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html">llvm::VirtRegMap</a></div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8h_source.html#l00032">VirtRegMap.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterRegAlloc_html"><div class="ttname"><a href="classllvm_1_1RegisterRegAlloc.html">llvm::RegisterRegAlloc</a></div><div class="ttdef"><b>Definition:</b> <a href="RegAllocRegistry_8h_source.html#l00027">RegAllocRegistry.h:27</a></div></div>
<div class="ttc" id="structllvm_1_1SpillPlacement_1_1BlockConstraint_html"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html">llvm::SpillPlacement::BlockConstraint</a></div><div class="ttdoc">BlockConstraint - Entry and exit constraints for a basic block. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00080">SpillPlacement.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_aa5c8b14335e996e2bfaa2d92c3216897"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#aa5c8b14335e996e2bfaa2d92c3216897">llvm::SplitAnalysis::getUseSlots</a></div><div class="ttdeci">ArrayRef&lt; SlotIndex &gt; getUseSlots() const </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00161">SplitKit.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_abaae5e7f00635019260dd4d2506e2b58"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#abaae5e7f00635019260dd4d2506e2b58">llvm::SplitAnalysis::BlockInfo::LastInstr</a></div><div class="ttdeci">SlotIndex LastInstr</div><div class="ttdoc">Last instr accessing current reg. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00070">SplitKit.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a622489e7ba539850915e04c8bef7c040"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a622489e7ba539850915e04c8bef7c040">llvm::LiveRangeEdit::get</a></div><div class="ttdeci">unsigned get(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00141">LiveRangeEdit.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1IndexedMap_html_a4f6616201a89f276cfb638222b8b24fa"><div class="ttname"><a href="classllvm_1_1IndexedMap.html#a4f6616201a89f276cfb638222b8b24fa">llvm::IndexedMap::inBounds</a></div><div class="ttdeci">bool inBounds(IndexT n) const </div><div class="ttdef"><b>Definition:</b> <a href="IndexedMap_8h_source.html#l00071">IndexedMap.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a80ed1a6b4e8e7a1eb342ac71a24e842b"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a80ed1a6b4e8e7a1eb342ac71a24e842b">llvm::SpillPlacement::addLinks</a></div><div class="ttdeci">void addLinks(ArrayRef&lt; unsigned &gt; Links)</div><div class="ttdoc">addLinks - Add transparent blocks with the given numbers. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00268">SpillPlacement.cpp:268</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_html_ac20d7805f5da919d14d4d207a5785670"><div class="ttname"><a href="classllvm_1_1InterferenceCache.html#ac20d7805f5da919d14d4d207a5785670">llvm::InterferenceCache::init</a></div><div class="ttdeci">void init(MachineFunction *, LiveIntervalUnion *, SlotIndexes *, LiveIntervals *, const TargetRegisterInfo *)</div><div class="ttdoc">init - Prepare cache for a new function. </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8cpp_source.html#l00025">InterferenceCache.cpp:25</a></div></div>
<div class="ttc" id="MachineBlockFrequencyInfo_8h_html"><div class="ttname"><a href="MachineBlockFrequencyInfo_8h.html">MachineBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html_a0166e26fb57071dbbb9f99570865616b"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html#a0166e26fb57071dbbb9f99570865616b">llvm::InterferenceCache::Cursor::last</a></div><div class="ttdeci">SlotIndex last()</div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00218">InterferenceCache.h:218</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ad8b6d2396f18814d213b976abe07f809"><div class="ttname"><a href="Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a></div><div class="ttdeci">This would be a win on but not x86 or ppc64 Shrink</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00037">Target/README.txt:37</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_html_aa031151c2e9cc0ea84204730cf395b0f"><div class="ttname"><a href="namespacellvm.html#aa031151c2e9cc0ea84204730cf395b0f">llvm::initializeMachineDominatorTreePass</a></div><div class="ttdeci">void initializeMachineDominatorTreePass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_aa68a1c0afe039658609beebc96121f39"><div class="ttname"><a href="namespacellvm.html#aa68a1c0afe039658609beebc96121f39">llvm::initializeSlotIndexesPass</a></div><div class="ttdeci">void initializeSlotIndexesPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a5f68411df61b8b1f37a872966b5d2a3b"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a5f68411df61b8b1f37a872966b5d2a3b">llvm::SlotIndex::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00160">SlotIndexes.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a88c7b413f0bb3edf821661f04cc6a5c7"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a88c7b413f0bb3edf821661f04cc6a5c7">llvm::SplitEditor::useIntv</a></div><div class="ttdeci">void useIntv(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">useIntv - indicate that all instructions in MBB should use OpenLI. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00535">SplitKit.cpp:535</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8ca49b6f21cf41c5b608cb5645bc70d36b8">llvm::SpillPlacement::DontCare</a></div><div class="ttdoc">Block doesn&amp;#39;t care / variable not live. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00072">SpillPlacement.h:72</a></div></div>
<div class="ttc" id="CalcSpillWeights_8h_html"><div class="ttname"><a href="CalcSpillWeights_8h.html">CalcSpillWeights.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html_ad45fe2513c9468cbd4fa891a3685f380"><div class="ttname"><a href="classllvm_1_1OwningPtr.html#ad45fe2513c9468cbd4fa891a3685f380">llvm::OwningPtr::reset</a></div><div class="ttdeci">void reset(T *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00051">OwningPtr.h:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a7aeb11cd960ff18ae0b12e678dfcae57"><div class="ttname"><a href="namespacellvm.html#a7aeb11cd960ff18ae0b12e678dfcae57">llvm::initializeLiveStacksPass</a></div><div class="ttdeci">void initializeLiveStacksPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html">llvm::InterferenceCache::Cursor</a></div><div class="ttdoc">Cursor - The primary query interface for the block interference cache. </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00161">InterferenceCache.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_ac07ebfa86b4d5bf5386e1ac07d62b2bd"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#ac07ebfa86b4d5bf5386e1ac07d62b2bd">llvm::MCRegisterInfo::getRegClass</a></div><div class="ttdeci">const MCRegisterClass &amp; getRegClass(unsigned i) const </div><div class="ttdoc">Returns the register class associated with the enumeration value. See class MCOperandInfo. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00399">MCRegisterInfo.h:399</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_ad485b75a455867847a669a3f942cbcb7a5cd5c6b9f5402366a8e7a28a55925720"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7a5cd5c6b9f5402366a8e7a28a55925720">llvm::SplitEditor::SM_Partition</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00234">SplitKit.h:234</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_ad485b75a455867847a669a3f942cbcb7ade36d2a249a7f767c968e8667190bc11"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#ad485b75a455867847a669a3f942cbcb7ade36d2a249a7f767c968e8667190bc11">llvm::SplitEditor::SM_Size</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00241">SplitKit.h:241</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="namespacellvm_html_aea2ef5e4ec532aa42606902e9001f712"><div class="ttname"><a href="namespacellvm.html#aea2ef5e4ec532aa42606902e9001f712">llvm::initializeLiveIntervalsPass</a></div><div class="ttdeci">void initializeLiveIntervalsPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="structllvm_1_1SpillPlacement_1_1BlockConstraint_html_addcae7ef74d3f00004c6dfcc5775c1e3"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#addcae7ef74d3f00004c6dfcc5775c1e3">llvm::SpillPlacement::BlockConstraint::Number</a></div><div class="ttdeci">unsigned Number</div><div class="ttdoc">Basic block number (from MBB::getNumber()). </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00081">SpillPlacement.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00275">BitVector.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html"><div class="ttname"><a href="classllvm_1_1OwningPtr.html">llvm::OwningPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00028">OwningPtr.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1IndexedMap_html_a111ef7f4e0b778519ee17c52fdbd2583"><div class="ttname"><a href="classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">llvm::IndexedMap::resize</a></div><div class="ttdeci">void resize(typename StorageT::size_type s)</div><div class="ttdef"><b>Definition:</b> <a href="IndexedMap_8h_source.html#l00057">IndexedMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a3c3f86f81ebb49325b8920fce2747c6e"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a3c3f86f81ebb49325b8920fce2747c6e">llvm::LiveRangeEdit::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00140">LiveRangeEdit.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_html_a877edd82f1d68db14d72abc7f56f518f"><div class="ttname"><a href="classllvm_1_1InterferenceCache.html#a877edd82f1d68db14d72abc7f56f518f">llvm::InterferenceCache::getMaxCursors</a></div><div class="ttdeci">unsigned getMaxCursors() const </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00158">InterferenceCache.h:158</a></div></div>
<div class="ttc" id="RegAllocGreedy_8cpp_html_a8c706b5f4a64e9a1096972670ff0b56a"><div class="ttname"><a href="RegAllocGreedy_8cpp.html#a8c706b5f4a64e9a1096972670ff0b56a">SplitSpillMode</a></div><div class="ttdeci">static cl::opt&lt; SplitEditor::ComplementSpillMode &gt; SplitSpillMode(&quot;split-spill-mode&quot;, cl::Hidden, cl::desc(&quot;Spill mode for splitting live ranges&quot;), cl::values(clEnumValN(SplitEditor::SM_Partition,&quot;default&quot;,&quot;Default&quot;), clEnumValN(SplitEditor::SM_Size,&quot;size&quot;,&quot;Optimize for size&quot;), clEnumValN(SplitEditor::SM_Speed,&quot;speed&quot;,&quot;Optimize for speed&quot;), clEnumValEnd), cl::init(SplitEditor::SM_Partition))</div></div>
<div class="ttc" id="classllvm_1_1RegAllocBase_html_a2e9547b9bc56b02aad18e54488c8059b"><div class="ttname"><a href="classllvm_1_1RegAllocBase.html#a2e9547b9bc56b02aad18e54488c8059b">llvm::RegAllocBase::init</a></div><div class="ttdeci">void init(VirtRegMap &amp;vrm, LiveIntervals &amp;lis, LiveRegMatrix &amp;mat)</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocBase_8cpp_source.html#l00056">RegAllocBase.cpp:56</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_afb354c8aea0150628f8aa06c7f4a4168"><div class="ttname"><a href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a></div><div class="ttdeci">vector float f(vector float a, vector float b)</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00205">README_ALTIVEC.txt:205</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="AllocationOrder_8h_html"><div class="ttname"><a href="AllocationOrder_8h.html">AllocationOrder.h</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="structllvm_1_1SpillPlacement_1_1BlockConstraint_html_aab2805f3c0c929660eb309b0fe9e9ee3"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aab2805f3c0c929660eb309b0fe9e9ee3">llvm::SpillPlacement::BlockConstraint::Entry</a></div><div class="ttdeci">BorderConstraint Entry</div><div class="ttdoc">Constraint on block entry. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00082">SpillPlacement.h:82</a></div></div>
<div class="ttc" id="EdgeBundles_8h_html"><div class="ttname"><a href="EdgeBundles_8h.html">EdgeBundles.h</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a2310373a95001e3677c0f0534cdfc0e1"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a2310373a95001e3677c0f0534cdfc0e1">llvm::SpillPlacement::finish</a></div><div class="ttdeci">bool finish()</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00366">SpillPlacement.cpp:366</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caca6da2dad218232636b80854d81a6e1c">llvm::SpillPlacement::PrefReg</a></div><div class="ttdoc">Block entry/exit prefers a register. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00073">SpillPlacement.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_a80461fac9933c96d5ffbeae0fccfd916"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#a80461fac9933c96d5ffbeae0fccfd916">llvm::SlotIndexes::getInstructionFromIndex</a></div><div class="ttdeci">MachineInstr * getInstructionFromIndex(SlotIndex index) const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00423">SlotIndexes.h:423</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a0d46b9b2cb2caf78e65bbd56644fc0f2"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a0d46b9b2cb2caf78e65bbd56644fc0f2">llvm::SpillPlacement::addConstraints</a></div><div class="ttdeci">void addConstraints(ArrayRef&lt; BlockConstraint &gt; LiveBlocks)</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00231">SpillPlacement.cpp:231</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_ad863a11c0d0943aad3d7a51d02711c4e"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ad863a11c0d0943aad3d7a51d02711c4e">llvm::ArrayRef::back</a></div><div class="ttdeci">const T &amp; back() const </div><div class="ttdoc">back - Get the last element. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00118">ArrayRef.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a8534c37f85077c1dd9fc3468f70d4618"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a8534c37f85077c1dd9fc3468f70d4618">llvm::SplitEditor::splitRegOutBlock</a></div><div class="ttdeci">void splitRegOutBlock(const SplitAnalysis::BlockInfo &amp;BI, unsigned IntvOut, SlotIndex EnterAfter)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01378">SplitKit.cpp:1378</a></div></div>
<div class="ttc" id="LiveRangeEdit_8h_html"><div class="ttname"><a href="LiveRangeEdit_8h.html">LiveRangeEdit.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveStacks_html"><div class="ttname"><a href="classllvm_1_1LiveStacks.html">llvm::LiveStacks</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveStackAnalysis_8h_source.html#l00027">LiveStackAnalysis.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_afeb00b9049a2391c990df15692caef63"><div class="ttname"><a href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">llvm::LiveRange::find</a></div><div class="ttdeci">iterator find(SlotIndex Pos)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00034">LiveInterval.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html"><div class="ttname"><a href="classllvm_1_1Attribute.html">llvm::Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00045">Attributes.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html">llvm::SpillPlacement</a></div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00042">SpillPlacement.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_a99eec2c4ba894baca5b197e940b095f6"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a99eec2c4ba894baca5b197e940b095f6">llvm::LiveInterval::weight</a></div><div class="ttdeci">float weight</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00533">LiveInterval.h:533</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_html"><div class="ttname"><a href="classllvm_1_1InterferenceCache.html">llvm::InterferenceCache</a></div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00024">InterferenceCache.h:24</a></div></div>
<div class="ttc" id="RegAllocGreedy_8cpp_html_ad32c73ff9b51db25ee08e4fcabc5ce5a"><div class="ttname"><a href="RegAllocGreedy_8cpp.html#ad32c73ff9b51db25ee08e4fcabc5ce5a">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumGlobalSplits,&quot;Number of split global live ranges&quot;)</div></div>
<div class="ttc" id="LiveIntervalAnalysis_8h_html"><div class="ttname"><a href="LiveIntervalAnalysis_8h.html">LiveIntervalAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a0b73244049319d841fd11a238f35b5d1"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">llvm::SlotIndex::isSameInstr</a></div><div class="ttdeci">static bool isSameInstr(SlotIndex A, SlotIndex B)</div><div class="ttdoc">isSameInstr - Return true if A and B refer to the same instruction. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00206">SlotIndexes.h:206</a></div></div>
<div class="ttc" id="classllvm_1_1LiveDebugVariables_html_a3305b6b5faf0cc1ae46eba960c657560"><div class="ttname"><a href="classllvm_1_1LiveDebugVariables.html#a3305b6b5faf0cc1ae46eba960c657560">llvm::LiveDebugVariables::splitRegister</a></div><div class="ttdeci">void splitRegister(unsigned OldReg, ArrayRef&lt; unsigned &gt; NewRegs, LiveIntervals &amp;LIS)</div><div class="ttdef"><b>Definition:</b> <a href="LiveDebugVariables_8cpp_source.html#l00864">LiveDebugVariables.cpp:864</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#ab09623fee8a653165a7cc624b8eaaa8caf5efe10871d66719c8668d09d768e740">llvm::SpillPlacement::PrefSpill</a></div><div class="ttdoc">Block entry/exit prefers a stack slot. </div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00074">SpillPlacement.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_a189e7a14532185ccc5f95f654d9ab326"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#a189e7a14532185ccc5f95f654d9ab326">llvm::SplitAnalysis::getNumLiveBlocks</a></div><div class="ttdeci">unsigned getNumLiveBlocks() const </div><div class="ttdoc">getNumLiveBlocks - Return the number of blocks where CurLI is live. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00177">SplitKit.h:177</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_afc1d576ff2321f8f3a604808be1b6f5b"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#afc1d576ff2321f8f3a604808be1b6f5b">llvm::SplitAnalysis::BlockInfo::FirstInstr</a></div><div class="ttdeci">SlotIndex FirstInstr</div><div class="ttdoc">First instr accessing current reg. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00069">SplitKit.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html">llvm::SplitAnalysis::BlockInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00067">SplitKit.h:67</a></div></div>
<div class="ttc" id="LiveStackAnalysis_8h_html"><div class="ttname"><a href="LiveStackAnalysis_8h.html">LiveStackAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html">llvm::SplitAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00042">SplitKit.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1SpillPlacement_html_a329177b9cd260516a4aca8f55c199020"><div class="ttname"><a href="classllvm_1_1SpillPlacement.html#a329177b9cd260516a4aca8f55c199020">llvm::SpillPlacement::prepare</a></div><div class="ttdeci">void prepare(BitVector &amp;RegBundles)</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8cpp_source.html#l00356">SpillPlacement.cpp:356</a></div></div>
<div class="ttc" id="classllvm_1_1EdgeBundles_html_a6e378038141dd28e505f2b9fd5abb048"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#a6e378038141dd28e505f2b9fd5abb048">llvm::EdgeBundles::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getBlocks(unsigned Bundle) const </div><div class="ttdoc">getBlocks - Return an array of blocks that are connected to Bundle. </div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00049">EdgeBundles.h:49</a></div></div>
<div class="ttc" id="LiveDebugVariables_8h_html"><div class="ttname"><a href="LiveDebugVariables_8h.html">LiveDebugVariables.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00249">Pass.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_ab62e85ba80ceaef4644386d4fcfa87d0"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#ab62e85ba80ceaef4644386d4fcfa87d0">llvm::SplitAnalysis::getUseBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockInfo &gt; getUseBlocks() const </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00165">SplitKit.h:165</a></div></div>
<div class="ttc" id="LiveRegMatrix_8h_html"><div class="ttname"><a href="LiveRegMatrix_8h.html">LiveRegMatrix.h</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html_a898f7966b7db810dc1487ac6ca267fd2"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html#a898f7966b7db810dc1487ac6ca267fd2">llvm::InterferenceCache::Cursor::hasInterference</a></div><div class="ttdeci">bool hasInterference()</div><div class="ttdoc">hasInterference - Return true if the current block has any interference. </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00206">InterferenceCache.h:206</a></div></div>
<div class="ttc" id="namespacellvm_html_aaf5867f5ab3833a39b9518fbd85acac5"><div class="ttname"><a href="namespacellvm.html#aaf5867f5ab3833a39b9518fbd85acac5">llvm::initializeSpillPlacementPass</a></div><div class="ttdeci">void initializeSpillPlacementPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_a9b59b13f97bee321b57c23f4c0cb3ac2"><div class="ttname"><a href="namespacellvm.html#a9b59b13f97bee321b57c23f4c0cb3ac2">llvm::initializeMachineSchedulerPass</a></div><div class="ttdeci">void initializeMachineSchedulerPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="RegAllocGreedy_8cpp_html_a5a01c70b33dc7d9c7705170732387b84"><div class="ttname"><a href="RegAllocGreedy_8cpp.html#a5a01c70b33dc7d9c7705170732387b84">greedyRegAlloc</a></div><div class="ttdeci">static RegisterRegAlloc greedyRegAlloc(&quot;greedy&quot;,&quot;greedy register allocator&quot;, createGreedyRegisterAllocator)</div></div>
<div class="ttc" id="classllvm_1_1LiveIntervalUnion_html_a3c59b3b5c9561a80be4c4cc4a403fe34"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion.html#a3c59b3b5c9561a80be4c4cc4a403fe34">llvm::LiveIntervalUnion::SegmentIter</a></div><div class="ttdeci">LiveSegments::iterator SegmentIter</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00054">LiveIntervalUnion.h:54</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_a42e9b38c4f9bc0c0aca6f0c8c5cd1f80"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a42e9b38c4f9bc0c0aca6f0c8c5cd1f80">llvm::SplitAnalysis::BlockInfo::LiveOut</a></div><div class="ttdeci">bool LiveOut</div><div class="ttdoc">Current reg is live out. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00073">SplitKit.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html_a9983769d5d0bcab7fb0385864fc52621"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html#a9983769d5d0bcab7fb0385864fc52621">llvm::InterferenceCache::Cursor::moveToBlock</a></div><div class="ttdeci">void moveToBlock(unsigned MBBNum)</div><div class="ttdoc">moveTo - Move cursor to basic block MBBNum. </div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00201">InterferenceCache.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html_ad2268c47b7b3a67b032d657e52911190"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#ad2268c47b7b3a67b032d657e52911190">llvm::AllocationOrder::next</a></div><div class="ttdeci">unsigned next()</div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00048">AllocationOrder.h:48</a></div></div>
<div class="ttc" id="CommandLine_8h_html_a187fd767976b311c09dff5e05ac0c1bc"><div class="ttname"><a href="CommandLine_8h.html#a187fd767976b311c09dff5e05ac0c1bc">clEnumValN</a></div><div class="ttdeci">#define clEnumValN(ENUMVAL, FLAGNAME, DESC)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00471">CommandLine.h:471</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_ae3e84a62e4ae19e7766bde30ee72c040"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#ae3e84a62e4ae19e7766bde30ee72c040">c</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int c</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="namespacellvm_html_a49962b01687c86f2c8bcf37a9037ff85"><div class="ttname"><a href="namespacellvm.html#a49962b01687c86f2c8bcf37a9037ff85">llvm::initializeVirtRegMapPass</a></div><div class="ttdeci">void initializeVirtRegMapPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="namespacellvm_html_abc755629d1844132f222498e5c454d9b"><div class="ttname"><a href="namespacellvm.html#abc755629d1844132f222498e5c454d9b">llvm::createInlineSpiller</a></div><div class="ttdeci">Spiller * createInlineSpiller(MachineFunctionPass &amp;pass, MachineFunction &amp;mf, VirtRegMap &amp;vrm)</div><div class="ttdef"><b>Definition:</b> <a href="InlineSpiller_8cpp_source.html#l00191">InlineSpiller.cpp:191</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a730a3ff6c5b92ca7a37324922ae1d953"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">llvm::LiveRange::beginIndex</a></div><div class="ttdeci">SlotIndex beginIndex() const </div><div class="ttdoc">beginIndex - Return the lowest numbered slot covered. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00314">LiveInterval.h:314</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_ab181eb57b4d30c914d782ad60b8d913f"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#ab181eb57b4d30c914d782ad60b8d913f">llvm::SplitEditor::splitLiveThroughBlock</a></div><div class="ttdeci">void splitLiveThroughBlock(unsigned MBBNum, unsigned IntvIn, SlotIndex LeaveBefore, unsigned IntvOut, SlotIndex EnterAfter)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l01182">SplitKit.cpp:1182</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_adcdd202aafbf9a6953929d1be177312d"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#adcdd202aafbf9a6953929d1be177312d">llvm::LiveRangeEdit::regs</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; regs() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00143">LiveRangeEdit.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequency_html_abfa4567a98b37bee439fc06ba54042b2"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html#abfa4567a98b37bee439fc06ba54042b2">llvm::BlockFrequency::getMaxFrequency</a></div><div class="ttdeci">static uint64_t getMaxFrequency()</div><div class="ttdoc">Returns the maximum possible frequency, the saturation value. </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00042">BlockFrequency.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="namespacellvm_html_aca2446f62c45521dfda784ed35f3cd44"><div class="ttname"><a href="namespacellvm.html#aca2446f62c45521dfda784ed35f3cd44">llvm::initializeLiveRegMatrixPass</a></div><div class="ttdeci">void initializeLiveRegMatrixPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="SplitKit_8h_html"><div class="ttname"><a href="SplitKit_8h.html">SplitKit.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a1e408e746db9cae453eb2799eedc64ce"><div class="ttname"><a href="namespacellvm.html#a1e408e746db9cae453eb2799eedc64ce">llvm::createGreedyRegisterAllocator</a></div><div class="ttdeci">FunctionPass * createGreedyRegisterAllocator()</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocGreedy_8cpp_source.html#l00307">RegAllocGreedy.cpp:307</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1SplitEditor_html_a88924909b2d83abe8eb4ba2ac84eec6c"><div class="ttname"><a href="classllvm_1_1SplitEditor.html#a88924909b2d83abe8eb4ba2ac84eec6c">llvm::SplitEditor::enterIntvBefore</a></div><div class="ttdeci">SlotIndex enterIntvBefore(SlotIndex Idx)</div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00481">SplitKit.cpp:481</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervalUnion_1_1Query_html_aa64ff93c76b3a430e6533685ff9066fe"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html#aa64ff93c76b3a430e6533685ff9066fe">llvm::LiveIntervalUnion::Query::collectInterferingVRegs</a></div><div class="ttdeci">unsigned collectInterferingVRegs(unsigned MaxInterferingRegs=UINT_MAX)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8cpp_source.html#l00119">LiveIntervalUnion.cpp:119</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html">llvm::LiveRangeEdit</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00036">LiveRangeEdit.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html_a7d9e911655267def875c265ae774cf68"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">llvm::SlotIndexes::getMBBStartIdx</a></div><div class="ttdeci">SlotIndex getMBBStartIdx(unsigned Num) const </div><div class="ttdoc">Returns the first index in the given basic block number. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00486">SlotIndexes.h:486</a></div></div>
<div class="ttc" id="classllvm_1_1EdgeBundles_html_ac1f97383ef8b8ee7c80c24f68e3c3597"><div class="ttname"><a href="classllvm_1_1EdgeBundles.html#ac1f97383ef8b8ee7c80c24f68e3c3597">llvm::EdgeBundles::getBundle</a></div><div class="ttdeci">unsigned getBundle(unsigned N, bool Out) const </div><div class="ttdef"><b>Definition:</b> <a href="EdgeBundles_8h_source.html#l00043">EdgeBundles.h:43</a></div></div>
<div class="ttc" id="InterferenceCache_8h_html"><div class="ttname"><a href="InterferenceCache_8h.html">InterferenceCache.h</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a04196b5e551d63690ede0244f80f2503"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">llvm::SlotIndex::getRegSlot</a></div><div class="ttdeci">SlotIndex getRegSlot(bool EC=false) const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00257">SlotIndexes.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1IndexedMap_html_a5e822b0690502a04b87125e63dbc8316"><div class="ttname"><a href="classllvm_1_1IndexedMap.html#a5e822b0690502a04b87125e63dbc8316">llvm::IndexedMap::grow</a></div><div class="ttdeci">void grow(IndexT n)</div><div class="ttdef"><b>Definition:</b> <a href="IndexedMap_8h_source.html#l00065">IndexedMap.h:65</a></div></div>
<div class="ttc" id="VirtRegMap_8h_html"><div class="ttname"><a href="VirtRegMap_8h.html">VirtRegMap.h</a></div></div>
<div class="ttc" id="Spiller_8h_html"><div class="ttname"><a href="Spiller_8h.html">Spiller.h</a></div></div>
<div class="ttc" id="classllvm_1_1SplitAnalysis_html_a7cd60187fcffd2af5b77cd6b9c867f0b"><div class="ttname"><a href="classllvm_1_1SplitAnalysis.html#a7cd60187fcffd2af5b77cd6b9c867f0b">llvm::SplitAnalysis::countLiveBlocks</a></div><div class="ttdeci">unsigned countLiveBlocks(const LiveInterval *li) const </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8cpp_source.html#l00276">SplitKit.cpp:276</a></div></div>
<div class="ttc" id="classllvm_1_1AllocationOrder_html_a9ed95c56986bd2d016a56b301b7da852"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#a9ed95c56986bd2d016a56b301b7da852">llvm::AllocationOrder::isHint</a></div><div class="ttdeci">bool isHint() const </div><div class="ttdoc">Return true if the last register returned from next() was a preferred register. </div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00075">AllocationOrder.h:75</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="namespacellvm_html_a778bcc1dd6188bd894d03c68a3fb28e7"><div class="ttname"><a href="namespacellvm.html#a778bcc1dd6188bd894d03c68a3fb28e7">llvm::initializeEdgeBundlesPass</a></div><div class="ttdeci">void initializeEdgeBundlesPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="RegAllocBase_8h_html"><div class="ttname"><a href="RegAllocBase_8h.html">RegAllocBase.h</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequency_html"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html">llvm::BlockFrequency</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00025">BlockFrequency.h:25</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ae215c5c2aecd18c4e68a94187d9cdbf1"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="namespacellvm_html_a44e2fc6ce783a1ca396d473139a0ae76"><div class="ttname"><a href="namespacellvm.html#a44e2fc6ce783a1ca396d473139a0ae76">llvm::TimePassesIsEnabled</a></div><div class="ttdeci">bool TimePassesIsEnabled</div><div class="ttdoc">This is the storage for the -time-passes option. </div><div class="ttdef"><b>Definition:</b> <a href="IRReader_8cpp_source.html#l00027">IRReader.cpp:27</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a669ed09ac4693c64ba499289545addff"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a669ed09ac4693c64ba499289545addff">llvm::LiveRangeEdit::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00139">LiveRangeEdit.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1IndexedMap_html_ac835fc191baf29fc0fd54d1c41146868"><div class="ttname"><a href="classllvm_1_1IndexedMap.html#ac835fc191baf29fc0fd54d1c41146868">llvm::IndexedMap::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="IndexedMap_8h_source.html#l00061">IndexedMap.h:61</a></div></div>
<div class="ttc" id="structllvm_1_1SplitAnalysis_1_1BlockInfo_html_a4c7b9375634dd9b55f130ae4c428475c"><div class="ttname"><a href="structllvm_1_1SplitAnalysis_1_1BlockInfo.html#a4c7b9375634dd9b55f130ae4c428475c">llvm::SplitAnalysis::BlockInfo::LiveIn</a></div><div class="ttdeci">bool LiveIn</div><div class="ttdoc">Current reg is live in. </div><div class="ttdef"><b>Definition:</b> <a href="SplitKit_8h_source.html#l00072">SplitKit.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00092">SlotIndexes.h:92</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegMatrix_html_ab317b81a1c575049207d5d9348d8635aa30186d61b40f517e8dc5d9e85076a91f"><div class="ttname"><a href="classllvm_1_1LiveRegMatrix.html#ab317b81a1c575049207d5d9348d8635aa30186d61b40f517e8dc5d9e85076a91f">llvm::LiveRegMatrix::IK_VirtReg</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8h_source.html#l00089">LiveRegMatrix.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1InterferenceCache_1_1Cursor_html_a00dd59b7037ee092a891c2ef1cd9e782"><div class="ttname"><a href="classllvm_1_1InterferenceCache_1_1Cursor.html#a00dd59b7037ee092a891c2ef1cd9e782">llvm::InterferenceCache::Cursor::first</a></div><div class="ttdeci">SlotIndex first()</div><div class="ttdef"><b>Definition:</b> <a href="InterferenceCache_8h_source.html#l00212">InterferenceCache.h:212</a></div></div>
<div class="ttc" id="structllvm_1_1SpillPlacement_1_1BlockConstraint_html_aa94bff6fdd53de69a5ca85f8ff69a37c"><div class="ttname"><a href="structllvm_1_1SpillPlacement_1_1BlockConstraint.html#aa94bff6fdd53de69a5ca85f8ff69a37c">llvm::SpillPlacement::BlockConstraint::ChangesValue</a></div><div class="ttdeci">bool ChangesValue</div><div class="ttdef"><b>Definition:</b> <a href="SpillPlacement_8h_source.html#l00088">SpillPlacement.h:88</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:01:05 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
