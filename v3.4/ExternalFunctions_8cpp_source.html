<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: ExternalFunctions.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ExternalFunctions_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ExternalFunctions.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ExternalFunctions_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- ExternalFunctions.cpp - Implement External Functions --------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  This file contains both code to deal with invoking &quot;external&quot; functions, but</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  also contains code that implements &quot;exported&quot; external functions.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  There are currently two mechanisms for handling external functions in the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//  Interpreter.  The first is to implement lle_* wrapper functions that are</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  specific to well-known library functions which manually translate the</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  arguments from GenericValues and make the call.  If such a wrapper does</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  not exist, and libffi is available, then the Interpreter will attempt to</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  invoke the function using libffi, after finding its address.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lib_2ExecutionEngine_2Interpreter_2Interpreter_8h.html">Interpreter.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/config.h&quot;</span>     <span class="comment">// Detect libffi</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DynamicLibrary_8h.html">llvm/Support/DynamicLibrary.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ManagedStatic_8h.html">llvm/Support/ManagedStatic.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Mutex_8h.html">llvm/Support/Mutex.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;csignal&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#ifdef HAVE_FFI_CALL</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#ifdef HAVE_FFI_H</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;ffi.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#define USE_LIBFFI</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#elif HAVE_FFI_FFI_H</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;ffi/ffi.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define USE_LIBFFI</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#acedc6c5a16aa8ddac39477baac1e2408">   49</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;sys::Mutex&gt;</a> <a class="code" href="ExternalFunctions_8cpp.html#acedc6c5a16aa8ddac39477baac1e2408">FunctionsLock</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">   51</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> (*<a class="code" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a>)(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                               <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;);</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a49f5da3fdbd44a088da5bf6c9208245e">   53</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;std::map&lt;const Function *, ExFunc&gt;</a> &gt; <a class="code" href="ExternalFunctions_8cpp.html#a49f5da3fdbd44a088da5bf6c9208245e">ExportedFunctions</a>;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">   54</a></span>&#160;<span class="keyword">static</span> std::map&lt;std::string, ExFunc&gt; <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifdef USE_LIBFFI</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">typedef</span> void (*RawFunc)();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ManagedStatic.html">ManagedStatic&lt;std::map&lt;const Function *, RawFunc&gt;</a> &gt; RawFunctions;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a5f422dfbc738ed5acebbbff28996ba95">   61</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Interpreter.html">Interpreter</a> *<a class="code" href="ExternalFunctions_8cpp.html#a5f422dfbc738ed5acebbbff28996ba95">TheInterpreter</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a62734f5491c71583869b1da8d274dc45">   63</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="ExternalFunctions_8cpp.html#a62734f5491c71583869b1da8d274dc45">getTypeID</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">switch</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>()) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa567ac2c7944f770cfb2c2cffc94b3520">Type::VoidTyID</a>:    <span class="keywordflow">return</span> <span class="charliteral">&#39;V&#39;</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249">Type::IntegerTyID</a>:</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">switch</span> (cast&lt;IntegerType&gt;(Ty)-&gt;getBitWidth()) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">case</span> 1:  <span class="keywordflow">return</span> <span class="charliteral">&#39;o&#39;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">case</span> 8:  <span class="keywordflow">return</span> <span class="charliteral">&#39;B&#39;</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">case</span> 16: <span class="keywordflow">return</span> <span class="charliteral">&#39;S&#39;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">case</span> 32: <span class="keywordflow">return</span> <span class="charliteral">&#39;I&#39;</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">case</span> 64: <span class="keywordflow">return</span> <span class="charliteral">&#39;L&#39;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="charliteral">&#39;N&#39;</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15">Type::FloatTyID</a>:   <span class="keywordflow">return</span> <span class="charliteral">&#39;F&#39;</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5">Type::DoubleTyID</a>:  <span class="keywordflow">return</span> <span class="charliteral">&#39;D&#39;</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">Type::PointerTyID</a>: <span class="keywordflow">return</span> <span class="charliteral">&#39;P&#39;</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa0ec130d9ce9883b3e9c6071ee19a4b16">Type::FunctionTyID</a>:<span class="keywordflow">return</span> <span class="charliteral">&#39;M&#39;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156">Type::StructTyID</a>:  <span class="keywordflow">return</span> <span class="charliteral">&#39;T&#39;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554">Type::ArrayTyID</a>:   <span class="keywordflow">return</span> <span class="charliteral">&#39;A&#39;</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="charliteral">&#39;U&#39;</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// Try to find address of external function given a Function object.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// Please note, that interpreter doesn&#39;t know how to assemble a</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// real call in general case (this is JIT job), that&#39;s why it assumes,</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// that all external functions has the same (and pretty &quot;general&quot;) signature.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">// The typical example of such functions are &quot;lle_X_&quot; ones.</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a290f71a162bc8e8fd0bc72b222c029fc">   90</a></span>&#160;<span class="keyword">static</span> <a class="code" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a> <a class="code" href="ExternalFunctions_8cpp.html#a290f71a162bc8e8fd0bc72b222c029fc">lookupFunction</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Function not found, look it up... start by figuring out what the</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// composite function name should be.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  std::string ExtName = <span class="stringliteral">&quot;lle_&quot;</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT = F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = FT-&gt;<a class="code" href="classllvm_1_1Type.html#ad083201ba4e1f8217bdc1f1ab05bd83d">getNumContainedTypes</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ExtName += <a class="code" href="ExternalFunctions_8cpp.html#a62734f5491c71583869b1da8d274dc45">getTypeID</a>(FT-&gt;<a class="code" href="classllvm_1_1Type.html#a1e2a8dc174c34596e7e8efc7ab7e08a0">getContainedType</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  ExtName += <span class="stringliteral">&quot;_&quot;</span> + F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1SmartScopedLock.html">sys::ScopedLock</a> Writer(*FunctionsLock);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a> FnPtr = <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[ExtName];</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (FnPtr == 0)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    FnPtr = <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_&quot;</span> + F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>()];</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">if</span> (FnPtr == 0)  <span class="comment">// Try calling a generic function... if it exists...</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    FnPtr = (<a class="code" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a>)(<a class="code" href="classintptr__t.html">intptr_t</a>)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">sys::DynamicLibrary::SearchForAddressOfSymbol</a>(<span class="stringliteral">&quot;lle_X_&quot;</span> +</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                    F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>());</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (FnPtr != 0)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    ExportedFunctions-&gt;insert(std::make_pair(F, FnPtr));  <span class="comment">// Cache for later</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">return</span> FnPtr;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#ifdef USE_LIBFFI</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> ffi_type *ffiTypeFor(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">switch</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>()) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa567ac2c7944f770cfb2c2cffc94b3520">Type::VoidTyID</a>: <span class="keywordflow">return</span> &amp;ffi_type_void;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249">Type::IntegerTyID</a>:</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">switch</span> (cast&lt;IntegerType&gt;(Ty)-&gt;getBitWidth()) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">case</span> 8:  <span class="keywordflow">return</span> &amp;ffi_type_sint8;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">case</span> 16: <span class="keywordflow">return</span> &amp;ffi_type_sint16;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">case</span> 32: <span class="keywordflow">return</span> &amp;ffi_type_sint32;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">case</span> 64: <span class="keywordflow">return</span> &amp;ffi_type_sint64;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15">Type::FloatTyID</a>:   <span class="keywordflow">return</span> &amp;ffi_type_float;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5">Type::DoubleTyID</a>:  <span class="keywordflow">return</span> &amp;ffi_type_double;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">Type::PointerTyID</a>: <span class="keywordflow">return</span> &amp;ffi_type_pointer;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// TODO: Support other types such as StructTyID, ArrayTyID, OpaqueTyID, etc.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;Type could not be mapped for use with libffi.&quot;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *ffiValueFor(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <span class="keyword">const</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> &amp;AV,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                         <span class="keywordtype">void</span> *ArgDataPtr) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">switch</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>()) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249">Type::IntegerTyID</a>:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">switch</span> (cast&lt;IntegerType&gt;(Ty)-&gt;getBitWidth()) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">case</span> 8: {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          int8_t *I8Ptr = (int8_t *) ArgDataPtr;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          *I8Ptr = (int8_t) AV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a>.<a class="code" href="classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">case</span> 16: {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          int16_t *I16Ptr = (int16_t *) ArgDataPtr;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          *I16Ptr = (int16_t) AV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a>.<a class="code" href="classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">case</span> 32: {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;          int32_t *I32Ptr = (int32_t *) ArgDataPtr;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          *I32Ptr = (int32_t) AV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a>.<a class="code" href="classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;          <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">case</span> 64: {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          int64_t *I64Ptr = (int64_t *) ArgDataPtr;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          *I64Ptr = (int64_t) AV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a>.<a class="code" href="classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">getZExtValue</a>();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15">Type::FloatTyID</a>: {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordtype">float</span> *FloatPtr = (<span class="keywordtype">float</span> *) ArgDataPtr;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      *FloatPtr = AV.<a class="code" href="structllvm_1_1GenericValue.html#a5160197592bd1fc5c8cc81cd803e0629">FloatVal</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5">Type::DoubleTyID</a>: {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordtype">double</span> *DoublePtr = (<span class="keywordtype">double</span> *) ArgDataPtr;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      *DoublePtr = AV.<a class="code" href="structllvm_1_1GenericValue.html#a9810b36b4c4c17901d491f5aac030623">DoubleVal</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">Type::PointerTyID</a>: {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordtype">void</span> **PtrPtr = (<span class="keywordtype">void</span> **) ArgDataPtr;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      *PtrPtr = <a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(AV);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> ArgDataPtr;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// TODO: Support other types such as StructTyID, ArrayTyID, OpaqueTyID, etc.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;Type value could not be mapped for use with libffi.&quot;</span>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> ffiInvoke(RawFunc Fn, <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                      <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;ArgVals,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD, <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> &amp;Result) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  ffi_cif cif;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FTy = F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumArgs = F-&gt;<a class="code" href="classllvm_1_1Function.html#aef89c402976e04c0abe4b10a963d35e3">arg_size</a>();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// TODO: We don&#39;t have type information about the remaining arguments, because</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// this information is never passed into ExecutionEngine::runFunction().</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (ArgVals.size() &gt; NumArgs &amp;&amp; F-&gt;<a class="code" href="classllvm_1_1Function.html#ae0466120bfdf5b97b25aa06f3015cd51">isVarArg</a>()) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;Calling external var arg function &#39;&quot;</span> + F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                      + <span class="stringliteral">&quot;&#39; is not supported by the Interpreter.&quot;</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordtype">unsigned</span> ArgBytes = 0;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  std::vector&lt;ffi_type*&gt; args(NumArgs);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::const_arg_iterator</a> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> != E; ++<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ArgNo = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getArgNo();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTy = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">getParamType</a>(ArgNo);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    args[ArgNo] = ffiTypeFor(ArgTy);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    ArgBytes += TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(ArgTy);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint8_t, 128&gt;</a> ArgData;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  ArgData.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(ArgBytes);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  uint8_t *ArgDataPtr = ArgData.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>();</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;void*, 16&gt;</a> <a class="code" href="Target_2X86_2README_8txt.html#adf11b1b5bb31ac33cf2d5908c4f29fa2">values</a>(NumArgs);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::const_arg_iterator</a> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> != E; ++<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ArgNo = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getArgNo();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTy = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">getParamType</a>(ArgNo);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    values[ArgNo] = ffiValueFor(ArgTy, ArgVals[ArgNo], ArgDataPtr);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    ArgDataPtr += TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(ArgTy);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = FTy-&gt;<a class="code" href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">getReturnType</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  ffi_type *rtype = ffiTypeFor(RetTy);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (ffi_prep_cif(&amp;cif, FFI_DEFAULT_ABI, NumArgs, rtype, &amp;args[0]) == FFI_OK) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint8_t, 128&gt;</a> <a class="code" href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>() != <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa567ac2c7944f770cfb2c2cffc94b3520">Type::VoidTyID</a>)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      ret.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(RetTy));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    ffi_call(&amp;cif, Fn, ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(), values.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>());</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">switch</span> (RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">getTypeID</a>()) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249">Type::IntegerTyID</a>:</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">switch</span> (cast&lt;IntegerType&gt;(RetTy)-&gt;getBitWidth()) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          <span class="keywordflow">case</span> 8:  Result.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(8 , *(int8_t *) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>()); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          <span class="keywordflow">case</span> 16: Result.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(16, *(int16_t*) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>()); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;          <span class="keywordflow">case</span> 32: Result.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, *(int32_t*) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>()); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;          <span class="keywordflow">case</span> 64: Result.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(64, *(int64_t*) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>()); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15">Type::FloatTyID</a>:   Result.<a class="code" href="structllvm_1_1GenericValue.html#a5160197592bd1fc5c8cc81cd803e0629">FloatVal</a>   = *(<span class="keywordtype">float</span> *) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5">Type::DoubleTyID</a>:  Result.<a class="code" href="structllvm_1_1GenericValue.html#a9810b36b4c4c17901d491f5aac030623">DoubleVal</a>  = *(<span class="keywordtype">double</span>*) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">Type::PointerTyID</a>: Result.<a class="code" href="structllvm_1_1GenericValue.html#a23f8c75218aea0cfcfe0f3e4223d3b02">PointerVal</a> = *(<span class="keywordtype">void</span> **) ret.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#endif // USE_LIBFFI</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classllvm_1_1Interpreter.html#aa9a07a325a74cd2043037529d39ebcc6">  247</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="classllvm_1_1Interpreter.html#aa9a07a325a74cd2043037529d39ebcc6">Interpreter::callExternalFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *F,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                     <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;ArgVals) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  TheInterpreter = <span class="keyword">this</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  FunctionsLock-&gt;<a class="code" href="classllvm_1_1sys_1_1SmartMutex.html#ad699019dbefbda14f0b626fa61fd6c3b">acquire</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// Do a lookup to see if the function is in our cache... this should just be a</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// deferred annotation!</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  std::map&lt;const Function *, ExFunc&gt;::iterator FI = ExportedFunctions-&gt;find(F);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a> Fn = (FI == ExportedFunctions-&gt;end()) ? <a class="code" href="ExternalFunctions_8cpp.html#a290f71a162bc8e8fd0bc72b222c029fc">lookupFunction</a>(F)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                                   : FI-&gt;second) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    FunctionsLock-&gt;<a class="code" href="classllvm_1_1sys_1_1SmartMutex.html#a50bb72f6556d8c5e48d61b2619f4cf08">release</a>();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> Fn(F-&gt;<a class="code" href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">getFunctionType</a>(), ArgVals);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#ifdef USE_LIBFFI</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  std::map&lt;const Function *, RawFunc&gt;::iterator RF = RawFunctions-&gt;find(F);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  RawFunc RawFn;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">if</span> (RF == RawFunctions-&gt;end()) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    RawFn = (RawFunc)(<a class="code" href="classintptr__t.html">intptr_t</a>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">sys::DynamicLibrary::SearchForAddressOfSymbol</a>(F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (!RawFn)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      RawFn = (RawFunc)(<a class="code" href="classintptr__t.html">intptr_t</a>)<a class="code" href="classllvm_1_1ExecutionEngine.html#aa5d335340f7ac093e81c965ba69a7aac">getPointerToGlobalIfAvailable</a>(F);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (RawFn != 0)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      RawFunctions-&gt;insert(std::make_pair(F, RawFn));  <span class="comment">// Cache for later</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    RawFn = RF-&gt;second;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  FunctionsLock-&gt;<a class="code" href="classllvm_1_1sys_1_1SmartMutex.html#a50bb72f6556d8c5e48d61b2619f4cf08">release</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> Result;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">if</span> (RawFn != 0 &amp;&amp; ffiInvoke(RawFn, F, ArgVals, <a class="code" href="classllvm_1_1ExecutionEngine.html#acd4f28beede9d5dbb801c030a70a35ab">getDataLayout</a>(), Result))</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif // USE_LIBFFI</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == <span class="stringliteral">&quot;__main&quot;</span>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Tried to execute an unknown external function: &quot;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      &lt;&lt; *F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>() &lt;&lt; <span class="stringliteral">&quot; __main\n&quot;</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;Tried to execute an unknown external function: &quot;</span> +</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                       F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#ifndef USE_LIBFFI</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Recompiling LLVM with --enable-libffi might help.\n&quot;</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">//  Functions &quot;exported&quot; to the running application...</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// void atexit(Function*)</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a113fb88c25adefeda1e1a388596b0c30">  302</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a113fb88c25adefeda1e1a388596b0c30">lle_X_atexit</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                          <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  assert(Args.size() == 1);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  TheInterpreter-&gt;<a class="code" href="classllvm_1_1Interpreter.html#a14691519e5b8fc508cabd95ec94d98d2">addAtExitHandler</a>((<a class="code" href="classllvm_1_1Function.html">Function</a>*)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[0]));</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = 0;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// void exit(int)</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a252f1ae1f834b54ea53d92e7fb4b0f54">  313</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a252f1ae1f834b54ea53d92e7fb4b0f54">lle_X_exit</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  TheInterpreter-&gt;<a class="code" href="classllvm_1_1Interpreter.html#a27a48d828a2227311270264ae0e78f8c">exitCalled</a>(Args[0]);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">// void abort(void)</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#aa5190c029512359c3cb7c974c921df27">  321</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#aa5190c029512359c3cb7c974c921df27">lle_X_abort</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                         <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">//FIXME: should we report or raise here?</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">//report_fatal_error(&quot;Interpreted program raised SIGABRT&quot;);</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">raise</span> (SIGABRT);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">// int sprintf(char *, const char *, ...) - a very rough implementation to make</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">// output useful.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">  332</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">lle_X_sprintf</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                           <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classllvm_1_1OutputBuffer.html">OutputBuffer</a> = (<span class="keywordtype">char</span> *)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[0]);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *FmtStr = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[1]);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">unsigned</span> ArgNo = 2;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// printf should return # chars printed.  This is completely incorrect, but</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// close enough for now.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">strlen</a>(FmtStr));</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">switch</span> (*FmtStr) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> GV;             <span class="comment">// Null terminator...</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">default</span>:                       <span class="comment">// Normal nonspecial character</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(OutputBuffer++, <span class="stringliteral">&quot;%c&quot;</span>, *FmtStr++);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>: {                   <span class="comment">// Handle escape codes</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(OutputBuffer, <span class="stringliteral">&quot;%c%c&quot;</span>, *FmtStr, *(FmtStr+1));</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      FmtStr += 2; OutputBuffer += 2;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>: {                    <span class="comment">// Handle format specifiers</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordtype">char</span> FmtBuf[100] = <span class="stringliteral">&quot;&quot;</span>, Buffer[1000] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordtype">char</span> *FB = FmtBuf;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      *FB++ = *FmtStr++;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordtype">char</span> Last = *FB++ = *FmtStr++;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordtype">unsigned</span> HowLong = 0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">while</span> (Last != <span class="charliteral">&#39;c&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;d&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;i&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;u&#39;</span> &amp;&amp;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;             Last != <span class="charliteral">&#39;o&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;x&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;X&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;e&#39;</span> &amp;&amp;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;             Last != <span class="charliteral">&#39;E&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;g&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;G&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;f&#39;</span> &amp;&amp;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;             Last != <span class="charliteral">&#39;p&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;s&#39;</span> &amp;&amp; Last != <span class="charliteral">&#39;%&#39;</span>) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (Last == <span class="charliteral">&#39;l&#39;</span> || Last == <span class="charliteral">&#39;L&#39;</span>) HowLong++;  <span class="comment">// Keep track of l&#39;s</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        Last = *FB++ = *FmtStr++;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      *FB = 0;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">switch</span> (Last) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">memcpy</a>(Buffer, <span class="stringliteral">&quot;%&quot;</span>, 2); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf, uint32_t(Args[ArgNo++].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getZExtValue()));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> (HowLong &gt;= 1) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          <span class="keywordflow">if</span> (HowLong == 1 &amp;&amp;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;              TheInterpreter-&gt;<a class="code" href="classllvm_1_1ExecutionEngine.html#acd4f28beede9d5dbb801c030a70a35ab">getDataLayout</a>()-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a9cb015699ac01dfa6ebb3cc4ce5a6a93">getPointerSizeInBits</a>() == 64 &amp;&amp;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;              <span class="keyword">sizeof</span>(long) &lt; <span class="keyword">sizeof</span>(int64_t)) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="comment">// Make sure we use %lld with a 64 bit argument because we might be</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="comment">// compiling LLI on a 32 bit compiler.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordtype">unsigned</span> Size = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">strlen</a>(FmtBuf);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            FmtBuf[Size] = FmtBuf[Size-1];</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            FmtBuf[Size+1] = 0;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            FmtBuf[Size-1] = <span class="charliteral">&#39;l&#39;</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf, Args[ArgNo++].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getZExtValue());</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf,uint32_t(Args[ArgNo++].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getZExtValue()));</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf, Args[ArgNo++].DoubleVal); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf, (<span class="keywordtype">void</span>*)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[ArgNo++])); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">sprintf</a>(Buffer, FmtBuf, (<span class="keywordtype">char</span>*)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[ArgNo++])); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;unknown printf code &#39;&quot;</span> &lt;&lt; *FmtStr &lt;&lt; <span class="stringliteral">&quot;&#39;!&gt;&quot;</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        ArgNo++; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordtype">size_t</span> Len = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">strlen</a>(Buffer);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">memcpy</a>(OutputBuffer, Buffer, Len + 1);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      OutputBuffer += Len;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// int printf(const char *, ...) - a very rough implementation to make output</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// useful.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a26aaf8a0f90debea73d98bbe83656696">  415</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a26aaf8a0f90debea73d98bbe83656696">lle_X_printf</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                          <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordtype">char</span> Buffer[10000];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  std::vector&lt;GenericValue&gt; NewArgs;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  NewArgs.push_back(<a class="code" href="namespacellvm.html#a77905b5e34e8754df1ed4051e0ad9d1a">PTOGV</a>((<span class="keywordtype">void</span>*)&amp;Buffer[0]));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  NewArgs.insert(NewArgs.end(), Args.begin(), Args.end());</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV = <a class="code" href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">lle_X_sprintf</a>(FT, NewArgs);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">outs</a>() &lt;&lt; Buffer;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// int sscanf(const char *format, ...);</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a01d4fa08c448cf946e92117e4b529695">  428</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a01d4fa08c448cf946e92117e4b529695">lle_X_sscanf</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                          <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;args) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  assert(args.size() &lt; 10 &amp;&amp; <span class="stringliteral">&quot;Only handle up to 10 args to sscanf right now!&quot;</span>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordtype">char</span> *Args[10];</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; args.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    Args[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<span class="keywordtype">char</span>*)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(args[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa76aebf5dd8b6aaa0fe9426ca1761b0ca">sscanf</a>(Args[0], Args[1], Args[2], Args[3], Args[4],</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    Args[5], Args[6], Args[7], Args[8], Args[9]));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">// int scanf(const char *format, ...);</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a41aca42649628091ca41dfe6c54434db">  444</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a41aca42649628091ca41dfe6c54434db">lle_X_scanf</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                         <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;args) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  assert(args.size() &lt; 10 &amp;&amp; <span class="stringliteral">&quot;Only handle up to 10 args to scanf right now!&quot;</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordtype">char</span> *Args[10];</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; args.size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    Args[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<span class="keywordtype">char</span>*)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(args[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa892e45c35b79a3baf44597271c277151">scanf</a>( Args[0], Args[1], Args[2], Args[3], Args[4],</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    Args[5], Args[6], Args[7], Args[8], Args[9]));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// int fprintf(FILE *, const char *, ...) - a very rough implementation to make</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">// output useful.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#adae6786de87c20e153376d8cf21dce45">  461</a></span>&#160;<a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#adae6786de87c20e153376d8cf21dce45">lle_X_fprintf</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                           <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  assert(Args.size() &gt;= 2);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordtype">char</span> Buffer[10000];</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  std::vector&lt;GenericValue&gt; NewArgs;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  NewArgs.push_back(<a class="code" href="namespacellvm.html#a77905b5e34e8754df1ed4051e0ad9d1a">PTOGV</a>(Buffer));</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  NewArgs.insert(NewArgs.end(), Args.begin()+1, Args.end());</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV = <a class="code" href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">lle_X_sprintf</a>(FT, NewArgs);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4a8c8d091f5ba42ce62053cb01c157d5">fputs</a>(Buffer, (FILE *) <a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[0]));</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a0408277fa2252c50ac975da25427a8ae">  474</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a0408277fa2252c50ac975da25427a8ae">lle_X_memset</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                 <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="Target_2SystemZ_2README_8txt.html#a5f380c569497eab93980e5994c60df31">val</a> = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)Args[1].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getSExtValue();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordtype">size_t</span> len = (size_t)Args[2].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getZExtValue();</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">memset</a>((<span class="keywordtype">void</span> *)<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[0]), val, len);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// llvm.memset.* returns void, lle_X_* returns GenericValue,</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// so here we return GenericValue with IntVal set to zero</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = 0;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="ExternalFunctions_8cpp.html#a9fa66e9a108b18bab4438839cad15488">  486</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> <a class="code" href="ExternalFunctions_8cpp.html#a9fa66e9a108b18bab4438839cad15488">lle_X_memcpy</a>(<a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                 <span class="keyword">const</span> std::vector&lt;GenericValue&gt; &amp;Args) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">memcpy</a>(<a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[0]), <a class="code" href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">GVTOP</a>(Args[1]),</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         (<span class="keywordtype">size_t</span>)(Args[2].<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">IntVal</a>.getLimitedValue()));</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// llvm.memcpy* returns void, lle_X_* returns GenericValue,</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// so here we return GenericValue with IntVal set to zero</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="structllvm_1_1GenericValue.html">GenericValue</a> GV;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  GV.<a class="code" href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">IntVal</a> = 0;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordtype">void</span> Interpreter::initializeExternalFunctions() {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classllvm_1_1sys_1_1SmartScopedLock.html">sys::ScopedLock</a> Writer(*FunctionsLock);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_atexit&quot;</span>]       = <a class="code" href="ExternalFunctions_8cpp.html#a113fb88c25adefeda1e1a388596b0c30">lle_X_atexit</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_exit&quot;</span>]         = <a class="code" href="ExternalFunctions_8cpp.html#a252f1ae1f834b54ea53d92e7fb4b0f54">lle_X_exit</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_abort&quot;</span>]        = <a class="code" href="ExternalFunctions_8cpp.html#aa5190c029512359c3cb7c974c921df27">lle_X_abort</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_printf&quot;</span>]       = <a class="code" href="ExternalFunctions_8cpp.html#a26aaf8a0f90debea73d98bbe83656696">lle_X_printf</a>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_sprintf&quot;</span>]      = <a class="code" href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">lle_X_sprintf</a>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_sscanf&quot;</span>]       = <a class="code" href="ExternalFunctions_8cpp.html#a01d4fa08c448cf946e92117e4b529695">lle_X_sscanf</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_scanf&quot;</span>]        = <a class="code" href="ExternalFunctions_8cpp.html#a41aca42649628091ca41dfe6c54434db">lle_X_scanf</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_fprintf&quot;</span>]      = <a class="code" href="ExternalFunctions_8cpp.html#adae6786de87c20e153376d8cf21dce45">lle_X_fprintf</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_memset&quot;</span>]       = <a class="code" href="ExternalFunctions_8cpp.html#a0408277fa2252c50ac975da25427a8ae">lle_X_memset</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a>[<span class="stringliteral">&quot;lle_X_memcpy&quot;</span>]       = <a class="code" href="ExternalFunctions_8cpp.html#a9fa66e9a108b18bab4438839cad15488">lle_X_memcpy</a>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div><div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="structllvm_1_1GenericValue_html_a23f8c75218aea0cfcfe0f3e4223d3b02"><div class="ttname"><a href="structllvm_1_1GenericValue.html#a23f8c75218aea0cfcfe0f3e4223d3b02">llvm::GenericValue::PointerVal</a></div><div class="ttdeci">PointerTy PointerVal</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00034">GenericValue.h:34</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa76aebf5dd8b6aaa0fe9426ca1761b0ca"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa76aebf5dd8b6aaa0fe9426ca1761b0ca">llvm::LibFunc::sscanf</a></div><div class="ttdoc">int sscanf(const char *s, const char *format, ... ); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00519">TargetLibraryInfo.h:519</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a1bad47210ee634cb8cf2d28a402fc576"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a1bad47210ee634cb8cf2d28a402fc576">FuncNames</a></div><div class="ttdeci">static std::map&lt; std::string, ExFunc &gt; FuncNames</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00054">ExternalFunctions.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1DynamicLibrary_html_ae003d16a33e81b88943d3e3aa179fcc4"><div class="ttname"><a href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">llvm::sys::DynamicLibrary::SearchForAddressOfSymbol</a></div><div class="ttdeci">static void * SearchForAddressOfSymbol(const char *symbolName)</div><div class="ttdoc">Search through libraries for address of a symbol. </div><div class="ttdef"><b>Definition:</b> <a href="DynamicLibrary_8cpp_source.html#l00111">DynamicLibrary.cpp:111</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa803e1ed0f626405d7808490a6abef2d7">llvm::LibFunc::sprintf</a></div><div class="ttdoc">int sprintf(char *str, const char *format, ...); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00511">TargetLibraryInfo.h:511</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00664">raw_ostream.cpp:664</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a7dc983ebf0eb2d255fa90a67063c72e2"><div class="ttname"><a href="classllvm_1_1APInt.html#a7dc983ebf0eb2d255fa90a67063c72e2">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Get zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01306">APInt.h:1306</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a5f422dfbc738ed5acebbbff28996ba95"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a5f422dfbc738ed5acebbbff28996ba95">TheInterpreter</a></div><div class="ttdeci">static Interpreter * TheInterpreter</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00061">ExternalFunctions.cpp:61</a></div></div>
<div class="ttc" id="classllvm_1_1Interpreter_html_aa9a07a325a74cd2043037529d39ebcc6"><div class="ttname"><a href="classllvm_1_1Interpreter.html#aa9a07a325a74cd2043037529d39ebcc6">llvm::Interpreter::callExternalFunction</a></div><div class="ttdeci">GenericValue callExternalFunction(Function *F, const std::vector&lt; GenericValue &gt; &amp;ArgVals)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00247">ExternalFunctions.cpp:247</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6a5dd38c5c337ac6ce6d5847b1ca7f15">llvm::Type::FloatTyID</a></div><div class="ttdoc">2: 32-bit floating point type </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00057">Type.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1SmartMutex_html_ad699019dbefbda14f0b626fa61fd6c3b"><div class="ttname"><a href="classllvm_1_1sys_1_1SmartMutex.html#ad699019dbefbda14f0b626fa61fd6c3b">llvm::sys::SmartMutex::acquire</a></div><div class="ttdeci">bool acquire()</div><div class="ttdef"><b>Definition:</b> <a href="Mutex_8h_source.html#l00096">Mutex.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1SmartScopedLock_html"><div class="ttname"><a href="classllvm_1_1sys_1_1SmartScopedLock.html">llvm::sys::SmartScopedLock</a></div><div class="ttdef"><b>Definition:</b> <a href="Mutex_8h_source.html#l00138">Mutex.h:138</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_ab02cb6f4884b5c788efb97b6741dccaf"><div class="ttname"><a href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">llvm::StringRef::str</a></div><div class="ttdeci">std::string str() const </div><div class="ttdoc">str - Get the contents as an std::string. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00181">StringRef.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00418">Function.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156">llvm::Type::StructTyID</a></div><div class="ttdoc">12: Structures </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00070">Type.h:70</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a26aaf8a0f90debea73d98bbe83656696"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a26aaf8a0f90debea73d98bbe83656696">lle_X_printf</a></div><div class="ttdeci">static GenericValue lle_X_printf(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00415">ExternalFunctions.cpp:415</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">llvm::Type::PointerTyID</a></div><div class="ttdoc">14: Pointers </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00072">Type.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa0ec130d9ce9883b3e9c6071ee19a4b16"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa0ec130d9ce9883b3e9c6071ee19a4b16">llvm::Type::FunctionTyID</a></div><div class="ttdoc">11: Functions </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00069">Type.h:69</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">llvm::Intrinsic::memcpy</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01260">Intrinsics.h:1260</a></div></div>
<div class="ttc" id="namespacellvm_html_a1f6978055dbb761b380de39070e34bd3"><div class="ttname"><a href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(const char *reason, bool gen_crash_diag=true)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8cpp_source.html#l00053">ErrorHandling.cpp:53</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a290f71a162bc8e8fd0bc72b222c029fc"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a290f71a162bc8e8fd0bc72b222c029fc">lookupFunction</a></div><div class="ttdeci">static ExFunc lookupFunction(const Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00090">ExternalFunctions.cpp:90</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_aef89c402976e04c0abe4b10a963d35e3"><div class="ttname"><a href="classllvm_1_1Function.html#aef89c402976e04c0abe4b10a963d35e3">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00248">Function.cpp:248</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00549">Target/README.txt:549</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a01d4fa08c448cf946e92117e4b529695"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a01d4fa08c448cf946e92117e4b529695">lle_X_sscanf</a></div><div class="ttdeci">static GenericValue lle_X_sscanf(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00428">ExternalFunctions.cpp:428</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="DynamicLibrary_8h_html"><div class="ttname"><a href="DynamicLibrary_8h.html">DynamicLibrary.h</a></div></div>
<div class="ttc" id="classllvm_1_1OutputBuffer_html"><div class="ttname"><a href="classllvm_1_1OutputBuffer.html">llvm::OutputBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="OutputBuffer_8h_source.html#l00023">OutputBuffer.h:23</a></div></div>
<div class="ttc" id="structllvm_1_1GenericValue_html"><div class="ttname"><a href="structllvm_1_1GenericValue.html">llvm::GenericValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00026">GenericValue.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1Interpreter_html"><div class="ttname"><a href="classllvm_1_1Interpreter.html">llvm::Interpreter</a></div><div class="ttdef"><b>Definition:</b> <a href="lib_2ExecutionEngine_2Interpreter_2Interpreter_8h_source.html#l00083">lib/ExecutionEngine/Interpreter/Interpreter.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">llvm::Intrinsic::memset</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01262">Intrinsics.h:1262</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8e08dfcb75ff1b4b38c352bc0d9db223"><div class="ttname"><a href="classllvm_1_1Type.html#a8e08dfcb75ff1b4b38c352bc0d9db223">llvm::Type::getTypeID</a></div><div class="ttdeci">TypeID getTypeID() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00137">Type.h:137</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a831ac7d3dcbbb172ee74a1023b08a265"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a831ac7d3dcbbb172ee74a1023b08a265">ExFunc</a></div><div class="ttdeci">GenericValue(* ExFunc)(FunctionType *, const std::vector&lt; GenericValue &gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00051">ExternalFunctions.cpp:51</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a0745eac6295f1d69a7c42e6686548459"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a0745eac6295f1d69a7c42e6686548459">lle_X_sprintf</a></div><div class="ttdeci">static GenericValue lle_X_sprintf(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00332">ExternalFunctions.cpp:332</a></div></div>
<div class="ttc" id="structllvm_1_1GenericValue_html_a9810b36b4c4c17901d491f5aac030623"><div class="ttname"><a href="structllvm_1_1GenericValue.html#a9810b36b4c4c17901d491f5aac030623">llvm::GenericValue::DoubleVal</a></div><div class="ttdeci">double DoubleVal</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00032">GenericValue.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa8e724092b0496fe3d16e29863b46c249">llvm::Type::IntegerTyID</a></div><div class="ttdoc">10: Arbitrary bit width integers </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00068">Type.h:68</a></div></div>
<div class="ttc" id="namespacellvm_html_a9d0b331739faa402bc2644494b5310c3"><div class="ttname"><a href="namespacellvm.html#a9d0b331739faa402bc2644494b5310c3">llvm::outs</a></div><div class="ttdeci">raw_ostream &amp; outs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00654">raw_ostream.cpp:654</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa567ac2c7944f770cfb2c2cffc94b3520"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa567ac2c7944f770cfb2c2cffc94b3520">llvm::Type::VoidTyID</a></div><div class="ttdoc">0: type with no size </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00055">Type.h:55</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_acedc6c5a16aa8ddac39477baac1e2408"><div class="ttname"><a href="ExternalFunctions_8cpp.html#acedc6c5a16aa8ddac39477baac1e2408">FunctionsLock</a></div><div class="ttdeci">static ManagedStatic&lt; sys::Mutex &gt; FunctionsLock</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00049">ExternalFunctions.cpp:49</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a176b84b12bc19326444728c6404dd068"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a176b84b12bc19326444728c6404dd068">llvm::FunctionType::getParamType</a></div><div class="ttdeci">Type * getParamType(unsigned i) const </div><div class="ttdoc">Parameter type accessors. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00128">DerivedTypes.h:128</a></div></div>
<div class="ttc" id="ManagedStatic_8h_html"><div class="ttname"><a href="ManagedStatic_8h.html">ManagedStatic.h</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a8ef54f27fddd11cc461b2b231fc2d23c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a8ef54f27fddd11cc461b2b231fc2d23c">ret</a></div><div class="ttdeci">to esp esp setne al movzbw ax esp setg cl movzbw cx cmove cx cl jne LBB1_2 esp ret(also really horrible code on ppc).This is due to the expand code for 64-bit compares.GCC produces multiple branches</div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_aa5190c029512359c3cb7c974c921df27"><div class="ttname"><a href="ExternalFunctions_8cpp.html#aa5190c029512359c3cb7c974c921df27">lle_X_abort</a></div><div class="ttdeci">static GenericValue lle_X_abort(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00321">ExternalFunctions.cpp:321</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a49f5da3fdbd44a088da5bf6c9208245e"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a49f5da3fdbd44a088da5bf6c9208245e">ExportedFunctions</a></div><div class="ttdeci">static ManagedStatic&lt; std::map&lt; const Function *, ExFunc &gt; &gt; ExportedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00053">ExternalFunctions.cpp:53</a></div></div>
<div class="ttc" id="structllvm_1_1GenericValue_html_a5160197592bd1fc5c8cc81cd803e0629"><div class="ttname"><a href="structllvm_1_1GenericValue.html#a5160197592bd1fc5c8cc81cd803e0629">llvm::GenericValue::FloatVal</a></div><div class="ttdeci">float FloatVal</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00033">GenericValue.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a1e2a8dc174c34596e7e8efc7ab7e08a0"><div class="ttname"><a href="classllvm_1_1Type.html#a1e2a8dc174c34596e7e8efc7ab7e08a0">llvm::Type::getContainedType</a></div><div class="ttdeci">Type * getContainedType(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00339">Type.h:339</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3a7597ca475c0fcf10856ef36351d1ac">llvm::tgtok::IntVal</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00054">TGLexer.h:54</a></div></div>
<div class="ttc" id="classllvm_1_1Interpreter_html_a27a48d828a2227311270264ae0e78f8c"><div class="ttname"><a href="classllvm_1_1Interpreter.html#a27a48d828a2227311270264ae0e78f8c">llvm::Interpreter::exitCalled</a></div><div class="ttdeci">void exitCalled(GenericValue GV)</div><div class="ttdef"><b>Definition:</b> <a href="Execution_8cpp_source.html#l00818">Execution.cpp:818</a></div></div>
<div class="ttc" id="Target_2SystemZ_2README_8txt_html_a5f380c569497eab93980e5994c60df31"><div class="ttname"><a href="Target_2SystemZ_2README_8txt.html#a5f380c569497eab93980e5994c60df31">val</a></div><div class="ttdeci">it doesn t get to see the original constraint This means that it must conservatively treat all asm constraints as the most restricted R If an asm ties an i32 r result to an i64 the input will be treated as an leaving the upper bits uninitialised For i64 store i32 val</div><div class="ttdef"><b>Definition:</b> <a href="Target_2SystemZ_2README_8txt_source.html#l00022">Target/SystemZ/README.txt:22</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00410">Function.h:410</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a252f1ae1f834b54ea53d92e7fb4b0f54"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a252f1ae1f834b54ea53d92e7fb4b0f54">lle_X_exit</a></div><div class="ttdeci">static GenericValue lle_X_exit(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00313">ExternalFunctions.cpp:313</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a113fb88c25adefeda1e1a388596b0c30"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a113fb88c25adefeda1e1a388596b0c30">lle_X_atexit</a></div><div class="ttdeci">static GenericValue lle_X_atexit(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00302">ExternalFunctions.cpp:302</a></div></div>
<div class="ttc" id="classllvm_1_1ExecutionEngine_html_aa5d335340f7ac093e81c965ba69a7aac"><div class="ttname"><a href="classllvm_1_1ExecutionEngine.html#aa5d335340f7ac093e81c965ba69a7aac">llvm::ExecutionEngine::getPointerToGlobalIfAvailable</a></div><div class="ttdeci">void * getPointerToGlobalIfAvailable(const GlobalValue *GV)</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_8cpp_source.html#l00216">ExecutionEngine.cpp:216</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad083201ba4e1f8217bdc1f1ab05bd83d"><div class="ttname"><a href="classllvm_1_1Type.html#ad083201ba4e1f8217bdc1f1ab05bd83d">llvm::Type::getNumContainedTypes</a></div><div class="ttdeci">unsigned getNumContainedTypes() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00346">Type.h:346</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a0408277fa2252c50ac975da25427a8ae"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a0408277fa2252c50ac975da25427a8ae">lle_X_memset</a></div><div class="ttdeci">static GenericValue lle_X_memset(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00474">ExternalFunctions.cpp:474</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa4a8c8d091f5ba42ce62053cb01c157d5"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa4a8c8d091f5ba42ce62053cb01c157d5">llvm::LibFunc::fputs</a></div><div class="ttdoc">int fputs(const char *s, FILE *stream); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00269">TargetLibraryInfo.h:269</a></div></div>
<div class="ttc" id="namespacellvm_html_a7f09b8c588531603bac440b5fecc85bc"><div class="ttname"><a href="namespacellvm.html#a7f09b8c588531603bac440b5fecc85bc">llvm::GVTOP</a></div><div class="ttdeci">void * GVTOP(const GenericValue &amp;GV)</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00050">GenericValue.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554">llvm::Type::ArrayTyID</a></div><div class="ttdoc">13: Arrays </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00071">Type.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_adf11b1b5bb31ac33cf2d5908c4f29fa2"><div class="ttname"><a href="Target_2X86_2README_8txt.html#adf11b1b5bb31ac33cf2d5908c4f29fa2">values</a></div><div class="ttdeci">Compiles to this loop with GCC eax eax addl incl ecx ecx jle L5 llvm gcc compiles it to the much eax ebx movl ebp imull ebp movl eax mull ecx addl edx ebx imull ebx addl ebx ebx eax addl incl edi edi jne LBB1_1 The issue is that we hoist the cast of scaler to long long outside of the the value comes into the loop as two values</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01481">Target/X86/README.txt:1481</a></div></div>
<div class="ttc" id="Mutex_8h_html"><div class="ttname"><a href="Mutex_8h.html">Mutex.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa0b976adf6aef24ee68598686784f3d66">llvm::LibFunc::strlen</a></div><div class="ttdoc">size_t strlen(const char *s); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00549">TargetLibraryInfo.h:549</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a41aca42649628091ca41dfe6c54434db"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a41aca42649628091ca41dfe6c54434db">lle_X_scanf</a></div><div class="ttdeci">static GenericValue lle_X_scanf(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00444">ExternalFunctions.cpp:444</a></div></div>
<div class="ttc" id="namespacellvm_html_a77905b5e34e8754df1ed4051e0ad9d1a"><div class="ttname"><a href="namespacellvm.html#a77905b5e34e8754df1ed4051e0ad9d1a">llvm::PTOGV</a></div><div class="ttdeci">GenericValue PTOGV(void *P)</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00049">GenericValue.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a62734f5491c71583869b1da8d274dc45"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a62734f5491c71583869b1da8d274dc45">getTypeID</a></div><div class="ttdeci">static char getTypeID(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00063">ExternalFunctions.cpp:63</a></div></div>
<div class="ttc" id="lib_2ExecutionEngine_2Interpreter_2Interpreter_8h_html"><div class="ttname"><a href="lib_2ExecutionEngine_2Interpreter_2Interpreter_8h.html">Interpreter.h</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_a9fa66e9a108b18bab4438839cad15488"><div class="ttname"><a href="ExternalFunctions_8cpp.html#a9fa66e9a108b18bab4438839cad15488">lle_X_memcpy</a></div><div class="ttdeci">static GenericValue lle_X_memcpy(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00486">ExternalFunctions.cpp:486</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">getType - Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00107">GlobalValue.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a7b68be12c974b6b70bc86062f221a344"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">llvm::SmallVectorTemplateCommon&lt; T &gt;::data</a></div><div class="ttdeci">pointer data()</div><div class="ttdoc">data - Return a pointer to the vector&amp;#39;s buffer, even if empty(). </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00135">SmallVector.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1ExecutionEngine_html_acd4f28beede9d5dbb801c030a70a35ab"><div class="ttname"><a href="classllvm_1_1ExecutionEngine.html#acd4f28beede9d5dbb801c030a70a35ab">llvm::ExecutionEngine::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00209">ExecutionEngine/ExecutionEngine.h:209</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_adf66d58e85fb4e46e9c1ae55186a6930"><div class="ttname"><a href="classllvm_1_1Function.html#adf66d58e85fb4e46e9c1ae55186a6930">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00171">Function.cpp:171</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9cb015699ac01dfa6ebb3cc4ce5a6a93"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a9cb015699ac01dfa6ebb3cc4ce5a6a93">llvm::DataLayout::getPointerSizeInBits</a></div><div class="ttdeci">unsigned getPointerSizeInBits(unsigned AS=0) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00271">DataLayout.h:271</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="ExternalFunctions_8cpp_html_adae6786de87c20e153376d8cf21dce45"><div class="ttname"><a href="ExternalFunctions_8cpp.html#adae6786de87c20e153376d8cf21dce45">lle_X_fprintf</a></div><div class="ttdeci">static GenericValue lle_X_fprintf(FunctionType *FT, const std::vector&lt; GenericValue &gt; &amp;Args)</div><div class="ttdef"><b>Definition:</b> <a href="ExternalFunctions_8cpp_source.html#l00461">ExternalFunctions.cpp:461</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00311">DataLayout.h:311</a></div></div>
<div class="ttc" id="structllvm_1_1GenericValue_html_adc1cecb2e860959165c8ad83d0d26023"><div class="ttname"><a href="structllvm_1_1GenericValue.html#adc1cecb2e860959165c8ad83d0d26023">llvm::GenericValue::IntVal</a></div><div class="ttdeci">APInt IntVal</div><div class="ttdef"><b>Definition:</b> <a href="GenericValue_8h_source.html#l00038">GenericValue.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaabc549945f13bb5d5f5b80c550d2b92f5">llvm::Type::DoubleTyID</a></div><div class="ttdoc">3: 64-bit floating point type </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00058">Type.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a9eda832d6e80bc19b98f22f4ec714e3f"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a9eda832d6e80bc19b98f22f4ec714e3f">llvm::FunctionType::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00121">DerivedTypes.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1Interpreter_html_a14691519e5b8fc508cabd95ec94d98d2"><div class="ttname"><a href="classllvm_1_1Interpreter.html#a14691519e5b8fc508cabd95ec94d98d2">llvm::Interpreter::addAtExitHandler</a></div><div class="ttdeci">void addAtExitHandler(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="lib_2ExecutionEngine_2Interpreter_2Interpreter_8h_source.html#l00197">lib/ExecutionEngine/Interpreter/Interpreter.h:197</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa892e45c35b79a3baf44597271c277151"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa892e45c35b79a3baf44597271c277151">llvm::LibFunc::scanf</a></div><div class="ttdoc">int scanf(const char *restrict format, ... ); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00486">TargetLibraryInfo.h:486</a></div></div>
<div class="ttc" id="classllvm_1_1ManagedStatic_html"><div class="ttname"><a href="classllvm_1_1ManagedStatic.html">llvm::ManagedStatic</a></div><div class="ttdef"><b>Definition:</b> <a href="ManagedStatic_8h_source.html#l00061">ManagedStatic.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae0466120bfdf5b97b25aa06f3015cd51"><div class="ttname"><a href="classllvm_1_1Function.html#ae0466120bfdf5b97b25aa06f3015cd51">llvm::Function::isVarArg</a></div><div class="ttdeci">bool isVarArg() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00175">Function.cpp:175</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1SmartMutex_html_a50bb72f6556d8c5e48d61b2619f4cf08"><div class="ttname"><a href="classllvm_1_1sys_1_1SmartMutex.html#a50bb72f6556d8c5e48d61b2619f4cf08">llvm::sys::SmartMutex::release</a></div><div class="ttdeci">bool release()</div><div class="ttdef"><b>Definition:</b> <a href="Mutex_8h_source.html#l00109">Mutex.h:109</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:39 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
