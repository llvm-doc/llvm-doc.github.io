<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: BBVectorize.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('BBVectorize_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BBVectorize.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BBVectorize_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- BBVectorize.cpp - A Basic-Block Vectorizer -------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements a basic-block vectorization pass. The algorithm was</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// inspired by that used by the Vienna MAP Vectorizor by Franchetti and Kral,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// et al. It works by looking for chains of pairable operations and then</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// pairing them.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="BBVectorize_8cpp.html#aa52719da2c47f9787dfa1ea214ecc530">   17</a></span>&#160;<span class="preprocessor">#define BBV_NAME &quot;bb-vectorize&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="BBVectorize_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   18</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE BBV_NAME</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Vectorize_8h.html">llvm/Transforms/Vectorize.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasSetTracker_8h.html">llvm/Analysis/AliasSetTracker.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpressions_8h.html">llvm/Analysis/ScalarEvolutionExpressions.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/Support/ValueHandle.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="BBVectorize_8cpp.html#afa2cc746a4280971b99d0f1d79026a55">IgnoreTargetInfo</a>(<span class="stringliteral">&quot;bb-vectorize-ignore-target-info&quot;</span>,  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Ignore target information&quot;</span>));</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a036d89ec4e4218a55b56d32daa8e63b8">ReqChainDepth</a>(<span class="stringliteral">&quot;bb-vectorize-req-chain-depth&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(6), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The required chain depth for vectorization&quot;</span>));</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a6ab503e20bc728e8ac9a551e0c230ad4">UseChainDepthWithTI</a>(<span class="stringliteral">&quot;bb-vectorize-use-chain-depth&quot;</span>,  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use the chain depth requirement with&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                       <span class="stringliteral">&quot; target information&quot;</span>));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a9844cdb55649c82783d33b057823a072">SearchLimit</a>(<span class="stringliteral">&quot;bb-vectorize-search-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(400), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum search distance for instruction pairs&quot;</span>));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="BBVectorize_8cpp.html#ae00985eff222858eefa005fdf82c665a">SplatBreaksChain</a>(<span class="stringliteral">&quot;bb-vectorize-splat-breaks-chain&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Replicating one element to a pair breaks the chain&quot;</span>));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<a class="code" href="BBVectorize_8cpp.html#afeb221f3bf6e6b8d9d77094e4f482a7a">VectorBits</a>(<span class="stringliteral">&quot;bb-vectorize-vector-bits&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(128), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The size of the native vector registers&quot;</span>));</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<a class="code" href="BBVectorize_8cpp.html#abd955daca4730ede63e427c8727d9270">MaxIter</a>(<span class="stringliteral">&quot;bb-vectorize-max-iter&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of pairing iterations&quot;</span>));</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a8c34815e96f7b2cf2da1b0510c5990c9">Pow2LenOnly</a>(<span class="stringliteral">&quot;bb-vectorize-pow2-len-only&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to form non-2^n-length vectors&quot;</span>));</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a89aafcd79ab2e3cb83eb7c08546e11a0">MaxInsts</a>(<span class="stringliteral">&quot;bb-vectorize-max-instr-per-group&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(500), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of pairable instructions per group&quot;</span>));</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="BBVectorize_8cpp.html#aaeced4658cbba792d1b2eb4832b2d1bd">MaxPairs</a>(<span class="stringliteral">&quot;bb-vectorize-max-pairs-per-group&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3000), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of candidate instruction pairs per group&quot;</span>));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a614dabe9c2b8c31fda983323e4fd63e9">MaxCandPairsForCycleCheck</a>(<span class="stringliteral">&quot;bb-vectorize-max-cycle-check-pairs&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(200),</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of candidate pairs with which to use&quot;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                       <span class="stringliteral">&quot; a full cycle check&quot;</span>));</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a2578829cdf7e6ba596ebd4c35d37ea60">NoBools</a>(<span class="stringliteral">&quot;bb-vectorize-no-bools&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize boolean (i1) values&quot;</span>));</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<a class="code" href="BBVectorize_8cpp.html#af18c5e610aa6efc696cca93810614a19">NoInts</a>(<span class="stringliteral">&quot;bb-vectorize-no-ints&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize integer values&quot;</span>));</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a83a3e8bf847bd5568f9cb1512680e54d">NoFloats</a>(<span class="stringliteral">&quot;bb-vectorize-no-floats&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize floating-point values&quot;</span>));</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// FIXME: This should default to false once pointer vector support works.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<a class="code" href="BBVectorize_8cpp.html#ab875e8da760575096bee3d5bf6531ec6">NoPointers</a>(<span class="stringliteral">&quot;bb-vectorize-no-pointers&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="comment">/*false*/</span> <span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize pointer values&quot;</span>));</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a76c4d0e09aba357eb066933a76e599fb">NoCasts</a>(<span class="stringliteral">&quot;bb-vectorize-no-casts&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize casting (conversion) operations&quot;</span>));</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a358cbe4b411576a3956acc1c154ed43d">NoMath</a>(<span class="stringliteral">&quot;bb-vectorize-no-math&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize floating-point math intrinsics&quot;</span>));</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<a class="code" href="BBVectorize_8cpp.html#ab691a87601e5386d7c7a7adcc88cb8e2">NoFMA</a>(<span class="stringliteral">&quot;bb-vectorize-no-fma&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize the fused-multiply-add intrinsic&quot;</span>));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<a class="code" href="BBVectorize_8cpp.html#abe7a6d575ed81273f1caa5808ef28f0c">NoSelect</a>(<span class="stringliteral">&quot;bb-vectorize-no-select&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize select instructions&quot;</span>));</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<a class="code" href="BBVectorize_8cpp.html#ac522e940bd9406fe5e27d1e190d57ee3">NoCmp</a>(<span class="stringliteral">&quot;bb-vectorize-no-cmp&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize comparison instructions&quot;</span>));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a7a1cc09fd51854941c0ca7d844c2986a">NoGEP</a>(<span class="stringliteral">&quot;bb-vectorize-no-gep&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize getelementptr instructions&quot;</span>));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a51d696a576ff06673a051af24f66341d">NoMemOps</a>(<span class="stringliteral">&quot;bb-vectorize-no-mem-ops&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t try to vectorize loads and stores&quot;</span>));</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<a class="code" href="BBVectorize_8cpp.html#aa7a4baf5f2b33e0549e89cfffd654169">AlignedOnly</a>(<span class="stringliteral">&quot;bb-vectorize-aligned-only&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Only generate aligned loads and stores&quot;</span>));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a99d6d6ffebfc096b8fc7ee27ccc70b77">NoMemOpBoost</a>(<span class="stringliteral">&quot;bb-vectorize-no-mem-op-boost&quot;</span>,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t boost the chain-depth contribution of loads and stores&quot;</span>));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a354df7469b4617dbcbbdcf8b8c0cfdf1">FastDep</a>(<span class="stringliteral">&quot;bb-vectorize-fast-dep&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use a fast instruction dependency analysis&quot;</span>));</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a43097a8aa365f06fb95e209a1a30d190">DebugInstructionExamination</a>(<span class="stringliteral">&quot;bb-vectorize-debug-instruction-examination&quot;</span>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When debugging is enabled, output information on the&quot;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;           <span class="stringliteral">&quot; instruction-examination process&quot;</span>));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a7dcd5b03b84781aeb7612428f8c11ba0">DebugCandidateSelection</a>(<span class="stringliteral">&quot;bb-vectorize-debug-candidate-selection&quot;</span>,</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When debugging is enabled, output information on the&quot;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;           <span class="stringliteral">&quot; candidate-selection process&quot;</span>));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>(<span class="stringliteral">&quot;bb-vectorize-debug-pair-selection&quot;</span>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When debugging is enabled, output information on the&quot;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;           <span class="stringliteral">&quot; pair-selection process&quot;</span>));</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<a class="code" href="BBVectorize_8cpp.html#afdd20f5a624c6c8f4b9177e1575c6a0c">DebugCycleCheck</a>(<span class="stringliteral">&quot;bb-vectorize-debug-cycle-check&quot;</span>,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When debugging is enabled, output information on the&quot;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;           <span class="stringliteral">&quot; cycle-checking process&quot;</span>));</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<a class="code" href="BBVectorize_8cpp.html#aa5c9f87337b0c6849d9151b7615b863f">PrintAfterEveryPair</a>(<span class="stringliteral">&quot;bb-vectorize-debug-print-after-every-pair&quot;</span>,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When debugging is enabled, dump the basic block after&quot;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;           <span class="stringliteral">&quot; every pair is fused&quot;</span>));</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<a class="code" href="BBVectorize_8cpp.html#a054edfc85f21f5fed2951c2ffa480ad8">STATISTIC</a>(NumFusedOps, <span class="stringliteral">&quot;Number of operations fused by bb-vectorize&quot;</span>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keyword">struct </span>BBVectorize : <span class="keyword">public</span> <a class="code" href="classllvm_1_1BasicBlockPass.html">BasicBlockPass</a> {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a> Config;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    BBVectorize(<span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a>())</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      : <a class="code" href="classllvm_1_1BasicBlockPass.html">BasicBlockPass</a>(ID), Config(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="namespacellvm.html#a1de4dc07c13ea6790151c7f0dd4b638c">initializeBBVectorizePass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    BBVectorize(<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      : <a class="code" href="classllvm_1_1BasicBlockPass.html">BasicBlockPass</a>(ID), Config(C) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      AA = &amp;P-&gt;<a class="code" href="classllvm_1_1Pass.html#ab78af013d3a11515403da8517f8f3d4a">getAnalysis</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      DT = &amp;P-&gt;<a class="code" href="classllvm_1_1Pass.html#ab78af013d3a11515403da8517f8f3d4a">getAnalysis</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      SE = &amp;P-&gt;<a class="code" href="classllvm_1_1Pass.html#ab78af013d3a11515403da8517f8f3d4a">getAnalysis</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      TD = P-&gt;<a class="code" href="classllvm_1_1Pass.html#a4ffdf475fa6dc64ac47e2a50b742ae95">getAnalysisIfAvailable</a>&lt;<a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a>&gt;();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      TTI = <a class="code" href="BBVectorize_8cpp.html#afa2cc746a4280971b99d0f1d79026a55">IgnoreTargetInfo</a> ? 0 : &amp;P-&gt;<a class="code" href="classllvm_1_1Pass.html#ab78af013d3a11515403da8517f8f3d4a">getAnalysis</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a>&gt;();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;Value *, Value *&gt; ValuePair;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;ValuePair, int&gt; ValuePairWithCost;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;ValuePair, size_t&gt; ValuePairWithDepth;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;ValuePair, ValuePair&gt; VPPair; <span class="comment">// A ValuePair pair</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;VPPair, unsigned&gt; VPPairWithType;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *TTI;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// FIXME: const correct?</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">bool</span> vectorizePairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">bool</span> NonPow2Len = <span class="keyword">false</span>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">bool</span> getCandidatePairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                       <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> &amp;Start,</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                       <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                       std::vector&lt;Value *&gt; &amp;PairableInsts, <span class="keywordtype">bool</span> NonPow2Len);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// FIXME: The current implementation does not account for pairs that</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// are connected in multiple ways. For example:</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//   C1 = A1 / A2; C2 = A2 / A1 (which may be both direct and a swap)</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">enum</span> PairConnectionType {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      PairConnectionDirect,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      PairConnectionSwap,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      PairConnectionSplat</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    };</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">void</span> computeConnectedPairs(</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">void</span> buildDepMap(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">void</span> choosePairs(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a>&amp; ChosenPairs);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">void</span> fuseChosenPairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a>&amp; ChosenPairs,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">bool</span> isInstVectorizable(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">bool</span> &amp;IsSimpleLoadStore);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">bool</span> areInstsCompatible(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                       <span class="keywordtype">bool</span> IsSimpleLoadStore, <span class="keywordtype">bool</span> NonPow2Len,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                       <span class="keywordtype">int</span> &amp;CostSavings, <span class="keywordtype">int</span> &amp;FixedOrder);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">bool</span> trackUsesOfI(<a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                      <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> &amp;WriteSet, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">bool</span> UpdateUsers = <span class="keyword">true</span>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> *LoadMoveSetPairs = 0);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordtype">void</span> computePairsConnectedTo(</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;             ValuePair <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">bool</span> pairsConflict(ValuePair <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, ValuePair Q,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;               *PairableInstUserMap = 0,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> *PairableInstUserPairSet = 0);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">bool</span> pairWillFormCycle(ValuePair <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUsers,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CurrentPairs);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">void</span> pruneDAGFor(</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUserMap,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> &amp;PairableInstUserPairSet,</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;</a> &amp;DAG,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PrunedDAG, ValuePair J,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;             <span class="keywordtype">bool</span> UseCycleCheck);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">void</span> buildInitialDAGFor(</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;</a> &amp;DAG, ValuePair J);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">void</span> findBestDAGFor(</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUserMap,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> &amp;PairableInstUserPairSet,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;BestDAG, <span class="keywordtype">size_t</span> &amp;BestMaxDepth,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;             <span class="keywordtype">int</span> &amp;BestEffSize, <a class="code" href="classllvm_1_1Value.html">Value</a> *II, std::vector&lt;Value *&gt;&amp;JJ,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;             <span class="keywordtype">bool</span> UseCycleCheck);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getReplacementPointerInput(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">unsigned</span> o);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">void</span> fillNewShuffleMask(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                     <span class="keywordtype">unsigned</span> MaskOffset, <span class="keywordtype">unsigned</span> NumInElem,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                     <span class="keywordtype">unsigned</span> NumInElem1, <span class="keywordtype">unsigned</span> IdxOffset,</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                     std::vector&lt;Constant*&gt; &amp;Mask);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getReplacementShuffleMask(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">bool</span> expandIEChain(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                       <span class="keywordtype">unsigned</span> o, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;LOp, <span class="keywordtype">unsigned</span> numElemL,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                       <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeL, <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeR, <span class="keywordtype">bool</span> IBeforeJ,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                       <span class="keywordtype">unsigned</span> IdxOff = 0);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getReplacementInput(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">unsigned</span> o, <span class="keywordtype">bool</span> IBeforeJ);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">void</span> getReplacementInputsForPair(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;ReplacedOperands,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                     <span class="keywordtype">bool</span> IBeforeJ);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">void</span> replaceOutputsOfPair(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;InsertionPt, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;K1,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;K2);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">void</span> collectPairLoadMoveSet(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;LoadMoveSet,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">void</span> collectLoadMoveSet(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                     std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;LoadMoveSet,</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">bool</span> canMoveUsesOfIAfterJ(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">void</span> moveUsesOfIAfterJ(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;InsertionPt,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">void</span> combineMetadata(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">bool</span> vectorizeBB(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">if</span> (!DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5ff15505ad3a19cbc8e6d4cb3633d669">isReachableFromEntry</a>(&amp;BB)) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: skipping unreachable &quot;</span> &lt;&lt; BB.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;              <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (TTI) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: using target information\n&quot;</span>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="comment">// Iterate a sufficient number of times to merge types of size 1 bit,</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// then 2 bits, then 4, etc. up to half of the target vector width of the</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="comment">// target vector register.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = 1;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 2;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;           (TTI || v &lt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#aef6a0edcda921321d630bbcdcd05860e">VectorBits</a>) &amp;&amp;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;           (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af7d7060584c66525449d7c0fac87e1b3">MaxIter</a> || n &lt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af7d7060584c66525449d7c0fac87e1b3">MaxIter</a>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;           v *= 2, ++<a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: fusing loop #&quot;</span> &lt;&lt; n &lt;&lt;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;              <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; BB.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;              BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (vectorizePairs(BB))</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">if</span> (changed &amp;&amp; !<a class="code" href="BBVectorize_8cpp.html#a8c34815e96f7b2cf2da1b0510c5990c9">Pow2LenOnly</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        ++<a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">for</span> (; !Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af7d7060584c66525449d7c0fac87e1b3">MaxIter</a> || n &lt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af7d7060584c66525449d7c0fac87e1b3">MaxIter</a>; ++<a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: fusing for non-2^n-length vectors loop #: &quot;</span> &lt;&lt;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                n &lt;&lt; <span class="stringliteral">&quot; for &quot;</span> &lt;&lt; BB.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          <span class="keywordflow">if</span> (!vectorizePairs(BB, <span class="keyword">true</span>)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: done!\n&quot;</span>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">return</span> changed;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnBasicBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      AA = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      SE = &amp;getAnalysis&lt;ScalarEvolution&gt;();</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      TTI = <a class="code" href="BBVectorize_8cpp.html#afa2cc746a4280971b99d0f1d79026a55">IgnoreTargetInfo</a> ? 0 : &amp;getAnalysis&lt;TargetTransformInfo&gt;();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span> vectorizeBB(BB);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="classllvm_1_1Pass.html#a048082a5be9ae0d8901ea64de59e5c8f">BasicBlockPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a>&gt;();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *getVecTypeForPair(<a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy, <a class="code" href="classllvm_1_1Type.html">Type</a> *Elem2Ty) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      assert(ElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>() == Elem2Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>() &amp;&amp;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;             <span class="stringliteral">&quot;Cannot form vector from incompatible scalar types&quot;</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *STy = ElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>();</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordtype">unsigned</span> numElem;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(ElemTy)) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        numElem = VTy-&gt;getNumElements();</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        numElem = 1;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(Elem2Ty)) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        numElem += VTy-&gt;getNumElements();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        numElem += 1;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1VectorType.html#ab43657ed1abe2e2ed3a6a394f233ebd0">VectorType::get</a>(STy, numElem);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> getInstructionTypes(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                           <a class="code" href="classllvm_1_1Type.html">Type</a> *&amp;<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *&amp;T2) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// For stores, it is the value type, not the pointer type that matters</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// because the value is what will come from a vector register.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  </div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *IVal = SI-&gt;getValueOperand();</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        T1 = IVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        T1 = I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  </div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(I))</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        T2 = CI-&gt;getSrcTy();</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        T2 = <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(I)) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        T2 = SI-&gt;getCondition()-&gt;getType();</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *SI = dyn_cast&lt;ShuffleVectorInst&gt;(I)) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        T2 = SI-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(I)) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        T2 = CI-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Returns the weight associated with the provided value. A chain of</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// candidate pairs has a length given by the sum of the weights of its</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// members (one weight per pair; the weight of each member of the pair</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// is assumed to be the same). This length is then compared to the</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// chain-length threshold to determine if a given chain is significant</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// enough to be vectorized. The length is also used in comparing</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// candidate chains where longer chains are considered to be better.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// Note: when this function returns 0, the resulting instructions are</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// not actually fused.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">size_t</span> getDepthFactor(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="comment">// InsertElement and ExtractElement have a depth factor of zero. This is</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="comment">// for two reasons: First, they cannot be usefully fused. Second, because</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="comment">// the pass generates a lot of these, they can confuse the simple metric</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="comment">// used to compare the dags in the next iteration. Thus, giving them a</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="comment">// weight of zero allows the pass to essentially ignore them in</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">// subsequent iterations when looking for vectorization opportunities</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="comment">// while still tracking dependency chains that flow through those</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="comment">// instructions.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">if</span> (isa&lt;InsertElementInst&gt;(V) || isa&lt;ExtractElementInst&gt;(V))</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="comment">// Give a load or store half of the required depth so that load/store</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// pairs will vectorize.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ad71f535fa2c5fdbd6a21cb6b5c399cd8">NoMemOpBoost</a> &amp;&amp; (isa&lt;LoadInst&gt;(V) || isa&lt;StoreInst&gt;(V)))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ae73f97ea01ec81dfd2ae0b57dab859e1">ReqChainDepth</a>/2;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">// Returns the cost of the provided instruction using TTI.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// This does not handle loads and stores.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordtype">unsigned</span> getInstrCost(<span class="keywordtype">unsigned</span> Opcode, <a class="code" href="classllvm_1_1Type.html">Type</a> *T1, <a class="code" href="classllvm_1_1Type.html">Type</a> *T2) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// We mark this instruction as zero-cost because scalar GEPs are usually</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="comment">// lowered to the instruction addressing mode. At the moment we don&#39;t</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">// generate vector GEPs.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">case</span> Instruction::Br:</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">return</span> TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a64573fde1c08c1d3572e5147039c7338">getCFInstrCost</a>(Opcode);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">Instruction::PHI</a>:</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">case</span> Instruction::FAdd:</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">case</span> Instruction::FSub:</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">case</span> Instruction::FMul:</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">case</span> Instruction::UDiv:</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">case</span> Instruction::SDiv:</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">case</span> Instruction::FDiv:</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">case</span> Instruction::URem:</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">case</span> Instruction::SRem:</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">case</span> Instruction::FRem:</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">case</span> Instruction::Shl:</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">case</span> Instruction::LShr:</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">case</span> Instruction::AShr:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">return</span> TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ae6a7e3b0f332156aa068e2c78efbf73a">getArithmeticInstrCost</a>(Opcode, T1);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>:</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">case</span> Instruction::ICmp:</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">case</span> Instruction::FCmp:</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#af1626ac39e1ee08434abd53e72f4d128">getCmpSelInstrCost</a>(Opcode, T1, T2);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">case</span> Instruction::ZExt:</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">case</span> Instruction::SExt:</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">case</span> Instruction::FPToUI:</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">case</span> Instruction::FPToSI:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">case</span> Instruction::FPExt:</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">case</span> Instruction::PtrToInt:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">case</span> Instruction::IntToPtr:</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">case</span> Instruction::SIToFP:</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">case</span> Instruction::UIToFP:</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">case</span> Instruction::Trunc:</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">case</span> Instruction::FPTrunc:</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">case</span> Instruction::ShuffleVector:</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span> TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a453ec2b93d93a5b78a737c501266e104">getCastInstrCost</a>(Opcode, T1, T2);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// This determines the relative offset of two loads or stores, returning</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// true if the offset could be determined to be some constant value.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// For example, if OffsetInElmts == 1, then J accesses the memory directly</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// after I; if OffsetInElmts == -1 then I accesses the memory</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// directly after J.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">bool</span> getPairPtrInfo(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;IPtr, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;JPtr, <span class="keywordtype">unsigned</span> &amp;IAlignment, <span class="keywordtype">unsigned</span> &amp;JAlignment,</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordtype">unsigned</span> &amp;IAddressSpace, <span class="keywordtype">unsigned</span> &amp;JAddressSpace,</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        int64_t &amp;OffsetInElmts, <span class="keywordtype">bool</span> ComputeOffset = <span class="keyword">true</span>) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      OffsetInElmts = 0;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LJ = cast&lt;LoadInst&gt;(J);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        IPtr = LI-&gt;getPointerOperand();</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        JPtr = LJ-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        IAlignment = LI-&gt;getAlignment();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        JAlignment = LJ-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        IAddressSpace = LI-&gt;getPointerAddressSpace();</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        JAddressSpace = LJ-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2efd55778217d045b121de696c4f6452">getPointerAddressSpace</a>();</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), *SJ = cast&lt;StoreInst&gt;(J);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        IPtr = SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        JPtr = SJ-&gt;getPointerOperand();</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        IAlignment = SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">getAlignment</a>();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        JAlignment = SJ-&gt;getAlignment();</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        IAddressSpace = SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a6cac341b1b354174d0e0a81a2e7a9109">getPointerAddressSpace</a>();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        JAddressSpace = SJ-&gt;getPointerAddressSpace();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">if</span> (!ComputeOffset)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IPtrSCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(IPtr);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *JPtrSCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(JPtr);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="comment">// If this is a trivial offset, then we&#39;ll get something like</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// 1*sizeof(type). With target data, which we need anyway, this will get</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// constant folded into a number.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *OffsetSCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aa888e3661c809163273aca85ded4d846">getMinusSCEV</a>(JPtrSCEV, IPtrSCEV);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *ConstOffSCEV =</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            dyn_cast&lt;SCEVConstant&gt;(OffsetSCEV)) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *IntOff = ConstOffSCEV-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        int64_t Offset = IntOff-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">getSExtValue</a>();</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = IPtr-&gt;getType()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        int64_t VTyTSS = (int64_t) TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(VTy);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy2 = JPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">if</span> (VTy != VTy2 &amp;&amp; Offset &lt; 0) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;          int64_t VTy2TSS = (int64_t) TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(VTy2);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;          OffsetInElmts = Offset/VTy2TSS;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;          <span class="keywordflow">return</span> (<a class="code" href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">abs64</a>(Offset) % VTy2TSS) == 0;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        OffsetInElmts = Offset/VTyTSS;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">abs64</a>(Offset) % VTyTSS) == 0;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Returns true if the provided CallInst represents an intrinsic that can</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// be vectorized.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordtype">bool</span> isVectorizableIntrinsic(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>* I) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = I-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">if</span> (!F) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> IID = (<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a>) F-&gt;<a class="code" href="classllvm_1_1Function.html#a7e47131185becc5c96731a2e28441b77">getIntrinsicID</a>();</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">if</span> (!IID) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">switch</span>(IID) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2282198fc9635210d0f678fd0b92e5ce">Intrinsic::sqrt</a>:</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36">Intrinsic::powi</a>:</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afcac7d7dd4a11e3e7fa5c08757f2db40">Intrinsic::sin</a>:</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a8acf62dbfb8a84e6e5edd4a0be9c3e4c">Intrinsic::cos</a>:</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae8381623b66af7d8e29f051b8d03ea93">Intrinsic::log</a>:</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e">Intrinsic::log2</a>:</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a9435bd14da4637e66589624ea43fa758">Intrinsic::log10</a>:</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">Intrinsic::exp</a>:</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a7a35a0c20884a2a1b608229116ff92b1">Intrinsic::exp2</a>:</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af387c9295462cb7394f13fc3b9276dc0">Intrinsic::pow</a>:</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">return</span> Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a4700db854502662445acadb3b729abc3">VectorizeMath</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab4c5fed3774fc563c9b252d3483f56d2">Intrinsic::fma</a>:</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a6956cc565c902dea387b502b54fa9f18">Intrinsic::fmuladd</a>:</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">return</span> Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a763d954330cd1711d6129f1da517230a">VectorizeFMA</a>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordtype">bool</span> isPureIEChain(<a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> *IENext = <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(IENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) &amp;&amp;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            !isa&lt;InsertElementInst&gt;(IENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      } <span class="keywordflow">while</span> ((IENext =</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                 dyn_cast&lt;InsertElementInst&gt;(IENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))));</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  };</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// This function implements one vectorization iteration on the provided</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// basic block. It returns true if the block is changed.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::vectorizePairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB, <span class="keywordtype">bool</span> NonPow2Len) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordtype">bool</span> ShouldContinue;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> Start = BB.<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    std::vector&lt;Value *&gt; AllPairableInsts;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> AllChosenPairs;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> AllFixedOrderPairs;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> AllPairConnectionTypes;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt; AllConnectedPairs,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                                 AllConnectedPairDeps;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      std::vector&lt;Value *&gt; PairableInsts;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt; CandidatePairs;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> FixedOrderPairs;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> CandidatePairCostSavings;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      ShouldContinue = getCandidatePairs(BB, Start, CandidatePairs,</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                         FixedOrderPairs,</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                         CandidatePairCostSavings,</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                         PairableInsts, NonPow2Len);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">if</span> (PairableInsts.empty()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">// Build the candidate pair set for faster lookups.</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> CandidatePairsSet;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt;::iterator I =</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;           CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), E = CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator J = I-&gt;second.begin(),</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;             JE = I-&gt;second.end(); J != JE; ++J)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(I-&gt;first, *J));</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// Now we have a map of all of the pairable instructions and we need to</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="comment">// select the best possible pairing. A good pairing is one such that the</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="comment">// users of the pair are also paired. This defines a (directed) forest</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="comment">// over the pairs such that two pairs are connected iff the second pair</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="comment">// uses the first.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="comment">// Note that it only matters that both members of the second pair use some</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="comment">// element of the first pair (to allow for splatting).</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt; ConnectedPairs,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                                   ConnectedPairDeps;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> PairConnectionTypes;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      computeConnectedPairs(CandidatePairs, CandidatePairsSet,</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                            PairableInsts, ConnectedPairs, PairConnectionTypes);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">empty</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt;::iterator</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;           I = ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), IE = ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;           I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator J = I-&gt;second.begin(),</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;             JE = I-&gt;second.end(); J != JE; ++J)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          ConnectedPairDeps[*J].push_back(I-&gt;first);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="comment">// Build the pairable-instruction dependency map</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> PairableInstUsers;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      buildDepMap(BB, CandidatePairs, PairableInsts, PairableInstUsers);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// There is now a graph of the connected pairs. For each variable, pick</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="comment">// the pairing with the largest dag meeting the depth requirement on at</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="comment">// least one branch. Then select all pairings that are part of that dag</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="comment">// and remove them from the list of available pairings and pairable</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="comment">// variables.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> ChosenPairs;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      choosePairs(CandidatePairs, CandidatePairsSet,</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        CandidatePairCostSavings,</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        PairableInsts, FixedOrderPairs, PairConnectionTypes,</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        ConnectedPairs, ConnectedPairDeps,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        PairableInstUsers, ChosenPairs);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">if</span> (ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">empty</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      AllPairableInsts.insert(AllPairableInsts.end(), PairableInsts.begin(),</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                              PairableInsts.end());</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      AllChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>());</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="comment">// Only for the chosen pairs, propagate information on fixed-order pairs,</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="comment">// pair connections, and their types to the data structures used by the</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">// pair fusion procedures.</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> I = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;           IE = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span> (FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*I))</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          AllFixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(*I);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(I-&gt;second, I-&gt;first)))</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          AllFixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(I-&gt;second, I-&gt;first));</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> J = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>();</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;             J != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++J) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;::iterator</a> K =</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(VPPair(*I, *J));</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          <span class="keywordflow">if</span> (K != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            AllPairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(*K);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            K = PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(VPPair(*J, *I));</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">if</span> (K != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;              AllPairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(*K);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt;::iterator</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;           I = ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), IE = ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;           I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator J = I-&gt;second.begin(),</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          JE = I-&gt;second.end(); J != JE; ++J)</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="keywordflow">if</span> (AllPairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(VPPair(I-&gt;first, *J))) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            AllConnectedPairs[I-&gt;first].push_back(*J);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            AllConnectedPairDeps[*J].push_back(I-&gt;first);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    } <span class="keywordflow">while</span> (ShouldContinue);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (AllChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">empty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    NumFusedOps += AllChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">size</a>();</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">// A set of pairs has now been selected. It is now necessary to replace the</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// paired instructions with vector instructions. For this procedure each</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// operand must be replaced with a vector operand. This vector is formed</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="comment">// by using build_vector on the old operands. The replaced values are then</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="comment">// replaced with a vector_extract on the result.  Subsequent optimization</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="comment">// passes should coalesce the build/extract combinations.</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    fuseChosenPairs(BB, AllPairableInsts, AllChosenPairs, AllFixedOrderPairs,</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    AllPairConnectionTypes,</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    AllConnectedPairs, AllConnectedPairDeps);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// It is important to cleanup here so that future iterations of this</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">// function have less work to do.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    (void) <a class="code" href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">SimplifyInstructionsInBlock</a>(&amp;BB, TD, AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">getTargetLibraryInfo</a>());</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// This function returns true if the provided instruction is capable of being</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// fused into a vector instruction. This determination is based only on the</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// type and other attributes of the instruction.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::isInstVectorizable(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                         <span class="keywordtype">bool</span> &amp;IsSimpleLoadStore) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    IsSimpleLoadStore = <span class="keyword">false</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;CallInst&gt;(I)) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">if</span> (!isVectorizableIntrinsic(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="comment">// Vectorize simple loads if possbile:</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      IsSimpleLoadStore = L-&gt;isSimple();</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">if</span> (!IsSimpleLoadStore || !Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a43b888cb38d9bdb6a1940f9ae43a1578">VectorizeMemOps</a>)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">// Vectorize simple stores if possbile:</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      IsSimpleLoadStore = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;isSimple();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">if</span> (!IsSimpleLoadStore || !Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a43b888cb38d9bdb6a1940f9ae43a1578">VectorizeMemOps</a>)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;CastInst&gt;(I)) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// We can vectorize casts, but not casts of pointer types, etc.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ad9cfad286e74e33be7a4f6d5b2e14e7b">VectorizeCasts</a>)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getSrcTy();</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">if</span> (!SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">isSingleValueType</a>())</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getDestTy();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">isSingleValueType</a>())</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;SelectInst&gt;(I)) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#aca68b8563bfa8e2a1bc658ddaae5270d">VectorizeSelect</a>)</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CmpInst&gt;(I)) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a4719042d3da91d52c970fe057a410f32">VectorizeCmp</a>)</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = dyn_cast&lt;GetElementPtrInst&gt;(I)) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a028955b37198cb683dd39a9c07425ba0">VectorizeGEP</a>)</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="comment">// Currently, vector GEPs exist only with one index.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getNumIndices() != 1)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#ac93ffdc3731dab52d2f92fb62609b718">isBinaryOp</a>() || isa&lt;ShuffleVectorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ||</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        isa&lt;ExtractElementInst&gt;(I) || isa&lt;InsertElementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// We can&#39;t vectorize memory operations without target data</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (TD == 0 &amp;&amp; IsSimpleLoadStore)</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, *T2;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    getInstructionTypes(I, T1, T2);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">// Not every type can be vectorized...</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">VectorType::isValidElementType</a>(T1) || T1-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) ||</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        !(<a class="code" href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">VectorType::isValidElementType</a>(T2) || T2-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()))</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (T1-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>() == 1) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a5befaa794315e6b9bb119f2b1f35aea8">VectorizeBools</a>)</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ab9280f5afc6d4c887e40ccc44eb1dc38">VectorizeInts</a> &amp;&amp; T1-&gt;<a class="code" href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">isIntOrIntVectorTy</a>())</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (T2-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>() == 1) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a5befaa794315e6b9bb119f2b1f35aea8">VectorizeBools</a>)</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ab9280f5afc6d4c887e40ccc44eb1dc38">VectorizeInts</a> &amp;&amp; T2-&gt;<a class="code" href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">isIntOrIntVectorTy</a>())</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> (!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a13e03b36534d1c9909b07be3838a1ab0">VectorizeFloats</a></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        &amp;&amp; (T1-&gt;<a class="code" href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">isFPOrFPVectorTy</a>() || T2-&gt;<a class="code" href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">isFPOrFPVectorTy</a>()))</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// Don&#39;t vectorize target-specific types.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">if</span> (T1-&gt;<a class="code" href="classllvm_1_1Type.html#ae011f00644d795f4864d9ee30547b127">isX86_FP80Ty</a>() || T1-&gt;<a class="code" href="classllvm_1_1Type.html#a15a8263a574e9842b03263ebe0e36c12">isPPC_FP128Ty</a>() || T1-&gt;<a class="code" href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">isX86_MMXTy</a>())</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> (T2-&gt;<a class="code" href="classllvm_1_1Type.html#ae011f00644d795f4864d9ee30547b127">isX86_FP80Ty</a>() || T2-&gt;<a class="code" href="classllvm_1_1Type.html#a15a8263a574e9842b03263ebe0e36c12">isPPC_FP128Ty</a>() || T2-&gt;<a class="code" href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">isX86_MMXTy</a>())</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">if</span> ((!Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a1c3c61b088124769af502ea4b67df53a">VectorizePointers</a> || TD == 0) &amp;&amp;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        (T1-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() ||</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;         T2-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()))</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">if</span> (!TTI &amp;&amp; (T1-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &gt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#aef6a0edcda921321d630bbcdcd05860e">VectorBits</a> ||</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                 T2-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &gt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#aef6a0edcda921321d630bbcdcd05860e">VectorBits</a>))</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// This function returns true if the two provided instructions are compatible</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// (meaning that they can be fused into a vector instruction). This assumes</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// that I has already been determined to be vectorizable and that J is not</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// in the use dag of I.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::areInstsCompatible(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                       <span class="keywordtype">bool</span> IsSimpleLoadStore, <span class="keywordtype">bool</span> NonPow2Len,</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                       <span class="keywordtype">int</span> &amp;CostSavings, <span class="keywordtype">int</span> &amp;FixedOrder) {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a43097a8aa365f06fb95e209a1a30d190">DebugInstructionExamination</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: looking at &quot;</span> &lt;&lt; *I &lt;&lt;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                     <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *J &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    CostSavings = 0;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    FixedOrder = 0;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Loads and stores can be merged if they have different alignments,</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// but are otherwise the same.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> (!J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(I, <a class="code" href="classllvm_1_1Instruction.html#aa7d8c7b3481309b28659543d1efdb41da78bdb3b677bd78b8f1f0f680f59a049b">Instruction::CompareIgnoringAlignment</a> |</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                      (NonPow2Len ? <a class="code" href="classllvm_1_1Instruction.html#aa7d8c7b3481309b28659543d1efdb41da9160004f266e276236ea4be972957d3b">Instruction::CompareUsingScalarTypes</a> : 0)))</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IT1, *IT2, *JT1, *JT2;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    getInstructionTypes(I, IT1, IT2);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    getInstructionTypes(J, JT1, JT2);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordtype">unsigned</span> MaxTypeBits = std::max(</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      IT1-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() + JT1-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>(),</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      IT2-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() + JT2-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>());</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (!TTI &amp;&amp; MaxTypeBits &gt; Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#aef6a0edcda921321d630bbcdcd05860e">VectorBits</a>)</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// FIXME: handle addsub-type operations!</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (IsSimpleLoadStore) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IPtr, *JPtr;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordtype">unsigned</span> IAlignment, JAlignment, IAddressSpace, JAddressSpace;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      int64_t OffsetInElmts = 0;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">if</span> (getPairPtrInfo(I, J, IPtr, JPtr, IAlignment, JAlignment,</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            IAddressSpace, JAddressSpace,</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            OffsetInElmts) &amp;&amp; <a class="code" href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">abs64</a>(OffsetInElmts) == 1) {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        FixedOrder = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) OffsetInElmts;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordtype">unsigned</span> BottomAlignment = IAlignment;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">if</span> (OffsetInElmts &lt; 0) BottomAlignment = JAlignment;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *aTypeI = isa&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) ?</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          cast&lt;StoreInst&gt;(I)-&gt;getValueOperand()-&gt;getType() : I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *aTypeJ = isa&lt;StoreInst&gt;(J) ?</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;          cast&lt;StoreInst&gt;(J)-&gt;getValueOperand()-&gt;getType() : J-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *VType = getVecTypeForPair(aTypeI, aTypeJ);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">if</span> (Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a7f09550473f08bb1f01fa29cf224a321">AlignedOnly</a>) {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;          <span class="comment">// An aligned load or store is possible only if the instruction</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;          <span class="comment">// with the lower offset has an alignment suitable for the</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;          <span class="comment">// vector type.</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;          <span class="keywordtype">unsigned</span> VecAlignment = TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">getPrefTypeAlignment</a>(VType);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;          <span class="keywordflow">if</span> (BottomAlignment &lt; VecAlignment)</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">if</span> (TTI) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;          <span class="keywordtype">unsigned</span> ICost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1b178b55f0bfc23a27aa5ace23332204">getMemoryOpCost</a>(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), aTypeI,</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                                IAlignment, IAddressSpace);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;          <span class="keywordtype">unsigned</span> JCost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1b178b55f0bfc23a27aa5ace23332204">getMemoryOpCost</a>(J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), aTypeJ,</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                                JAlignment, JAddressSpace);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          <span class="keywordtype">unsigned</span> VCost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1b178b55f0bfc23a27aa5ace23332204">getMemoryOpCost</a>(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), VType,</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                                BottomAlignment,</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                                IAddressSpace);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          ICost += TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aad1feb3c39700950c1b35d4da87515c4">getAddressComputationCost</a>(aTypeI);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          JCost += TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aad1feb3c39700950c1b35d4da87515c4">getAddressComputationCost</a>(aTypeJ);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;          VCost += TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aad1feb3c39700950c1b35d4da87515c4">getAddressComputationCost</a>(VType);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          <span class="keywordflow">if</span> (VCost &gt; ICost + JCost)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;          <span class="comment">// We don&#39;t want to fuse to a type that will be split, even</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;          <span class="comment">// if the two input types will also be split and there is no other</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;          <span class="comment">// associated cost.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;          <span class="keywordtype">unsigned</span> VParts = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">getNumberOfParts</a>(VType);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;          <span class="keywordflow">if</span> (VParts &gt; 1)</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!VParts &amp;&amp; VCost == ICost + JCost)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;          CostSavings = ICost + JCost - VCost;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TTI) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordtype">unsigned</span> ICost = getInstrCost(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), IT1, IT2);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordtype">unsigned</span> JCost = getInstrCost(J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), JT1, JT2);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *VT1 = getVecTypeForPair(IT1, JT1),</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;           *VT2 = getVecTypeForPair(IT2, JT2);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="comment">// Note that this procedure is incorrect for insert and extract element</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="comment">// instructions (because combining these often results in a shuffle),</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="comment">// but this cost is ignored (because insert and extract element</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="comment">// instructions are assigned a zero depth factor and are not really</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="comment">// fused in general).</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="keywordtype">unsigned</span> VCost = getInstrCost(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), VT1, VT2);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">if</span> (VCost &gt; ICost + JCost)</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="comment">// We don&#39;t want to fuse to a type that will be split, even</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="comment">// if the two input types will also be split and there is no other</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="comment">// associated cost.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordtype">unsigned</span> VParts1 = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">getNumberOfParts</a>(VT1),</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;               VParts2 = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">getNumberOfParts</a>(VT2);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">if</span> (VParts1 &gt; 1 || VParts2 &gt; 1)</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!VParts1 || !VParts2) &amp;&amp; VCost == ICost + JCost)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      CostSavings = ICost + JCost - VCost;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// The powi intrinsic is special because only the first argument is</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// vectorized, the second arguments must be equal.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *FI;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (CI &amp;&amp; (FI = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>())) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> IID = (<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a>) FI-&gt;<a class="code" href="classllvm_1_1Function.html#a7e47131185becc5c96731a2e28441b77">getIntrinsicID</a>();</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">if</span> (IID == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36">Intrinsic::powi</a>) {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *A1I = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1),</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;              *A1J = cast&lt;CallInst&gt;(J)-&gt;getArgOperand(1);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *A1ISCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(A1I),</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                   *A1JSCEV = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(A1J);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">return</span> (A1ISCEV == A1JSCEV);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">if</span> (IID &amp;&amp; TTI) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type*, 4&gt;</a> Tys;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, ie = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != ie; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;          Tys.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordtype">unsigned</span> ICost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aeb349dfe9de242e05ded1b541783b5df">getIntrinsicInstrCost</a>(IID, IT1, Tys);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        Tys.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CJ = cast&lt;CallInst&gt;(J);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, ie = CJ-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != ie; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;          Tys.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CJ-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordtype">unsigned</span> JCost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aeb349dfe9de242e05ded1b541783b5df">getIntrinsicInstrCost</a>(IID, JT1, Tys);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        Tys.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        assert(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() == CJ-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() &amp;&amp;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;               <span class="stringliteral">&quot;Intrinsic argument counts differ&quot;</span>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, ie = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != ie; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          <span class="keywordflow">if</span> (IID == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36">Intrinsic::powi</a> &amp;&amp; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == 1)</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            Tys.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            Tys.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(getVecTypeForPair(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                            CJ-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = getVecTypeForPair(IT1, JT1);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordtype">unsigned</span> VCost = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#aeb349dfe9de242e05ded1b541783b5df">getIntrinsicInstrCost</a>(IID, RetTy, Tys);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (VCost &gt; ICost + JCost)</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="comment">// We don&#39;t want to fuse to a type that will be split, even</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">// if the two input types will also be split and there is no other</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="comment">// associated cost.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordtype">unsigned</span> RetParts = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">getNumberOfParts</a>(RetTy);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (RetParts &gt; 1)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!RetParts &amp;&amp; VCost == ICost + JCost)</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, ie = CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != ie; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;          <span class="keywordflow">if</span> (!Tys[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;isVectorTy())</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;          <span class="keywordtype">unsigned</span> NumParts = TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">getNumberOfParts</a>(Tys[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;          <span class="keywordflow">if</span> (NumParts &gt; 1)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!NumParts &amp;&amp; VCost == ICost + JCost)</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        CostSavings = ICost + JCost - VCost;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Figure out whether or not J uses I and update the users and write-set</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// structures associated with I. Specifically, Users represents the set of</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// instructions that depend on I. WriteSet represents the set</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// of memory locations that are dependent on I. If UpdateUsers is true,</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// and J uses I, then Users is updated to contain J and WriteSet is updated</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// to contain any memory locations to which J writes. The function returns</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// true if J uses I. By default, alias analysis is used to determine</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// whether J reads from memory that overlaps with a location in WriteSet.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// If LoadMoveSet is not null, then it is a previously-computed map</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// where the key is the memory-based user instruction and the value is</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="comment">// the instruction to be compared with I. So, if LoadMoveSet is provided,</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// then the alias analysis is not used. This is necessary because this</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// function is called during the process of moving instructions during</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// vectorization and the results of the alias analysis are not stable during</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// that process.</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::trackUsesOfI(<a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>,</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                       <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> &amp;WriteSet, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                       <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">bool</span> UpdateUsers,</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                       <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> *LoadMoveSetPairs) {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordtype">bool</span> UsesI = <span class="keyword">false</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// This instruction may already be marked as a user due, for example, to</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">// being a member of a selected pair.</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">if</span> (Users.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J))</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      UsesI = <span class="keyword">true</span>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">if</span> (!UsesI)</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> JU = J-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), JE = J-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;           JU != JE; ++JU) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *V = *JU;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">if</span> (I == V || Users.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(V)) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;          UsesI = <span class="keyword">true</span>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">if</span> (!UsesI &amp;&amp; J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">mayReadFromMemory</a>()) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">if</span> (LoadMoveSetPairs) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        UsesI = LoadMoveSetPairs-&gt;<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(J, I));</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">AliasSetTracker::iterator</a> W = WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ac170f23b2c24a4b1c0d81c3e290959ae">begin</a>(),</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;             WE = WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#af18839e3170da6f597222b8e5af15e5e">end</a>(); W != WE; ++W) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;          <span class="keywordflow">if</span> (W-&gt;aliasesUnknownInst(J, *AA)) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            UsesI = <span class="keyword">true</span>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;          }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">if</span> (UsesI &amp;&amp; UpdateUsers) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keywordflow">if</span> (J-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(J);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      Users.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(J);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">return</span> UsesI;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// This function iterates over all instruction pairs in the provided</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// basic block and collects all candidate pairs for vectorization.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::getCandidatePairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                       <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> &amp;Start,</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                       <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                       <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                       std::vector&lt;Value *&gt; &amp;PairableInsts, <span class="keywordtype">bool</span> NonPow2Len) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordtype">size_t</span> TotalPairs = 0;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> E = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (Start == E) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordtype">bool</span> ShouldContinue = <span class="keyword">false</span>, IAfterStart = <span class="keyword">false</span>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = Start++; I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (I == Start) IAfterStart = <span class="keyword">true</span>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordtype">bool</span> IsSimpleLoadStore;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">if</span> (!isInstVectorizable(I, IsSimpleLoadStore)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="comment">// Look for an instruction with which to pair instruction *I...</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> WriteSet(*AA);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(I);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordtype">bool</span> JAfterStart = IAfterStart;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> J = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(I);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ss = 0; J != E &amp;&amp; ss &lt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a965d64fd29fcc23dbe3a9cbf3dc36aef">SearchLimit</a>; ++J, ++ss) {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">if</span> (J == Start) JAfterStart = <span class="keyword">true</span>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="comment">// Determine if J uses I, if so, exit the loop.</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordtype">bool</span> UsesI = trackUsesOfI(Users, WriteSet, I, J, !Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af5719bc445388a15863a7d9a3cf12fe7">FastDep</a>);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keywordflow">if</span> (Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#af5719bc445388a15863a7d9a3cf12fe7">FastDep</a>) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;          <span class="comment">// Note: For this heuristic to be effective, independent operations</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;          <span class="comment">// must tend to be intermixed. This is likely to be true from some</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;          <span class="comment">// kinds of grouped loop unrolling (but not the generic LLVM pass),</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;          <span class="comment">// but otherwise may require some kind of reordering pass.</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;          <span class="comment">// When using fast dependency analysis,</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          <span class="comment">// stop searching after first use:</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;          <span class="keywordflow">if</span> (UsesI) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;          <span class="keywordflow">if</span> (UsesI) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">// J does not use I, and comes before the first use of I, so it can be</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="comment">// merged with I if the instructions are compatible.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordtype">int</span> CostSavings, FixedOrder;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordflow">if</span> (!areInstsCompatible(I, J, IsSimpleLoadStore, NonPow2Len,</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            CostSavings, FixedOrder)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="comment">// J is a candidate for merging with I.</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">if</span> (!PairableInsts.size() ||</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;             PairableInsts[PairableInsts.size()-1] != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;          PairableInsts.push_back(I);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        CandidatePairs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].push_back(J);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        ++TotalPairs;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">if</span> (TTI)</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;          CandidatePairCostSavings.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(ValuePairWithCost(ValuePair(I, J),</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                                                            CostSavings));</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">if</span> (FixedOrder == 1)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;          FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(I, J));</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FixedOrder == -1)</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;          FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(J, I));</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="comment">// The next call to this function must start after the last instruction</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="comment">// selected during this invocation.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">if</span> (JAfterStart) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;          Start = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(J);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;          IAfterStart = JAfterStart = <span class="keyword">false</span>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a7dcd5b03b84781aeb7612428f8c11ba0">DebugCandidateSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: candidate pair &quot;</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                     &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *J &lt;&lt; <span class="stringliteral">&quot; (cost savings: &quot;</span> &lt;&lt;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                     CostSavings &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="comment">// If we have already found too many pairs, break here and this function</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="comment">// will be called again starting after the last instruction selected</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="comment">// during this invocation.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">if</span> (PairableInsts.size() &gt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a707afda5bc957c15f2b60f942cd32afd">MaxInsts</a> ||</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            TotalPairs &gt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a5a65a660c80e04b311850d78d30fab64">MaxPairs</a>) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;          ShouldContinue = <span class="keyword">true</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">if</span> (ShouldContinue)</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: found &quot;</span> &lt;&lt; PairableInsts.size()</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; instructions with candidate pairs\n&quot;</span>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">return</span> ShouldContinue;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// Finds candidate pairs connected to the pair P = &lt;PI, PJ&gt;. This means that</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// it looks for pairs such that both members have an input which is an</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">// output of PI or PJ.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordtype">void</span> BBVectorize::computePairsConnectedTo(</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                  std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                  ValuePair <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI, *SJ;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// For each possible pairing for this variable, look at the uses of</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// the first value...</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> I = P.first-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         E = P.first-&gt;use_end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(*I)) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="comment">// A pair cannot be connected to a load because the load only takes one</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="comment">// operand (the address) and it is a scalar even after vectorization.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((SI = dyn_cast&lt;StoreInst&gt;(*I)) &amp;&amp;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                 P.first == SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>()) {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="comment">// Similarly, a pair cannot be connected to a store through its</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="comment">// pointer operand.</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="comment">// For each use of the first variable, look for uses of the second</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="comment">// variable...</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> J = P.second-&gt;use_begin(),</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;           E2 = P.second-&gt;use_end(); J != E2; ++J) {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">if</span> ((SJ = dyn_cast&lt;StoreInst&gt;(*J)) &amp;&amp;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            P.second == SJ-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>())</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="comment">// Look for &lt;I, J&gt;:</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">if</span> (CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(*I, *J))) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;          VPPair VP(P, ValuePair(*I, *J));</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;          ConnectedPairs[VP.first].push_back(VP.second);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;          PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(VPPairWithType(VP, PairConnectionDirect));</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="comment">// Look for &lt;J, I&gt;:</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">if</span> (CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(*J, *I))) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;          VPPair VP(P, ValuePair(*J, *I));</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;          ConnectedPairs[VP.first].push_back(VP.second);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;          PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(VPPairWithType(VP, PairConnectionSwap));</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keywordflow">if</span> (Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a720a58c90acceb0803dbe2f15c45a797">SplatBreaksChain</a>) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="comment">// Look for cases where just the first value in the pair is used by</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">// both members of another pair (splatting).</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> J = P.first-&gt;use_begin(); J != E; ++J) {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">if</span> ((SJ = dyn_cast&lt;StoreInst&gt;(*J)) &amp;&amp;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            P.first == SJ-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>())</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">if</span> (CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(*I, *J))) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;          VPPair VP(P, ValuePair(*I, *J));</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;          ConnectedPairs[VP.first].push_back(VP.second);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(VPPairWithType(VP, PairConnectionSplat));</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">if</span> (Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#a720a58c90acceb0803dbe2f15c45a797">SplatBreaksChain</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// Look for cases where just the second value in the pair is used by</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// both members of another pair (splatting).</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> I = P.second-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;         E = P.second-&gt;use_end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(*I))</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((SI = dyn_cast&lt;StoreInst&gt;(*I)) &amp;&amp;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;               P.second == SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>())</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> J = P.second-&gt;use_begin(); J != E; ++J) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">if</span> ((SJ = dyn_cast&lt;StoreInst&gt;(*J)) &amp;&amp;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            P.second == SJ-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>())</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="keywordflow">if</span> (CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(*I, *J))) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;          VPPair VP(P, ValuePair(*I, *J));</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;          ConnectedPairs[VP.first].push_back(VP.second);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;          PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(VPPairWithType(VP, PairConnectionSplat));</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// This function figures out which pairs are connected.  Two pairs are</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// connected if some output of the first pair forms an input to both members</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// of the second pair.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordtype">void</span> BBVectorize::computeConnectedPairs(</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                  std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator PI = PairableInsts.begin(),</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;         PE = PairableInsts.end(); PI != PE; ++PI) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt;::iterator PP =</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*PI);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">if</span> (PP == CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator P = PP-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;           E = PP-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); P != E; ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        computePairsConnectedTo(CandidatePairs, CandidatePairsSet,</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                PairableInsts, ConnectedPairs,</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                                PairConnectionTypes, ValuePair(*PI, *P));</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    }</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordtype">size_t</span> TotalPairs = 0;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt;::iterator I =</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;               ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), IE = ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            TotalPairs += I-&gt;second.size();</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: found &quot;</span> &lt;&lt; TotalPairs</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; pair connections.\n&quot;</span>);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="comment">// This function builds a set of use tuples such that &lt;A, B&gt; is in the set</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// if B is in the use dag of A. If B is in the use dag of A, then B</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// depends on the output of A.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordtype">void</span> BBVectorize::buildDepMap(</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                      std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers) {</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> IsInPair;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt;::iterator <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> =</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), E = CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != E; ++<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;first);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;second.begin(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;second.end());</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// Iterate through the basic block, recording all users of each</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// pairable instruction.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> E = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(), EL =</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">BasicBlock::iterator</a>(cast&lt;Instruction&gt;(PairableInsts.back()));</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = BB.<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">if</span> (IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#a1e9e1f3e713d0756c3eb4843926ab075">find</a>(I) == IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> WriteSet(*AA);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(I);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> J = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(I); J != E; ++J) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        (void) trackUsesOfI(Users, WriteSet, I, J);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">if</span> (J == EL)</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;::iterator</a> U = Users.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(), E = Users.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>();</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;           U != E; ++U) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">if</span> (IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#a1e9e1f3e713d0756c3eb4843926ab075">find</a>(*U) == IsInPair.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(I, *U));</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">if</span> (I == EL)</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Returns true if an input to pair P is an output of pair Q and also an</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// input of pair Q is an output of pair P. If this is the case, then these</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// two pairs cannot be simultaneously fused.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::pairsConflict(ValuePair P, ValuePair Q,</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; *PairableInstUserMap,</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> *PairableInstUserPairSet) {</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// Two pairs are in conflict if they are mutual Users of eachother.</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordtype">bool</span> QUsesP = PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(P.first,  Q.first))  ||</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(P.first,  Q.second)) ||</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(P.second, Q.first))  ||</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(P.second, Q.second));</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordtype">bool</span> PUsesQ = PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(Q.first,  P.first))  ||</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(Q.first,  P.second)) ||</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(Q.second, P.first))  ||</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                  PairableInstUsers.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(Q.second, P.second));</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (PairableInstUserMap) {</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="comment">// FIXME: The expensive part of the cycle check is not so much the cycle</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="comment">// check itself but this edge insertion procedure. This needs some</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="comment">// profiling and probably a different data structure.</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">if</span> (PUsesQ) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (PairableInstUserPairSet-&gt;<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(VPPair(Q, P)).second)</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;          (*PairableInstUserMap)[Q].push_back(P);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">if</span> (QUsesP) {</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="keywordflow">if</span> (PairableInstUserPairSet-&gt;<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(VPPair(P, Q)).second)</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;          (*PairableInstUserMap)[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>].push_back(Q);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">return</span> (QUsesP &amp;&amp; PUsesQ);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// This function walks the use graph of current pairs to see if, starting</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">// from P, the walk returns to P.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::pairWillFormCycle(ValuePair P,</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUserMap,</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CurrentPairs) {</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#afdd20f5a624c6c8f4b9177e1575c6a0c">DebugCycleCheck</a>)</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: starting cycle check for : &quot;</span> &lt;&lt; *P.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                   &lt;&lt; *P.second &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// A lookup table of visisted pairs is kept because the PairableInstUserMap</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="comment">// contains non-direct associations.</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> Visited;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValuePair, 32&gt;</a> Q;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">// General depth-first post-order traversal:</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(P);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      ValuePair QTop = Q.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      Visited.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(QTop);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#afdd20f5a624c6c8f4b9177e1575c6a0c">DebugCycleCheck</a>)</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;              <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: cycle check visiting: &quot;</span> &lt;&lt; *QTop.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                     &lt;&lt; *QTop.second &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator QQ =</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        PairableInstUserMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(QTop);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">if</span> (QQ == PairableInstUserMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;           CE = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != CE; ++<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == P) {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;BBV: rejected to prevent non-trivial cycle formation: &quot;</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                 &lt;&lt; QTop.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;second &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordflow">if</span> (CurrentPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp; !Visited.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;          Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    } <span class="keywordflow">while</span> (!Q.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="comment">// This function builds the initial dag of connected pairs with the</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="comment">// pair J at the root.</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordtype">void</span> BBVectorize::buildInitialDAGFor(</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                  std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;</a> &amp;DAG, ValuePair J) {</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// Each of these pairs is viewed as the root node of a DAG. The DAG</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">// is then walked (depth-first). As this happens, we keep track of</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="comment">// the pairs that compose the DAG and the maximum depth of the DAG.</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValuePairWithDepth, 32&gt;</a> Q;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="comment">// General depth-first post-order traversal:</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ValuePairWithDepth(J, getDepthFactor(J.first)));</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      ValuePairWithDepth QTop = Q.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="comment">// Push each child onto the queue:</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keywordtype">bool</span> MoreChildren = <span class="keyword">false</span>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="keywordtype">size_t</span> MaxChildDepth = QTop.second;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator QQ =</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(QTop.first);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordflow">if</span> (QQ != ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator k = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;             ke = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); k != ke; ++k) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;          <span class="comment">// Make sure that this child pair is still a candidate:</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;          <span class="keywordflow">if</span> (CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*k)) {</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;::iterator</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*k);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <span class="keywordflow">if</span> (C == DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;              <span class="keywordtype">size_t</span> <a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a> = getDepthFactor(k-&gt;first);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;              Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ValuePairWithDepth(*k, QTop.second+d));</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;              MoreChildren = <span class="keyword">true</span>;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;              MaxChildDepth = std::max(MaxChildDepth, C-&gt;second);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;          }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <span class="keywordflow">if</span> (!MoreChildren) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="comment">// Record the current pair as part of the DAG:</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(ValuePairWithDepth(QTop.first, MaxChildDepth));</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      }</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    } <span class="keywordflow">while</span> (!Q.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// Given some initial dag, prune it by removing conflicting pairs (pairs</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// that cannot be simultaneously chosen for vectorization).</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordtype">void</span> BBVectorize::pruneDAGFor(</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;              std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUserMap,</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> &amp;PairableInstUserPairSet,</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;</a> &amp;DAG,</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PrunedDAG, ValuePair J,</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;              <span class="keywordtype">bool</span> UseCycleCheck) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValuePairWithDepth, 32&gt;</a> Q;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="comment">// General depth-first post-order traversal:</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ValuePairWithDepth(J, getDepthFactor(J.first)));</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      ValuePairWithDepth QTop = Q.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      PrunedDAG.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(QTop.first);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <span class="comment">// Visit each child, pruning as necessary...</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValuePairWithDepth, 8&gt;</a> BestChildren;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator QQ =</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(QTop.first);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordflow">if</span> (QQ == ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator K = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;           KE = QQ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); K != KE; ++K) {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;::iterator</a> C = DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*K);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">if</span> (C == DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="comment">// This child is in the DAG, now we need to make sure it is the</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="comment">// best of any conflicting children. There could be multiple</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="comment">// conflicting children, so first, determine if we&#39;re keeping</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="comment">// this child, then delete conflicting children as necessary.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="comment">// It is also necessary to guard against pairing-induced</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="comment">// dependencies. Consider instructions a .. x .. y .. b</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="comment">// such that (a,b) are to be fused and (x,y) are to be fused</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="comment">// but a is an input to x and b is an output from y. This</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="comment">// means that y cannot be moved after b but x must be moved</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">// after b for (a,b) to be fused. In other words, after</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="comment">// fusing (a,b) we have y .. a/b .. x where y is an input</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="comment">// to a/b and x is an output to a/b: x and y can no longer</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="comment">// be legally fused. To prevent this condition, we must</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="comment">// make sure that a child pair added to the DAG is not</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="comment">// both an input and output of an already-selected pair.</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="comment">// Pairing-induced dependencies can also form from more complicated</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="comment">// cycles. The pair vs. pair conflicts are easy to check, and so</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="comment">// that is done explicitly for &quot;fast rejection&quot;, and because for</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <span class="comment">// child vs. child conflicts, we may prefer to keep the current</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="comment">// pair in preference to the already-selected child.</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> CurrentPairs;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keywordtype">bool</span> CanAdd = <span class="keyword">true</span>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;ValuePairWithDepth&gt;::iterator</a> C2</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;              = BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E2 = BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;             C2 != E2; ++C2) {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;          <span class="keywordflow">if</span> (C2-&gt;first.first == C-&gt;first.first ||</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;              C2-&gt;first.first == C-&gt;first.second ||</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;              C2-&gt;first.second == C-&gt;first.first ||</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;              C2-&gt;first.second == C-&gt;first.second ||</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;              pairsConflict(C2-&gt;first, C-&gt;first, PairableInstUsers,</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserMap : 0,</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserPairSet : 0)) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            <span class="keywordflow">if</span> (C2-&gt;second &gt;= C-&gt;second) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;              CanAdd = <span class="keyword">false</span>;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            CurrentPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(C2-&gt;first);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;          }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="keywordflow">if</span> (!CanAdd) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="comment">// Even worse, this child could conflict with another node already</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="comment">// selected for the DAG. If that is the case, ignore this child.</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> <a class="code" href="classT.html">T</a> = PrunedDAG.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(),</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;             E2 = PrunedDAG.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>(); <a class="code" href="classT.html">T</a> != E2; ++<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classT.html">T</a>-&gt;first == C-&gt;first.first ||</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;              <a class="code" href="classT.html">T</a>-&gt;first == C-&gt;first.second ||</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;              <a class="code" href="classT.html">T</a>-&gt;second == C-&gt;first.first ||</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;              <a class="code" href="classT.html">T</a>-&gt;second == C-&gt;first.second ||</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;              pairsConflict(*<a class="code" href="classT.html">T</a>, C-&gt;first, PairableInstUsers,</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserMap : 0,</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserPairSet : 0)) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            CanAdd = <span class="keyword">false</span>;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;          }</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;          CurrentPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(*<a class="code" href="classT.html">T</a>);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="keywordflow">if</span> (!CanAdd) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="comment">// And check the queue too...</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;ValuePairWithDepth&gt;::iterator</a> C2 = Q.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;             E2 = Q.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); C2 != E2; ++C2) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;          <span class="keywordflow">if</span> (C2-&gt;first.first == C-&gt;first.first ||</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;              C2-&gt;first.first == C-&gt;first.second ||</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;              C2-&gt;first.second == C-&gt;first.first ||</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;              C2-&gt;first.second == C-&gt;first.second ||</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;              pairsConflict(C2-&gt;first, C-&gt;first, PairableInstUsers,</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserMap : 0,</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserPairSet : 0)) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            CanAdd = <span class="keyword">false</span>;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;          }</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;          CurrentPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(C2-&gt;first);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <span class="keywordflow">if</span> (!CanAdd) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="comment">// Last but not least, check for a conflict with any of the</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <span class="comment">// already-chosen pairs.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> C2 =</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;              ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), E2 = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>();</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;             C2 != E2; ++C2) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;          <span class="keywordflow">if</span> (pairsConflict(*C2, C-&gt;first, PairableInstUsers,</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserMap : 0,</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                            UseCycleCheck ? &amp;PairableInstUserPairSet : 0)) {</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            CanAdd = <span class="keyword">false</span>;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;          }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;          CurrentPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(*C2);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <span class="keywordflow">if</span> (!CanAdd) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;        <span class="comment">// To check for non-trivial cycles formed by the addition of the</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="comment">// current pair we&#39;ve formed a list of all relevant pairs, now use a</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        <span class="comment">// graph walk to check for a cycle. We start from the current pair and</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="comment">// walk the use dag to see if we again reach the current pair. If we</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="comment">// do, then the current pair is rejected.</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="comment">// FIXME: It may be more efficient to use a topological-ordering</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="comment">// algorithm to improve the cycle check. This should be investigated.</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="keywordflow">if</span> (UseCycleCheck &amp;&amp;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            pairWillFormCycle(C-&gt;first, PairableInstUserMap, CurrentPairs))</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="comment">// This child can be added, but we may have chosen it in preference</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="comment">// to an already-selected child. Check for this here, and if a</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="comment">// conflict is found, then remove the previously-selected child</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="comment">// before adding this one in its place.</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;ValuePairWithDepth&gt;::iterator</a> C2</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;              = BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(); C2 != BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();) {</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;          <span class="keywordflow">if</span> (C2-&gt;first.first == C-&gt;first.first ||</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;              C2-&gt;first.first == C-&gt;first.second ||</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;              C2-&gt;first.second == C-&gt;first.first ||</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;              C2-&gt;first.second == C-&gt;first.second ||</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;              pairsConflict(C2-&gt;first, C-&gt;first, PairableInstUsers))</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            C2 = BestChildren.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(C2);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            ++C2;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ValuePairWithDepth(C-&gt;first, C-&gt;second));</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      }</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;ValuePairWithDepth&gt;::iterator</a> C</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            = BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E2 = BestChildren.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;           C != E2; ++<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordtype">size_t</span> DepthF = getDepthFactor(C-&gt;first.first);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        Q.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ValuePairWithDepth(C-&gt;first, QTop.second+DepthF));</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      }</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    } <span class="keywordflow">while</span> (!Q.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// This function finds the best dag of mututally-compatible connected</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// pairs, given the choice of root pairs as an iterator range.</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="keywordtype">void</span> BBVectorize::findBestDAGFor(</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;              std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps,</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;PairableInstUserMap,</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> &amp;PairableInstUserPairSet,</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;              <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;BestDAG, <span class="keywordtype">size_t</span> &amp;BestMaxDepth,</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;              <span class="keywordtype">int</span> &amp;BestEffSize, <a class="code" href="classllvm_1_1Value.html">Value</a> *II, std::vector&lt;Value *&gt;&amp;JJ,</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;              <span class="keywordtype">bool</span> UseCycleCheck) {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator J = JJ.begin(), JE = JJ.end();</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;         J != JE; ++J) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      ValuePair IJ(II, *J);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="keywordflow">if</span> (!CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(IJ))</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="comment">// Before going any further, make sure that this pair does not</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="comment">// conflict with any already-selected pairs (see comment below</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      <span class="comment">// near the DAG pruning for more details).</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> ChosenPairSet;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="keywordtype">bool</span> DoesConflict = <span class="keyword">false</span>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> C = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;           E = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); C != E; ++<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="keywordflow">if</span> (pairsConflict(*C, IJ, PairableInstUsers,</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                          UseCycleCheck ? &amp;PairableInstUserMap : 0,</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                          UseCycleCheck ? &amp;PairableInstUserPairSet : 0)) {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;          DoesConflict = <span class="keyword">true</span>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        }</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        ChosenPairSet.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(*C);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">if</span> (DoesConflict) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <span class="keywordflow">if</span> (UseCycleCheck &amp;&amp;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;          pairWillFormCycle(IJ, PairableInstUserMap, ChosenPairSet))</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, size_t&gt;</a> DAG;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      buildInitialDAGFor(CandidatePairs, CandidatePairsSet,</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                          PairableInsts, ConnectedPairs,</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                          PairableInstUsers, ChosenPairs, DAG, IJ);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="comment">// Because we&#39;ll keep the child with the largest depth, the largest</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="comment">// depth is still the same in the unpruned DAG.</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a> = DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(IJ);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: found DAG for pair {&quot;</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                   &lt;&lt; *IJ.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *IJ.second &lt;&lt; <span class="stringliteral">&quot;} of depth &quot;</span> &lt;&lt;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                   MaxDepth &lt;&lt; <span class="stringliteral">&quot; and size &quot;</span> &lt;&lt; DAG.<a class="code" href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">size</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <span class="comment">// At this point the DAG has been constructed, but, may contain</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <span class="comment">// contradictory children (meaning that different children of</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="comment">// some dag node may be attempting to fuse the same instruction).</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="comment">// So now we walk the dag again, in the case of a conflict,</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="comment">// keep only the child with the largest depth. To break a tie,</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="comment">// favor the first child.</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> PrunedDAG;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      pruneDAGFor(CandidatePairs, PairableInsts, ConnectedPairs,</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                   PairableInstUsers, PairableInstUserMap,</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                   PairableInstUserPairSet,</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                   ChosenPairs, DAG, PrunedDAG, IJ, UseCycleCheck);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="keywordtype">int</span> EffSize = 0;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (TTI) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> PrunedDAGInstrs;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = PrunedDAG.begin(),</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;             E = PrunedDAG.end(); <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> != E; ++<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;          PrunedDAGInstrs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;          PrunedDAGInstrs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        }</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="comment">// The set of pairs that have already contributed to the total cost.</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> IncomingPairs;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="comment">// If the cost model were perfect, this might not be necessary; but we</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="comment">// need to make sure that we don&#39;t get stuck vectorizing our own</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        <span class="comment">// shuffle chains.</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordtype">bool</span> HasNontrivialInsts = <span class="keyword">false</span>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <span class="comment">// The node weights represent the cost savings associated with</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="comment">// fusing the pair of instructions.</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = PrunedDAG.begin(),</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;             E = PrunedDAG.end(); <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> != E; ++<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;ShuffleVectorInst&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first) &amp;&amp;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;              !isa&lt;InsertElementInst&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first) &amp;&amp;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;              !isa&lt;ExtractElementInst&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first))</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            HasNontrivialInsts = <span class="keyword">true</span>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;          <span class="keywordtype">bool</span> FlipOrder = <span class="keyword">false</span>;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;          <span class="keywordflow">if</span> (getDepthFactor(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first)) {</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordtype">int</span> ESContrib = CandidatePairCostSavings.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*S)-&gt;second;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tweight {&quot;</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                   &lt;&lt; *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second &lt;&lt; <span class="stringliteral">&quot;} = &quot;</span> &lt;&lt;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                   ESContrib &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            EffSize += ESContrib;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;          }</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;          <span class="comment">// The edge weights contribute in a negative sense: they represent</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;          <span class="comment">// the cost of shuffles.</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator SS =</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;          <span class="keywordflow">if</span> (SS != ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="keywordtype">unsigned</span> NumDepsDirect = 0, NumDepsSwap = 0;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="classT.html">T</a> = SS-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                 TE = SS-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="classT.html">T</a> != TE; ++<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>) {</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;              VPPair Q(*<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, *<a class="code" href="classT.html">T</a>);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;              <span class="keywordflow">if</span> (!PrunedDAG.count(Q.second))</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;::iterator</a> R =</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(VPPair(Q.second, Q.first));</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;              assert(R != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                     <span class="stringliteral">&quot;Cannot find pair connection type&quot;</span>);</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;              <span class="keywordflow">if</span> (R-&gt;second == PairConnectionDirect)</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                ++NumDepsDirect;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R-&gt;second == PairConnectionSwap)</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                ++NumDepsSwap;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            }</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <span class="comment">// If there are more swaps than direct connections, then</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="comment">// the pair order will be flipped during fusion. So the real</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="comment">// number of swaps is the minimum number.</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            FlipOrder = !FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) &amp;&amp;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;              ((NumDepsSwap &gt; NumDepsDirect) ||</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second, <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first)));</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="classT.html">T</a> = SS-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                 TE = SS-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="classT.html">T</a> != TE; ++<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>) {</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;              VPPair Q(*<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, *<a class="code" href="classT.html">T</a>);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;              <span class="keywordflow">if</span> (!PrunedDAG.count(Q.second))</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;::iterator</a> R =</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(VPPair(Q.second, Q.first));</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;              assert(R != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                     <span class="stringliteral">&quot;Cannot find pair connection type&quot;</span>);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty1 = Q.second.first-&gt;getType(),</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                   *Ty2 = Q.second.second-&gt;getType();</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = getVecTypeForPair(Ty1, Ty2);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;              <span class="keywordflow">if</span> ((R-&gt;second == PairConnectionDirect &amp;&amp; FlipOrder) ||</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                  (R-&gt;second == PairConnectionSwap &amp;&amp; !FlipOrder)  ||</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                  R-&gt;second == PairConnectionSplat) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                <span class="keywordtype">int</span> ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                                                   VTy, VTy);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                <span class="keywordflow">if</span> (VTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>() == 2) {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                  <span class="keywordflow">if</span> (R-&gt;second == PairConnectionSplat)</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                    ESContrib = std::min(ESContrib, (<span class="keywordtype">int</span>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">getShuffleCost</a>(</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                      <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796">TargetTransformInfo::SK_Broadcast</a>, VTy));</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                    ESContrib = std::min(ESContrib, (<span class="keywordtype">int</span>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">getShuffleCost</a>(</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                      <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">TargetTransformInfo::SK_Reverse</a>, VTy));</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                }</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcost {&quot;</span> &lt;&lt;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                  *Q.second.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *Q.second.second &lt;&lt;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                    <span class="stringliteral">&quot;} -&gt; {&quot;</span> &lt;&lt;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                  *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second &lt;&lt; <span class="stringliteral">&quot;} = &quot;</span> &lt;&lt;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                   ESContrib &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                EffSize -= ESContrib;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;              }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            }</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;          }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;          <span class="comment">// Compute the cost of outgoing edges. We assume that edges outgoing</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;          <span class="comment">// to shuffles, inserts or extracts can be merged, and so contribute</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;          <span class="comment">// no additional cost.</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first-&gt;getType()-&gt;isVoidTy()) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty1 = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first-&gt;getType(),</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                 *Ty2 = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second-&gt;getType();</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = getVecTypeForPair(Ty1, Ty2);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            <span class="keywordtype">bool</span> NeedsExtraction = <span class="keyword">false</span>;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> I = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first-&gt;use_begin(),</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                 IE = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first-&gt;use_end(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *SI = dyn_cast&lt;ShuffleVectorInst&gt;(*I)) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                <span class="comment">// Shuffle can be folded if it has no other input</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;              }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;              <span class="keywordflow">if</span> (isa&lt;ExtractElementInst&gt;(*I))</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;              <span class="keywordflow">if</span> (PrunedDAGInstrs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*I))</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;              NeedsExtraction = <span class="keyword">true</span>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <span class="keywordflow">if</span> (NeedsExtraction) {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;              <span class="keywordtype">int</span> ESContrib;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;              <span class="keywordflow">if</span> (Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                                               Ty1, VTy);</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                ESContrib = std::min(ESContrib, (<span class="keywordtype">int</span>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">getShuffleCost</a>(</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                  <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecafd6c03f570400fcb24d861aa21ddffe9">TargetTransformInfo::SK_ExtractSubvector</a>, VTy, 0, Ty1));</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;              } <span class="keywordflow">else</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                                    <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">Instruction::ExtractElement</a>, VTy, 0);</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;              <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcost {&quot;</span> &lt;&lt;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first &lt;&lt; <span class="stringliteral">&quot;} = &quot;</span> &lt;&lt; ESContrib &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;              EffSize -= ESContrib;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;            }</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            NeedsExtraction = <span class="keyword">false</span>;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> I = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second-&gt;use_begin(),</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                 IE = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second-&gt;use_end(); I != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *SI = dyn_cast&lt;ShuffleVectorInst&gt;(*I)) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                <span class="comment">// Shuffle can be folded if it has no other input</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;              }</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;              <span class="keywordflow">if</span> (isa&lt;ExtractElementInst&gt;(*I))</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;              <span class="keywordflow">if</span> (PrunedDAGInstrs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(*I))</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;              NeedsExtraction = <span class="keyword">true</span>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            }</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            <span class="keywordflow">if</span> (NeedsExtraction) {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;              <span class="keywordtype">int</span> ESContrib;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;              <span class="keywordflow">if</span> (Ty2-&gt;isVectorTy()) {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                                               Ty2, VTy);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                ESContrib = std::min(ESContrib, (<span class="keywordtype">int</span>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">getShuffleCost</a>(</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                  <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecafd6c03f570400fcb24d861aa21ddffe9">TargetTransformInfo::SK_ExtractSubvector</a>, VTy,</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                  Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() ? Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>() : 1, Ty2));</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;              } <span class="keywordflow">else</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                    <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">Instruction::ExtractElement</a>, VTy, 1);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;              <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcost {&quot;</span> &lt;&lt;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second &lt;&lt; <span class="stringliteral">&quot;} = &quot;</span> &lt;&lt; ESContrib &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;              EffSize -= ESContrib;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;          }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;          <span class="comment">// Compute the cost of incoming edges.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;LoadInst&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first) &amp;&amp; !isa&lt;StoreInst&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first)) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *S1 = cast&lt;Instruction&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first),</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                        *S2 = cast&lt;Instruction&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> o = 0; o &lt; S1-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); ++o) {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;              <a class="code" href="classllvm_1_1Value.html">Value</a> *O1 = S1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(o), *O2 = S2-&gt;getOperand(o);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;              <span class="comment">// Combining constants into vector constants (or small vector</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;              <span class="comment">// constants into larger ones are assumed free).</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;              <span class="keywordflow">if</span> (isa&lt;Constant&gt;(O1) &amp;&amp; isa&lt;Constant&gt;(O2))</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;              <span class="keywordflow">if</span> (FlipOrder)</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(O1, O2);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;              ValuePair VP  = ValuePair(O1, O2);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;              ValuePair VPR = ValuePair(O2, O1);</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;              <span class="comment">// Internal edges are not handled here.</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;              <span class="keywordflow">if</span> (PrunedDAG.count(VP) || PrunedDAG.count(VPR))</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty1 = O1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                   *Ty2 = O2-&gt;getType();</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *VTy = getVecTypeForPair(Ty1, Ty2);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;              <span class="comment">// Combining vector operations of the same type is also assumed</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;              <span class="comment">// folded with other operations.</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;              <span class="keywordflow">if</span> (Ty1 == Ty2) {</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                <span class="comment">// If both are insert elements, then both can be widened.</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                <a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> *IEO1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a>&gt;(O1),</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                                  *IEO2 = dyn_cast&lt;InsertElementInst&gt;(O2);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                <span class="keywordflow">if</span> (IEO1 &amp;&amp; IEO2 &amp;&amp; isPureIEChain(IEO1) &amp;&amp; isPureIEChain(IEO2))</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                <span class="comment">// If both are extract elements, and both have the same input</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                <span class="comment">// type, then they can be replaced with a shuffle</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                <a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a> *EIO1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a>&gt;(O1),</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                                   *EIO2 = dyn_cast&lt;ExtractElementInst&gt;(O2);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                <span class="keywordflow">if</span> (EIO1 &amp;&amp; EIO2 &amp;&amp;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                    EIO1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() ==</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                      EIO2-&gt;getOperand(0)-&gt;getType())</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                <span class="comment">// If both are a shuffle with equal operand types and only two</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                <span class="comment">// unqiue operands, then they can be replaced with a single</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="comment">// shuffle</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *SIO1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>&gt;(O1),</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                                  *SIO2 = dyn_cast&lt;ShuffleVectorInst&gt;(O2);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                <span class="keywordflow">if</span> (SIO1 &amp;&amp; SIO2 &amp;&amp;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                    SIO1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() ==</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                      SIO2-&gt;getOperand(0)-&gt;getType()) {</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;Value *, 4&gt;</a> SIOps;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                  SIOps.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(SIO1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                  SIOps.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(SIO1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                  SIOps.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(SIO2-&gt;getOperand(0));</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                  SIOps.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(SIO2-&gt;getOperand(1));</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                  <span class="keywordflow">if</span> (SIOps.<a class="code" href="classllvm_1_1SmallSet.html#a12d5f426acafa2dea032861636976889">size</a>() &lt;= 2)</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                }</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;              }</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;              <span class="keywordtype">int</span> ESContrib;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;              <span class="comment">// This pair has already been formed.</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;              <span class="keywordflow">if</span> (IncomingPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(VP)) {</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IncomingPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(VPR)) {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                                               VTy, VTy);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                <span class="keywordflow">if</span> (VTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>() == 2)</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                  ESContrib = std::min(ESContrib, (<span class="keywordtype">int</span>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">getShuffleCost</a>(</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                    <a class="code" href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">TargetTransformInfo::SK_Reverse</a>, VTy));</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; !Ty2-&gt;isVectorTy()) {</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                                    Instruction::InsertElement, VTy, 0);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                ESContrib += (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                                     Instruction::InsertElement, VTy, 1);</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                <span class="comment">// O1 needs to be inserted into a vector of size O2, and then</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                <span class="comment">// both need to be shuffled together.</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                                    Instruction::InsertElement, Ty2, 0);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                ESContrib += (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                                                VTy, Ty2);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Ty2-&gt;isVectorTy()) {</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                <span class="comment">// O2 needs to be inserted into a vector of size O1, and then</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <span class="comment">// both need to be shuffled together.</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">getVectorInstrCost</a>(</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                                    Instruction::InsertElement, Ty1, 0);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                ESContrib += (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                                                VTy, Ty1);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;              } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                <a class="code" href="classllvm_1_1Type.html">Type</a> *TyBig = Ty1, *TySmall = Ty2;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                <span class="keywordflow">if</span> (Ty2-&gt;getVectorNumElements() &gt; Ty1-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>())</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                  <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TyBig, TySmall);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                ESContrib = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                                               VTy, TyBig);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                <span class="keywordflow">if</span> (TyBig != TySmall)</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                  ESContrib += (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) getInstrCost(Instruction::ShuffleVector,</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                                                  TyBig, TySmall);</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;              }</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;              <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcost {&quot;</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                     &lt;&lt; *O1 &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *O2 &lt;&lt; <span class="stringliteral">&quot;} = &quot;</span> &lt;&lt;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                     ESContrib &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;              EffSize -= ESContrib;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;              IncomingPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(VP);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            }</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;          }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        }</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <span class="keywordflow">if</span> (!HasNontrivialInsts) {</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                <span class="stringliteral">&quot;\tNo non-trivial instructions in DAG;&quot;</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                <span class="stringliteral">&quot; override to zero effective size\n&quot;</span>);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;          EffSize = 0;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = PrunedDAG.begin(),</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;             E = PrunedDAG.end(); <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> != E; ++<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;          EffSize += (<span class="keywordtype">int</span>) getDepthFactor(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a>)</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;             <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: found pruned DAG for pair {&quot;</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;             &lt;&lt; *IJ.first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *IJ.second &lt;&lt; <span class="stringliteral">&quot;} of depth &quot;</span> &lt;&lt;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;             MaxDepth &lt;&lt; <span class="stringliteral">&quot; and size &quot;</span> &lt;&lt; PrunedDAG.size() &lt;&lt;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            <span class="stringliteral">&quot; (effective size: &quot;</span> &lt;&lt; EffSize &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="keywordflow">if</span> (((TTI &amp;&amp; !<a class="code" href="BBVectorize_8cpp.html#a6ab503e20bc728e8ac9a551e0c230ad4">UseChainDepthWithTI</a>) ||</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            MaxDepth &gt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#ae73f97ea01ec81dfd2ae0b57dab859e1">ReqChainDepth</a>) &amp;&amp;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;          EffSize &gt; 0 &amp;&amp; EffSize &gt; BestEffSize) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        BestMaxDepth = <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        BestEffSize = EffSize;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        BestDAG = PrunedDAG;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      }</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    }</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="comment">// Given the list of candidate pairs, this function selects those</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="comment">// that will be fused into vector instructions.</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <span class="keywordtype">void</span> BBVectorize::choosePairs(</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;CandidatePairs,</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;CandidatePairsSet,</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, int&gt;</a> &amp;CandidatePairCostSavings,</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps,</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;PairableInstUsers,</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a>&amp; ChosenPairs) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="keywordtype">bool</span> UseCycleCheck =</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;     CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>() &lt;= Config.<a class="code" href="structllvm_1_1VectorizeConfig.html#abd076ee72a1d857c0804172a2e13aedf">MaxCandPairsForCycleCheck</a>;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt; CandidatePairs2;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> I = CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(),</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;         E = CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      std::vector&lt;Value *&gt; &amp;JJ = CandidatePairs2[I-&gt;second];</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      <span class="keywordflow">if</span> (JJ.empty()) JJ.reserve(32);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      JJ.push_back(I-&gt;first);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt; PairableInstUserMap;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;VPPair&gt;</a> PairableInstUserPairSet;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator I = PairableInsts.begin(),</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;         E = PairableInsts.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="comment">// The number of possible pairings for this variable:</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordtype">size_t</span> NumChoices = CandidatePairs.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(*I).size();</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <span class="keywordflow">if</span> (!NumChoices) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      std::vector&lt;Value *&gt; &amp;JJ = CandidatePairs[*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="comment">// The best pair to choose and its dag:</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordtype">size_t</span> BestMaxDepth = 0;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordtype">int</span> BestEffSize = 0;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> BestDAG;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      findBestDAGFor(CandidatePairs, CandidatePairsSet,</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                      CandidatePairCostSavings,</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                      PairableInsts, FixedOrderPairs, PairConnectionTypes,</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                      ConnectedPairs, ConnectedPairDeps,</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                      PairableInstUsers, PairableInstUserMap,</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                      PairableInstUserPairSet, ChosenPairs,</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                      BestDAG, BestMaxDepth, BestEffSize, *I, JJ,</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                      UseCycleCheck);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <span class="keywordflow">if</span> (BestDAG.<a class="code" href="classllvm_1_1DenseSet.html#a55edf1f4be1e3ce4e0c338166a5e5d3e">empty</a>())</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <span class="comment">// A dag has been chosen (or not) at this point. If no dag was</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="comment">// chosen, then this instruction, I, cannot be paired (and is no longer</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <span class="comment">// considered).</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: selected pairs in the best DAG for: &quot;</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                   &lt;&lt; *cast&lt;Instruction&gt;(*I) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = BestDAG.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(),</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;           SE2 = BestDAG.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>(); <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> != SE2; ++<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="comment">// Insert the members of this dag into the list of chosen pairs.</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(ValuePair(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first, <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second));</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: selected pair: &quot;</span> &lt;&lt; *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first &lt;&lt; <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;               *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="comment">// Remove all candidate pairs that have values in the chosen dag.</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        std::vector&lt;Value *&gt; &amp;KK = CandidatePairs[<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first];</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator K = KK.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(), KE = KK.end();</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;             K != KE; ++K) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;          <span class="keywordflow">if</span> (*K == <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second)</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;          CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">erase</a>(ValuePair(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first, *K));</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        }</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        std::vector&lt;Value *&gt; &amp;LL = CandidatePairs2[<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second];</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator L = LL.begin(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a98d7f1cf15bd78fd7c7c68e6543a9588">LE</a> = LL.end();</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;             L != <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a98d7f1cf15bd78fd7c7c68e6543a9588">LE</a>; ++L) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;          <span class="keywordflow">if</span> (*L == <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first)</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;          CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">erase</a>(ValuePair(*L, <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second));</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        }</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        std::vector&lt;Value *&gt; &amp;MM = CandidatePairs[<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second];</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = MM.begin(), ME = MM.end();</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;             <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> != ME; ++<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;          assert(*<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> != <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first &amp;&amp; <span class="stringliteral">&quot;Flipped pair in candidate list?&quot;</span>);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;          CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">erase</a>(ValuePair(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second, *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>));</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        }</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        std::vector&lt;Value *&gt; &amp;NN = CandidatePairs2[<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first];</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = NN.begin(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a> = NN.end();</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;             <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a>; ++<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;          assert(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;second &amp;&amp; <span class="stringliteral">&quot;Flipped pair in candidate list?&quot;</span>);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;          CandidatePairsSet.<a class="code" href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">erase</a>(ValuePair(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;first));</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        }</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: selected &quot;</span> &lt;&lt; ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">size</a>() &lt;&lt; <span class="stringliteral">&quot; pairs.\n&quot;</span>);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  }</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  std::string getReplacementName(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <span class="keywordtype">bool</span> IsInput, <span class="keywordtype">unsigned</span> o,</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                     <span class="keywordtype">unsigned</span> n = 0) {</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1Value.html#a9b6d1ca60deddf2f2c25cfea671f617c">hasName</a>())</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="keywordflow">return</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + (IsInput ? <span class="stringliteral">&quot;.v.i&quot;</span> : <span class="stringliteral">&quot;.v.r&quot;</span>) + <a class="code" href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">utostr</a>(o) +</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;             (n &gt; 0 ? <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">utostr</a>(n) : <span class="stringliteral">&quot;&quot;</span>)).str();</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// Returns the value that is to be used as the pointer input to the vector</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">// instruction that fuses I with J.</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BBVectorize::getReplacementPointerInput(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context,</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">unsigned</span> o) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IPtr, *JPtr;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordtype">unsigned</span> IAlignment, JAlignment, IAddressSpace, JAddressSpace;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    int64_t OffsetInElmts;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="comment">// Note: the analysis might fail here, that is why the pair order has</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="comment">// been precomputed (OffsetInElmts must be unused here).</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    (void) getPairPtrInfo(I, J, IPtr, JPtr, IAlignment, JAlignment,</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                          IAddressSpace, JAddressSpace,</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                          OffsetInElmts, <span class="keyword">false</span>);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="comment">// The pointer value is taken to be the one with the lowest offset.</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *VPtr = IPtr;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeI = IPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeJ = JPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VArgType = getVecTypeForPair(ArgTypeI, ArgTypeJ);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VArgPtrType</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(VArgType,</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                         IPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>());</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(VPtr, VArgPtrType, getReplacementName(I, <span class="keyword">true</span>, o),</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                        <span class="comment">/* insert before */</span> I);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="keywordtype">void</span> BBVectorize::fillNewShuffleMask(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                     <span class="keywordtype">unsigned</span> MaskOffset, <span class="keywordtype">unsigned</span> NumInElem,</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                     <span class="keywordtype">unsigned</span> NumInElem1, <span class="keywordtype">unsigned</span> IdxOffset,</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                     std::vector&lt;Constant*&gt; &amp;Mask) {</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordtype">unsigned</span> NumElem1 = J-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 0; v &lt; NumElem1; ++v) {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <span class="keywordtype">int</span> m = cast&lt;ShuffleVectorInst&gt;(J)-&gt;getMaskValue(v);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="keywordflow">if</span> (m &lt; 0) {</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        Mask[v+MaskOffset] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <span class="keywordtype">unsigned</span> mm = m + (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>) IdxOffset;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="keywordflow">if</span> (m &gt;= (<span class="keywordtype">int</span>) NumInElem1)</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;          mm += (<span class="keywordtype">int</span>) NumInElem;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        Mask[v+MaskOffset] =</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), mm);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      }</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    }</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// Returns the value that is to be used as the vector-shuffle mask to the</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="comment">// vector instruction that fuses I with J.</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BBVectorize::getReplacementShuffleMask(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context,</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="comment">// This is the shuffle mask. We need to append the second</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="comment">// mask to the first, and the numbers need to be adjusted.</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeJ = J-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *VArgType = getVecTypeForPair(ArgTypeI, ArgTypeJ);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordtype">unsigned</span> NumElemI = ArgTypeI-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="comment">// Get the total number of elements in the fused vector type.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="comment">// By definition, this must equal the number of elements in</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">// the final mask.</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="keywordtype">unsigned</span> NumElem = VArgType-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    std::vector&lt;Constant*&gt; Mask(NumElem);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OpTypeI = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordtype">unsigned</span> NumInElemI = OpTypeI-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OpTypeJ = J-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordtype">unsigned</span> NumInElemJ = OpTypeJ-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="comment">// The fused vector will be:</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="comment">// -----------------------------------------------------</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <span class="comment">// | NumInElemI | NumInElemJ | NumInElemI | NumInElemJ |</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="comment">// -----------------------------------------------------</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="comment">// from which we&#39;ll extract NumElem total elements (where the first NumElemI</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="comment">// of them come from the mask in I and the remainder come from the mask</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="comment">// in J.</span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="comment">// For the mask from the first pair...</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    fillNewShuffleMask(Context, I, 0,        NumInElemJ, NumInElemI,</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                       0,          Mask);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="comment">// For the mask from the second pair...</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    fillNewShuffleMask(Context, J, NumElemI, NumInElemI, NumInElemJ,</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                       NumInElemI, Mask);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::expandIEChain(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">unsigned</span> o, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;LOp,</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                                  <span class="keywordtype">unsigned</span> numElemL,</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                                  <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeL, <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeH,</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                                  <span class="keywordtype">bool</span> IBeforeJ, <span class="keywordtype">unsigned</span> IdxOff) {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordtype">bool</span> ExpandedIEChain = <span class="keyword">false</span>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> *LIE = dyn_cast&lt;InsertElementInst&gt;(LOp)) {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="comment">// If we have a pure insertelement chain, then this can be rewritten</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="comment">// into a chain that directly builds the larger type.</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">if</span> (isPureIEChain(LIE)) {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> VectElemts(numElemL,</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;          <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeL-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()));</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        <a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> *LIENext = LIE;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        <span class="keywordflow">do</span> {</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;          <span class="keywordtype">unsigned</span> Idx =</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            cast&lt;ConstantInt&gt;(LIENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2))-&gt;getSExtValue();</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;          VectElemts[Idx] = LIENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        } <span class="keywordflow">while</span> ((LIENext =</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                   dyn_cast&lt;InsertElementInst&gt;(LIENext-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))));</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        LIENext = 0;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LIEPrev = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeH);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; numElemL; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;          <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(VectElemts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;          LIENext = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(LIEPrev, VectElemts[i],</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                             <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context),</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                                              i + IdxOff),</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                             getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                                                <span class="keyword">true</span>, o, i+1));</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;          LIENext-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;          LIEPrev = LIENext;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        }</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        LOp = LIENext ? (<a class="code" href="classllvm_1_1Value.html">Value</a>*) LIENext : <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeH);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        ExpandedIEChain = <span class="keyword">true</span>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      }</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="keywordflow">return</span> ExpandedIEChain;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  }</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> getNumScalarElements(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VecTy = dyn_cast&lt;VectorType&gt;(Ty))</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <span class="keywordflow">return</span> VecTy-&gt;getNumElements();</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  }</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="comment">// Returns the value to be used as the specified operand of the vector</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="comment">// instruction that fuses I with J.</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BBVectorize::getReplacementInput(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <span class="keywordtype">unsigned</span> o, <span class="keywordtype">bool</span> IBeforeJ) {</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CV0 = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), 0);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CV1 = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), 1);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="comment">// Compute the fused vector type for this operand</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeI = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(o)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeJ = J-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(o)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VArgType = getVecTypeForPair(ArgTypeI, ArgTypeJ);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *L = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *<a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a> = J;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeL = ArgTypeI, *ArgTypeH = ArgTypeJ;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordtype">unsigned</span> numElemL = getNumScalarElements(ArgTypeL);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="keywordtype">unsigned</span> numElemH = getNumScalarElements(ArgTypeH);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LOp = L-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(o);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="CommandLine_8cpp.html#ad7e3230db455d730324e6a39a3ebef5f">HOp</a> = H-&gt;getOperand(o);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordtype">unsigned</span> numElem = VArgType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">// First, we check if we can reuse the &quot;original&quot; vector outputs (if these</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="comment">// exist). We might need a shuffle.</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a> *LEE = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a>&gt;(LOp);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a> *HEE = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a>&gt;(<a class="code" href="CommandLine_8cpp.html#ad7e3230db455d730324e6a39a3ebef5f">HOp</a>);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *LSV = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>&gt;(LOp);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *HSV = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>&gt;(<a class="code" href="CommandLine_8cpp.html#ad7e3230db455d730324e6a39a3ebef5f">HOp</a>);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <span class="comment">// FIXME: If we&#39;re fusing shuffle instructions, then we can&#39;t apply this</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="comment">// optimization. The input vectors to the shuffle might be a different</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="comment">// length from the shuffle outputs. Unfortunately, the replacement</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="comment">// shuffle mask has already been formed, and the mask entries are sensitive</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="comment">// to the sizes of the inputs.</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordtype">bool</span> IsSizeChangeShuffle =</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      isa&lt;ShuffleVectorInst&gt;(L) &amp;&amp;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        (LOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() || HOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != H-&gt;getType());</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">if</span> ((LEE || LSV) &amp;&amp; (HEE || HSV) &amp;&amp; !IsSizeChangeShuffle) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="comment">// We can have at most two unique vector inputs.</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="keywordtype">bool</span> CanUseInputs = <span class="keyword">true</span>;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *I1, *I2 = 0;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">if</span> (LEE) {</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        I1 = LEE-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        I1 = LSV-&gt;getOperand(0);</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        I2 = LSV-&gt;getOperand(1);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="keywordflow">if</span> (I2 == I1 || isa&lt;UndefValue&gt;(I2))</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;          I2 = 0;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      }</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  </div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <span class="keywordflow">if</span> (HEE) {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *I3 = HEE-&gt;getOperand(0);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <span class="keywordflow">if</span> (!I2 &amp;&amp; I3 != I1)</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;          I2 = I3;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I3 != I1 &amp;&amp; I3 != I2)</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;          CanUseInputs = <span class="keyword">false</span>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *I3 = HSV-&gt;getOperand(0);</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        <span class="keywordflow">if</span> (!I2 &amp;&amp; I3 != I1)</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;          I2 = I3;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I3 != I1 &amp;&amp; I3 != I2)</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;          CanUseInputs = <span class="keyword">false</span>;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">if</span> (CanUseInputs) {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *I4 = HSV-&gt;getOperand(1);</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(I4)) {</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            <span class="keywordflow">if</span> (!I2 &amp;&amp; I4 != I1)</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;              I2 = I4;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I4 != I1 &amp;&amp; I4 != I2)</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;              CanUseInputs = <span class="keyword">false</span>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;          }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        }</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">if</span> (CanUseInputs) {</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordtype">unsigned</span> LOpElem =</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;          cast&lt;Instruction&gt;(LOp)-&gt;getOperand(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;            -&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keywordtype">unsigned</span> HOpElem =</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;          cast&lt;Instruction&gt;(<a class="code" href="CommandLine_8cpp.html#ad7e3230db455d730324e6a39a3ebef5f">HOp</a>)-&gt;getOperand(0)-&gt;getType()</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            -&gt;getVectorNumElements();</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <span class="comment">// We have one or two input vectors. We need to map each index of the</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="comment">// operands to the index of the original vector.</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;int, int&gt;</a>, 8&gt;  II(numElem);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numElemL; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;          <span class="keywordtype">int</span> Idx, INum;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;          <span class="keywordflow">if</span> (LEE) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            Idx =</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;              cast&lt;ConstantInt&gt;(LEE-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;getSExtValue();</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            INum = LEE-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == I1 ? 0 : 1;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            Idx = LSV-&gt;getMaskValue(i);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            <span class="keywordflow">if</span> (Idx &lt; (<span class="keywordtype">int</span>) LOpElem) {</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;              INum = LSV-&gt;getOperand(0) == I1 ? 0 : 1;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;              Idx -= LOpElem;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;              INum = LSV-&gt;getOperand(1) == I1 ? 0 : 1;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            }</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;          }</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;          II[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = std::pair&lt;int, int&gt;(Idx, INum);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        }</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numElemH; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;          <span class="keywordtype">int</span> Idx, INum;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;          <span class="keywordflow">if</span> (HEE) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;            Idx =</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;              cast&lt;ConstantInt&gt;(HEE-&gt;getOperand(1))-&gt;getSExtValue();</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;            INum = HEE-&gt;getOperand(0) == I1 ? 0 : 1;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            Idx = HSV-&gt;getMaskValue(i);</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;            <span class="keywordflow">if</span> (Idx &lt; (<span class="keywordtype">int</span>) HOpElem) {</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;              INum = HSV-&gt;getOperand(0) == I1 ? 0 : 1;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;              Idx -= HOpElem;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;              INum = HSV-&gt;getOperand(1) == I1 ? 0 : 1;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            }</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;          }</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;          II[i + numElemL] = std::pair&lt;int, int&gt;(Idx, INum);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        }</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="comment">// We now have an array which tells us from which index of which</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="comment">// input vector each element of the operand comes.</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *I1T = cast&lt;VectorType&gt;(I1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        <span class="keywordtype">unsigned</span> I1Elem = I1T-&gt;<a class="code" href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <span class="keywordflow">if</span> (!I2) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;          <span class="comment">// In this case there is only one underlying vector input. Check for</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;          <span class="comment">// the trivial case where we can use the input directly.</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;          <span class="keywordflow">if</span> (I1Elem == numElem) {</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            <span class="keywordtype">bool</span> ElemInOrder = <span class="keyword">true</span>;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numElem; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;              <span class="keywordflow">if</span> (II[i].first != (<span class="keywordtype">int</span>) i &amp;&amp; II[i].first != -1) {</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                ElemInOrder = <span class="keyword">false</span>;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;              }</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            }</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            <span class="keywordflow">if</span> (ElemInOrder)</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;              <span class="keywordflow">return</span> I1;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;          }</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;          <span class="comment">// A shuffle is needed.</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;          std::vector&lt;Constant *&gt; Mask(numElem);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numElem; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            <span class="keywordtype">int</span> Idx = II[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            <span class="keywordflow">if</span> (Idx == -1)</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;              Mask[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;              Mask[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), Idx);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;          }</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> =</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(I1, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(I1T),</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                                  getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                                                     <span class="keyword">true</span>, o));</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;          S-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        }</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *I2T = cast&lt;VectorType&gt;(I2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="keywordtype">unsigned</span> I2Elem = I2T-&gt;<a class="code" href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="comment">// This input comes from two distinct vectors. The first step is to</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <span class="comment">// make sure that both vectors are the same length. If not, the</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <span class="comment">// smaller one will need to grow before they can be shuffled together.</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <span class="keywordflow">if</span> (I1Elem &lt; I2Elem) {</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;          std::vector&lt;Constant *&gt; Mask(I2Elem);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;          <span class="keywordtype">unsigned</span> v = 0;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;          <span class="keywordflow">for</span> (; v &lt; I1Elem; ++v)</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;          <span class="keywordflow">for</span> (; v &lt; I2Elem; ++v)</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewI1 =</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;            <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(I1, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(I1T),</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                                  getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                                                     <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;          NewI1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;          I1 = NewI1;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;          I1T = I2T;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;          I1Elem = I2Elem;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I1Elem &gt; I2Elem) {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;          std::vector&lt;Constant *&gt; Mask(I1Elem);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;          <span class="keywordtype">unsigned</span> v = 0;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;          <span class="keywordflow">for</span> (; v &lt; I2Elem; ++v)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;          <span class="keywordflow">for</span> (; v &lt; I1Elem; ++v)</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewI2 =</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;            <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(I2, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(I2T),</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                                  <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                                  getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                                                     <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;          NewI2-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;          I2 = NewI2;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;          I2T = I1T;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;          I2Elem = I1Elem;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        }</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <span class="comment">// Now that both I1 and I2 are the same length we can shuffle them</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="comment">// together (and use the result).</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        std::vector&lt;Constant *&gt; Mask(numElem);</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 0; v &lt; numElem; ++v) {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;          <span class="keywordflow">if</span> (II[v].first == -1) {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            <span class="keywordtype">int</span> Idx = II[v].first + II[v].second * I1Elem;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), Idx);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;          }</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        }</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewOp =</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;          <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(I1, I2, <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                                getReplacementName(IBeforeJ ? I : J, <span class="keyword">true</span>, o));</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        NewOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <span class="keywordflow">return</span> NewOp;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    }</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgType = ArgTypeL;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <span class="keywordflow">if</span> (numElemL &lt; numElemH) {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <span class="keywordflow">if</span> (numElemL == 1 &amp;&amp; expandIEChain(Context, I, J, o, HOp, numElemH,</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                                         ArgTypeL, VArgType, IBeforeJ, 1)) {</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <span class="comment">// This is another short-circuit case: we&#39;re combining a scalar into</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="comment">// a vector that is formed by an IE chain. We&#39;ve just expanded the IE</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="comment">// chain, now insert the scalar and we&#39;re done.</span></div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *S = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(HOp, LOp, CV0,</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                           getReplacementName(IBeforeJ ? I : J, <span class="keyword">true</span>, o));</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        S-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!expandIEChain(Context, I, J, o, LOp, numElemL, ArgTypeL,</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                                ArgTypeH, IBeforeJ)) {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="comment">// The two vector inputs to the shuffle must be the same length,</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;        <span class="comment">// so extend the smaller vector to be the same length as the larger one.</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NLOp;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;        <span class="keywordflow">if</span> (numElemL &gt; 1) {</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  </div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;          std::vector&lt;Constant *&gt; Mask(numElemH);</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;          <span class="keywordtype">unsigned</span> v = 0;</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;          <span class="keywordflow">for</span> (; v &lt; numElemL; ++v)</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;          <span class="keywordflow">for</span> (; v &lt; numElemH; ++v)</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    </div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;          NLOp = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(LOp, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeL),</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                                       getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                                                          <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;          NLOp = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeH), LOp, CV0,</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                                           getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                                                              <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        }</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  </div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        NLOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        LOp = NLOp;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      }</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      ArgType = ArgTypeH;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numElemL &gt; numElemH) {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;      <span class="keywordflow">if</span> (numElemH == 1 &amp;&amp; expandIEChain(Context, I, J, o, LOp, numElemL,</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                                         ArgTypeH, VArgType, IBeforeJ)) {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *S =</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;          <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(LOp, HOp, </div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context),</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                                                     numElemL),</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                                    getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                                                       <span class="keyword">true</span>, o));</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        S-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!expandIEChain(Context, I, J, o, HOp, numElemH, ArgTypeH,</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                                ArgTypeL, IBeforeJ)) {</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NHOp;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <span class="keywordflow">if</span> (numElemH &gt; 1) {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;          std::vector&lt;Constant *&gt; Mask(numElemL);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;          <span class="keywordtype">unsigned</span> v = 0;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;          <span class="keywordflow">for</span> (; v &lt; numElemH; ++v)</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;          <span class="keywordflow">for</span> (; v &lt; numElemL; ++v)</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            Mask[v] = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context));</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    </div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;          NHOp = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(HOp, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeH),</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                                       getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;                                                          <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;          NHOp = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ArgTypeL), HOp, CV0,</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                                           getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                                                              <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        }</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        NHOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        HOp = NHOp;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;      }</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    }</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <span class="keywordflow">if</span> (ArgType-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;      <span class="keywordtype">unsigned</span> numElem = VArgType-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>();</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      std::vector&lt;Constant*&gt; Mask(numElem);</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 0; v &lt; numElem; ++v) {</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <span class="keywordtype">unsigned</span> Idx = v;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="comment">// If the low vector was expanded, we need to skip the extra</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="comment">// undefined entries.</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <span class="keywordflow">if</span> (v &gt;= numElemL &amp;&amp; numElemH &gt; numElemL)</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;          Idx += (numElemH - numElemL);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        Mask[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), Idx);</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      }</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(LOp, HOp,</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                          <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Mask),</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;                          getReplacementName(IBeforeJ ? I : J, <span class="keyword">true</span>, o));</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      BV-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">return</span> BV;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BV1 = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                                          <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(VArgType), LOp, CV0,</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                                          getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                                                             <span class="keyword">true</span>, o, 1));</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    BV1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BV2 = <a class="code" href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">InsertElementInst::Create</a>(BV1, HOp, CV1,</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                                          getReplacementName(IBeforeJ ? I : J,</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                                                             <span class="keyword">true</span>, o, 2));</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    BV2-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(IBeforeJ ? J : I);</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="keywordflow">return</span> BV2;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  }</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <span class="comment">// This function creates an array of values that will be used as the inputs</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <span class="comment">// to the vector instruction that fuses I with J.</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <span class="keywordtype">void</span> BBVectorize::getReplacementInputsForPair(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context,</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J,</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;ReplacedOperands,</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                     <span class="keywordtype">bool</span> IBeforeJ) {</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordtype">unsigned</span> NumOperands = I-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>();</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a> = 0, o = NumOperands-1; <a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a> &lt; NumOperands; ++<a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a>, --o) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="comment">// Iterate backward so that we look at the store pointer</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      <span class="comment">// first and know whether or not we need to flip the inputs.</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(I) || (o == 1 &amp;&amp; isa&lt;StoreInst&gt;(I))) {</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        <span class="comment">// This is the pointer for a load/store instruction.</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        ReplacedOperands[o] = getReplacementPointerInput(Context, I, J, o);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(I)) {</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *F = cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;<a class="code" href="MemoryBuiltins_8cpp.html#afe56ced53524e16f248ee3878df10df6">getCalledFunction</a>();</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> IID = (<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a>) F-&gt;<a class="code" href="classllvm_1_1Function.html#a7e47131185becc5c96731a2e28441b77">getIntrinsicID</a>();</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <span class="keywordflow">if</span> (o == NumOperands-1) {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB = *I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;          <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *ArgTypeJ = J-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;          <a class="code" href="classllvm_1_1Type.html">Type</a> *VArgType = getVecTypeForPair(ArgTypeI, ArgTypeJ);</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;          ReplacedOperands[o] = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(M, IID, VArgType);</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IID == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36">Intrinsic::powi</a> &amp;&amp; o == 1) {</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;          <span class="comment">// The second argument of powi is a single integer and we&#39;ve already</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;          <span class="comment">// checked that both arguments are equal. As a result, we just keep</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;          <span class="comment">// I&#39;s second argument.</span></div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;          ReplacedOperands[o] = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(o);</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;        }</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ShuffleVectorInst&gt;(I) &amp;&amp; o == NumOperands-1) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        ReplacedOperands[o] = getReplacementShuffleMask(Context, I, J);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      }</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      ReplacedOperands[o] = getReplacementInput(Context, I, J, o, IBeforeJ);</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  }</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <span class="comment">// This function creates two values that represent the outputs of the</span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="comment">// original I and J instructions. These are generally vector shuffles</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <span class="comment">// or extracts. In many cases, these will end up being unused and, thus,</span></div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="comment">// eliminated by later passes.</span></div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="keywordtype">void</span> BBVectorize::replaceOutputsOfPair(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K,</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;InsertionPt,</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;K1, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;K2) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(I, K);</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(J, K);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IType = I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *JType = J-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VType = getVecTypeForPair(IType, JType);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      <span class="keywordtype">unsigned</span> numElem = VType-&gt;<a class="code" href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>();</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      <span class="keywordtype">unsigned</span> numElemI = getNumScalarElements(IType);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;      <span class="keywordtype">unsigned</span> numElemJ = getNumScalarElements(JType);</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="keywordflow">if</span> (IType-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        std::vector&lt;Constant*&gt; Mask1(numElemI), Mask2(numElemI);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 0; v &lt; numElemI; ++v) {</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;          Mask1[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;          Mask2[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), numElemJ+v);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;        }</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        K1 = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(K, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(VType),</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;                                   <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>( Mask1),</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                                   getReplacementName(K, <span class="keyword">false</span>, 1));</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CV0 = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), 0);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        K1 = <a class="code" href="classllvm_1_1ExtractElementInst.html#a671ded0c51dd6de0eaf145cde783d81e">ExtractElementInst::Create</a>(K, CV0,</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                                          getReplacementName(K, <span class="keyword">false</span>, 1));</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      <span class="keywordflow">if</span> (JType-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        std::vector&lt;Constant*&gt; Mask1(numElemJ), Mask2(numElemJ);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> v = 0; v &lt; numElemJ; ++v) {</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;          Mask1[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), v);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;          Mask2[v] = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), numElemI+v);</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        }</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;        K2 = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(K, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(VType),</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                                   <a class="code" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>( Mask2),</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                                   getReplacementName(K, <span class="keyword">false</span>, 2));</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CV1 = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Context), numElem-1);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        K2 = <a class="code" href="classllvm_1_1ExtractElementInst.html#a671ded0c51dd6de0eaf145cde783d81e">ExtractElementInst::Create</a>(K, CV1,</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;                                          getReplacementName(K, <span class="keyword">false</span>, 2));</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      }</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      K1-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(K);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      K2-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(K1);</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      InsertionPt = K2;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    }</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="comment">// Move all uses of the function I (including pairing-induced uses) after J.</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="keywordtype">bool</span> BBVectorize::canMoveUsesOfIAfterJ(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J) {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="comment">// Skip to the first instruction past I.</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> L = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(I));</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> WriteSet(*AA);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(I);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="keywordflow">for</span> (; cast&lt;Instruction&gt;(L) != J; ++L)</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      (<span class="keywordtype">void</span>) trackUsesOfI(Users, WriteSet, I, L, <span class="keyword">true</span>, &amp;LoadMoveSetPairs);</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    assert(cast&lt;Instruction&gt;(L) == J &amp;&amp;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;      <span class="stringliteral">&quot;Tracking has not proceeded far enough to check for dependencies&quot;</span>);</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="comment">// If J is now in the use set of I, then trackUsesOfI will return true</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <span class="comment">// and we have a dependency cycle (and the fusing operation must abort).</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">return</span> !trackUsesOfI(Users, WriteSet, I, J, <span class="keyword">true</span>, &amp;LoadMoveSetPairs);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  }</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="comment">// Move all uses of the function I (including pairing-induced uses) after J.</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <span class="keywordtype">void</span> BBVectorize::moveUsesOfIAfterJ(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;InsertionPt,</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J) {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="comment">// Skip to the first instruction past I.</span></div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> L = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(I));</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> WriteSet(*AA);</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(I);</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="keywordflow">for</span> (; cast&lt;Instruction&gt;(L) != J;) {</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <span class="keywordflow">if</span> (trackUsesOfI(Users, WriteSet, I, L, <span class="keyword">true</span>, &amp;LoadMoveSetPairs)) {</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        <span class="comment">// Move this instruction</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstToMove = L; ++L;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: moving: &quot;</span> &lt;&lt; *InstToMove &lt;&lt;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                        <span class="stringliteral">&quot; to after &quot;</span> &lt;&lt; *InsertionPt &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        InstToMove-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        InstToMove-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(InsertionPt);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        InsertionPt = InstToMove;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        ++L;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;      }</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    }</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  }</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="comment">// Collect all load instruction that are in the move set of a given first</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <span class="comment">// pair member.  These loads depend on the first instruction, I, and so need</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="comment">// to be moved after J (the second instruction) when the pair is fused.</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="keywordtype">void</span> BBVectorize::collectPairLoadMoveSet(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;LoadMoveSet,</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs,</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <span class="comment">// Skip to the first instruction past I.</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> L = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(I));</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> WriteSet(*AA);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>()) WriteSet.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(I);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">// Note: We cannot end the loop when we reach J because J could be moved</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="comment">// farther down the use chain by another instruction pairing. Also, J</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="comment">// could be before I if this is an inverted input.</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> E = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); cast&lt;Instruction&gt;(L) != E; ++L) {</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;      <span class="keywordflow">if</span> (trackUsesOfI(Users, WriteSet, I, L)) {</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        <span class="keywordflow">if</span> (L-&gt;mayReadFromMemory()) {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;          LoadMoveSet[L].push_back(I);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;          LoadMoveSetPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(L, I));</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;        }</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    }</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <span class="comment">// In cases where both load/stores and the computation of their pointers</span></div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <span class="comment">// are chosen for vectorization, we can end up in a situation where the</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <span class="comment">// aliasing analysis starts returning different query results as the</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="comment">// process of fusing instruction pairs continues. Because the algorithm</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <span class="comment">// relies on finding the same use dags here as were found earlier, we&#39;ll</span></div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="comment">// need to precompute the necessary aliasing information here and then</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="comment">// manually update it during the fusion process.</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <span class="keywordtype">void</span> BBVectorize::collectLoadMoveSet(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                     std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *, std::vector&lt;Value *&gt; &gt; &amp;LoadMoveSet,</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                     <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;LoadMoveSetPairs) {</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator PI = PairableInsts.begin(),</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;         PIE = PairableInsts.end(); PI != PIE; ++PI) {</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> P = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(*PI);</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;      <span class="keywordflow">if</span> (P == ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = cast&lt;Instruction&gt;(P-&gt;first);</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      collectPairLoadMoveSet(BB, ChosenPairs, LoadMoveSet,</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                             LoadMoveSetPairs, I);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;  }</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  <span class="comment">// When the first instruction in each pair is cloned, it will inherit its</span></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  <span class="comment">// parent&#39;s metadata. This metadata must be combined with that of the other</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  <span class="comment">// instruction in a safe way.</span></div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  <span class="keywordtype">void</span> BBVectorize::combineMetadata(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J) {</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, MDNode*&gt;</a>, 4&gt; Metadata;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    K-&gt;<a class="code" href="classllvm_1_1Instruction.html#afdbf7fbdf8b6e61904c6f718436b1f7b">getAllMetadataOtherThanDebugLoc</a>(Metadata);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, n = Metadata.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> = Metadata[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *JMD = J-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(Kind);</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *KMD = Metadata[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <span class="keywordflow">switch</span> (Kind) {</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(Kind, 0); <span class="comment">// Remove unknown metadata</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>:</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(Kind, <a class="code" href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">MDNode::getMostGenericTBAA</a>(JMD, KMD));</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3">LLVMContext::MD_fpmath</a>:</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(Kind, <a class="code" href="classllvm_1_1MDNode.html#a9d9f2d817781a31c771406d1f0acc9fb">MDNode::getMostGenericFPMath</a>(JMD, KMD));</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      }</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    }</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  }</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="comment">// This function fuses the chosen instruction pairs into vector instructions,</span></div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="comment">// taking care preserve any needed scalar outputs and, then, it reorders the</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <span class="comment">// remaining instructions as needed (users of the first member of the pair</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="comment">// need to be moved to after the location of the second member of the pair</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;  <span class="comment">// because the vector instruction is inserted in the location of the pair&#39;s</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="comment">// second member).</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="keywordtype">void</span> BBVectorize::fuseChosenPairs(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB,</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;             std::vector&lt;Value *&gt; &amp;PairableInsts,</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;ChosenPairs,</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;             <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> &amp;FixedOrderPairs,</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;</a> &amp;PairConnectionTypes,</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairs,</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;             <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;ValuePair, std::vector&lt;ValuePair&gt; &gt; &amp;ConnectedPairDeps) {</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a>&amp; Context = BB.<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>();</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="comment">// During the vectorization process, the order of the pairs to be fused</span></div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="comment">// could be flipped. So we&#39;ll add each pair, flipped, into the ChosenPairs</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="comment">// list. After a pair is fused, the flipped pair is removed from the list.</span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> FlippedPairs;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> P = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;         E = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); P != E; ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      FlippedPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(ValuePair(P-&gt;second, P-&gt;first));</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;ValuePair&gt;::iterator</a> P = FlippedPairs.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(),</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;         E = FlippedPairs.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>(); P != E; ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(*P);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt; LoadMoveSet;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ValuePair&gt;</a> LoadMoveSetPairs;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    collectLoadMoveSet(BB, PairableInsts, ChosenPairs,</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                       LoadMoveSet, LoadMoveSetPairs);</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: initial: \n&quot;</span> &lt;&lt; BB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> PI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>(); PI != BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();) {</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> P = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(PI);</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <span class="keywordflow">if</span> (P == ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        ++PI;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      }</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="keywordflow">if</span> (getDepthFactor(P-&gt;first) == 0) {</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <span class="comment">// These instructions are not really fused, but are tracked as though</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="comment">// they are. Any case in which it would be interesting to fuse them</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <span class="comment">// will be taken care of by InstCombine.</span></div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        --NumFusedOps;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        ++PI;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      }</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = cast&lt;Instruction&gt;(P-&gt;first),</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        *J = cast&lt;Instruction&gt;(P-&gt;second);</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: fusing: &quot;</span> &lt;&lt; *I &lt;&lt;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;             <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *J &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="comment">// Remove the pair and flipped pair from the list.</span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> FP = ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(P-&gt;second);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      assert(FP != ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp; <span class="stringliteral">&quot;Flipped pair not found in list&quot;</span>);</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(FP);</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      ChosenPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(P);</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      <span class="keywordflow">if</span> (!canMoveUsesOfIAfterJ(BB, LoadMoveSetPairs, I, J)) {</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: fusion of: &quot;</span> &lt;&lt; *I &lt;&lt;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;               <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *J &lt;&lt;</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;               <span class="stringliteral">&quot; aborted because of non-trivial dependency cycle\n&quot;</span>);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;        --NumFusedOps;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        ++PI;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      }</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <span class="comment">// If the pair must have the other order, then flip it.</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordtype">bool</span> FlipPairOrder = FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(J, I));</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">if</span> (!FlipPairOrder &amp;&amp; !FixedOrderPairs.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(ValuePair(I, J))) {</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        <span class="comment">// This pair does not have a fixed order, and so we might want to</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        <span class="comment">// flip it if that will yield fewer shuffles. We count the number</span></div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        <span class="comment">// of dependencies connected via swaps, and those directly connected,</span></div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        <span class="comment">// and flip the order if the number of swaps is greater.</span></div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;        <span class="keywordtype">bool</span> OrigOrder = <span class="keyword">true</span>;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator IJ =</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;          ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(ValuePair(I, J));</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">if</span> (IJ == ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;          IJ = ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(ValuePair(J, I));</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;          OrigOrder = <span class="keyword">false</span>;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        }</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <span class="keywordflow">if</span> (IJ != ConnectedPairDeps.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;          <span class="keywordtype">unsigned</span> NumDepsDirect = 0, NumDepsSwap = 0;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;          <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="classT.html">T</a> = IJ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;               TE = IJ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="classT.html">T</a> != TE; ++<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>) {</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            VPPair Q(IJ-&gt;first, *<a class="code" href="classT.html">T</a>);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;::iterator</a> R =</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;              PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(VPPair(Q.second, Q.first));</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            assert(R != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;                   <span class="stringliteral">&quot;Cannot find pair connection type&quot;</span>);</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            <span class="keywordflow">if</span> (R-&gt;second == PairConnectionDirect)</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;              ++NumDepsDirect;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R-&gt;second == PairConnectionSwap)</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;              ++NumDepsSwap;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;          }</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;          <span class="keywordflow">if</span> (!OrigOrder)</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(NumDepsDirect, NumDepsSwap);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;          <span class="keywordflow">if</span> (NumDepsSwap &gt; NumDepsDirect) {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            FlipPairOrder = <span class="keyword">true</span>;</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: reordering pair: &quot;</span> &lt;&lt; *I &lt;&lt;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;                            <span class="stringliteral">&quot; &lt;-&gt; &quot;</span> &lt;&lt; *J &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;          }</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        }</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      }</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *L = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *H = J;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <span class="keywordflow">if</span> (FlipPairOrder)</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(H, L);</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      <span class="comment">// If the pair being fused uses the opposite order from that in the pair</span></div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <span class="comment">// connection map, then we need to flip the types.</span></div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ValuePair, std::vector&lt;ValuePair&gt;</a> &gt;::iterator HL =</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(ValuePair(H, L));</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <span class="keywordflow">if</span> (HL != ConnectedPairs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="classT.html">T</a> = HL-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;             TE = HL-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="classT.html">T</a> != TE; ++<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>) {</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;          VPPair Q(HL-&gt;first, *<a class="code" href="classT.html">T</a>);</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VPPair, unsigned&gt;::iterator</a> R = PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Q);</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;          assert(R != PairConnectionTypes.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                 <span class="stringliteral">&quot;Cannot find pair connection type&quot;</span>);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;          <span class="keywordflow">if</span> (R-&gt;second == PairConnectionDirect)</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;            R-&gt;second = PairConnectionSwap;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R-&gt;second == PairConnectionSwap)</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;            R-&gt;second = PairConnectionDirect;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        }</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordtype">bool</span> LBeforeH = !FlipPairOrder;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordtype">unsigned</span> NumOperands = I-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>();</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 3&gt;</a> ReplacedOperands(NumOperands);</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      getReplacementInputsForPair(Context, L, H, ReplacedOperands,</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;                                  LBeforeH);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      <span class="comment">// Make a copy of the original operation, change its type to the vector</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <span class="comment">// type and replace its operands with the vector operands.</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K = L-&gt;<a class="code" href="classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">clone</a>();</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Value.html#a9b6d1ca60deddf2f2c25cfea671f617c">hasName</a>())</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(L);</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (H-&gt;hasName())</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(H);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;StoreInst&gt;(K))</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1Value.html#ac0f09c2c9951158f9eecfaf7068d7b20">mutateType</a>(getVecTypeForPair(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), H-&gt;getType()));</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      combineMetadata(K, H);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      K-&gt;<a class="code" href="classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">intersectOptionalDataWith</a>(H);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> o = 0; o &lt; NumOperands; ++o)</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        K-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(o, ReplacedOperands[o]);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      K-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(J);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      <span class="comment">// Instruction insertion point:</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertionPt = K;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *K1 = 0, *K2 = 0;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      replaceOutputsOfPair(Context, L, H, K, InsertionPt, K1, K2);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      <span class="comment">// The use dag of the first original instruction must be moved to after</span></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      <span class="comment">// the location of the second instruction. The entire use dag of the</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="comment">// first instruction is disjoint from the input dag of the second</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      <span class="comment">// (by definition), and so commutes with it.</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      moveUsesOfIAfterJ(BB, LoadMoveSetPairs, InsertionPt, I, J);</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(K1);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        H-&gt;replaceAllUsesWith(K2);</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(L, K1);</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">replaceWithNewValue</a>(H, K2);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;      }</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="comment">// Instructions that may read from memory may be in the load move set.</span></div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;      <span class="comment">// Once an instruction is fused, we no longer need its move set, and so</span></div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      <span class="comment">// the values of the map never need to be updated. However, when a load</span></div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;      <span class="comment">// is fused, we need to merge the entries from both instructions in the</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <span class="comment">// pair in case those instructions were in the move set of some other</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="comment">// yet-to-be-fused pair. The loads in question are the keys of the map.</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">mayReadFromMemory</a>()) {</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        std::vector&lt;ValuePair&gt; NewSetMembers;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt;::iterator II =</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;          LoadMoveSet.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(I);</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;        <span class="keywordflow">if</span> (II != LoadMoveSet.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;          <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = II-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;               <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a> = II-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a>; ++<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;            NewSetMembers.push_back(ValuePair(K, *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>));</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, std::vector&lt;Value *&gt;</a> &gt;::iterator JJ =</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;          LoadMoveSet.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(J);</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        <span class="keywordflow">if</span> (JJ != LoadMoveSet.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;          <span class="keywordflow">for</span> (std::vector&lt;Value *&gt;::iterator <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = JJ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;               <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a> = JJ-&gt;second.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> != <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a>; ++<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;            NewSetMembers.push_back(ValuePair(K, *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>));</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        <span class="keywordflow">for</span> (std::vector&lt;ValuePair&gt;::iterator <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = NewSetMembers.begin(),</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;             AE = NewSetMembers.end(); <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> != AE; ++<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>) {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;          LoadMoveSet[<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;first].push_back(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;second);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;          LoadMoveSetPairs.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(*<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>);</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        }</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <span class="comment">// Before removing I, set the iterator to the next instruction.</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      PI = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(I));</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(PI) == J)</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        ++PI;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(I);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">forgetValue</a>(J);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (<a class="code" href="BBVectorize_8cpp.html#aa5c9f87337b0c6849d9151b7615b863f">PrintAfterEveryPair</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: block is now: \n&quot;</span> &lt;&lt;</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                                               BB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    }</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BBV: final: \n&quot;</span> &lt;&lt; BB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  }</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;}</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">BBVectorize::ID</a> = 0;</div><div class="line"><a name="l03140"></a><span class="lineno"><a class="line" href="BBVectorize_8cpp.html#ad1b1eb81c665d6097f4d9eda669f9163"> 3140</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="BBVectorize_8cpp.html#ad1b1eb81c665d6097f4d9eda669f9163">bb_vectorize_name</a>[] = <span class="stringliteral">&quot;Basic-Block Vectorization&quot;</span>;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(BBVectorize, <a class="code" href="BBVectorize_8cpp.html#aa52719da2c47f9787dfa1ea214ecc530">BBV_NAME</a>, bb_vectorize_name, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a>)</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>)</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(BBVectorize, <a class="code" href="BBVectorize_8cpp.html#aa52719da2c47f9787dfa1ea214ecc530">BBV_NAME</a>, bb_vectorize_name, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;</div><div class="line"><a name="l03148"></a><span class="lineno"><a class="line" href="namespacellvm.html#a61e35126f177fb87b78b17b15d088c40"> 3148</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlockPass.html">BasicBlockPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a61e35126f177fb87b78b17b15d088c40">createBBVectorizePass</a>(const <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a> &amp;C) {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> BBVectorize(C);</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;}</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l03153"></a><span class="lineno"><a class="line" href="namespacellvm.html#a5b567fc277e421c0fcf410d126afc1c9"> 3153</a></span>&#160;<a class="code" href="namespacellvm.html#a5b567fc277e421c0fcf410d126afc1c9">llvm::vectorizeBasicBlock</a>(<a class="code" href="classllvm_1_1Pass.html">Pass</a> *P, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB, <span class="keyword">const</span> <a class="code" href="structllvm_1_1VectorizeConfig.html">VectorizeConfig</a> &amp;C) {</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  BBVectorize BBVectorizer(P, C);</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <span class="keywordflow">return</span> BBVectorizer.vectorizeBB(BB);</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;}</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l03159"></a><span class="lineno"><a class="line" href="structllvm_1_1VectorizeConfig.html#a1f89d6fbbf199459087933e99eb89c11"> 3159</a></span>&#160;<a class="code" href="structllvm_1_1VectorizeConfig.html#a1f89d6fbbf199459087933e99eb89c11">VectorizeConfig::VectorizeConfig</a>() {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#afeb221f3bf6e6b8d9d77094e4f482a7a">VectorBits</a> = <a class="code" href="BBVectorize_8cpp.html#afeb221f3bf6e6b8d9d77094e4f482a7a">::VectorBits</a>;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  VectorizeBools = !<a class="code" href="BBVectorize_8cpp.html#a2578829cdf7e6ba596ebd4c35d37ea60">::NoBools</a>;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  VectorizeInts = !<a class="code" href="BBVectorize_8cpp.html#af18c5e610aa6efc696cca93810614a19">::NoInts</a>;</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  VectorizeFloats = !<a class="code" href="BBVectorize_8cpp.html#a83a3e8bf847bd5568f9cb1512680e54d">::NoFloats</a>;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  VectorizePointers = !<a class="code" href="BBVectorize_8cpp.html#ab875e8da760575096bee3d5bf6531ec6">::NoPointers</a>;</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  VectorizeCasts = !<a class="code" href="BBVectorize_8cpp.html#a76c4d0e09aba357eb066933a76e599fb">::NoCasts</a>;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  VectorizeMath = !<a class="code" href="BBVectorize_8cpp.html#a358cbe4b411576a3956acc1c154ed43d">::NoMath</a>;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  VectorizeFMA = !<a class="code" href="BBVectorize_8cpp.html#ab691a87601e5386d7c7a7adcc88cb8e2">::NoFMA</a>;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  VectorizeSelect = !<a class="code" href="BBVectorize_8cpp.html#abe7a6d575ed81273f1caa5808ef28f0c">::NoSelect</a>;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  VectorizeCmp = !<a class="code" href="BBVectorize_8cpp.html#ac522e940bd9406fe5e27d1e190d57ee3">::NoCmp</a>;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  VectorizeGEP = !<a class="code" href="BBVectorize_8cpp.html#a7a1cc09fd51854941c0ca7d844c2986a">::NoGEP</a>;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  VectorizeMemOps = !<a class="code" href="BBVectorize_8cpp.html#a51d696a576ff06673a051af24f66341d">::NoMemOps</a>;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#aa7a4baf5f2b33e0549e89cfffd654169">AlignedOnly</a> = <a class="code" href="BBVectorize_8cpp.html#aa7a4baf5f2b33e0549e89cfffd654169">::AlignedOnly</a>;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a036d89ec4e4218a55b56d32daa8e63b8">ReqChainDepth</a>= <a class="code" href="BBVectorize_8cpp.html#a036d89ec4e4218a55b56d32daa8e63b8">::ReqChainDepth</a>;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a9844cdb55649c82783d33b057823a072">SearchLimit</a> = <a class="code" href="BBVectorize_8cpp.html#a9844cdb55649c82783d33b057823a072">::SearchLimit</a>;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a614dabe9c2b8c31fda983323e4fd63e9">MaxCandPairsForCycleCheck</a> = <a class="code" href="BBVectorize_8cpp.html#a614dabe9c2b8c31fda983323e4fd63e9">::MaxCandPairsForCycleCheck</a>;</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#ae00985eff222858eefa005fdf82c665a">SplatBreaksChain</a> = <a class="code" href="BBVectorize_8cpp.html#ae00985eff222858eefa005fdf82c665a">::SplatBreaksChain</a>;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a89aafcd79ab2e3cb83eb7c08546e11a0">MaxInsts</a> = <a class="code" href="BBVectorize_8cpp.html#a89aafcd79ab2e3cb83eb7c08546e11a0">::MaxInsts</a>;</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#aaeced4658cbba792d1b2eb4832b2d1bd">MaxPairs</a> = <a class="code" href="BBVectorize_8cpp.html#aaeced4658cbba792d1b2eb4832b2d1bd">::MaxPairs</a>;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#abd955daca4730ede63e427c8727d9270">MaxIter</a> = <a class="code" href="BBVectorize_8cpp.html#abd955daca4730ede63e427c8727d9270">::MaxIter</a>;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a8c34815e96f7b2cf2da1b0510c5990c9">Pow2LenOnly</a> = <a class="code" href="BBVectorize_8cpp.html#a8c34815e96f7b2cf2da1b0510c5990c9">::Pow2LenOnly</a>;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a99d6d6ffebfc096b8fc7ee27ccc70b77">NoMemOpBoost</a> = <a class="code" href="BBVectorize_8cpp.html#a99d6d6ffebfc096b8fc7ee27ccc70b77">::NoMemOpBoost</a>;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;  <a class="code" href="BBVectorize_8cpp.html#a354df7469b4617dbcbbdcf8b8c0cfdf1">FastDep</a> = <a class="code" href="BBVectorize_8cpp.html#a354df7469b4617dbcbbdcf8b8c0cfdf1">::FastDep</a>;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div><div class="ttc" id="classllvm_1_1AliasAnalysis_html_acb21f179f1adb9169b51db96a2450009"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#acb21f179f1adb9169b51db96a2450009">llvm::AliasAnalysis::replaceWithNewValue</a></div><div class="ttdeci">void replaceWithNewValue(Value *Old, Value *New)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00551">AliasAnalysis.h:551</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afcac7d7dd4a11e3e7fa5c08757f2db40"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afcac7d7dd4a11e3e7fa5c08757f2db40">llvm::Intrinsic::sin</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02435">Intrinsics.h:2435</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a763d954330cd1711d6129f1da517230a"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a763d954330cd1711d6129f1da517230a">llvm::VectorizeConfig::VectorizeFMA</a></div><div class="ttdeci">bool VectorizeFMA</div><div class="ttdoc">Vectorize the fused-multiply-add intrinsic. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00051">Transforms/Vectorize.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_aaeced4658cbba792d1b2eb4832b2d1bd"><div class="ttname"><a href="BBVectorize_8cpp.html#aaeced4658cbba792d1b2eb4832b2d1bd">MaxPairs</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxPairs(&quot;bb-vectorize-max-pairs-per-group&quot;, cl::init(3000), cl::Hidden, cl::desc(&quot;The maximum number of candidate instruction pairs per group&quot;))</div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a054edfc85f21f5fed2951c2ffa480ad8"><div class="ttname"><a href="BBVectorize_8cpp.html#a054edfc85f21f5fed2951c2ffa480ad8">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFusedOps,&quot;Number of operations fused by bb-vectorize&quot;)</div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a98d7f1cf15bd78fd7c7c68e6543a9588"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a98d7f1cf15bd78fd7c7c68e6543a9588">llvm::A64CC::LE</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00044">AArch64BaseInfo.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a9b6d1ca60deddf2f2c25cfea671f617c"><div class="ttname"><a href="classllvm_1_1Value.html#a9b6d1ca60deddf2f2c25cfea671f617c">llvm::Value::hasName</a></div><div class="ttdeci">bool hasName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00117">Value.h:117</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">llvm::A64CC::NE</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00032">AArch64BaseInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad979b3c1bc975ee23810e3018ffe951b"><div class="ttname"><a href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits()</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a5ff15505ad3a19cbc8e6d4cb3633d669"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5ff15505ad3a19cbc8e6d4cb3633d669">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const BasicBlock *A) const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00879">Dominators.h:879</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a84e0a9b4713fb321f0a8cb495cdc33a6"><div class="ttname"><a href="BBVectorize_8cpp.html#a84e0a9b4713fb321f0a8cb495cdc33a6">DebugPairSelection</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DebugPairSelection(&quot;bb-vectorize-debug-pair-selection&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When debugging is enabled, output information on the&quot;&quot; pair-selection process&quot;))</div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00026">DenseSet.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae8381623b66af7d8e29f051b8d03ea93"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae8381623b66af7d8e29f051b8d03ea93">llvm::Intrinsic::log</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01256">Intrinsics.h:1256</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_adfb7610cbc23430a7d4077a3cf9c22d3"><div class="ttname"><a href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">llvm::DataLayout::getPrefTypeAlignment</a></div><div class="ttdeci">unsigned getPrefTypeAlignment(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00600">DataLayout.cpp:600</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00172">ScalarEvolution.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_a048082a5be9ae0d8901ea64de59e5c8f"><div class="ttname"><a href="classllvm_1_1Pass.html#a048082a5be9ae0d8901ea64de59e5c8f">llvm::Pass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00075">Pass.cpp:75</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="namespacellvm_html_a1de4dc07c13ea6790151c7f0dd4b638c"><div class="ttname"><a href="namespacellvm.html#a1de4dc07c13ea6790151c7f0dd4b638c">llvm::initializeBBVectorizePass</a></div><div class="ttdeci">void initializeBBVectorizePass(PassRegistry &amp;)</div></div>
<div class="ttc" id="Metadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a99d6d6ffebfc096b8fc7ee27ccc70b77"><div class="ttname"><a href="BBVectorize_8cpp.html#a99d6d6ffebfc096b8fc7ee27ccc70b77">NoMemOpBoost</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoMemOpBoost(&quot;bb-vectorize-no-mem-op-boost&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't boost the chain-depth contribution of loads and stores&quot;))</div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_afa2cc746a4280971b99d0f1d79026a55"><div class="ttname"><a href="BBVectorize_8cpp.html#afa2cc746a4280971b99d0f1d79026a55">IgnoreTargetInfo</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; IgnoreTargetInfo(&quot;bb-vectorize-ignore-target-info&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Ignore target information&quot;))</div></div>
<div class="ttc" id="classllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01660">Instructions.h:1660</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a7a35a0c20884a2a1b608229116ff92b1"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a7a35a0c20884a2a1b608229116ff92b1">llvm::Intrinsic::exp2</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00384">Intrinsics.h:384</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a4700db854502662445acadb3b729abc3"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a4700db854502662445acadb3b729abc3">llvm::VectorizeConfig::VectorizeMath</a></div><div class="ttdeci">bool VectorizeMath</div><div class="ttdoc">Vectorize floating-point math intrinsics. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00048">Transforms/Vectorize.h:48</a></div></div>
<div class="ttc" id="Transforms_2Vectorize_8h_html"><div class="ttname"><a href="Transforms_2Vectorize_8h.html">Vectorize.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_accaae8bf378540f31e9b5b7614a0832b"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#accaae8bf378540f31e9b5b7614a0832b">llvm::TargetTransformInfo::getNumberOfParts</a></div><div class="ttdeci">virtual unsigned getNumberOfParts(Type *Tp) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00218">TargetTransformInfo.cpp:218</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="IVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00039">IVUsers.cpp:39</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00218">Type.cpp:218</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a901ce7389ca67dd79b8ab5b53c4a7da8"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int int d</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00418">Target/ARM/README.txt:418</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_afeb221f3bf6e6b8d9d77094e4f482a7a"><div class="ttname"><a href="BBVectorize_8cpp.html#afeb221f3bf6e6b8d9d77094e4f482a7a">VectorBits</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; VectorBits(&quot;bb-vectorize-vector-bits&quot;, cl::init(128), cl::Hidden, cl::desc(&quot;The size of the native vector registers&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00373">Type.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afdbf7fbdf8b6e61904c6f718436b1f7b"><div class="ttname"><a href="classllvm_1_1Instruction.html#afdbf7fbdf8b6e61904c6f718436b1f7b">llvm::Instruction::getAllMetadataOtherThanDebugLoc</a></div><div class="ttdeci">void getAllMetadataOtherThanDebugLoc(SmallVectorImpl&lt; std::pair&lt; unsigned, MDNode * &gt; &gt; &amp;MDs) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00162">Instruction.h:162</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a36e21267fe14e69d3251eab1cd3a0076"><div class="ttname"><a href="classllvm_1_1Type.html#a36e21267fe14e69d3251eab1cd3a0076">llvm::Type::isSingleValueType</a></div><div class="ttdeci">bool isSingleValueType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00259">Type.h:259</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00549">Target/README.txt:549</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a2282198fc9635210d0f678fd0b92e5ce"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2282198fc9635210d0f678fd0b92e5ce">llvm::Intrinsic::sqrt</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02437">Intrinsics.h:2437</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_aa7a4baf5f2b33e0549e89cfffd654169"><div class="ttname"><a href="BBVectorize_8cpp.html#aa7a4baf5f2b33e0549e89cfffd654169">AlignedOnly</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; AlignedOnly(&quot;bb-vectorize-aligned-only&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Only generate aligned loads and stores&quot;))</div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_abd076ee72a1d857c0804172a2e13aedf"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#abd076ee72a1d857c0804172a2e13aedf">llvm::VectorizeConfig::MaxCandPairsForCycleCheck</a></div><div class="ttdeci">unsigned MaxCandPairsForCycleCheck</div><div class="ttdoc">The maximum number of candidate pairs with which to use a full cycle check. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00079">Transforms/Vectorize.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a72c5c6170a25fd911db5f4461221befd"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">llvm::DenseSet::erase</a></div><div class="ttdeci">bool erase(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00049">DenseSet.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_af18839e3170da6f597222b8e5af15e5e"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#af18839e3170da6f597222b8e5af15e5e">llvm::AliasSetTracker::end</a></div><div class="ttdeci">const_iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00395">AliasSetTracker.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a64573fde1c08c1d3572e5147039c7338"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a64573fde1c08c1d3572e5147039c7338">llvm::TargetTransformInfo::getCFInstrCost</a></div><div class="ttdeci">virtual unsigned getCFInstrCost(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00190">TargetTransformInfo.cpp:190</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_a4ffdf475fa6dc64ac47e2a50b742ae95"><div class="ttname"><a href="classllvm_1_1Pass.html#a4ffdf475fa6dc64ac47e2a50b742ae95">llvm::Pass::getAnalysisIfAvailable</a></div><div class="ttdeci">AnalysisType * getAnalysisIfAvailable() const </div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00179">PassAnalysisSupport.h:179</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="AliasSetTracker_8h_html"><div class="ttname"><a href="AliasSetTracker_8h.html">AliasSetTracker.h</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_ac88b95273e6c753188f6a54d65548579"><div class="ttname"><a href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">llvm::CallInst::getNumArgOperands</a></div><div class="ttdeci">unsigned getNumArgOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01241">Instructions.h:1241</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantVector_html_ade9fa017ca3aa82f7694a47090547bc1"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">llvm::ConstantVector::get</a></div><div class="ttdeci">static Constant * get(ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00923">Constants.cpp:923</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="namespacellvm_html_a59575e3191e743149bbd95eacbb9081a"><div class="ttname"><a href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">llvm::abs64</a></div><div class="ttdeci">int64_t abs64(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00579">MathExtras.h:579</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa7d8c7b3481309b28659543d1efdb41da78bdb3b677bd78b8f1f0f680f59a049b"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa7d8c7b3481309b28659543d1efdb41da78bdb3b677bd78b8f1f0f680f59a049b">llvm::Instruction::CompareIgnoringAlignment</a></div><div class="ttdoc">Check for equivalence ignoring load/store alignment. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00349">Instruction.h:349</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_aad1feb3c39700950c1b35d4da87515c4"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aad1feb3c39700950c1b35d4da87515c4">llvm::TargetTransformInfo::getAddressComputationCost</a></div><div class="ttdeci">virtual unsigned getAddressComputationCost(Type *Ty, bool IsComplex=false) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00222">TargetTransformInfo.cpp:222</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aa5ab8c7b55d8bc7cab66be444daa70a1"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a></div><div class="ttdeci">static ConstantInt * ExtractElement(Constant *V, Constant *Idx)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00040">InstCombineCompares.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a55edf1f4be1e3ce4e0c338166a5e5d3e"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a55edf1f4be1e3ce4e0c338166a5e5d3e">llvm::DenseSet::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00033">DenseSet.h:33</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af6aad0c9ba7b8720130235c9621b55b5"><div class="ttname"><a href="classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00541">Instruction.cpp:541</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a89aafcd79ab2e3cb83eb7c08546e11a0"><div class="ttname"><a href="BBVectorize_8cpp.html#a89aafcd79ab2e3cb83eb7c08546e11a0">MaxInsts</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxInsts(&quot;bb-vectorize-max-instr-per-group&quot;, cl::init(500), cl::Hidden, cl::desc(&quot;The maximum number of pairable instructions per group&quot;))</div></div>
<div class="ttc" id="BBVectorize_8cpp_html_ad1b1eb81c665d6097f4d9eda669f9163"><div class="ttname"><a href="BBVectorize_8cpp.html#ad1b1eb81c665d6097f4d9eda669f9163">bb_vectorize_name</a></div><div class="ttdeci">static const char bb_vectorize_name[]</div><div class="ttdef"><b>Definition:</b> <a href="BBVectorize_8cpp_source.html#l03140">BBVectorize.cpp:3140</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ad96b7cf3182ce2ba85e5a7a93b12c441"><div class="ttname"><a href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a></div><div class="ttdeci">#define G(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00052">MD5.cpp:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">llvm::Intrinsic::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00036">Intrinsics.h:36</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a6cac341b1b354174d0e0a81a2e7a9109"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a6cac341b1b354174d0e0a81a2e7a9109">llvm::StoreInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Returns the address space of the pointer operand. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00351">Instructions.h:351</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_ac170f23b2c24a4b1c0d81c3e290959ae"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#ac170f23b2c24a4b1c0d81c3e290959ae">llvm::AliasSetTracker::begin</a></div><div class="ttdeci">const_iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00394">AliasSetTracker.h:394</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa7d8c7b3481309b28659543d1efdb41da9160004f266e276236ea4be972957d3b"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa7d8c7b3481309b28659543d1efdb41da9160004f266e276236ea4be972957d3b">llvm::Instruction::CompareUsingScalarTypes</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00352">Instruction.h:352</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a358cbe4b411576a3956acc1c154ed43d"><div class="ttname"><a href="BBVectorize_8cpp.html#a358cbe4b411576a3956acc1c154ed43d">NoMath</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoMath(&quot;bb-vectorize-no-math&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize floating-point math intrinsics&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd8d3c26bf5cd614b0e6a9b8886a5d0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00421">Instruction.cpp:421</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a6ab503e20bc728e8ac9a551e0c230ad4"><div class="ttname"><a href="BBVectorize_8cpp.html#a6ab503e20bc728e8ac9a551e0c230ad4">UseChainDepthWithTI</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UseChainDepthWithTI(&quot;bb-vectorize-use-chain-depth&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Use the chain depth requirement with&quot;&quot; target information&quot;))</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00349">Mips16ISelLowering.cpp:349</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_ab691a87601e5386d7c7a7adcc88cb8e2"><div class="ttname"><a href="BBVectorize_8cpp.html#ab691a87601e5386d7c7a7adcc88cb8e2">NoFMA</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoFMA(&quot;bb-vectorize-no-fma&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize the fused-multiply-add intrinsic&quot;))</div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a071e25c5c6eae5299b1cdc3350c6d55c"><div class="ttname"><a href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">llvm::VectorType::isValidElementType</a></div><div class="ttdeci">static bool isValidElementType(Type *ElemTy)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00721">Type.cpp:721</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="namespacellvm_html_ae094b310153c30b08dcec1b40459d385"><div class="ttname"><a href="namespacellvm.html#ae094b310153c30b08dcec1b40459d385">llvm::utostr</a></div><div class="ttdeci">static std::string utostr(uint64_t X, bool isNeg=false)</div><div class="ttdef"><b>Definition:</b> <a href="StringExtras_8h_source.html#l00088">StringExtras.h:88</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a86ebec3bb1d05ad776ce2ad4cca57cf8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a86ebec3bb1d05ad776ce2ad4cca57cf8">llvm::TargetTransformInfo::getShuffleCost</a></div><div class="ttdeci">virtual unsigned getShuffleCost(ShuffleKind Kind, Type *Tp, int Index=0, Type *SubTp=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00180">TargetTransformInfo.cpp:180</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00408">DerivedTypes.h:408</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecaea788d98147161f25d5adc3ec6ce7e1f">llvm::TargetTransformInfo::SK_Reverse</a></div><div class="ttdoc">Reverse the order of the vector. </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00312">TargetTransformInfo.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a1c3c61b088124769af502ea4b67df53a"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a1c3c61b088124769af502ea4b67df53a">llvm::VectorizeConfig::VectorizePointers</a></div><div class="ttdeci">bool VectorizePointers</div><div class="ttdoc">Vectorize pointer values. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00042">Transforms/Vectorize.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a15a8263a574e9842b03263ebe0e36c12"><div class="ttname"><a href="classllvm_1_1Type.html#a15a8263a574e9842b03263ebe0e36c12">llvm::Type::isPPC_FP128Ty</a></div><div class="ttdeci">bool isPPC_FP128Ty() const </div><div class="ttdoc">isPPC_FP128Ty - Return true if this is powerpc long double. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00158">Type.h:158</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a4719042d3da91d52c970fe057a410f32"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a4719042d3da91d52c970fe057a410f32">llvm::VectorizeConfig::VectorizeCmp</a></div><div class="ttdeci">bool VectorizeCmp</div><div class="ttdoc">Vectorize comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00057">Transforms/Vectorize.h:57</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_af7d7060584c66525449d7c0fac87e1b3"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#af7d7060584c66525449d7c0fac87e1b3">llvm::VectorizeConfig::MaxIter</a></div><div class="ttdeci">unsigned MaxIter</div><div class="ttdoc">The maximum number of pairing iterations. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00091">Transforms/Vectorize.h:91</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a43b888cb38d9bdb6a1940f9ae43a1578"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a43b888cb38d9bdb6a1940f9ae43a1578">llvm::VectorizeConfig::VectorizeMemOps</a></div><div class="ttdeci">bool VectorizeMemOps</div><div class="ttdoc">Vectorize loads and stores. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00063">Transforms/Vectorize.h:63</a></div></div>
<div class="ttc" id="namespacellvm_html_ad5b5ed1a0de8792e2ebf2eba3ba712fd"><div class="ttname"><a href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">llvm::SimplifyInstructionsInBlock</a></div><div class="ttdeci">bool SimplifyInstructionsInBlock(BasicBlock *BB, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3">llvm::LLVMContext::MD_fpmath</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00049">LLVMContext.h:49</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a354df7469b4617dbcbbdcf8b8c0cfdf1"><div class="ttname"><a href="BBVectorize_8cpp.html#a354df7469b4617dbcbbdcf8b8c0cfdf1">FastDep</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; FastDep(&quot;bb-vectorize-fast-dep&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Use a fast instruction dependency analysis&quot;))</div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecafd6c03f570400fcb24d861aa21ddffe9"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecafd6c03f570400fcb24d861aa21ddffe9">llvm::TargetTransformInfo::SK_ExtractSubvector</a></div><div class="ttdoc">ExtractSubvector Index indicates start offset. </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00314">TargetTransformInfo.h:314</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_ac522e940bd9406fe5e27d1e190d57ee3"><div class="ttname"><a href="BBVectorize_8cpp.html#ac522e940bd9406fe5e27d1e190d57ee3">NoCmp</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoCmp(&quot;bb-vectorize-no-cmp&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize comparison instructions&quot;))</div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af47064c2a364c1b3542f545c9f4b6f8d"><div class="ttname"><a href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">llvm::Type::isX86_MMXTy</a></div><div class="ttdeci">bool isX86_MMXTy() const </div><div class="ttdoc">isX86_MMXTy - Return true if this is X86 MMX. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00182">Type.h:182</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a3bd5e6108cd2c28c267d70e631a7b11a"><div class="ttname"><a href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00204">Type.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a12b091e586dea5849c4d85723d2cba1b"><div class="ttname"><a href="classllvm_1_1Value.html#a12b091e586dea5849c4d85723d2cba1b">llvm::Value::intersectOptionalDataWith</a></div><div class="ttdeci">void intersectOptionalDataWith(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00258">Value.h:258</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1InsertElementInst_html"><div class="ttname"><a href="classllvm_1_1InsertElementInst.html">llvm::InsertElementInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01602">Instructions.h:1602</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a3084f1dd69d67e1965fd1fe721a69f2e"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">llvm::StoreInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_1_1Iterator_html"><div class="ttname"><a href="classllvm_1_1DenseSet_1_1Iterator.html">llvm::DenseSet::Iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00064">DenseSet.h:64</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">llvm::Intrinsic::exp</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00383">Intrinsics.h:383</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a1e9e1f3e713d0756c3eb4843926ab075"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a1e9e1f3e713d0756c3eb4843926ab075">llvm::DenseSet::find</a></div><div class="ttdeci">iterator find(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00113">DenseSet.h:113</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a7f09550473f08bb1f01fa29cf224a321"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a7f09550473f08bb1f01fa29cf224a321">llvm::VectorizeConfig::AlignedOnly</a></div><div class="ttdeci">bool AlignedOnly</div><div class="ttdoc">Only generate aligned loads and stores. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00066">Transforms/Vectorize.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1InsertElementInst_html_a968cd6a1853b174636da54c36ae25425"><div class="ttname"><a href="classllvm_1_1InsertElementInst.html#a968cd6a1853b174636da54c36ae25425">llvm::InsertElementInst::Create</a></div><div class="ttdeci">static InsertElementInst * Create(Value *Vec, Value *NewElt, Value *Idx, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01612">Instructions.h:1612</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html">llvm::AliasSetTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00280">AliasSetTracker.h:280</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a83a3e8bf847bd5568f9cb1512680e54d"><div class="ttname"><a href="BBVectorize_8cpp.html#a83a3e8bf847bd5568f9cb1512680e54d">NoFloats</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoFloats(&quot;bb-vectorize-no-floats&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize floating-point values&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a9844cdb55649c82783d33b057823a072"><div class="ttname"><a href="BBVectorize_8cpp.html#a9844cdb55649c82783d33b057823a072">SearchLimit</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; SearchLimit(&quot;bb-vectorize-search-limit&quot;, cl::init(400), cl::Hidden, cl::desc(&quot;The maximum search distance for instruction pairs&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a7e47131185becc5c96731a2e28441b77"><div class="ttname"><a href="classllvm_1_1Function.html#a7e47131185becc5c96731a2e28441b77">llvm::Function::getIntrinsicID</a></div><div class="ttdeci">unsigned getIntrinsicID() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00371">Function.cpp:371</a></div></div>
<div class="ttc" id="ScalarEvolutionExpressions_8h_html"><div class="ttname"><a href="ScalarEvolutionExpressions_8h.html">ScalarEvolutionExpressions.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_af1626ac39e1ee08434abd53e72f4d128"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af1626ac39e1ee08434abd53e72f4d128">llvm::TargetTransformInfo::getCmpSelInstrCost</a></div><div class="ttdeci">virtual unsigned getCmpSelInstrCost(unsigned Opcode, Type *ValTy, Type *CondTy=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00194">TargetTransformInfo.cpp:194</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a720a58c90acceb0803dbe2f15c45a797"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a720a58c90acceb0803dbe2f15c45a797">llvm::VectorizeConfig::SplatBreaksChain</a></div><div class="ttdeci">bool SplatBreaksChain</div><div class="ttdoc">Replicating one element to a pair breaks the chain. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00082">Transforms/Vectorize.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ae42219072d798876e6b08e6b78614ff6"><div class="ttname"><a href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a></div><div class="ttdeci">#define H(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00053">MD5.cpp:53</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a43097a8aa365f06fb95e209a1a30d190"><div class="ttname"><a href="BBVectorize_8cpp.html#a43097a8aa365f06fb95e209a1a30d190">DebugInstructionExamination</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DebugInstructionExamination(&quot;bb-vectorize-debug-instruction-examination&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When debugging is enabled, output information on the&quot;&quot; instruction-examination process&quot;))</div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractElementInst_html_a671ded0c51dd6de0eaf145cde783d81e"><div class="ttname"><a href="classllvm_1_1ExtractElementInst.html#a671ded0c51dd6de0eaf145cde783d81e">llvm::ExtractElementInst::Create</a></div><div class="ttdeci">static ExtractElementInst * Create(Value *Vec, Value *Idx, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01551">Instructions.h:1551</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a9435bd14da4637e66589624ea43fa758"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a9435bd14da4637e66589624ea43fa758">llvm::Intrinsic::log10</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01257">Intrinsics.h:1257</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="DenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_aa888e3661c809163273aca85ded4d846"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aa888e3661c809163273aca85ded4d846">llvm::ScalarEvolution::getMinusSCEV</a></div><div class="ttdeci">const SCEV * getMinusSCEV(const SCEV *LHS, const SCEV *RHS, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap)</div><div class="ttdoc">getMinusSCEV - Return LHS-RHS. Minus is represented in SCEV as A+B*-1. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02790">ScalarEvolution.cpp:2790</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00223">Instructions.h:223</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a965d64fd29fcc23dbe3a9cbf3dc36aef"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a965d64fd29fcc23dbe3a9cbf3dc36aef">llvm::VectorizeConfig::SearchLimit</a></div><div class="ttdeci">unsigned SearchLimit</div><div class="ttdoc">The maximum search distance for instruction pairs. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00075">Transforms/Vectorize.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a76c4d0e09aba357eb066933a76e599fb"><div class="ttname"><a href="BBVectorize_8cpp.html#a76c4d0e09aba357eb066933a76e599fb">NoCasts</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoCasts(&quot;bb-vectorize-no-casts&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize casting (conversion) operations&quot;))</div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a614dabe9c2b8c31fda983323e4fd63e9"><div class="ttname"><a href="BBVectorize_8cpp.html#a614dabe9c2b8c31fda983323e4fd63e9">MaxCandPairsForCycleCheck</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxCandPairsForCycleCheck(&quot;bb-vectorize-max-cycle-check-pairs&quot;, cl::init(200), cl::Hidden, cl::desc(&quot;The maximum number of candidate pairs with which to use&quot;&quot; a full cycle check&quot;))</div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a4efb46d4834f6f750ae0649ed89ce44c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::count</a></div><div class="ttdeci">bool count(const KeyT &amp;Val) const</div><div class="ttdoc">count - Return true if the specified key is in the map. </div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00103">DenseMap.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a804545e5b568edec8b970da32cd37359"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a804545e5b568edec8b970da32cd37359">llvm::ScalarEvolution::forgetValue</a></div><div class="ttdeci">void forgetValue(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l04201">ScalarEvolution.cpp:4201</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a453ec2b93d93a5b78a737c501266e104"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a453ec2b93d93a5b78a737c501266e104">llvm::TargetTransformInfo::getCastInstrCost</a></div><div class="ttdeci">virtual unsigned getCastInstrCost(unsigned Opcode, Type *Dst, Type *Src) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00185">TargetTransformInfo.cpp:185</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_a3c210e8905029a012df3384a7eeb63ad"><div class="ttname"><a href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">llvm::MDNode::getMostGenericTBAA</a></div><div class="ttdeci">static MDNode * getMostGenericTBAA(MDNode *A, MDNode *B)</div><div class="ttdoc">Methods for metadata merging. </div><div class="ttdef"><b>Definition:</b> <a href="TypeBasedAliasAnalysis_8cpp_source.html#l00556">TypeBasedAliasAnalysis.cpp:556</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_aeb349dfe9de242e05ded1b541783b5df"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#aeb349dfe9de242e05ded1b541783b5df">llvm::TargetTransformInfo::getIntrinsicInstrCost</a></div><div class="ttdeci">virtual unsigned getIntrinsicInstrCost(Intrinsic::ID ID, Type *RetTy, ArrayRef&lt; Type * &gt; Tys) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00212">TargetTransformInfo.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00478">SmallVector.h:478</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_abd955daca4730ede63e427c8727d9270"><div class="ttname"><a href="BBVectorize_8cpp.html#abd955daca4730ede63e427c8727d9270">MaxIter</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxIter(&quot;bb-vectorize-max-iter&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;The maximum number of pairing iterations&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Type_html_a35a540d6e55bff813e9b195ebdb3da9f"><div class="ttname"><a href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">llvm::Type::isFPOrFPVectorTy</a></div><div class="ttdeci">bool isFPOrFPVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00186">Type.h:186</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00589">Metadata.cpp:589</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa26de3d6e38997b9041e824ea558c770"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">llvm::Instruction::mayWriteToMemory</a></div><div class="ttdeci">bool mayWriteToMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00441">Instruction.cpp:441</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlockPass_html"><div class="ttname"><a href="classllvm_1_1BasicBlockPass.html">llvm::BasicBlockPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00324">Pass.h:324</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a5a65a660c80e04b311850d78d30fab64"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a5a65a660c80e04b311850d78d30fab64">llvm::VectorizeConfig::MaxPairs</a></div><div class="ttdeci">unsigned MaxPairs</div><div class="ttdoc">The maximum number of candidate instruction pairs per group. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00088">Transforms/Vectorize.h:88</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a26e11e9c1ef55164b429eb9dc019f213"><div class="ttname"><a href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a></div><div class="ttdeci">const unsigned MaxDepth</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00036">ValueTracking.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_aee8f4c3fefab2a8e9c62622527c8b60c"><div class="ttname"><a href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">llvm::DenseSet::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00107">DenseSet.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a8acf62dbfb8a84e6e5edd4a0be9c3e4c"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a8acf62dbfb8a84e6e5edd4a0be9c3e4c">llvm::Intrinsic::cos</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00364">Intrinsics.h:364</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_ab78af013d3a11515403da8517f8f3d4a"><div class="ttname"><a href="classllvm_1_1Pass.html#ab78af013d3a11515403da8517f8f3d4a">llvm::Pass::getAnalysis</a></div><div class="ttdeci">AnalysisType &amp; getAnalysis() const </div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00199">PassAnalysisSupport.h:199</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_abbac11d593e7d40675ac3dfe1dd324bd"><div class="ttname"><a href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">llvm::DenseSet::count</a></div><div class="ttdeci">bool count(const ValueT &amp;V) const </div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00045">DenseSet.h:45</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_ab658e5485796a5ff90bd2dc3fca7d6d2"><div class="ttname"><a href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">llvm::DenseSet::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00117">DenseSet.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a1b178b55f0bfc23a27aa5ace23332204"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a1b178b55f0bfc23a27aa5ace23332204">llvm::TargetTransformInfo::getMemoryOpCost</a></div><div class="ttdeci">virtual unsigned getMemoryOpCost(unsigned Opcode, Type *Src, unsigned Alignment, unsigned AddressSpace) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00204">TargetTransformInfo.cpp:204</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a13e03b36534d1c9909b07be3838a1ab0"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a13e03b36534d1c9909b07be3838a1ab0">llvm::VectorizeConfig::VectorizeFloats</a></div><div class="ttdeci">bool VectorizeFloats</div><div class="ttdoc">Vectorize floating-point values. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00039">Transforms/Vectorize.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad8f27f0b94a56abcd296b8461737a3af"><div class="ttname"><a href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00214">Type.cpp:214</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="namespacellvm_1_1EngineKind_html_a9df47239a42cd9621ac26d9ecbd57441"><div class="ttname"><a href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">llvm::EngineKind::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00499">ExecutionEngine/ExecutionEngine.h:499</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_ae00985eff222858eefa005fdf82c665a"><div class="ttname"><a href="BBVectorize_8cpp.html#ae00985eff222858eefa005fdf82c665a">SplatBreaksChain</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; SplatBreaksChain(&quot;bb-vectorize-splat-breaks-chain&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Replicating one element to a pair breaks the chain&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="namespacellvm_html_a5b567fc277e421c0fcf410d126afc1c9"><div class="ttname"><a href="namespacellvm.html#a5b567fc277e421c0fcf410d126afc1c9">llvm::vectorizeBasicBlock</a></div><div class="ttdeci">bool vectorizeBasicBlock(Pass *P, BasicBlock &amp;BB, const VectorizeConfig &amp;C=VectorizeConfig())</div><div class="ttdoc">Vectorize the BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BBVectorize_8cpp_source.html#l03153">BBVectorize.cpp:3153</a></div></div>
<div class="ttc" id="PassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00164">PassSupport.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a269c7b8adcd29645a4f901196fc08806"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00190">DenseMap.h:190</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a51d696a576ff06673a051af24f66341d"><div class="ttname"><a href="BBVectorize_8cpp.html#a51d696a576ff06673a051af24f66341d">NoMemOps</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoMemOps(&quot;bb-vectorize-no-mem-ops&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize loads and stores&quot;))</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a0bcd4131e1a1d92215f5385b4e16cd2e"><div class="ttname"><a href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">llvm::CallInst::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01357">Instructions.h:1357</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00249">Pass.cpp:249</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_ab875e8da760575096bee3d5bf6531ec6"><div class="ttname"><a href="BBVectorize_8cpp.html#ab875e8da760575096bee3d5bf6531ec6">NoPointers</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoPointers(&quot;bb-vectorize-no-pointers&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Don't try to vectorize pointer values&quot;))</div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a2efd55778217d045b121de696c4f6452"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2efd55778217d045b121de696c4f6452">llvm::LoadInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Returns the address space of the pointer operand. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00228">Instructions.h:228</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_af5719bc445388a15863a7d9a3cf12fe7"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#af5719bc445388a15863a7d9a3cf12fe7">llvm::VectorizeConfig::FastDep</a></div><div class="ttdeci">bool FastDep</div><div class="ttdoc">Use a fast instruction dependency analysis. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00100">Transforms/Vectorize.h:100</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html">llvm::VectorizeConfig</a></div><div class="ttdoc">Vectorize configuration. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00025">Transforms/Vectorize.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab76230865021faf49c9262994633ce36">llvm::Intrinsic::powi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02217">Intrinsics.h:2217</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a7a1cc09fd51854941c0ca7d844c2986a"><div class="ttname"><a href="BBVectorize_8cpp.html#a7a1cc09fd51854941c0ca7d844c2986a">NoGEP</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoGEP(&quot;bb-vectorize-no-gep&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize getelementptr instructions&quot;))</div></div>
<div class="ttc" id="ScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a957e195a6793721ddc164589934b8f89"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00070">DenseMap.h:70</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a2578829cdf7e6ba596ebd4c35d37ea60"><div class="ttname"><a href="BBVectorize_8cpp.html#a2578829cdf7e6ba596ebd4c35d37ea60">NoBools</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoBools(&quot;bb-vectorize-no-bools&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize boolean (i1) values&quot;))</div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_ad9cfad286e74e33be7a4f6d5b2e14e7b"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#ad9cfad286e74e33be7a4f6d5b2e14e7b">llvm::VectorizeConfig::VectorizeCasts</a></div><div class="ttdeci">bool VectorizeCasts</div><div class="ttdoc">Vectorize casting (conversion) operations. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00045">Transforms/Vectorize.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00053">DenseMap.h:53</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_aa52719da2c47f9787dfa1ea214ecc530"><div class="ttname"><a href="BBVectorize_8cpp.html#aa52719da2c47f9787dfa1ea214ecc530">BBV_NAME</a></div><div class="ttdeci">#define BBV_NAME</div><div class="ttdef"><b>Definition:</b> <a href="BBVectorize_8cpp_source.html#l00017">BBVectorize.cpp:17</a></div></div>
<div class="ttc" id="namespacellvm_html_a61e35126f177fb87b78b17b15d088c40"><div class="ttname"><a href="namespacellvm.html#a61e35126f177fb87b78b17b15d088c40">llvm::createBBVectorizePass</a></div><div class="ttdeci">BasicBlockPass * createBBVectorizePass(const VectorizeConfig &amp;C=VectorizeConfig())</div><div class="ttdef"><b>Definition:</b> <a href="BBVectorize_8cpp_source.html#l03148">BBVectorize.cpp:3148</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a5befaa794315e6b9bb119f2b1f35aea8"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a5befaa794315e6b9bb119f2b1f35aea8">llvm::VectorizeConfig::VectorizeBools</a></div><div class="ttdeci">bool VectorizeBools</div><div class="ttdoc">Vectorize boolean values. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00033">Transforms/Vectorize.h:33</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00068">Instruction.cpp:68</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a036d89ec4e4218a55b56d32daa8e63b8"><div class="ttname"><a href="BBVectorize_8cpp.html#a036d89ec4e4218a55b56d32daa8e63b8">ReqChainDepth</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ReqChainDepth(&quot;bb-vectorize-req-chain-depth&quot;, cl::init(6), cl::Hidden, cl::desc(&quot;The required chain depth for vectorization&quot;))</div></div>
<div class="ttc" id="ValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_ae73f97ea01ec81dfd2ae0b57dab859e1"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#ae73f97ea01ec81dfd2ae0b57dab859e1">llvm::VectorizeConfig::ReqChainDepth</a></div><div class="ttdeci">unsigned ReqChainDepth</div><div class="ttdoc">The required chain depth for vectorization. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00072">Transforms/Vectorize.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="StringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af7d48287addfbfdc4bcd296efbc44e4e">llvm::Intrinsic::log2</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01258">Intrinsics.h:1258</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ae011f00644d795f4864d9ee30547b127"><div class="ttname"><a href="classllvm_1_1Type.html#ae011f00644d795f4864d9ee30547b127">llvm::Type::isX86_FP80Ty</a></div><div class="ttdeci">bool isX86_FP80Ty() const </div><div class="ttdoc">isX86_FP80Ty - Return true if this is x86 long double. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00152">Type.h:152</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a707afda5bc957c15f2b60f942cd32afd"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a707afda5bc957c15f2b60f942cd32afd">llvm::VectorizeConfig::MaxInsts</a></div><div class="ttdeci">unsigned MaxInsts</div><div class="ttdoc">The maximum number of pairable instructions per group. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00085">Transforms/Vectorize.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00057">ScalarEvolution.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a12d5f426acafa2dea032861636976889"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a12d5f426acafa2dea032861636976889">llvm::SmallSet::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00043">SmallSet.h:43</a></div></div>
<div class="ttc" id="Intrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_af18c5e610aa6efc696cca93810614a19"><div class="ttname"><a href="BBVectorize_8cpp.html#af18c5e610aa6efc696cca93810614a19">NoInts</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoInts(&quot;bb-vectorize-no-ints&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize integer values&quot;))</div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a38e79c83dad9b9a5f38c9693371a8709"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a></div><div class="ttdeci">the resulting code requires compare and branches when and if * p</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac93ffdc3731dab52d2f92fb62609b718"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac93ffdc3731dab52d2f92fb62609b718">llvm::Instruction::isBinaryOp</a></div><div class="ttdeci">bool isBinaryOp() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af09e4096de244d2fb345891328714a63"><div class="ttname"><a href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">llvm::Instruction::insertAfter</a></div><div class="ttdeci">void insertAfter(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00084">Instruction.cpp:84</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_ad71f535fa2c5fdbd6a21cb6b5c399cd8"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#ad71f535fa2c5fdbd6a21cb6b5c399cd8">llvm::VectorizeConfig::NoMemOpBoost</a></div><div class="ttdeci">bool NoMemOpBoost</div><div class="ttdoc">Don&amp;#39;t boost the chain-depth contribution of loads and stores. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00097">Transforms/Vectorize.h:97</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a028955b37198cb683dd39a9c07425ba0"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a028955b37198cb683dd39a9c07425ba0">llvm::VectorizeConfig::VectorizeGEP</a></div><div class="ttdeci">bool VectorizeGEP</div><div class="ttdoc">Vectorize getelementptr instructions. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00060">Transforms/Vectorize.h:60</a></div></div>
<div class="ttc" id="MemoryBuiltins_8cpp_html_afe56ced53524e16f248ee3878df10df6"><div class="ttname"><a href="MemoryBuiltins_8cpp.html#afe56ced53524e16f248ee3878df10df6">getCalledFunction</a></div><div class="ttdeci">static Function * getCalledFunction(const Value *V, bool LookThroughBitCast)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00073">MemoryBuiltins.cpp:73</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acdd674781be3766718b3a0b38540a4bc"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00067">DenseMap.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractElementInst_html"><div class="ttname"><a href="classllvm_1_1ExtractElementInst.html">llvm::ExtractElementInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01542">Instructions.h:1542</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8eafa71cf399da8f21b2af5549f3f9e7"><div class="ttname"><a href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="ValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_aa5c9f87337b0c6849d9151b7615b863f"><div class="ttname"><a href="BBVectorize_8cpp.html#aa5c9f87337b0c6849d9151b7615b863f">PrintAfterEveryPair</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintAfterEveryPair(&quot;bb-vectorize-debug-print-after-every-pair&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When debugging is enabled, dump the basic block after&quot;&quot; every pair is fused&quot;))</div></div>
<div class="ttc" id="BBVectorize_8cpp_html_afdd20f5a624c6c8f4b9177e1575c6a0c"><div class="ttname"><a href="BBVectorize_8cpp.html#afdd20f5a624c6c8f4b9177e1575c6a0c">DebugCycleCheck</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DebugCycleCheck(&quot;bb-vectorize-debug-cycle-check&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When debugging is enabled, output information on the&quot;&quot; cycle-checking process&quot;))</div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a7dcd5b03b84781aeb7612428f8c11ba0"><div class="ttname"><a href="BBVectorize_8cpp.html#a7dcd5b03b84781aeb7612428f8c11ba0">DebugCandidateSelection</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DebugCandidateSelection(&quot;bb-vectorize-debug-candidate-selection&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;When debugging is enabled, output information on the&quot;&quot; candidate-selection process&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00311">DataLayout.h:311</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac0f09c2c9951158f9eecfaf7068d7b20"><div class="ttname"><a href="classllvm_1_1Value.html#ac0f09c2c9951158f9eecfaf7068d7b20">llvm::Value::mutateType</a></div><div class="ttdeci">void mutateType(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00342">Value.h:342</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_a1f89d6fbbf199459087933e99eb89c11"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#a1f89d6fbbf199459087933e99eb89c11">llvm::VectorizeConfig::VectorizeConfig</a></div><div class="ttdeci">VectorizeConfig()</div><div class="ttdoc">Initialize the VectorizeConfig from command line options. </div><div class="ttdef"><b>Definition:</b> <a href="BBVectorize_8cpp_source.html#l03159">BBVectorize.cpp:3159</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a24882fb4943904e5f1c390f36a974b85"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">llvm::DenseSet::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00034">DenseSet.h:34</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af387c9295462cb7394f13fc3b9276dc0"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af387c9295462cb7394f13fc3b9276dc0">llvm::Intrinsic::pow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02216">Intrinsics.h:2216</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00033">BasicBlock.cpp:33</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_ada3491a53a1c7005127769ae90eefcbf"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">llvm::AliasSetTracker::add</a></div><div class="ttdeci">bool add(Value *Ptr, uint64_t Size, const MDNode *TBAAInfo)</div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8cpp_source.html#l00292">AliasSetTracker.cpp:292</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00143">DenseMap.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02742">ScalarEvolution.cpp:2742</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_ab43657ed1abe2e2ed3a6a394f233ebd0"><div class="ttname"><a href="classllvm_1_1VectorType.html#ab43657ed1abe2e2ed3a6a394f233ebd0">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, unsigned NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00706">Type.cpp:706</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_ab9280f5afc6d4c887e40ccc44eb1dc38"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#ab9280f5afc6d4c887e40ccc44eb1dc38">llvm::VectorizeConfig::VectorizeInts</a></div><div class="ttdeci">bool VectorizeInts</div><div class="ttdoc">Vectorize integer values. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00036">Transforms/Vectorize.h:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab4c5fed3774fc563c9b252d3483f56d2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab4c5fed3774fc563c9b252d3483f56d2">llvm::Intrinsic::fma</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00392">Intrinsics.h:392</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a5f7e7e1b99d11c3b1b437a5b3cba41c0"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a5f7e7e1b99d11c3b1b437a5b3cba41c0">llvm::TargetTransformInfo::getVectorInstrCost</a></div><div class="ttdeci">virtual unsigned getVectorInstrCost(unsigned Opcode, Type *Val, unsigned Index=-1) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00199">TargetTransformInfo.cpp:199</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af46433d0e36d3f80afc3a8c67b5c53ecab1ac8982cdb119f39a5fe74610a46796">llvm::TargetTransformInfo::SK_Broadcast</a></div><div class="ttdoc">Broadcast element 0 to all other elements. </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00311">TargetTransformInfo.h:311</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_a8c34815e96f7b2cf2da1b0510c5990c9"><div class="ttname"><a href="BBVectorize_8cpp.html#a8c34815e96f7b2cf2da1b0510c5990c9">Pow2LenOnly</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; Pow2LenOnly(&quot;bb-vectorize-pow2-len-only&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to form non-2^n-length vectors&quot;))</div></div>
<div class="ttc" id="CommandLine_8cpp_html_ad7e3230db455d730324e6a39a3ebef5f"><div class="ttname"><a href="CommandLine_8cpp.html#ad7e3230db455d730324e6a39a3ebef5f">HOp</a></div><div class="ttdeci">static cl::opt&lt; HelpPrinterWrapper, true, parser&lt; bool &gt; &gt; HOp(&quot;help&quot;, cl::desc(&quot;Display available options (-help-hidden for more)&quot;), cl::location(WrappedNormalPrinter), cl::ValueDisallowed)</div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a2f0a6f0f6e25c24ba9b434ba5b5a9906"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">llvm::AliasAnalysis::getTargetLibraryInfo</a></div><div class="ttdeci">const TargetLibraryInfo * getTargetLibraryInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00094">AliasAnalysis.h:94</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="TargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9f729c6c3e0de4a55dc5a3693fd4a9eb"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">llvm::Instruction::isSameOperationAs</a></div><div class="ttdeci">bool isSameOperationAs(const Instruction *I, unsigned flags=0) const </div><div class="ttdoc">Determine if one instruction is the same operation as another. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00334">Instruction.cpp:334</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a33bf9e8d62adbf5e2d52c5d7c1c1094b"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">llvm::DenseSet::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00108">DenseSet.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_aca68b8563bfa8e2a1bc658ddaae5270d"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#aca68b8563bfa8e2a1bc658ddaae5270d">llvm::VectorizeConfig::VectorizeSelect</a></div><div class="ttdeci">bool VectorizeSelect</div><div class="ttdoc">Vectorize select instructions. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00054">Transforms/Vectorize.h:54</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_ae6a7e3b0f332156aa068e2c78efbf73a"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ae6a7e3b0f332156aa068e2c78efbf73a">llvm::TargetTransformInfo::getArithmeticInstrCost</a></div><div class="ttdeci">virtual unsigned getArithmeticInstrCost(unsigned Opcode, Type *Ty, OperandValueKind Opd1Info=OK_AnyValue, OperandValueKind Opd2Info=OK_AnyValue) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00173">TargetTransformInfo.cpp:173</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_a9d9f2d817781a31c771406d1f0acc9fb"><div class="ttname"><a href="classllvm_1_1MDNode.html#a9d9f2d817781a31c771406d1f0acc9fb">llvm::MDNode::getMostGenericFPMath</a></div><div class="ttdeci">static MDNode * getMostGenericFPMath(MDNode *A, MDNode *B)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00408">Metadata.cpp:408</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a097c2d42e4deffabe6d54b007ad83367"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdoc">Return the sign extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00124">Constants.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00346">Instructions.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1445356b70fbb95acc5e0d3d2ac9101c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators... </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00099">BasicBlock.h:99</a></div></div>
<div class="ttc" id="BBVectorize_8cpp_html_abe7a6d575ed81273f1caa5808ef28f0c"><div class="ttname"><a href="BBVectorize_8cpp.html#abe7a6d575ed81273f1caa5808ef28f0c">NoSelect</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoSelect(&quot;bb-vectorize-no-select&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Don't try to vectorize select instructions&quot;))</div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00348">Mips16ISelLowering.cpp:348</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a6956cc565c902dea387b502b54fa9f18"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a6956cc565c902dea387b502b54fa9f18">llvm::Intrinsic::fmuladd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00393">Intrinsics.h:393</a></div></div>
<div class="ttc" id="structllvm_1_1VectorizeConfig_html_aef6a0edcda921321d630bbcdcd05860e"><div class="ttname"><a href="structllvm_1_1VectorizeConfig.html#aef6a0edcda921321d630bbcdcd05860e">llvm::VectorizeConfig::VectorBits</a></div><div class="ttdeci">unsigned VectorBits</div><div class="ttdoc">The size of the native vector registers. </div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Vectorize_8h_source.html#l00030">Transforms/Vectorize.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVConstant_html"><div class="ttname"><a href="classllvm_1_1SCEVConstant.html">llvm::SCEVConstant</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00037">ScalarEvolutionExpressions.h:37</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:13 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
