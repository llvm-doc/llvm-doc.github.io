<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: MachineTraceMetrics.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MachineTraceMetrics_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MachineTraceMetrics.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MachineTraceMetrics_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- lib/CodeGen/MachineTraceMetrics.cpp ----------------------*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   10</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;machine-trace-metrics&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineTraceMetrics_8h.html">llvm/CodeGen/MachineTraceMetrics.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SparseSet_8h.html">llvm/ADT/SparseSet.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCSubtargetInfo_8h.html">llvm/MC/MCSubtargetInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Format_8h.html">llvm/Support/Format.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/Target/TargetSubtargetInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#abc83f10c39219ecdfe3317fd4e3fa06c">MachineTraceMetrics::ID</a> = 0;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa2616c5fd0dd9fc9cfda509ddcd2aacc">   30</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#aa2616c5fd0dd9fc9cfda509ddcd2aacc">llvm::MachineTraceMetricsID</a> = <a class="code" href="classllvm_1_1MachineTraceMetrics.html#abc83f10c39219ecdfe3317fd4e3fa06c">MachineTraceMetrics::ID</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<a class="code" href="MachineTraceMetrics_8cpp.html#a011e32df9d9d95b15afc994c224ec2d3">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a>,</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                  <span class="stringliteral">&quot;machine-trace-metrics&quot;</span>, <span class="stringliteral">&quot;Machine Trace Metrics&quot;</span>, <span class="keyword">false</span>, <span class="keyword">true</span>)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>)</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>)</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a>,</div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#aaa792a9149c063215e04ad1226df2434">   37</a></span>&#160;                  &quot;machine-trace-<a class="code" href="MachineTraceMetrics_8cpp.html#aaa792a9149c063215e04ad1226df2434">metrics</a>&quot;, &quot;<a class="code" href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a> <a class="code" href="classllvm_1_1Trace.html">Trace</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a7f20cb0e3fe764b7b8a63003e0265508">Metrics</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacetrue.html">true</a>)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#afc47730e3c2bee0fc025898396aeb29a">   39</a></span>&#160;MachineTraceMetrics::MachineTraceMetrics()</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>), MF(0), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(0), TRI(0), <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>(0), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>(0) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  std::fill(Ensembles, <a class="code" href="namespacellvm.html#ae68b9c00207e80cdfa3645a527c0dd8f">array_endof</a>(Ensembles), (<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">Ensemble</a>*)0);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#ac6b3f10e700823152bc762064659d411">   44</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#ac6b3f10e700823152bc762064659d411">MachineTraceMetrics::getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>&gt;();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a32401a03454694b55bf2f83e1cd623cc">   51</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a32401a03454694b55bf2f83e1cd623cc">MachineTraceMetrics::runOnMachineFunction</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  MF = &amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>();</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  TRI = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a> = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> =</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a>&gt;();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a5419fb52cab4895e3fc6fc9fc5c73f91">init</a>(*ST.getSchedModel(), &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  BlockInfo.resize(MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#aef96789028634643aa76d32d0d2ac6c4">getNumBlockIDs</a>());</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  ProcResourceCycles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#aef96789028634643aa76d32d0d2ac6c4">getNumBlockIDs</a>() *</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                            SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>());</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a68facea7d4ed1bf85fc666d041e9e464">   66</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a68facea7d4ed1bf85fc666d041e9e464">MachineTraceMetrics::releaseMemory</a>() {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  MF = 0;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  BlockInfo.clear();</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153">TS_NumStrategies</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">delete</span> Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//                          Fixed block information</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// The number of instructions in a basic block and the CPU resources used by</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// those instructions don&#39;t depend on any given trace strategy.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/// Compute the resource usage in basic block MBB.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span><span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html">MachineTraceMetrics::FixedBlockInfo</a>*</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">   84</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">MachineTraceMetrics::getResources</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  assert(MBB &amp;&amp; <span class="stringliteral">&quot;No basic block&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html">FixedBlockInfo</a> *FBI = &amp;BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">if</span> (FBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a15ebac3fda5b076f52af0a069b6f9278">hasResources</a>())</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> FBI;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Compute resource usage in the block.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  FBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a82d3a0a8a2b52f6d16406a61c0c11102">HasCalls</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">unsigned</span> InstrCount = 0;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// Add up per-processor resource cycles as well.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 32&gt;</a> PRCycles(PRKinds);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac596847316c2e2472695402f00a5065d">isTransient</a>())</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    ++InstrCount;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">isCall</a>())</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      FBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a82d3a0a8a2b52f6d16406a61c0c11102">HasCalls</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Count processor resources used.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (!SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>())</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a615cad8f2751cc7fcc8115bc24c7f646">resolveSchedClass</a>(MI);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (!SC-&gt;<a class="code" href="structllvm_1_1MCSchedClassDesc.html#ac4375f281abc4b511502c46de69bb838">isValid</a>())</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MCWriteProcResEntry.html">TargetSchedModel::ProcResIter</a></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         PI = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">getWriteProcResBegin</a>(SC),</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         PE = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">getWriteProcResEnd</a>(SC); PI != PE; ++PI) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      assert(PI-&gt;ProcResourceIdx &lt; PRKinds &amp;&amp; <span class="stringliteral">&quot;Bad processor resource kind&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      PRCycles[PI-&gt;ProcResourceIdx] += PI-&gt;Cycles;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  FBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a78836dd7449e76cb6d404ecf3b371778">InstrCount</a> = InstrCount;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Scale the resource cycles so they are comparable.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">unsigned</span> PROffset = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() * PRKinds;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRKinds; ++K)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    ProcResourceCycles[PROffset + K] =</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      PRCycles[K] * SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(K);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">return</span> FBI;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a266c379348503befb8d755b1f0713095">  133</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a266c379348503befb8d755b1f0713095">MachineTraceMetrics::getProcResourceCycles</a>(<span class="keywordtype">unsigned</span> MBBNum)<span class="keyword"> const </span>{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  assert(BlockInfo[MBBNum].hasResources() &amp;&amp;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;         <span class="stringliteral">&quot;getResources() must be called before getProcResourceCycles()&quot;</span>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  assert((MBBNum+1) * PRKinds &lt;= ProcResourceCycles.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a>(ProcResourceCycles.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>() + MBBNum * PRKinds,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                            PRKinds);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">//                         Ensemble utility functions</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a94c7f4353dd7cd3169ab1f8309a6ebbc">  147</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a94c7f4353dd7cd3169ab1f8309a6ebbc">MachineTraceMetrics::Ensemble::Ensemble</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a> *ct)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  : MTM(*ct) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  BlockInfo.resize(<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.BlockInfo.size());</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  ProcResourceDepths.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.BlockInfo.size() * PRKinds);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  ProcResourceHeights.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.BlockInfo.size() * PRKinds);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// Virtual destructor serves as an anchor.</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a375a21e590d51aec3ad8da2f2bbb895f">  156</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a375a21e590d51aec3ad8da2f2bbb895f">MachineTraceMetrics::Ensemble::~Ensemble</a>() {}</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a>*</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">  159</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">MachineTraceMetrics::Ensemble::getLoopFor</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.Loops-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">getLoopFor</a>(MBB);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// Update resource-related information in the TraceBlockInfo for MBB.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// Only update resources related to the trace above MBB.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;computeDepthResources(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *TBI = &amp;BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordtype">unsigned</span> PROffset = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() * PRKinds;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Compute resources from trace above. The top block is simple.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span> (!TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a05783617bfead544a66a41fb304756f2">InstrDepth</a> = 0;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#ad1289df76629f404936fc8b2df1a6934">Head</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    std::fill(ProcResourceDepths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + PROffset,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;              ProcResourceDepths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + PROffset + PRKinds, 0);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// Compute from the block above. A post-order traversal ensures the</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// predecessor is always computed first.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">unsigned</span> PredNum = TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *PredTBI = &amp;BlockInfo[PredNum];</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  assert(PredTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>() &amp;&amp; <span class="stringliteral">&quot;Trace above has not been computed yet&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html">FixedBlockInfo</a> *PredFBI = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.<a class="code" href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">getResources</a>(TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a05783617bfead544a66a41fb304756f2">InstrDepth</a> = PredTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a05783617bfead544a66a41fb304756f2">InstrDepth</a> + PredFBI-&gt;InstrCount;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#ad1289df76629f404936fc8b2df1a6934">Head</a> = PredTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#ad1289df76629f404936fc8b2df1a6934">Head</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// Compute per-resource depths.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PredPRDepths = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">getProcResourceDepths</a>(PredNum);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PredPRCycles = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a266c379348503befb8d755b1f0713095">getProcResourceCycles</a>(PredNum);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRKinds; ++K)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ProcResourceDepths[PROffset + K] = PredPRDepths[K] + PredPRCycles[K];</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// Update resource-related information in the TraceBlockInfo for MBB.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// Only update resources related to the trace below MBB.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;computeHeightResources(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *TBI = &amp;BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">unsigned</span> PROffset = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() * PRKinds;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// Compute resources for the current block.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a2bee15b953c70ea17198d4d8b60aefed">InstrHeight</a> = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.<a class="code" href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">getResources</a>(MBB)-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a78836dd7449e76cb6d404ecf3b371778">InstrCount</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRCycles = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a266c379348503befb8d755b1f0713095">getProcResourceCycles</a>(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>());</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// The trace tail is done.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (!TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aef0722b576f40e57f91a2a53b2e97c64">Tail</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    std::copy(PRCycles.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), PRCycles.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>(),</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;              ProcResourceHeights.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + PROffset);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Compute from the block below. A post-order traversal ensures the</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// predecessor is always computed first.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordtype">unsigned</span> SuccNum = TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *SuccTBI = &amp;BlockInfo[SuccNum];</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  assert(SuccTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>() &amp;&amp; <span class="stringliteral">&quot;Trace below has not been computed yet&quot;</span>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a2bee15b953c70ea17198d4d8b60aefed">InstrHeight</a> += SuccTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a2bee15b953c70ea17198d4d8b60aefed">InstrHeight</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aef0722b576f40e57f91a2a53b2e97c64">Tail</a> = SuccTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aef0722b576f40e57f91a2a53b2e97c64">Tail</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// Compute per-resource heights.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> SuccPRHeights = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">getProcResourceHeights</a>(SuccNum);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRKinds; ++K)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    ProcResourceHeights[PROffset + K] = SuccPRHeights[K] + PRCycles[K];</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// Check if depth resources for MBB are valid and return the TBI.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// Return NULL if the resources have been invalidated.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a>*</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a682b90abb526c398e9e1bfc8e37f03b7">MachineTraceMetrics::Ensemble::</a></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a682b90abb526c398e9e1bfc8e37f03b7">  234</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a682b90abb526c398e9e1bfc8e37f03b7">getDepthResources</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *TBI = &amp;BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">return</span> TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>() ? TBI : 0;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// Check if height resources for MBB are valid and return the TBI.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// Return NULL if the resources have been invalidated.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a>*</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a77ffdd1b319a37f5ff167054f949ac8a">MachineTraceMetrics::Ensemble::</a></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a77ffdd1b319a37f5ff167054f949ac8a">  243</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a77ffdd1b319a37f5ff167054f949ac8a">getHeightResources</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> *TBI = &amp;BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">return</span> TBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>() ? TBI : 0;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">/// Get an array of processor resource depths for MBB. Indexed by processor</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/// resource kind, this array contains the scaled processor resources consumed</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">/// by all blocks preceding MBB in its trace. It does not include instructions</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">/// in MBB.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/// Compare TraceBlockInfo::InstrDepth.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">MachineTraceMetrics::Ensemble::</a></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">  256</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">getProcResourceDepths</a>(<span class="keywordtype">unsigned</span> MBBNum)<span class="keyword"> const </span>{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  assert((MBBNum+1) * PRKinds &lt;= ProcResourceDepths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a>(ProcResourceDepths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>() + MBBNum * PRKinds,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                            PRKinds);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// Get an array of processor resource heights for MBB. Indexed by processor</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// resource kind, this array contains the scaled processor resources consumed</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/// by this block and all blocks following it in its trace.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// Compare TraceBlockInfo::InstrHeight.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">MachineTraceMetrics::Ensemble::</a></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">  270</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">getProcResourceHeights</a>(<span class="keywordtype">unsigned</span> MBBNum)<span class="keyword"> const </span>{</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">unsigned</span> PRKinds = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  assert((MBBNum+1) * PRKinds &lt;= ProcResourceHeights.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a>(ProcResourceHeights.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">data</a>() + MBBNum * PRKinds,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                            PRKinds);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">//                         Trace Selection Strategies</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">// A trace selection strategy is implemented as a sub-class of Ensemble. The</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// trace through a block B is computed by two DFS traversals of the CFG</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// starting from B. One upwards, and one downwards. During the upwards DFS,</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">// pickTracePred() is called on the post-ordered blocks. During the downwards</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">// DFS, pickTraceSucc() is called in a post-order.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">// We never allow traces that leave loops, but we do allow traces to enter</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// nested loops. We also never allow traces to contain back-edges.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// This means that a loop header can never appear above the center block of a</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// trace, except as the trace head. Below the center block, loop exiting edges</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">// are banned.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">// Return true if an edge from the From loop to the To loop is leaving a loop.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">// Either of To and From can be null.</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#a845058902483d2afbab93214dcce8684">  297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineTraceMetrics_8cpp.html#a845058902483d2afbab93214dcce8684">isExitingLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *From, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *To) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> From &amp;&amp; !From-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(To);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// MinInstrCountEnsemble - Pick the trace that executes the least number of</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// instructions.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keyword">class </span>MinInstrCountEnsemble : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">MachineTraceMetrics::Ensemble</a> {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">getName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;MinInstr&quot;</span>; }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a73b0295b2f37729d059fe500f2824255">pickTracePred</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac76906d75d1c61ed285c2159520ea8da">pickTraceSucc</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  MinInstrCountEnsemble(<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a> *mtm)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    : <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a1e124ae038533aedea048a8ccf3c4356">MachineTraceMetrics::Ensemble</a>(mtm) {}</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;};</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">// Select the preferred predecessor for MBB.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;MinInstrCountEnsemble::pickTracePred(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>())</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *CurLoop = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(MBB);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// Don&#39;t leave loops, and never follow back-edges.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (CurLoop &amp;&amp; MBB == CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordtype">unsigned</span> CurCount = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.<a class="code" href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">getResources</a>(MBB)-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a78836dd7449e76cb6d404ecf3b371778">InstrCount</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Best = 0;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">unsigned</span> BestDepth = 0;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">MachineBasicBlock::const_pred_iterator</a></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Pred = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a> *PredTBI =</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a682b90abb526c398e9e1bfc8e37f03b7">getDepthResources</a>(Pred);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// Ignore cycles that aren&#39;t natural loops.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (!PredTBI)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Pick the predecessor that would give this block the smallest InstrDepth.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">unsigned</span> Depth = PredTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a05783617bfead544a66a41fb304756f2">InstrDepth</a> + CurCount;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (!Best || Depth &lt; BestDepth)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      Best = Pred, BestDepth = Depth;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">return</span> Best;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// Select the preferred successor for MBB.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;MinInstrCountEnsemble::pickTraceSucc(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">pred_empty</a>())</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *CurLoop = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(MBB);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Best = 0;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordtype">unsigned</span> BestHeight = 0;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">MachineBasicBlock::const_succ_iterator</a></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// Don&#39;t consider back-edges.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (CurLoop &amp;&amp; Succ == CurLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// Don&#39;t consider successors exiting CurLoop.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a845058902483d2afbab93214dcce8684">isExitingLoop</a>(CurLoop, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(Succ)))</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a> *SuccTBI =</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a77ffdd1b319a37f5ff167054f949ac8a">getHeightResources</a>(Succ);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// Ignore cycles that aren&#39;t natural loops.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (!SuccTBI)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Pick the successor that would give this block the smallest InstrHeight.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">unsigned</span> Height = SuccTBI-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a2bee15b953c70ea17198d4d8b60aefed">InstrHeight</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (!Best || Height &lt; BestHeight)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      Best = Succ, BestHeight = Height;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">return</span> Best;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">// Get an Ensemble sub-class for the requested trace strategy.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">MachineTraceMetrics::Ensemble</a> *</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a72fb7462e388cf87c645160d2fc276c8">  375</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a72fb7462e388cf87c645160d2fc276c8">MachineTraceMetrics::getEnsemble</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5">MachineTraceMetrics::Strategy</a> strategy) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  assert(strategy &lt; <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153">TS_NumStrategies</a> &amp;&amp; <span class="stringliteral">&quot;Invalid trace strategy enum&quot;</span>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">Ensemble</a> *&amp;E = Ensembles[strategy];</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> (E)</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">return</span> E;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Allocate new Ensemble on demand.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">switch</span> (strategy) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11">TS_MinInstrCount</a>: <span class="keywordflow">return</span> (E = <span class="keyword">new</span> MinInstrCountEnsemble(<span class="keyword">this</span>));</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid trace strategy enum&quot;</span>);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a8b0a17d3b3450955cd4c092d5cc63de5">  388</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a8b0a17d3b3450955cd4c092d5cc63de5">MachineTraceMetrics::invalidate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Invalidate traces through BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()].invalidate();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153">TS_NumStrategies</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;invalidate(MBB);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics.html#a1c87643a99fc1785e391017505cb9ce1">  396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a1c87643a99fc1785e391017505cb9ce1">MachineTraceMetrics::verifyAnalysis</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (!MF)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  assert(BlockInfo.size() == MF-&gt;getNumBlockIDs() &amp;&amp; <span class="stringliteral">&quot;Outdated BlockInfo size&quot;</span>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153">TS_NumStrategies</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      Ensembles[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;verify();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">//                               Trace building</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">// Traces are built by two CFG traversals. To avoid recomputing too much, use a</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// set abstraction that confines the search to the current loop, and doesn&#39;t</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">// revisit blocks.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="keyword">struct </span>LoopBounds {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;MachineTraceMetrics::TraceBlockInfo&gt;</a> Blocks;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const MachineBasicBlock*, 8&gt;</a> Visited;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">bool</span> Downward;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  LoopBounds(<a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;MachineTraceMetrics::TraceBlockInfo&gt;</a> blocks,</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *<a class="code" href="MachineLoopInfo_8cpp.html#a59aa69fa39ee55438427bfc39852b9e6">loops</a>)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    : Blocks(blocks), Loops(loops), Downward(<span class="keyword">false</span>) {}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;};</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// Specialize po_iterator_storage in order to prune the post-order traversal so</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// it is limited to the current loop and doesn&#39;t traverse the loop back edges.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html">  431</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1po__iterator__storage.html">po_iterator_storage</a>&lt;LoopBounds, <a class="code" href="namespacetrue.html">true</a>&gt; {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  LoopBounds &amp;LB;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#ac357f99e36b35bf15cdf9c8f25af720a">  434</a></span>&#160;  <a class="code" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#ac357f99e36b35bf15cdf9c8f25af720a">po_iterator_storage</a>(LoopBounds &amp;lb) : LB(lb) {}</div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#a3b2e0991ef19713f3f93145bfc572bde">  435</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#a3b2e0991ef19713f3f93145bfc572bde">finishPostorder</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*) {}</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#aa0579cace56521208a005b0cf4986e83">  437</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#aa0579cace56521208a005b0cf4986e83">insertEdge</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *From, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *To) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// Skip already visited To blocks.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a> &amp;TBI = LB.Blocks[To-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (LB.Downward ? TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>() : TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>())</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// From is null once when To is the trace center block.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span> (From) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *FromLoop = LB.Loops-&gt;getLoopFor(From)) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// Don&#39;t follow backedges, don&#39;t leave FromLoop when going upwards.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> ((LB.Downward ? To : From) == FromLoop-&gt;getHeader())</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// Don&#39;t leave FromLoop.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a845058902483d2afbab93214dcce8684">isExitingLoop</a>(FromLoop, LB.Loops-&gt;getLoopFor(To)))</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// To is a new block. Mark the block as visited in case the CFG has cycles</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// that MachineLoopInfo didn&#39;t recognize as a natural loop.</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> LB.Visited.insert(To);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;};</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">/// Compute the trace through MBB.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::computeTrace(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Computing &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">getName</a>() &lt;&lt; <span class="stringliteral">&quot; trace through BB#&quot;</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;               &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// Set up loop bounds for the backwards post-order traversal.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  LoopBounds Bounds(BlockInfo, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.Loops);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Run an upwards post-order search for the trace start.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  Bounds.Downward = <span class="keyword">false</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  Bounds.Visited.clear();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structllvm_1_1ipo__ext__iterator.html">ipo_ext_iterator&lt;const MachineBasicBlock*, LoopBounds&gt;</a> UpwardPO;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">for</span> (UpwardPO <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#aa0ac2b3a0d13de656a4274b8ea262db5">ipo_ext_begin</a>(MBB, Bounds), E = <a class="code" href="namespacellvm.html#a7713977bef24a5dae3aa800ecee5502e">ipo_ext_end</a>(MBB, Bounds);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  pred for BB#&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumber()];</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// All the predecessors have been visited, pick the preferred one.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    TBI.Pred = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a73b0295b2f37729d059fe500f2824255">pickTracePred</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (TBI.Pred)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; TBI.Pred-&gt;getNumber() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;null\n&quot;</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    });</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// The trace leading to I is now known, compute the depth resources.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    computeDepthResources(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// Run a downwards post-order search for the trace end.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  Bounds.Downward = <span class="keyword">true</span>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  Bounds.Visited.clear();</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structllvm_1_1po__ext__iterator.html">po_ext_iterator&lt;const MachineBasicBlock*, LoopBounds&gt;</a> DownwardPO;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">for</span> (DownwardPO <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a8a44b47a55b1045e5732d178cc371966">po_ext_begin</a>(MBB, Bounds), E = <a class="code" href="namespacellvm.html#a9a82b9706ddf56377f4bfea5e61fc951">po_ext_end</a>(MBB, Bounds);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  succ for BB#&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumber()];</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// All the successors have been visited, pick the preferred one.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    TBI.Succ = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac76906d75d1c61ed285c2159520ea8da">pickTraceSucc</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">if</span> (TBI.Succ)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; TBI.Succ-&gt;getNumber() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;null\n&quot;</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    });</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// The trace leaving I is now known, compute the height resources.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    computeHeightResources(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">/// Invalidate traces through BadMBB.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span><span class="keywordtype">void</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a063217bcbb8b81adfdc88feb1a52ddcb">  510</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a063217bcbb8b81adfdc88feb1a52ddcb">MachineTraceMetrics::Ensemble::invalidate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BadMBB) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineBasicBlock*, 16&gt;</a> WorkList;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> &amp;BadTBI = BlockInfo[BadMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Invalidate height resources of blocks above MBB.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (BadTBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>()) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    BadTBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aad9695c85c7fa313de163b67ae910b85">invalidateHeight</a>();</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BadMBB);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Invalidate BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">getName</a>()</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; height.\n&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// Find any MBB predecessors that have MBB as their preferred successor.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="comment">// They are the only ones that need to be invalidated.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">MachineBasicBlock::const_pred_iterator</a></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> &amp;TBI = BlockInfo[(*I)-&gt;getNumber()];</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">if</span> (!TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>())</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> (TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a> == MBB) {</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aad9695c85c7fa313de163b67ae910b85">invalidateHeight</a>();</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Verify that TBI.Succ is actually a *I successor.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        assert((!TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a> || (*I)-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>)) &amp;&amp; <span class="stringliteral">&quot;CFG changed&quot;</span>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// Invalidate depth resources of blocks below MBB.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span> (BadTBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>()) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    BadTBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a145c87332fff3323e335d8f6152ccbcf">invalidateDepth</a>();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BadMBB);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Invalidate BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">getName</a>()</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; depth.\n&quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="comment">// Find any MBB successors that have MBB as their preferred predecessor.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">// They are the only ones that need to be invalidated.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">MachineBasicBlock::const_succ_iterator</a></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> &amp;TBI = BlockInfo[(*I)-&gt;getNumber()];</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> (!TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>())</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a> == MBB) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a145c87332fff3323e335d8f6152ccbcf">invalidateDepth</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">// Verify that TBI.Pred is actually a *I predecessor.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        assert((!TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a> || (*I)-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7a60cbf0b62e6d73972a58a4d33539d9">isPredecessor</a>(TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>)) &amp;&amp; <span class="stringliteral">&quot;CFG changed&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// Clear any per-instruction data. We only have to do this for BadMBB itself</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// because the instructions in that block may change. Other blocks may be</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// invalidated, but their instructions will stay the same, so there is no</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// need to erase the Cycle entries. They will be overwritten when we</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// recompute.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BadMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = BadMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    Cycles.erase(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ab276508f4382772aa02513a739614ed1">  576</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ab276508f4382772aa02513a739614ed1">MachineTraceMetrics::Ensemble::verify</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  assert(BlockInfo.size() == <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#aef96789028634643aa76d32d0d2ac6c4">getNumBlockIDs</a>() &amp;&amp;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <span class="stringliteral">&quot;Outdated BlockInfo size&quot;</span>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Num = 0, e = BlockInfo.size(); Num != e; ++Num) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">TraceBlockInfo</a> &amp;TBI = BlockInfo[Num];</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>() &amp;&amp; TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a62c75a04c3f91f17d382c86cde4d3858">getBlockNumbered</a>(Num);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      assert(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7a60cbf0b62e6d73972a58a4d33539d9">isPredecessor</a>(TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>) &amp;&amp; <span class="stringliteral">&quot;CFG doesn&#39;t match trace&quot;</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      assert(BlockInfo[TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()].hasValidDepth() &amp;&amp;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;             <span class="stringliteral">&quot;Trace is broken, depth should have been invalidated.&quot;</span>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(MBB);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      assert(!(Loop &amp;&amp; MBB == Loop-&gt;getHeader()) &amp;&amp; <span class="stringliteral">&quot;Trace contains backedge&quot;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>() &amp;&amp; TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a62c75a04c3f91f17d382c86cde4d3858">getBlockNumbered</a>(Num);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      assert(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>) &amp;&amp; <span class="stringliteral">&quot;CFG doesn&#39;t match trace&quot;</span>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      assert(BlockInfo[TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()].hasValidHeight() &amp;&amp;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;             <span class="stringliteral">&quot;Trace is broken, height should have been invalidated.&quot;</span>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(MBB);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *SuccLoop = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      assert(!(Loop &amp;&amp; Loop == SuccLoop &amp;&amp; TBI.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a> == Loop-&gt;getHeader()) &amp;&amp;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;             <span class="stringliteral">&quot;Trace contains backedge&quot;</span>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">//                             Data Dependencies</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">// Compute the depth and height of each instruction based on data dependencies</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">// and instruction latencies. These cycle numbers assume that the CPU can issue</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">// an infinite number of instructions per cycle as long as their dependencies</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">// are ready.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">// A data dependency is represented as a defining MI and operand numbers on the</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">// defining and using MI.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keyword">struct </span>DataDep {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordtype">unsigned</span> DefOp;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordtype">unsigned</span> UseOp;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  DataDep(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI, <span class="keywordtype">unsigned</span> DefOp, <span class="keywordtype">unsigned</span> UseOp)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    : DefMI(DefMI), DefOp(DefOp), UseOp(UseOp) {}</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">  /// Create a DataDep from an SSA form virtual register.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"></span>  DataDep(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>, <span class="keywordtype">unsigned</span> VirtReg, <span class="keywordtype">unsigned</span> UseOp)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    : UseOp(UseOp) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(VirtReg));</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::def_iterator</a> DefI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a66efe5c5561969cd4506c421daaf9bf3">def_begin</a>(VirtReg);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    assert(!DefI.<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#a4a3dd7c0c14bb8cc05e2ffe79ee28511">atEnd</a>() &amp;&amp; <span class="stringliteral">&quot;Register has no defs&quot;</span>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    DefMI = &amp;*DefI;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    DefOp = DefI.<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#a2ae4c129d83e0b28b8c5ca8691fa0a91">getOperandNo</a>();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    assert((++DefI).atEnd() &amp;&amp; <span class="stringliteral">&quot;Register has multiple defs&quot;</span>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;};</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">// Get the input data dependencies that must be ready before UseMI can issue.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">// Return true if UseMI has any physreg operands.</span></div><div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#aafc41863fbf5655579305bc6297d36ec">  639</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineTraceMetrics_8cpp.html#aafc41863fbf5655579305bc6297d36ec">getDataDeps</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI,</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;DataDep&gt;</a> &amp;Deps,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *MRI) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordtype">bool</span> HasPhysRegs = <span class="keyword">false</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIOperands.html">ConstMIOperands</a> MO(UseMI); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO-&gt;getReg();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (!Reg)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      HasPhysRegs = <span class="keyword">true</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// Collect virtual register reads.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (MO-&gt;readsReg())</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(DataDep(MRI, Reg, MO.getOperandNo()));</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">return</span> HasPhysRegs;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">// Get the input data dependencies of a PHI instruction, using Pred as the</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">// preferred predecessor.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">// This will add at most one dependency to Deps.</span></div><div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">  663</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">getPHIDeps</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI,</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                       <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;DataDep&gt;</a> &amp;Deps,</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Pred,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *MRI) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// No predecessor at the beginning of a trace. Ignore dependencies.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> (!Pred)</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  assert(UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>() &amp;&amp; UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>() % 2 &amp;&amp; <span class="stringliteral">&quot;Bad PHI&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>() == Pred) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(DataDep(MRI, Reg, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">// Keep track of physreg data dependencies by recording each live register unit.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">// Associate each regunit with an instruction operand. Depending on the</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">// direction instructions are scanned, it could be the operand that defined the</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">// regunit, or the highest operand to read the regunit.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="keyword">struct </span>LiveRegUnit {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">unsigned</span> RegUnit;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordtype">unsigned</span> Cycle;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordtype">unsigned</span> Op;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordtype">unsigned</span> getSparseSetIndex()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> RegUnit; }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  LiveRegUnit(<span class="keywordtype">unsigned</span> RU) : RegUnit(RU), Cycle(0), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>(0), Op(0) {}</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;};</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">// Identify physreg dependencies for UseMI, and update the live regunit</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">// tracking set when scanning instructions downwards.</span></div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#a6eb3ac91456a9880aecf25dc8e3cbaa5">  699</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MachineTraceMetrics_8cpp.html#a6eb3ac91456a9880aecf25dc8e3cbaa5">updatePhysDepsDownwards</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI,</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;DataDep&gt;</a> &amp;Deps,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                    <a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;LiveRegUnit&gt;</a> &amp;RegUnits,</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> Kills;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> LiveDefOps;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIOperands.html">ConstMIOperands</a> MO(UseMI); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO-&gt;getReg();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// Track live defs and kills for updating RegUnits.</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (MO-&gt;isDef()) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">if</span> (MO-&gt;isDead())</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        Kills.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        LiveDefOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MO.getOperandNo());</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MO-&gt;isKill())</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      Kills.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// Identify dependencies.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;readsReg())</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <a class="code" href="classT.html">SparseSet&lt;LiveRegUnit&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#af521754c270d66c0596d082a7eb6766d">find</a>(*Units);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (I == RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">end</a>())</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(DataDep(I-&gt;MI, I-&gt;Op, MO.getOperandNo()));</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// Update RegUnits to reflect live registers after UseMI.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// First kills.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Kills.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Kills[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a5a00f6afdfec487d3165d29e57452b32">erase</a>(*Units);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// Second, live defs.</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = LiveDefOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordtype">unsigned</span> DefOp = LiveDefOps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(DefOp).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), TRI);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      LiveRegUnit &amp;LRU = RegUnits[*Units];</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      LRU.MI = UseMI;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      LRU.Op = DefOp;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/// The length of the critical path through a trace is the maximum of two path</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/// lengths:</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">/// 1. The maximum height+depth over all instructions in the trace center block.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">/// 2. The longest cross-block dependency chain. For small blocks, it is</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">///    possible that the critical path through the trace doesn&#39;t include any</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">///    instructions in the block.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/// This function computes the second number from the live-in list of the</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">/// center block.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;computeCrossBlockCriticalPath(<span class="keyword">const</span> TraceBlockInfo &amp;TBI) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  assert(TBI.HasValidInstrDepths &amp;&amp; <span class="stringliteral">&quot;Missing depth info&quot;</span>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  assert(TBI.HasValidInstrHeights &amp;&amp; <span class="stringliteral">&quot;Missing height info&quot;</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordtype">unsigned</span> MaxLen = 0;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TBI.LiveIns.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keyword">const</span> LiveInReg &amp;LIR = TBI.LiveIns[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(LIR.Reg))</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(LIR.Reg);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// Ignore dependencies outside the current trace.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keyword">const</span> TraceBlockInfo &amp;DefTBI = BlockInfo[DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (!DefTBI.isUsefulDominator(TBI))</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordtype">unsigned</span> Len = LIR.Height + Cycles[DefMI].Depth;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    MaxLen = std::max(MaxLen, Len);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">return</span> MaxLen;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">/// Compute instruction depths for all instructions above or in MBB in its</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/// trace. This assumes that the trace through MBB has already been computed.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;computeInstrDepths(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// The top of the trace may already be computed, and HasValidInstrDepths</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// implies Head-&gt;HasValidInstrDepths, so we only need to start from the first</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// block in the trace that needs to be recomputed.</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineBasicBlock*, 8&gt;</a> Stack;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    assert(TBI.hasValidDepth() &amp;&amp; <span class="stringliteral">&quot;Incomplete trace&quot;</span>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (TBI.HasValidInstrDepths)</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    Stack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MBB);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    MBB = TBI.Pred;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  } <span class="keywordflow">while</span> (MBB);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// FIXME: If MBB is non-null at this point, it is the last pre-computed block</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// in the trace. We should track any live-out physregs that were defined in</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// the trace. This is quite rare in SSA form, typically created by CSE</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// hoisting a compare.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;LiveRegUnit&gt;</a> RegUnits;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">setUniverse</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">getNumRegUnits</a>());</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Go through trace blocks in top-down order, stopping after the center block.</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DataDep, 8&gt;</a> Deps;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">while</span> (!Stack.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    MBB = Stack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nDepths for BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    TBI.HasValidInstrDepths = <span class="keyword">true</span>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    TBI.CriticalPath = 0;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// Print out resource depths here as well.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm.html#a69dc1b119f8cb95b7e36f586c5aeb372">format</a>(<span class="stringliteral">&quot;%7u Instructions\n&quot;</span>, TBI.InstrDepth);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRDepths = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">getProcResourceDepths</a>(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>());</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRDepths.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++K)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordflow">if</span> (PRDepths[K]) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          <span class="keywordtype">unsigned</span> Factor = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(K);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm.html#a69dc1b119f8cb95b7e36f586c5aeb372">format</a>(<span class="stringliteral">&quot;%6uc @ &quot;</span>, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.getCycles(PRDepths[K]))</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                 &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">getProcResource</a>(K)-&gt;<a class="code" href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">Name</a> &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                 &lt;&lt; PRDepths[K]/Factor &lt;&lt; <span class="stringliteral">&quot; ops x&quot;</span> &lt;&lt; Factor &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    });</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// Also compute the critical path length through MBB when possible.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (TBI.HasValidInstrHeights)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      TBI.CriticalPath = computeCrossBlockCriticalPath(TBI);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="comment">// Collect all data dependencies.</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      Deps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">if</span> (UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>())</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">getPHIDeps</a>(UseMI, Deps, TBI.Pred, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#aafc41863fbf5655579305bc6297d36ec">getDataDeps</a>(UseMI, Deps, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI))</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <a class="code" href="MachineTraceMetrics_8cpp.html#a6eb3ac91456a9880aecf25dc8e3cbaa5">updatePhysDepsDownwards</a>(UseMI, Deps, RegUnits, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TRI);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">// Filter and process dependencies, computing the earliest issue cycle.</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <span class="keywordtype">unsigned</span> Cycle = 0;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keyword">const</span> DataDep &amp;Dep = Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keyword">const</span> TraceBlockInfo&amp;DepTBI =</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;          BlockInfo[Dep.DefMI-&gt;getParent()-&gt;getNumber()];</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="comment">// Ignore dependencies from outside the current trace.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> (!DepTBI.isUsefulDominator(TBI))</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        assert(DepTBI.HasValidInstrDepths &amp;&amp; <span class="stringliteral">&quot;Inconsistent dependency&quot;</span>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordtype">unsigned</span> DepCycle = Cycles.lookup(Dep.DefMI).Depth;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// Add latency if DefMI is a real instruction. Transients get latency 0.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">if</span> (!Dep.DefMI-&gt;isTransient())</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;          DepCycle += <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            .<a class="code" href="classllvm_1_1TargetSchedModel.html#a62eff453556ab0541cb285741f7eec8d">computeOperandLatency</a>(Dep.DefMI, Dep.DefOp, UseMI, Dep.UseOp);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        Cycle = std::max(Cycle, DepCycle);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="comment">// Remember the instruction depth.</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      InstrCycles &amp;MICycles = Cycles[UseMI];</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      MICycles.Depth = Cycle;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">if</span> (!TBI.HasValidInstrHeights) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Cycle &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *UseMI);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="comment">// Update critical path length.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      TBI.CriticalPath = std::max(TBI.CriticalPath, Cycle + MICycles.Height);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; TBI.CriticalPath &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; Cycle &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *UseMI);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">// Identify physreg dependencies for MI when scanning instructions upwards.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">// Return the issue height of MI after considering any live regunits.</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">// Height is the issue height computed from virtual register dependencies alone.</span></div><div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#a6b0649bddffdfd2c95cba647d1b6bee4">  877</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="MachineTraceMetrics_8cpp.html#a6b0649bddffdfd2c95cba647d1b6bee4">updatePhysDepsUpwards</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> Height,</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                                      <a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;LiveRegUnit&gt;</a> &amp;RegUnits,</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> &amp;SchedModel,</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *TII,</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> ReadOps;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIOperands.html">ConstMIOperands</a> MO(MI); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO-&gt;getReg();</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (MO-&gt;readsReg())</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      ReadOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MO.getOperandNo());</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;isDef())</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// This is a def of Reg. Remove corresponding entries from RegUnits, and</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// update MI Height to consider the physreg dependencies.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="classT.html">SparseSet&lt;LiveRegUnit&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#af521754c270d66c0596d082a7eb6766d">find</a>(*Units);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (I == RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">end</a>())</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordtype">unsigned</span> DepHeight = I-&gt;Cycle;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac596847316c2e2472695402f00a5065d">isTransient</a>()) {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">// We may not know the UseMI of this dependency, if it came from the</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="comment">// live-in list. SchedModel can handle a NULL UseMI.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        DepHeight += SchedModel</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;          .<a class="code" href="classllvm_1_1TargetSchedModel.html#a62eff453556ab0541cb285741f7eec8d">computeOperandLatency</a>(MI, MO.getOperandNo(), I-&gt;MI, I-&gt;Op);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      }</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      Height = std::max(Height, DepHeight);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="comment">// This regunit is dead above MI.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a5a00f6afdfec487d3165d29e57452b32">erase</a>(I);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// Now we know the height of MI. Update any regunits read.</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ReadOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(ReadOps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      LiveRegUnit &amp;LRU = RegUnits[*Units];</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="comment">// Set the height to the highest reader of the unit.</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (LRU.Cycle &lt;= Height &amp;&amp; LRU.MI != MI) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        LRU.Cycle = Height;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        LRU.MI = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        LRU.Op = ReadOps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keywordflow">return</span> Height;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#a5d24d8e4fe9b607386e33672d430746f">  930</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const MachineInstr *, unsigned&gt;</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a5d24d8e4fe9b607386e33672d430746f">MIHeightMap</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">// Push the height of DefMI upwards if required to match UseMI.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">// Return true if this is the first time DefMI was seen.</span></div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="MachineTraceMetrics_8cpp.html#ab5ed88df48b43f7b00b64339b371f960">  934</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineTraceMetrics_8cpp.html#ab5ed88df48b43f7b00b64339b371f960">pushDepHeight</a>(<span class="keyword">const</span> DataDep &amp;Dep,</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI, <span class="keywordtype">unsigned</span> UseHeight,</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                          <a class="code" href="classllvm_1_1DenseMap.html">MIHeightMap</a> &amp;Heights,</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> &amp;SchedModel,</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *TII) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// Adjust height by Dep.DefMI latency.</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (!Dep.DefMI-&gt;isTransient())</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    UseHeight += SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a62eff453556ab0541cb285741f7eec8d">computeOperandLatency</a>(Dep.DefMI, Dep.DefOp,</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                                  UseMI, Dep.UseOp);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// Update Heights[DefMI] to be the maximum height seen.</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">MIHeightMap::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordtype">bool</span> New;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(I, New) = Heights.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(Dep.DefMI, UseHeight));</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (New)</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// DefMI has been pushed before. Give it the max height.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="keywordflow">if</span> (I-&gt;second &lt; UseHeight)</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    I-&gt;second = UseHeight;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">/// Assuming that the virtual register defined by DefMI:DefOp was used by</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// Trace.back(), add it to the live-in lists of all the blocks in Trace. Stop</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// when reaching the block that contains DefMI.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;addLiveIns(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI, <span class="keywordtype">unsigned</span> DefOp,</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const MachineBasicBlock*&gt;</a> <a class="code" href="classllvm_1_1Trace.html">Trace</a>) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  assert(!Trace.<a class="code" href="classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Trace should contain at least one block&quot;</span>);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(DefOp).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg));</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefMBB = DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// Reg is live-in to all blocks in Trace that follow DefMBB.</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Trace.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = Trace[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1];</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (MBB == DefMBB)</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">// Just add the register. The height will be updated later.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    TBI.LiveIns.push_back(Reg);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">/// Compute instruction heights in the trace through MBB. This updates MBB and</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/// the blocks below it in the trace. It is assumed that the trace has already</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">/// been computed.</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MachineTraceMetrics::Ensemble::</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;computeInstrHeights(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// The bottom of the trace may already be computed.</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// Find the blocks that need updating.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineBasicBlock*, 8&gt;</a> Stack;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    assert(TBI.hasValidHeight() &amp;&amp; <span class="stringliteral">&quot;Incomplete trace&quot;</span>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span> (TBI.HasValidInstrHeights)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    Stack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MBB);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    TBI.LiveIns.clear();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    MBB = TBI.Succ;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  } <span class="keywordflow">while</span> (MBB);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// As we move upwards in the trace, keep track of instructions that are</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// required by deeper trace instructions. Map MI -&gt; height required so far.</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">MIHeightMap</a> Heights;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// For physregs, the def isn&#39;t known when we see the use.</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// Instead, keep track of the highest use of each regunit.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;LiveRegUnit&gt;</a> RegUnits;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">setUniverse</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">getNumRegUnits</a>());</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// If the bottom of the trace was already precomputed, initialize heights</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// from its live-in list.</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// MBB is the highest precomputed block in the trace.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">if</span> (MBB) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TBI.LiveIns.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      LiveInReg LI = TBI.LiveIns[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(LI.Reg)) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="comment">// For virtual registers, the def latency is included.</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordtype">unsigned</span> &amp;Height = Heights[<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(LI.Reg)];</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">if</span> (Height &lt; LI.Height)</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          Height = LI.Height;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="comment">// For register units, the def latency is not included because we don&#39;t</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="comment">// know the def yet.</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        RegUnits[LI.Reg].Cycle = LI.Height;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// Go through the trace blocks in bottom-up order.</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DataDep, 8&gt;</a> Deps;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">for</span> (;!Stack.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>(); Stack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>()) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    MBB = Stack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Heights for BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    TraceBlockInfo &amp;TBI = BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    TBI.HasValidInstrHeights = <span class="keyword">true</span>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    TBI.CriticalPath = 0;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm.html#a69dc1b119f8cb95b7e36f586c5aeb372">format</a>(<span class="stringliteral">&quot;%7u Instructions\n&quot;</span>, TBI.InstrHeight);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRHeights = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">getProcResourceHeights</a>(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>());</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRHeights.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++K)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">if</span> (PRHeights[K]) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;          <span class="keywordtype">unsigned</span> Factor = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(K);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm.html#a69dc1b119f8cb95b7e36f586c5aeb372">format</a>(<span class="stringliteral">&quot;%6uc @ &quot;</span>, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.getCycles(PRHeights[K]))</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                 &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">getProcResource</a>(K)-&gt;<a class="code" href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">Name</a> &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                 &lt;&lt; PRHeights[K]/Factor &lt;&lt; <span class="stringliteral">&quot; ops x&quot;</span> &lt;&lt; Factor &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    });</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// Get dependencies from PHIs in the trace successor.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ = TBI.Succ;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">// If MBB is the last block in the trace, and it has a back-edge to the</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// loop header, get loop-carried dependencies from PHIs in the header. For</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// that purpose, pretend that all the loop header PHIs have height 0.</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (!Succ)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">getLoopFor</a>(MBB))</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">if</span> (MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()))</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          Succ = <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span> (Succ) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Succ-&gt;begin(), E = Succ-&gt;end();</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        Deps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">getPHIDeps</a>(PHI, Deps, MBB, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">if</span> (!Deps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <span class="comment">// Loop header PHI heights are all 0.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;          <span class="keywordtype">unsigned</span> Height = TBI.Succ ? Cycles.lookup(PHI).Height : 0;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;pred\t&quot;</span> &lt;&lt; Height &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *PHI);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#ab5ed88df48b43f7b00b64339b371f960">pushDepHeight</a>(Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>(), <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>, Height,</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                            Heights, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TII))</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            addLiveIns(Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>().DefMI, Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>().DefOp, Stack);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// Go through the block backwards.</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> BI = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;         BI != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = --BI;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="comment">// Find the MI height as determined by virtual register uses in the</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="comment">// trace below.</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="keywordtype">unsigned</span> Cycle = 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="classllvm_1_1DenseMapIterator.html">MIHeightMap::iterator</a> HeightI = Heights.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(MI);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">if</span> (HeightI != Heights.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        Cycle = HeightI-&gt;second;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="comment">// We won&#39;t be seeing any more MI uses.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        Heights.<a class="code" href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(HeightI);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="comment">// Don&#39;t process PHI deps. They depend on the specific predecessor, and</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="comment">// we&#39;ll get them when visiting the predecessor.</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      Deps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordtype">bool</span> HasPhysRegs = !MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>() &amp;&amp; <a class="code" href="MachineTraceMetrics_8cpp.html#aafc41863fbf5655579305bc6297d36ec">getDataDeps</a>(MI, Deps, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="comment">// There may also be regunit dependencies to include in the height.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">if</span> (HasPhysRegs)</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        Cycle = <a class="code" href="MachineTraceMetrics_8cpp.html#a6b0649bddffdfd2c95cba647d1b6bee4">updatePhysDepsUpwards</a>(MI, Cycle, RegUnits,</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                      <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TII, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TRI);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="comment">// Update the required height of any virtual registers read by MI.</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#ab5ed88df48b43f7b00b64339b371f960">pushDepHeight</a>(Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], MI, Cycle, Heights, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.SchedModel, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TII))</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          addLiveIns(Deps[i].DefMI, Deps[i].DefOp, Stack);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      InstrCycles &amp;MICycles = Cycles[<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>];</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      MICycles.Height = Cycle;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="keywordflow">if</span> (!TBI.HasValidInstrDepths) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Cycle &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">// Update critical path length.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      TBI.CriticalPath = std::max(TBI.CriticalPath, Cycle + MICycles.Depth);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; TBI.CriticalPath &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; Cycle &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// Update virtual live-in heights. They were added by addLiveIns() with a 0</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// height because the final height isn&#39;t known until now.</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt;  <span class="stringliteral">&quot; Live-ins:&quot;</span>);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TBI.LiveIns.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      LiveInReg &amp;LIR = TBI.LiveIns[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(LIR.Reg);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      LIR.Height = Heights.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(DefMI);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(LIR.Reg) &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; LIR.Height);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// Transfer the live regunits to the live-in list.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SparseSet&lt;LiveRegUnit&gt;::const_iterator</a></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;         RI = RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#adf89ae764788137664ba65549e42b047">begin</a>(), RE = RegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">end</a>(); RI != RE; ++RI) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      TBI.LiveIns.push_back(LiveInReg(RI-&gt;RegUnit, RI-&gt;Cycle));</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintRegUnit.html">PrintRegUnit</a>(RI-&gt;RegUnit, <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">MTM</a>.TRI)</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                   &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; RI-&gt;Cycle);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (!TBI.HasValidInstrDepths)</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// Add live-ins to the critical path length.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    TBI.CriticalPath = std::max(TBI.CriticalPath,</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                                computeCrossBlockCriticalPath(TBI));</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Critical path: &quot;</span> &lt;&lt; TBI.CriticalPath &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">MachineTraceMetrics::Trace</a></div><div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ae48d29e7657ecdb05f44195870226d9a"> 1144</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ae48d29e7657ecdb05f44195870226d9a">MachineTraceMetrics::Ensemble::getTrace</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// FIXME: Check cache tags, recompute as needed.</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  computeTrace(MBB);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  computeInstrDepths(MBB);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  computeInstrHeights(MBB);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a9a7aa541dbcfdac34b25b49217ec39d7">Trace</a>(*<span class="keyword">this</span>, BlockInfo[MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()]);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="keywordtype">unsigned</span></div><div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#af62e23d927072da14f64cf6f072a728b"> 1153</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#af62e23d927072da14f64cf6f072a728b">MachineTraceMetrics::Trace::getInstrSlack</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  assert(MI &amp;&amp; <span class="stringliteral">&quot;Not an instruction.&quot;</span>);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  assert(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>() == <span class="keywordtype">unsigned</span>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()) &amp;&amp;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;         <span class="stringliteral">&quot;MI must be in the trace center block&quot;</span>);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html">InstrCycles</a> Cyc = getInstrCycles(MI);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">return</span> getCriticalPath() - (Cyc.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#aecec30fb7bb36797ee2c01f1c977a4b9">Depth</a> + Cyc.<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#a71f86c7e329271a09b14d04a1153cb46">Height</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;}</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="keywordtype">unsigned</span></div><div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504"> 1162</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504">MachineTraceMetrics::Trace::getPHIDepth</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = TE.MTM.MF-&gt;getBlockNumbered(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>());</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DataDep, 1&gt;</a> Deps;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <a class="code" href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">getPHIDeps</a>(PHI, Deps, MBB, TE.MTM.MRI);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  assert(Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;PHI doesn&#39;t have MBB as a predecessor&quot;</span>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  DataDep &amp;Dep = Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>();</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordtype">unsigned</span> DepCycle = getInstrCycles(Dep.DefMI).Depth;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// Add latency if DefMI is a real instruction. Transients get latency 0.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (!Dep.DefMI-&gt;isTransient())</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    DepCycle += TE.MTM.SchedModel</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      .computeOperandLatency(Dep.DefMI, Dep.DefOp, PHI, Dep.UseOp);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">return</span> DepCycle;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a39bedc02b297c58e09cf2facd5807036"> 1176</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a39bedc02b297c58e09cf2facd5807036">MachineTraceMetrics::Trace::getResourceDepth</a>(<span class="keywordtype">bool</span> Bottom)<span class="keyword"> const </span>{</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// Find the limiting processor resource.</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// Numbers have been pre-scaled to be comparable.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordtype">unsigned</span> PRMax = 0;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRDepths = TE.getProcResourceDepths(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>());</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (Bottom) {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRCycles = TE.MTM.getProcResourceCycles(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>());</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRDepths.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++K)</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      PRMax = std::max(PRMax, PRDepths[K] + PRCycles[K]);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRDepths.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++K)</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      PRMax = std::max(PRMax, PRDepths[K]);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// Convert to cycle count.</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  PRMax = TE.MTM.getCycles(PRMax);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordtype">unsigned</span> Instrs = TBI.InstrDepth;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordflow">if</span> (Bottom)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    Instrs += TE.MTM.BlockInfo[<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>()].InstrCount;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> IW = TE.MTM.SchedModel.getIssueWidth())</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    Instrs /= IW;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// Assume issue width 1 without a schedule model.</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">return</span> std::max(Instrs, PRMax);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;}</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1">MachineTraceMetrics::Trace::</a></div><div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1"> 1203</a></span>&#160;<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1">getResourceLength</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const MachineBasicBlock*&gt;</a> Extrablocks,</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const MCSchedClassDesc*&gt;</a> ExtraInstrs)<span class="keyword"> const </span>{</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// Add up resources above and below the center block.</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRDepths = TE.getProcResourceDepths(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>());</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> PRHeights = TE.getProcResourceHeights(<a class="code" href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a>());</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordtype">unsigned</span> PRMax = 0;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> K = 0; K != PRDepths.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++K) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordtype">unsigned</span> PRCycles = PRDepths[K] + PRHeights[K];</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Extrablocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      PRCycles += TE.MTM.getProcResourceCycles(Extrablocks[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getNumber())[K];</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != ExtraInstrs.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a>* <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = ExtraInstrs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">if</span> (!SC-&gt;<a class="code" href="structllvm_1_1MCSchedClassDesc.html#ac4375f281abc4b511502c46de69bb838">isValid</a>())</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MCWriteProcResEntry.html">TargetSchedModel::ProcResIter</a></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;             PI = TE.MTM.SchedModel.getWriteProcResBegin(SC),</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;             PE = TE.MTM.SchedModel.getWriteProcResEnd(SC); PI != PE; ++PI) {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">if</span> (PI-&gt;ProcResourceIdx != K)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        PRCycles += (PI-&gt;Cycles * TE.MTM.SchedModel.getResourceFactor(K));</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    PRMax = std::max(PRMax, PRCycles);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// Convert to cycle count.</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  PRMax = TE.MTM.getCycles(PRMax);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordtype">unsigned</span> Instrs = TBI.InstrDepth + TBI.InstrHeight;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Extrablocks.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    Instrs += TE.MTM.getResources(Extrablocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])-&gt;InstrCount;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> IW = TE.MTM.SchedModel.getIssueWidth())</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    Instrs /= IW;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// Assume issue width 1 without a schedule model.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">return</span> std::max(Instrs, PRMax);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a2b763dcb5d9f7fdf8aa51e1788ee6531"> 1239</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a2b763dcb5d9f7fdf8aa51e1788ee6531">MachineTraceMetrics::Ensemble::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  OS &lt;&lt; <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">getName</a>() &lt;&lt; <span class="stringliteral">&quot; ensemble:\n&quot;</span>;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BlockInfo.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;  BB#&quot;</span> &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="charliteral">&#39;\t&#39;</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    BlockInfo[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].print(OS);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"><a class="line" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a185e3365e3791e7eadaf9d1d7d79e5c6"> 1248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a185e3365e3791e7eadaf9d1d7d79e5c6">MachineTraceMetrics::TraceBlockInfo::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">if</span> (hasValidDepth()) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;depth=&quot;</span> &lt;&lt; InstrDepth;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">if</span> (Pred)</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; pred=BB#&quot;</span> &lt;&lt; Pred-&gt;getNumber();</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; pred=null&quot;</span>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; head=BB#&quot;</span> &lt;&lt; Head;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">if</span> (HasValidInstrDepths)</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; +instrs&quot;</span>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;depth invalid&quot;</span>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">if</span> (hasValidHeight()) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;height=&quot;</span> &lt;&lt; InstrHeight;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (Succ)</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; succ=BB#&quot;</span> &lt;&lt; Succ-&gt;getNumber();</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; succ=null&quot;</span>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; tail=BB#&quot;</span> &lt;&lt; Tail;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (HasValidInstrHeights)</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; +instrs&quot;</span>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;height invalid&quot;</span>;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">if</span> (HasValidInstrDepths &amp;&amp; HasValidInstrHeights)</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;, crit=&quot;</span> &lt;&lt; CriticalPath;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ab89bd21ecd0d3dd1625fa21164b0858c"> 1276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ab89bd21ecd0d3dd1625fa21164b0858c">MachineTraceMetrics::Trace::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordtype">unsigned</span> MBBNum = &amp;TBI - &amp;TE.BlockInfo[0];</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  OS &lt;&lt; TE.getName() &lt;&lt; <span class="stringliteral">&quot; trace BB#&quot;</span> &lt;&lt; TBI.Head &lt;&lt; <span class="stringliteral">&quot; --&gt; BB#&quot;</span> &lt;&lt; MBBNum</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;     &lt;&lt; <span class="stringliteral">&quot; --&gt; BB#&quot;</span> &lt;&lt; TBI.Tail &lt;&lt; <span class="charliteral">&#39;:&#39;</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">if</span> (TBI.hasValidHeight() &amp;&amp; TBI.hasValidDepth())</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; getInstrCount() &lt;&lt; <span class="stringliteral">&quot; instrs.&quot;</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (TBI.HasValidInstrDepths &amp;&amp; TBI.HasValidInstrHeights)</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; TBI.CriticalPath &lt;&lt; <span class="stringliteral">&quot; cycles.&quot;</span>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">MachineTraceMetrics::TraceBlockInfo</a> *Block = &amp;TBI;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;\nBB#&quot;</span> &lt;&lt; MBBNum;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">while</span> (Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">hasValidDepth</a>() &amp;&amp; Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>) {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordtype">unsigned</span> Num = Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">Pred</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; &lt;- BB#&quot;</span> &lt;&lt; Num;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    Block = &amp;TE.BlockInfo[Num];</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  Block = &amp;TBI;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;\n    &quot;</span>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">while</span> (Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">hasValidHeight</a>() &amp;&amp; Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordtype">unsigned</span> Num = Block-&gt;<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">Succ</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; -&gt; BB#&quot;</span> &lt;&lt; Num;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    Block = &amp;TE.BlockInfo[Num];</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  OS &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;}</div><div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a2b763dcb5d9f7fdf8aa51e1788ee6531"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a2b763dcb5d9f7fdf8aa51e1788ee6531">llvm::MachineTraceMetrics::Ensemble::print</a></div><div class="ttdeci">void print(raw_ostream &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01239">MachineTraceMetrics.cpp:1239</a></div></div>
<div class="ttc" id="TargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="MCSubtargetInfo_8h_html"><div class="ttname"><a href="MCSubtargetInfo_8h.html">MCSubtargetInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a9a82b9706ddf56377f4bfea5e61fc951"><div class="ttname"><a href="namespacellvm.html#a9a82b9706ddf56377f4bfea5e61fc951">llvm::po_ext_end</a></div><div class="ttdeci">po_ext_iterator&lt; T, SetType &gt; po_ext_end(T G, SetType &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00192">PostOrderIterator.h:192</a></div></div>
<div class="ttc" id="namespacellvm_html_ae68b9c00207e80cdfa3645a527c0dd8f"><div class="ttname"><a href="namespacellvm.html#ae68b9c00207e80cdfa3645a527c0dd8f">llvm::array_endof</a></div><div class="ttdeci">T * array_endof(T(&amp;x)[N])</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00244">STLExtras.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a615cad8f2751cc7fcc8115bc24c7f646"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a615cad8f2751cc7fcc8115bc24c7f646">llvm::TargetSchedModel::resolveSchedClass</a></div><div class="ttdeci">const MCSchedClassDesc * resolveSchedClass(const MachineInstr *MI) const </div><div class="ttdoc">Return the MCSchedClassDesc for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00103">TargetSchedule.cpp:103</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_ac1da9b49331de45b4f64f72ebc857aa1"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac1da9b49331de45b4f64f72ebc857aa1">llvm::MachineTraceMetrics::Ensemble::getProcResourceDepths</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getProcResourceDepths(unsigned MBBNum) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00256">MachineTraceMetrics.cpp:256</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_ab89bd21ecd0d3dd1625fa21164b0858c"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ab89bd21ecd0d3dd1625fa21164b0858c">llvm::MachineTraceMetrics::Trace::print</a></div><div class="ttdeci">void print(raw_ostream &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01276">MachineTraceMetrics.cpp:1276</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a185e3365e3791e7eadaf9d1d7d79e5c6"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a185e3365e3791e7eadaf9d1d7d79e5c6">llvm::MachineTraceMetrics::TraceBlockInfo::print</a></div><div class="ttdeci">void print(raw_ostream &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01248">MachineTraceMetrics.cpp:1248</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a3350f7760c4eec67ea7d8f3063c3d748"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00417">MachineOperand.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a58dc840fc84420b7f0b773794b8101c1"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">llvm::SmallVectorTemplateCommon&lt; T &gt;::front</a></div><div class="ttdeci">reference front()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00148">SmallVector.h:148</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a1cf611223ee0f84ce33371cef8151768"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a1cf611223ee0f84ce33371cef8151768">llvm::MachineTraceMetrics::TraceBlockInfo::Pred</a></div><div class="ttdeci">const MachineBasicBlock * Pred</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00136">MachineTraceMetrics.h:136</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1InstrCycles_html_aecec30fb7bb36797ee2c01f1c977a4b9"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#aecec30fb7bb36797ee2c01f1c977a4b9">llvm::MachineTraceMetrics::InstrCycles::Depth</a></div><div class="ttdeci">unsigned Depth</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00226">MachineTraceMetrics.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo_html_a82d3a0a8a2b52f6d16406a61c0c11102"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a82d3a0a8a2b52f6d16406a61c0c11102">llvm::MachineTraceMetrics::FixedBlockInfo::HasCalls</a></div><div class="ttdeci">bool HasCalls</div><div class="ttdoc">True when the block contains calls. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00096">MachineTraceMetrics.h:96</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a5419fb52cab4895e3fc6fc9fc5c73f91"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a5419fb52cab4895e3fc6fc9fc5c73f91">llvm::TargetSchedModel::init</a></div><div class="ttdeci">void init(const MCSchedModel &amp;sm, const TargetSubtargetInfo *sti, const TargetInstrInfo *tii)</div><div class="ttdoc">Initialize the machine model for instruction scheduling. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00054">TargetSchedule.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00278">MachineBasicBlock.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1PrintRegUnit_html"><div class="ttname"><a href="classllvm_1_1PrintRegUnit.html">llvm::PrintRegUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00903">TargetRegisterInfo.h:903</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_aad9695c85c7fa313de163b67ae910b85"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aad9695c85c7fa313de163b67ae910b85">llvm::MachineTraceMetrics::TraceBlockInfo::invalidateHeight</a></div><div class="ttdeci">void invalidateHeight()</div><div class="ttdoc">Invalidate height resources when a block below this one has changed. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00173">MachineTraceMetrics.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00489">MCRegisterInfo.h:489</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html_a4a3dd7c0c14bb8cc05e2ffe79ee28511"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#a4a3dd7c0c14bb8cc05e2ffe79ee28511">llvm::MachineRegisterInfo::defusechain_iterator::atEnd</a></div><div class="ttdeci">bool atEnd() const </div><div class="ttdoc">atEnd - return true if this iterator is equal to reg_end() on the value. </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00587">MachineRegisterInfo.h:587</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_aaa792a9149c063215e04ad1226df2434"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#aaa792a9149c063215e04ad1226df2434">metrics</a></div><div class="ttdeci">machine trace metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00037">MachineTraceMetrics.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">llvm::MachineTraceMetrics::Ensemble</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00294">MachineTraceMetrics.h:294</a></div></div>
<div class="ttc" id="MachineBlockPlacement_8cpp_html_a16e802f1d512b19481a50b0e7d71eab5"><div class="ttname"><a href="MachineBlockPlacement_8cpp.html#a16e802f1d512b19481a50b0e7d71eab5">getBlockNum</a></div><div class="ttdeci">static std::string getBlockNum(MachineBasicBlock *BB)</div><div class="ttdoc">Helper to print the number of a MBB. </div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockPlacement_8cpp_source.html#l00270">MachineBlockPlacement.cpp:270</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_aa117767750c3ca738006fa1ab5c01345"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">llvm::TargetSchedModel::getResourceFactor</a></div><div class="ttdeci">unsigned getResourceFactor(unsigned ResIdx) const </div><div class="ttdoc">Multiply the number of units consumed for a resource by this factor to normalize it relative to other...</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00115">TargetSchedule.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4_html_ac357f99e36b35bf15cdf9c8f25af720a"><div class="ttname"><a href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#ac357f99e36b35bf15cdf9c8f25af720a">llvm::po_iterator_storage&lt; LoopBounds, true &gt;::po_iterator_storage</a></div><div class="ttdeci">po_iterator_storage(LoopBounds &amp;lb)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00434">MachineTraceMetrics.cpp:434</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo_html_a78836dd7449e76cb6d404ecf3b371778"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a78836dd7449e76cb6d404ecf3b371778">llvm::MachineTraceMetrics::FixedBlockInfo::InstrCount</a></div><div class="ttdeci">unsigned InstrCount</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00093">MachineTraceMetrics.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html">llvm::MachineTraceMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00067">MachineTraceMetrics.h:67</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ae1612b06274368fe13b574cbd9c4f768"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ae1612b06274368fe13b574cbd9c4f768">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00275">MachineBasicBlock.h:275</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_aef96789028634643aa76d32d0d2ac6c4"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aef96789028634643aa76d32d0d2ac6c4">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00265">MachineFunction.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html">llvm::TargetSchedModel</a></div><div class="ttdoc">Provide an instruction scheduling machine model to CodeGen passes. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00032">TargetSchedule.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ad70025709baab4e42d5d9d83023bc402"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">llvm::MachineInstr::isPHI</a></div><div class="ttdeci">bool isPHI() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00648">MachineInstr.h:648</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_aed541d17fca88fb98326359e263a842a"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aed541d17fca88fb98326359e263a842a">llvm::MachineTraceMetrics::Ensemble::getLoopFor</a></div><div class="ttdeci">const MachineLoop * getLoopFor(const MachineBasicBlock *) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00159">MachineTraceMetrics.cpp:159</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a7d8979ca38421a46ac5e3f6c4d92cec5"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5">llvm::MachineTraceMetrics::Strategy</a></div><div class="ttdeci">Strategy</div><div class="ttdoc">Strategies for selecting traces. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00334">MachineTraceMetrics.h:334</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a337ac3a574df74649d67cac686aaf580"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">llvm::SparseSet::end</a></div><div class="ttdeci">const_iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00170">SparseSet.h:170</a></div></div>
<div class="ttc" id="MachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_ac76906d75d1c61ed285c2159520ea8da"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ac76906d75d1c61ed285c2159520ea8da">llvm::MachineTraceMetrics::Ensemble::pickTraceSucc</a></div><div class="ttdeci">virtual const MachineBasicBlock * pickTraceSucc(const MachineBasicBlock *)=0</div></div>
<div class="ttc" id="namespacellvm_html_a69dc1b119f8cb95b7e36f586c5aeb372"><div class="ttname"><a href="namespacellvm.html#a69dc1b119f8cb95b7e36f586c5aeb372">llvm::format</a></div><div class="ttdeci">format_object1&lt; T &gt; format(const char *Fmt, const T &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Format_8h_source.html#l00180">Format.h:180</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11">llvm::MachineTraceMetrics::TS_MinInstrCount</a></div><div class="ttdoc">Select the trace through a block that has the fewest instructions. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00336">MachineTraceMetrics.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1PrintReg_html"><div class="ttname"><a href="classllvm_1_1PrintReg.html">llvm::PrintReg</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00878">TargetRegisterInfo.h:878</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a77ffdd1b319a37f5ff167054f949ac8a"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a77ffdd1b319a37f5ff167054f949ac8a">llvm::MachineTraceMetrics::Ensemble::getHeightResources</a></div><div class="ttdeci">const TraceBlockInfo * getHeightResources(const MachineBasicBlock *) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00243">MachineTraceMetrics.cpp:243</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_abc83f10c39219ecdfe3317fd4e3fa06c"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#abc83f10c39219ecdfe3317fd4e3fa06c">llvm::MachineTraceMetrics::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00077">MachineTraceMetrics.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a1c87643a99fc1785e391017505cb9ce1"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a1c87643a99fc1785e391017505cb9ce1">llvm::MachineTraceMetrics::verifyAnalysis</a></div><div class="ttdeci">void verifyAnalysis() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00396">MachineTraceMetrics.cpp:396</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoop_html"><div class="ttname"><a href="classllvm_1_1MachineLoop.html">llvm::MachineLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00044">MachineLoopInfo.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_aafc41863fbf5655579305bc6297d36ec"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#aafc41863fbf5655579305bc6297d36ec">getDataDeps</a></div><div class="ttdeci">static bool getDataDeps(const MachineInstr *UseMI, SmallVectorImpl&lt; DataDep &gt; &amp;Deps, const MachineRegisterInfo *MRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00639">MachineTraceMetrics.cpp:639</a></div></div>
<div class="ttc" id="COFFYAML_8cpp_html_a9dbc9c66cf3908e866b252feca6395a4"><div class="ttname"><a href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a></div><div class="ttdeci">COFF::MachineTypes Machine</div><div class="ttdef"><b>Definition:</b> <a href="COFFYAML_8cpp_source.html#l00211">COFFYAML.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4_html_a3b2e0991ef19713f3f93145bfc572bde"><div class="ttname"><a href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#a3b2e0991ef19713f3f93145bfc572bde">llvm::po_iterator_storage&lt; LoopBounds, true &gt;::finishPostorder</a></div><div class="ttdeci">void finishPostorder(const MachineBasicBlock *)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00435">MachineTraceMetrics.cpp:435</a></div></div>
<div class="ttc" id="structllvm_1_1MCSchedClassDesc_html_ac4375f281abc4b511502c46de69bb838"><div class="ttname"><a href="structllvm_1_1MCSchedClassDesc.html#ac4375f281abc4b511502c46de69bb838">llvm::MCSchedClassDesc::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00113">MCSchedule.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a5a00f6afdfec487d3165d29e57452b32"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a5a00f6afdfec487d3165d29e57452b32">llvm::SparseSet::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00277">SparseSet.h:277</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a6b0649bddffdfd2c95cba647d1b6bee4"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6b0649bddffdfd2c95cba647d1b6bee4">updatePhysDepsUpwards</a></div><div class="ttdeci">static unsigned updatePhysDepsUpwards(const MachineInstr *MI, unsigned Height, SparseSet&lt; LiveRegUnit &gt; &amp;RegUnits, const TargetSchedModel &amp;SchedModel, const TargetInstrInfo *TII, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00877">MachineTraceMetrics.cpp:877</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a145c87332fff3323e335d8f6152ccbcf"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a145c87332fff3323e335d8f6152ccbcf">llvm::MachineTraceMetrics::TraceBlockInfo::invalidateDepth</a></div><div class="ttdeci">void invalidateDepth()</div><div class="ttdoc">Invalidate depth resources when some block above this one has changed. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00170">MachineTraceMetrics.h:170</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a011e32df9d9d95b15afc994c224ec2d3"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a011e32df9d9d95b15afc994c224ec2d3">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(MachineTraceMetrics,&quot;machine-trace-metrics&quot;,&quot;Machine Trace Metrics&quot;, false, true) INITIALIZE_PASS_END(MachineTraceMetrics</div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a6fd27da145ca5d0d4b72b763092f3aed"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a6fd27da145ca5d0d4b72b763092f3aed">llvm::MachineLoopInfo::getLoopFor</a></div><div class="ttdeci">MachineLoop * getLoopFor(const MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00099">MachineLoopInfo.h:99</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a063217bcbb8b81adfdc88feb1a52ddcb"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a063217bcbb8b81adfdc88feb1a52ddcb">llvm::MachineTraceMetrics::Ensemble::invalidate</a></div><div class="ttdeci">void invalidate(const MachineBasicBlock *MBB)</div><div class="ttdoc">Invalidate traces through BadMBB. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00510">MachineTraceMetrics.cpp:510</a></div></div>
<div class="ttc" id="classllvm_1_1Trace_html"><div class="ttname"><a href="classllvm_1_1Trace.html">llvm::Trace</a></div><div class="ttdef"><b>Definition:</b> <a href="Trace_8h_source.html#l00030">Trace.h:30</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00184">ArrayRef.h:184</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html_a2ae4c129d83e0b28b8c5ca8691fa0a91"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#a2ae4c129d83e0b28b8c5ca8691fa0a91">llvm::MachineRegisterInfo::defusechain_iterator::getOperandNo</a></div><div class="ttdeci">unsigned getOperandNo() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00641">MachineRegisterInfo.h:641</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a68facea7d4ed1bf85fc666d041e9e464"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a68facea7d4ed1bf85fc666d041e9e464">llvm::MachineTraceMetrics::releaseMemory</a></div><div class="ttdeci">void releaseMemory()</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00066">MachineTraceMetrics.cpp:66</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a2bee15b953c70ea17198d4d8b60aefed"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a2bee15b953c70ea17198d4d8b60aefed">llvm::MachineTraceMetrics::TraceBlockInfo::InstrHeight</a></div><div class="ttdeci">unsigned InstrHeight</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00154">MachineTraceMetrics.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a72fb7462e388cf87c645160d2fc276c8"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a72fb7462e388cf87c645160d2fc276c8">llvm::MachineTraceMetrics::getEnsemble</a></div><div class="ttdeci">Ensemble * getEnsemble(Strategy)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00375">MachineTraceMetrics.cpp:375</a></div></div>
<div class="ttc" id="structllvm_1_1MCWriteProcResEntry_html"><div class="ttname"><a href="structllvm_1_1MCWriteProcResEntry.html">llvm::MCWriteProcResEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00050">MCSchedule.h:50</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a5d1caba7f821bf6695f6d4e7ae27c26e"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a5d1caba7f821bf6695f6d4e7ae27c26e">getPHIDeps</a></div><div class="ttdeci">static void getPHIDeps(const MachineInstr *UseMI, SmallVectorImpl&lt; DataDep &gt; &amp;Deps, const MachineBasicBlock *Pred, const MachineRegisterInfo *MRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00663">MachineTraceMetrics.cpp:663</a></div></div>
<div class="ttc" id="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4_html_aa0579cace56521208a005b0cf4986e83"><div class="ttname"><a href="classllvm_1_1po__iterator__storage_3_01LoopBounds_00_01true_01_4.html#aa0579cace56521208a005b0cf4986e83">llvm::po_iterator_storage&lt; LoopBounds, true &gt;::insertEdge</a></div><div class="ttdeci">bool insertEdge(const MachineBasicBlock *From, const MachineBasicBlock *To)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00437">MachineTraceMetrics.cpp:437</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a94c7f4353dd7cd3169ab1f8309a6ebbc"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a94c7f4353dd7cd3169ab1f8309a6ebbc">llvm::MachineTraceMetrics::Ensemble::Ensemble</a></div><div class="ttdeci">Ensemble(MachineTraceMetrics *)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00147">MachineTraceMetrics.cpp:147</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_aa60016dad618cf77f24d57fdd3e33112"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#aa60016dad618cf77f24d57fdd3e33112">llvm::MachineTraceMetrics::Ensemble::MTM</a></div><div class="ttdeci">MachineTraceMetrics &amp; MTM</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00311">MachineTraceMetrics.h:311</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1MCSchedClassDesc_html"><div class="ttname"><a href="structllvm_1_1MCSchedClassDesc.html">llvm::MCSchedClassDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00096">MCSchedule.h:96</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo_html"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html">llvm::MachineTraceMetrics::FixedBlockInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00090">MachineTraceMetrics.h:90</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a5b72d33d71c887bc07bd9c1551477c4c"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a5b72d33d71c887bc07bd9c1551477c4c">llvm::MachineTraceMetrics::TraceBlockInfo::Succ</a></div><div class="ttdeci">const MachineBasicBlock * Succ</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00140">MachineTraceMetrics.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1po__iterator__storage_html"><div class="ttname"><a href="classllvm_1_1po__iterator__storage.html">llvm::po_iterator_storage</a></div><div class="ttdoc">Default po_iterator_storage implementation with an internal set object. </div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00054">PostOrderIterator.h:54</a></div></div>
<div class="ttc" id="structllvm_1_1po__ext__iterator_html"><div class="ttname"><a href="structllvm_1_1po__ext__iterator.html">llvm::po_ext_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00181">PostOrderIterator.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_acd5b92b97f3839e8483329915a2bd8a9"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#acd5b92b97f3839e8483329915a2bd8a9">llvm::MachineTraceMetrics::getResources</a></div><div class="ttdeci">const FixedBlockInfo * getResources(const MachineBasicBlock *)</div><div class="ttdoc">Get the fixed resource information about MBB. Compute it on demand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00084">MachineTraceMetrics.cpp:84</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_aef0722b576f40e57f91a2a53b2e97c64"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#aef0722b576f40e57f91a2a53b2e97c64">llvm::MachineTraceMetrics::TraceBlockInfo::Tail</a></div><div class="ttdeci">unsigned Tail</div><div class="ttdoc">The block number of the tail of the trace. (When hasValidHeight()). </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00146">MachineTraceMetrics.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_ac5c4065b01268eb6764867041cd1d96c"><div class="ttname"><a href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">llvm::SparseSet::setUniverse</a></div><div class="ttdeci">void setUniverse(unsigned U)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00150">SparseSet.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a375a21e590d51aec3ad8da2f2bbb895f"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a375a21e590d51aec3ad8da2f2bbb895f">llvm::MachineTraceMetrics::Ensemble::~Ensemble</a></div><div class="ttdeci">virtual ~Ensemble()</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00156">MachineTraceMetrics.cpp:156</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a3aa55c9d9145cd6b3b21c466b18abd80"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00104">ArrayRef.h:104</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">llvm::LibFunc::Func</a></div><div class="ttdeci">Func</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00020">TargetLibraryInfo.h:20</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a91cde5aac43dc88d6ec26c441b39b7c9"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">llvm::TargetSchedModel::getNumProcResourceKinds</a></div><div class="ttdeci">unsigned getNumProcResourceKinds() const </div><div class="ttdoc">Get the number of kinds of resources for this target. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00092">TargetSchedule.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html">llvm::MachineBranchProbabilityInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8h_source.html#l00024">MachineBranchProbabilityInfo.h:24</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a682b90abb526c398e9e1bfc8e37f03b7"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a682b90abb526c398e9e1bfc8e37f03b7">llvm::MachineTraceMetrics::Ensemble::getDepthResources</a></div><div class="ttdeci">const TraceBlockInfo * getDepthResources(const MachineBasicBlock *) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00234">MachineTraceMetrics.cpp:234</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a8eab1cd7d627152b0696bfd77a277ee2"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a8eab1cd7d627152b0696bfd77a277ee2">llvm::MachineTraceMetrics::Ensemble::getName</a></div><div class="ttdeci">virtual const char * getName() const =0</div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a73b0295b2f37729d059fe500f2824255"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a73b0295b2f37729d059fe500f2824255">llvm::MachineTraceMetrics::Ensemble::pickTracePred</a></div><div class="ttdeci">virtual const MachineBasicBlock * pickTracePred(const MachineBasicBlock *)=0</div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">llvm::MachineTraceMetrics::Trace</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00236">MachineTraceMetrics.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="structllvm_1_1MCProcResourceDesc_html_a51dc4747a7d39650884bcf19daaf5f54"><div class="ttname"><a href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">llvm::MCProcResourceDesc::Name</a></div><div class="ttdeci">const char * Name</div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00028">MCSchedule.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_adf89ae764788137664ba65549e42b047"><div class="ttname"><a href="classllvm_1_1SparseSet.html#adf89ae764788137664ba65549e42b047">llvm::SparseSet::begin</a></div><div class="ttdeci">const_iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00169">SparseSet.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_ae2b8849f34dbee13609f4b6ad84042b1"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">llvm::TargetSchedModel::getWriteProcResEnd</a></div><div class="ttdeci">ProcResIter getWriteProcResEnd(const MCSchedClassDesc *SC) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00109">TargetSchedule.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a502516f71f7824d46325d30ea41f34ba"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">llvm::MachineBasicBlock::const_pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::const_iterator const_pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00248">MachineBasicBlock.h:248</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a6eb3ac91456a9880aecf25dc8e3cbaa5"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6eb3ac91456a9880aecf25dc8e3cbaa5">updatePhysDepsDownwards</a></div><div class="ttdeci">static void updatePhysDepsDownwards(const MachineInstr *UseMI, SmallVectorImpl&lt; DataDep &gt; &amp;Deps, SparseSet&lt; LiveRegUnit &gt; &amp;RegUnits, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00699">MachineTraceMetrics.cpp:699</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a457498d1f8b1cd21b192ac4429d12224"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a457498d1f8b1cd21b192ac4429d12224">llvm::MachineTraceMetrics::Ensemble::getProcResourceHeights</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getProcResourceHeights(unsigned MBBNum) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00270">MachineTraceMetrics.cpp:270</a></div></div>
<div class="ttc" id="Format_8h_html"><div class="ttname"><a href="Format_8h.html">Format.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a82ca1bcea2c966addd442d7cfa49bf51"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">llvm::TargetSchedModel::hasInstrSchedModel</a></div><div class="ttdeci">bool hasInstrSchedModel() const </div><div class="ttdoc">Return true if this machine model includes an instruction-level scheduling model. ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00031">TargetSchedule.cpp:31</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPCISD_html_a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">llvm::PPCISD::SC</a></div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00247">PPCISelLowering.h:247</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a7f20cb0e3fe764b7b8a63003e0265508"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a7f20cb0e3fe764b7b8a63003e0265508">Metrics</a></div><div class="ttdeci">machine trace Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00037">MachineTraceMetrics.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; const MachineBasicBlock *, 8 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a5af2fed99951774b6a14d30ec6e73792"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">llvm::TargetMachine::getSubtarget</a></div><div class="ttdeci">const STC &amp; getSubtarget() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00132">Target/TargetMachine.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_ade2f5f4d11c824fa37234f3077d25be3"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">llvm::TargetSchedModel::getProcResource</a></div><div class="ttdeci">const MCProcResourceDesc * getProcResource(unsigned PIdx) const </div><div class="ttdoc">Get a processor resource by ID for convenience. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00097">TargetSchedule.h:97</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_ab5ed88df48b43f7b00b64339b371f960"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#ab5ed88df48b43f7b00b64339b371f960">pushDepHeight</a></div><div class="ttdeci">static bool pushDepHeight(const DataDep &amp;Dep, const MachineInstr *UseMI, unsigned UseHeight, MIHeightMap &amp;Heights, const TargetSchedModel &amp;SchedModel, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00934">MachineTraceMetrics.cpp:934</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 32 &gt;</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1InstrCycles_html_a71f86c7e329271a09b14d04a1153cb46"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#a71f86c7e329271a09b14d04a1153cb46">llvm::MachineTraceMetrics::InstrCycles::Height</a></div><div class="ttdeci">unsigned Height</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00230">MachineTraceMetrics.h:230</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a62c75a04c3f91f17d382c86cde4d3858"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a62c75a04c3f91f17d382c86cde4d3858">llvm::MachineFunction::getBlockNumbered</a></div><div class="ttdeci">MachineBasicBlock * getBlockNumbered(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00257">MachineFunction.h:257</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_afaeab6367378de16a73370713b0be2ec"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#afaeab6367378de16a73370713b0be2ec">llvm::MachineTraceMetrics::TraceBlockInfo::hasValidDepth</a></div><div class="ttdeci">bool hasValidDepth() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00163">MachineTraceMetrics.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a269c7b8adcd29645a4f901196fc08806"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">llvm::DenseMapBase::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00190">DenseMap.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a57f25804288bc580d7b2e4016a38aec9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">llvm::MachineBasicBlock::isSuccessor</a></div><div class="ttdeci">bool isSuccessor(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00619">MachineBasicBlock.cpp:619</a></div></div>
<div class="ttc" id="MachineLoopInfo_8cpp_html_a59aa69fa39ee55438427bfc39852b9e6"><div class="ttname"><a href="MachineLoopInfo_8cpp.html#a59aa69fa39ee55438427bfc39852b9e6">loops</a></div><div class="ttdeci">machine loops</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00032">MachineLoopInfo.cpp:32</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a32401a03454694b55bf2f83e1cd623cc"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a32401a03454694b55bf2f83e1cd623cc">llvm::MachineTraceMetrics::runOnMachineFunction</a></div><div class="ttdeci">bool runOnMachineFunction(MachineFunction &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00051">MachineTraceMetrics.cpp:51</a></div></div>
<div class="ttc" id="namespacellvm_html_aa2616c5fd0dd9fc9cfda509ddcd2aacc"><div class="ttname"><a href="namespacellvm.html#aa2616c5fd0dd9fc9cfda509ddcd2aacc">llvm::MachineTraceMetricsID</a></div><div class="ttdeci">char &amp; MachineTraceMetricsID</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00030">MachineTraceMetrics.cpp:30</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac596847316c2e2472695402f00a5065d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac596847316c2e2472695402f00a5065d">llvm::MachineInstr::isTransient</a></div><div class="ttdeci">bool isTransient() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00692">MachineInstr.h:692</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html">llvm::MachineTraceMetrics::TraceBlockInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00133">MachineTraceMetrics.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1ConstMIOperands_html"><div class="ttname"><a href="classllvm_1_1ConstMIOperands.html">llvm::ConstMIOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00221">MachineInstrBundle.h:221</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a000540f3b70a111cf9511f866994f3f1"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1">llvm::MachineTraceMetrics::Trace::getResourceLength</a></div><div class="ttdeci">unsigned getResourceLength(ArrayRef&lt; const MachineBasicBlock * &gt; Extrablocks=None, ArrayRef&lt; const MCSchedClassDesc * &gt; ExtraInstrs=None) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01203">MachineTraceMetrics.cpp:1203</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_ab276508f4382772aa02513a739614ed1"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ab276508f4382772aa02513a739614ed1">llvm::MachineTraceMetrics::Ensemble::verify</a></div><div class="ttdeci">void verify() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00576">MachineTraceMetrics.cpp:576</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00094">PassAnalysisSupport.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a8b0a17d3b3450955cd4c092d5cc63de5"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a8b0a17d3b3450955cd4c092d5cc63de5">llvm::MachineTraceMetrics::invalidate</a></div><div class="ttdeci">void invalidate(const MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00388">MachineTraceMetrics.cpp:388</a></div></div>
<div class="ttc" id="namespacellvm_html_aa0ac2b3a0d13de656a4274b8ea262db5"><div class="ttname"><a href="namespacellvm.html#aa0ac2b3a0d13de656a4274b8ea262db5">llvm::ipo_ext_begin</a></div><div class="ttdeci">ipo_ext_iterator&lt; T, SetType &gt; ipo_ext_begin(T G, SetType &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00226">PostOrderIterator.h:226</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_ad1289df76629f404936fc8b2df1a6934"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#ad1289df76629f404936fc8b2df1a6934">llvm::MachineTraceMetrics::TraceBlockInfo::Head</a></div><div class="ttdeci">unsigned Head</div><div class="ttdoc">The block number of the head of the trace. (When hasValidDepth()). </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00143">MachineTraceMetrics.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_aaf3dc2763e3a8855709d186966654062"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">llvm::MCRegisterInfo::getNumRegUnits</a></div><div class="ttdeci">unsigned getNumRegUnits() const </div><div class="ttdoc">Return the number of (native) register units in the target. Register units are numbered from 0 to get...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00373">MCRegisterInfo.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a66efe5c5561969cd4506c421daaf9bf3"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a66efe5c5561969cd4506c421daaf9bf3">llvm::MachineRegisterInfo::def_begin</a></div><div class="ttdeci">def_iterator def_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00237">MachineRegisterInfo.h:237</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a1e124ae038533aedea048a8ccf3c4356"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a1e124ae038533aedea048a8ccf3c4356">llvm::MachineTraceMetrics::Ensemble</a></div><div class="ttdeci">friend class Ensemble</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00085">MachineTraceMetrics.h:85</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo_html_a15ebac3fda5b076f52af0a069b6f9278"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1FixedBlockInfo.html#a15ebac3fda5b076f52af0a069b6f9278">llvm::MachineTraceMetrics::FixedBlockInfo::hasResources</a></div><div class="ttdeci">bool hasResources() const </div><div class="ttdoc">Returns true when resource information for this block has been computed. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00101">MachineTraceMetrics.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSubtargetInfo_html"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html">llvm::TargetSubtargetInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00037">TargetSubtargetInfo.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a654b11787ac7c4344084d98bea7cf626"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">llvm::MachineBasicBlock::const_iterator</a></div><div class="ttdeci">bundle_iterator&lt; const MachineInstr, const_instr_iterator &gt; const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00214">MachineBasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_ac6b3f10e700823152bc762064659d411"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#ac6b3f10e700823152bc762064659d411">llvm::MachineTraceMetrics::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00044">MachineTraceMetrics.cpp:44</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="SparseSet_8h_html"><div class="ttname"><a href="SparseSet_8h.html">SparseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a7b68be12c974b6b70bc86062f221a344"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a7b68be12c974b6b70bc86062f221a344">llvm::SmallVectorTemplateCommon::data</a></div><div class="ttdeci">pointer data()</div><div class="ttdoc">data - Return a pointer to the vector&amp;#39;s buffer, even if empty(). </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00135">SmallVector.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html"><div class="ttname"><a href="classllvm_1_1SparseSet.html">llvm::SparseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00120">SparseSet.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a5104900abc0d6e9f5fd0c5bedf414153">llvm::MachineTraceMetrics::TS_NumStrategies</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00338">MachineTraceMetrics.h:338</a></div></div>
<div class="ttc" id="namespacellvm_html_a7713977bef24a5dae3aa800ecee5502e"><div class="ttname"><a href="namespacellvm.html#a7713977bef24a5dae3aa800ecee5502e">llvm::ipo_ext_end</a></div><div class="ttdeci">ipo_ext_iterator&lt; T, SetType &gt; ipo_ext_end(T G, SetType &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00231">PostOrderIterator.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_af521754c270d66c0596d082a7eb6766d"><div class="ttname"><a href="classllvm_1_1SparseSet.html#af521754c270d66c0596d082a7eb6766d">llvm::SparseSet::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Key)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00222">SparseSet.h:222</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1InstrCycles_html"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html">llvm::MachineTraceMetrics::InstrCycles</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00222">MachineTraceMetrics.h:222</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac4de5f228c299d7c4b7de72a4a6dd28c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">llvm::MachineInstr::isCall</a></div><div class="ttdeci">bool isCall(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00349">MachineInstr.h:349</a></div></div>
<div class="ttc" id="namespacellvm_html_a8a44b47a55b1045e5732d178cc371966"><div class="ttname"><a href="namespacellvm.html#a8a44b47a55b1045e5732d178cc371966">llvm::po_ext_begin</a></div><div class="ttdeci">po_ext_iterator&lt; T, SetType &gt; po_ext_begin(T G, SetType &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00187">PostOrderIterator.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a845058902483d2afbab93214dcce8684"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a845058902483d2afbab93214dcce8684">isExitingLoop</a></div><div class="ttdeci">static bool isExitingLoop(const MachineLoop *From, const MachineLoop *To)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00297">MachineTraceMetrics.cpp:297</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a8726dd9a7f2f009792a6f7538549062b"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a8726dd9a7f2f009792a6f7538549062b">llvm::MachineTraceMetrics::TraceBlockInfo::hasValidHeight</a></div><div class="ttdeci">bool hasValidHeight() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00167">MachineTraceMetrics.h:167</a></div></div>
<div class="ttc" id="structllvm_1_1ipo__ext__iterator_html"><div class="ttname"><a href="structllvm_1_1ipo__ext__iterator.html">llvm::ipo_ext_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00218">PostOrderIterator.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a62eff453556ab0541cb285741f7eec8d"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a62eff453556ab0541cb285741f7eec8d">llvm::TargetSchedModel::computeOperandLatency</a></div><div class="ttdeci">unsigned computeOperandLatency(const MachineInstr *DefMI, unsigned DefOperIdx, const MachineInstr *UseMI, unsigned UseOperIdx) const </div><div class="ttdoc">Compute operand latency based on the available machine model. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00155">TargetSchedule.cpp:155</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abf69f92f1977440a4e443a26baeb73c0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00308">MachineRegisterInfo.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_a9a7aa541dbcfdac34b25b49217ec39d7"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#a9a7aa541dbcfdac34b25b49217ec39d7">llvm::MachineTraceMetrics::Ensemble::Trace</a></div><div class="ttdeci">friend class Trace</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00299">MachineTraceMetrics.h:299</a></div></div>
<div class="ttc" id="MachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00037">DenseMap.h:37</a></div></div>
<div class="ttc" id="namespacetrue_html"><div class="ttname"><a href="namespacetrue.html">true</a></div><div class="ttdef"><b>Definition:</b> <a href="DominanceFrontier_8cpp_source.html#l00024">DominanceFrontier.cpp:24</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a643e268ed3053ace245edee2cc1f9504"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504">llvm::MachineTraceMetrics::Trace::getPHIDepth</a></div><div class="ttdeci">unsigned getPHIDepth(const MachineInstr *PHI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01162">MachineTraceMetrics.cpp:1162</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6198e2abdd4f41355b1a0931affde1a6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">llvm::MachineBasicBlock::const_succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::const_iterator const_succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00250">MachineBasicBlock.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const </div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00143">DenseMap.h:143</a></div></div>
<div class="ttc" id="PostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a39bedc02b297c58e09cf2facd5807036"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a39bedc02b297c58e09cf2facd5807036">llvm::MachineTraceMetrics::Trace::getResourceDepth</a></div><div class="ttdeci">unsigned getResourceDepth(bool Bottom) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01176">MachineTraceMetrics.cpp:1176</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo_html_a05783617bfead544a66a41fb304756f2"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1TraceBlockInfo.html#a05783617bfead544a66a41fb304756f2">llvm::MachineTraceMetrics::TraceBlockInfo::InstrDepth</a></div><div class="ttdeci">unsigned InstrDepth</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00150">MachineTraceMetrics.h:150</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7a60cbf0b62e6d73972a58a4d33539d9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7a60cbf0b62e6d73972a58a4d33539d9">llvm::MachineBasicBlock::isPredecessor</a></div><div class="ttdeci">bool isPredecessor(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00615">MachineBasicBlock.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a266c379348503befb8d755b1f0713095"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a266c379348503befb8d755b1f0713095">llvm::MachineTraceMetrics::getProcResourceCycles</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getProcResourceCycles(unsigned MBBNum) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00133">MachineTraceMetrics.cpp:133</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a5d256b71a3153dae133d8e9d5a78cdda"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">llvm::TargetSchedModel::getWriteProcResBegin</a></div><div class="ttdeci">ProcResIter getWriteProcResBegin(const MCSchedClassDesc *SC) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00105">TargetSchedule.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="namespacellvm_html_a7dc3e2c002713fec56bdbf16aa704576"><div class="ttname"><a href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">llvm::tie</a></div><div class="ttdeci">tier&lt; T1, T2 &gt; tie(T1 &amp;f, T2 &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00216">STLExtras.h:216</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a5d24d8e4fe9b607386e33672d430746f"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a5d24d8e4fe9b607386e33672d430746f">MIHeightMap</a></div><div class="ttdeci">DenseMap&lt; const MachineInstr *, unsigned &gt; MIHeightMap</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00930">MachineTraceMetrics.cpp:930</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html_ae48d29e7657ecdb05f44195870226d9a"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html#ae48d29e7657ecdb05f44195870226d9a">llvm::MachineTraceMetrics::Ensemble::getTrace</a></div><div class="ttdeci">Trace getTrace(const MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01144">MachineTraceMetrics.cpp:1144</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8h_html"><div class="ttname"><a href="MachineTraceMetrics_8h.html">MachineTraceMetrics.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_af62e23d927072da14f64cf6f072a728b"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#af62e23d927072da14f64cf6f072a728b">llvm::MachineTraceMetrics::Trace::getInstrSlack</a></div><div class="ttdeci">unsigned getInstrSlack(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01153">MachineTraceMetrics.cpp:1153</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:57 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
